# GPT-Academic Report
## 翻译 E:\SC2Code\blizzard-tutorials-chinese\README.md

# StarCraft II 编辑器指南

这个库存储了由暴雪娱乐为星际争霸2编辑器提供的教程。

现在由 SC2Mapster 社区进行维护和改进。

## 部署

https://s2editor-guides.readthedocs.io/

![](https://readthedocs.org/projects/s2editor-guides/badge/?version=latest)

## 站点生成器

我们正在使用 [mkdocs.org](https://www.mkdocs.org)。

### 命令

* `mkdocs new [dir-name]` - 创建一个新项目。
* `mkdocs serve` - 启动实时重新加载的文档服务器。
* `mkdocs build` - 构建文档站点。
* `mkdocs help` - 打印这个帮助信息。

### 项目布局

    mkdocs.yml    # 配置文件。
    docs/
        index.md  # 文档首页。
        ...       # 其他 Markdown 页面、图片和其他文件。

## 翻译 E:\SC2Code\blizzard-tutorials-chinese\docs\index.md

# 星际争霸II编辑器指南
欢迎来到星际争霸II编辑器指南！在这里，您将找到官方和粉丝贡献的指南

## 暴雪指南

这些是由暴雪公司自己编写或赞助的指南。在这里，您可以找到2套指南：

* [入门教程](./Classic_Tutorials/01_Terrain_Module/1/): 这些是托管在官方星际争霸2网站上的教程。它们可以帮助您快速熟悉编辑器，但也包括了一些非常深入的关于特定功能的指南。


* [完整编辑器指南](./New_Tutorials/01_Introduction/001_Editor_Introduction/): 这些是由暴雪赞助的教程，由社区内的专家撰写。它们非常全面，跟随它们，您将对编辑器有很好的理解。

## 翻译 E:\SC2Code\blizzard-tutorials-chinese\docs\Classic_Tutorials\01_Terrain_Module\1.md.part-0.md

---
title: 第一部分
author: jrepp
category: 01_介绍

---
# 地形模块 - 第一部分

![img](https://web.archive.org/web/20141028214547im_/http://us.battle.net/sc2/static/images/game/maps-and-mods/tutorials/terrain/intro-thumb.jpg)

在这个三部分的教程中，您将熟悉星际争霸 II 编辑器提供的许多功能之一，同时制作一个类似《自由之翼》战役中第一关的小冒险地图。

我们将有一个起始区域，英雄们将在这里开始任务，包括英雄们自己、他们居住和工作的军事基地，以及周围的一些植被。

## 介绍

地形模块是默认启动编辑器时打开的第一个窗口。这是您创建环境的布局和外观的地方，您可以在其中放置游戏开始时创建的道具、单位和结构。

用于更改地形和放置单位的控件分为不同的控制“层”。有一个地形层，您可以在其中修改地图的布局和环境，一个单位层，您可以在其中放置单位，并且还有一些其他层，其中大部分将在这个教程中使用。

## 在开始之前

在 Agria 地图集中创建一个新地图（文件 > 新建...）。对于起始纹理，选择 Agria Dirt。当您创建新地图时，您可以选择地图具有哪些“依赖项”。您可以将依赖项视为一组单位、地图集和选项。在星际争霸 II 中有多个可用的依赖项。Melee（自由）依赖性包含标准多人游戏和排位赛中使用的所有单位和设置。战役（自由）包含战役中的所有内容，例如凯莉根、泽拉图和雷诺单位。我们将选择战役（自由）依赖性，以便可以访问战役中的所有单位和结构，以及一些在标准多人游戏中不可用的额外环境道具和装饰物。最后，将地图的宽度和高度设定为 112 x 112。

![img](001-newdocumentdialog.jpg)

## 创建地形

我们将首先处理的是地形层，我们将在此修改地图地面纹理和地形。要进入地形层，请按 [T] 键或单击具有深蓝色双峰山图片的按钮：

![img](002-terrainlayer-button.jpg)

### 悬崖

我们的英雄们工作的军事基地将位于一个大峡谷的边缘，因此我们需要使用“悬崖”工具为我们的峡谷创建一些悬崖：

在窗口左侧，紧挨迷你地图下方的是一排按钮，对应不同的地形“笔刷”。选择“悬崖”笔刷按钮。这是一个带有悬崖和绿色向上箭头图片的按钮。

在编辑器中，“笔刷”一词是用作比喻。在编辑器中，您选择的任何工具，包括添加、修改或移除地形、纹理、单位等的工具都被称为笔刷。

接下来，我们需要为我们的悬崖笔刷选择一个“操作”来执行。选择“下降悬崖”操作以通过将地形向下推动来创建悬崖。下降悬崖操作按钮上有一个悬崖和红色向下箭头。然后，您可以选择笔刷的大小和形状，并选择要绘制的悬崖类型。我们暂时选择了有机悬崖。

通过点击或按住左鼠标按钮在地形上使用笔刷，并通过按住右鼠标按钮并拖动鼠标来移动地图视图。如图片所示，我们将地图视图移动到了地图的左下部分，并在地图的左下方刻出一些悬崖。

![img](003-cliffs-canyon.jpg)

接下来，使用“升高悬崖”操作创建一个伸向峡谷的凸起的人造悬崖。这将是直升机停机坪。

![img](004-cliffs-manmade.jpg)

停机坪需要一个坡道，否则将无法进入。选择“添加坡道”笔刷。坡道只能绘制在悬崖边缘，而不能绘制在平地上。

![img](005-cliffs-ramp.jpg)

在我们进一步之前，让我们保存地图。意外事件可能导致编辑器因自动更新强制计算机重新启动、电力中断和宠物意外拔掉计算机电源而关闭，从而导致您丢失进度。与其指责电力公司导致 5 小时的工作丢失，不如确保经常保存！

### 纹理

现在我们有了一些悬崖，我们可以想想我们想在地图上放置哪些纹理。我们不希望整个地图被覆盖在泥土上，因此我们还要种植一些草，铺设一些混凝土。

选择纹理笔刷，它是可用笔刷中最左边的按钮。

有许多不同的操作，包括添加纹理、移除纹理、混合、抹平、填充等。我们将对大多数纹理需求使用添加纹理操作，但可以随意尝试其他操作。还有许多选项可控制绘制纹理的速度，以及笔刷的形状、大小和样式：

增量 - 此选项控制按住左鼠标按钮时绘制纹理的速度。

大小 - 增加此选项的滑块以增加纹理笔刷的半径。

速度 - 与增量选项类似操作。

我们将选择混凝土纹理，并在直升机停机坪和坡道上涂画。

![img](006-textures-concreteonhelipad.jpg)

继续在基地周围绘制纹理。我们的英雄们现在在基地周围有了一些混凝土，供建筑和机库建造，以及一些草地和土路。

![img](007-textures-completedtextures.jpg)

### 高度

峡谷通常是由水侵蚀形成的，因此我们将在峡谷底部放一条河。在放置水之前，我们将降低一些地形以形成水流的沟渠。我们可以使用高度笔刷来升高或降低地形而不形成悬崖。借助这个笔刷，我们可以制作山丘、山谷、火山口，并按需制作泥土或叶子堆。

选择高度笔刷按钮，它看起来像一个蓝色山丘，位于悬崖笔刷左边。

选择下降操作。

使用笔刷在峡谷中制造一条沟渠。

![img](008-height-jaggedditch.jpg)

有时使用高度笔刷可能会留下不合意的锋利边缘。我们可以使用平滑操作来融合地形高度，以消除锯齿边缘。

![img](009-height-smoothditch.jpg)

### 水

我们现在可以让水流过我们的沟渠。

选择水笔刷按钮，它看起来像一个大水滴。

## 翻译 E:\SC2Code\blizzard-tutorials-chinese\docs\Classic_Tutorials\01_Terrain_Module\1.md.part-1.md

水刷只有两种操作：加水和减水。选择加水操作（即使已经突出显示）以查看可用的不同类型的水。

在我们在峡谷中创建沟渠的地方放一些水。

![图片](010-water-toohigh.jpg)

水可能漂浮在峡谷的上方。为了解决这个问题，使用“编辑水”按钮打开一个充满水设置的新窗口。我们目前关注的设置是高度设置。使用滑块调整水的高度，直到它舒适地坐落在沟渠中，不再漂浮在上方。有许多不同的选项可供设置。当水看起来完美时，按下“确定”关闭窗口。

![图片](011-water-fitsinditch.jpg)

继续放置水，直到沟渠被填满水。

![图片](012-water-finished.jpg)

### 道路瓷砖

我们的军事基地将通过一条四车道高速公路可达。为了建造这条高速公路，我们将使用道路刷。

选择道路刷，在“高度刷”按钮的左侧。

目前每个图块集只有一个操作和一个类型。

左键单击鼠标将放置一个道路点。道路点将自动连接到附近的其他道路点。要放置一个不连接到附近道路点的道路点，请按住控制按钮再放置它。

![图片](013-roads-twopoints.jpg)

我们放置了足够的道路点，使道路蜿蜒并顺着峡谷走，然后在到达我们的军事基地时向左转并移动到地图边缘。

![图片](014-roads-placed.jpg)

如果需要调整道路，可以进入“选择模式”并调整道路点。要进入选择模式，请按下[空格]键或[Escape]键。你应该看到道路点所在位置的绿色金字塔。要移动点，点击并拖动它们。要旋转点，选择您想要定向的点，按住[Control]和鼠标左键，拖动鼠标。

![图片](015-roads-selectionmode.jpg)

道路瓷砖不会显示在小地图上。为了向玩家显示道路的位置，我们在道路下面绘制了具体的纹理。

![图片](016-roads-concreteforminimap.jpg)

### 植被

我们几乎可以开始在地图上放置一些道具和单位了，但首先，我们要添加一些小植被。在编辑器中，像树木和灌木这样的较大植被是由设计者有意识地放置的，但像草和花这样的小植物是使用植被生成器放置的。这样做的好处是你不必自己放置成千上万的草地道具，但另一个重要的优势是以这种方式生成植被对游戏的处理要容易得多，因此游戏运行更流畅。

在我们开始之前，关于植被的一点说明：在低图形设置下植被是看不见的。具体来说，“地形质量”设置决定游戏中是否显示植被。

选择植被刷，看起来像一棵树，位于悬崖刷的右侧。

选择你希望植被的密度，然后按生成植被按钮。我们选择了密度为0.50。

![图片](017-foliage-onroad.jpg)

你可能注意到植被也被放置在我们的道路上。为了防止这种情况发生，我们需要使用“不允许植被”操作，并画出我们希望不出现植被的地方。

![图片](018-foliage-disallow.jpg)

切换回“允许植被”操作，再次生成植被。现在植被已经在整个地图上生成，但不会出现在我们不希望出现的道路上。

![图片](019-foliage-generated.jpg)

## 翻译 E:\SC2Code\blizzard-tutorials-chinese\docs\Classic_Tutorials\01_Terrain_Module\2.md

---
title: 第二部分
author: jrepp
category: 01_介绍

---

# 地形模块 - 第二部分

## 放置一些装饰物

是时候添加一些道具了！现在，我们的英雄军事基地看起来还不怎么样。我们将开始通过添加一些飞机库、箱子和围栏来装扮这个地方。我们还会在直升机停机坪上添加一些装饰来让它看起来像一个真正的停机坪。

在《星际争霸 II 编辑器》中，装饰物被称为“doodads”。到目前为止，我们一直在地形模块的地形层中工作。然而，要放置doodads，我们需要切换到doodads层。在顶部按钮栏中找到一个看起来像树的按钮，或按下[D]。

![img](020-doodads-button.jpg)

## doodad 控制和筛选/搜索特定的doodads

有成百上千种可用的doodads，找到你想要的可能会有些困难。幸运的是，你可以设置筛选器，并且有一个搜索栏，如果你想要非常具体的话。

我们将在地图上添加的第一个doodad是一个车库。让我们使用一些筛选器来帮助我们找到它。

定位doodad筛选器。所有doodad搜索筛选器都位于屏幕左侧，就在doodads列表的上方。

![img](041-doodads-filters.jpg)

从第一个下拉菜单中选择Wasteland。

从最后一个下拉菜单中选择Structures。

仅通过选择这两个筛选器，我们就将数百个列表减少到了大约50个。如果你想要更具体地搜索，可以使用搜索栏输入doodad的名称，或名称的一部分。

![img](042-doodads-search.jpg)

请注意，如果你设置了筛选器以查找特定类型的doodads，你可能找不到你要找的doodad。例如，如果你将其中一个筛选器设置为专门查找Environment doodads，那么车库doodad就不是Environment doodad，所以它不会出现在列表中。

在doodads列表中找到并选择车库doodad。

在地图底部的某个地方放置车库。

![img](021-doodads-garage01.jpg)

车库面朝南，这不理想，因为它是朝向悬崖边缘，而不是基地的中心。要旋转车库，按下[空格]键或[Escape]键进入选择模式，就像我们放置道路点时所做的一样。然后选中我们放置在地图上的车库。按住[Control]键，单击并按住鼠标左键在doodad之外的地面上，然后拖动鼠标，直到车库面向北。

![img](022-doodads-garage02.jpg)

接下来，我们将在直升机停机坪上放置一些Decal doodads。

找到并选择Decal doodad。

在地图上车库附近放置几个Decal doodads。

![img](023-doodads-decals01.jpg)

同一种doodad可能会有多个变体，你可能会注意到我们刚刚放置的decals中有这种情况。如果你想要循环查看doodad的不同变体，进入选择模式并选择你想要更改的doodad。然后按[<]或[>]键循环浏览不同变体。

![img](024-doodads-decals02.jpg)

继续放置doodads，直到完成直升机停机坪的装饰。

![img](025-doodads-decals03.jpg)

最后，我们将在水边的峡谷底部放置一些岩石doodads。

找到并选择Rock doodad。

尝试将岩石放置在峡谷底部时，你将注意到它们的放置图像为红色，无法放置。与单位类似，doodads也有特定的放置限制。将doodads放置在地形的最低级别是其中之一。幸运的是，当需要时，我们可以绕过这样的限制。

按住[Shift]键放置doodads将使它们“忽略放置”，这允许它们在任何地方放置，而不受放置限制的影响。通过这样做，你可以在峡谷底部放置岩石。

![img](026-doodads-rocks01.jpg)

继续在基地周围和峡谷底部放置doodads，直到你满意为止。这就是我们设计的效果：

![img](028-doodads-placedbottom.jpg)

![img](028-doodads-placedcanyon.jpg)

![img](028-doodads-placedtop.jpg)

![img](029-doodads-placeddoodads.jpg)

## doodad 属性

有许多选项可以修改地图上的doodads。双击放置的doodad将打开对象属性菜单，其中显示了各种可用选项，包括位置、高度、旋转和比例。

## 翻译 E:\SC2Code\blizzard-tutorials-chinese\docs\Classic_Tutorials\01_Terrain_Module\3.md

---
title: 第三部分
author: jrepp
category: 01_介绍

---
# 地形模块 - 第三部分

## 放置一些单位

现在我们已经建立好了基地，应该放置一些海军陆战队员来保护并使场地热闹起来。

导航至单位图层以添加单位。单位图层按钮上有一张兽人的图片，位于工具栏上地形和装饰图层按钮之间。您也可以通过按下[U]键来进入。

## 单位类型、过滤/搜索

与装饰物类似，当查找要放置的单位时，有几个过滤选项和搜索功能。总体而言，放置单位遵循与放置装饰物相同的规则。您可以放置、旋转、交换变体以及忽略位置。

放置单位和放置装饰物之间的一个显着差异是玩家编号。放置单位时，您必须选择拥有所放置单位的玩家是谁。您可以通过按下键盘上的任意数字键以及更改玩家过滤选项来更改玩家编号。

您可以在下面的图片中看到，我们在玩家0的位置放置了一些守卫路障的海军陆战队员、一些导弹炮塔、一个兵营和一个生物舱。我们还为玩家1放置了一些海军陆战队员和一位吉姆·雷诺（突击队员）。

![img](030-units-placedunitsbottom.jpg)

![img](031-units-placedunitstop.jpg)

![img](032-units-placedunits.jpg)

## 单位属性

双击一个单位将打开其对象属性窗口，就像对装饰物一样。虽然可用选项有所不同，但理念是相同的。在此窗口中，您可以修改玩家编号、旋转、位置等。

一些选项稍微复杂，将在后续的词汇表文章或关于单位的更高级教程中进行介绍。

## 翻译 E:\SC2Code\blizzard-tutorials-chinese\docs\Classic_Tutorials\01_Terrain_Module\4.md

---
title: 第四部分
author: jrepp
category: 01_介绍

---
# 地形模块 - 第四部分

## 玩家属性

我们可以在“玩家属性”窗口中修改每个玩家的颜色、贴花、种族等。我们将使玩家1的单位变成蓝色，并且始终将玩家1设置为人类。

通过打开编辑器顶部的“地图”菜单选项并单击“玩家属性…”来打开“玩家属性”窗口。

在左侧列表中选择玩家1，然后将颜色选项从（任意）更改为蓝色。然后更改种族为人类。

![img](035-playerproperties.jpg)

在此窗口中还有一些其他选项可供设置。我们已将玩家1的种族更改为人类，但其他所有选项均保持不变。

## 翻译 E:\SC2Code\blizzard-tutorials-chinese\docs\Classic_Tutorials\01_Terrain_Module\5.md

---
title: 第5部分
author: jrepp
category: 01_介绍

---
# 地形模块 - 第5部分

## 地图属性

在我们开始游戏并在地图中奔跑之前要修改的最后几个设置是地图属性窗口。要打开地图属性窗口，请转到编辑器顶部的"地图"菜单选项，然后选择"地图信息..."

地图属性窗口分为5个选项卡。每个选项卡提供不同的选项。

## 信息

此选项卡可让您设置有关您的地图的选项，在玩家在战网上查看您的地图时会显示这些选项。您可以更改地图的名称、作者、描述和预览图片。

![img](036-mapproperties-info.jpg)



## 选项

选项选项卡包含几个选项，目前最重要的是未探索区域或战争迷雾设置。这控制了您尚未看到的地图区域是变暗还是被遮挡。由于这将是一张冒险地图，我们将把设置从灰色遮罩（变暗）更改为黑色遮罩（被遮挡）。

![img](037-mapproperties-options.jpg)



## 边界

边界选项卡控制地图的大小。如果您发现您的地图有很多未使用的空间，或者需要更多空间，则可以在此处进行修改。

相机边界和地图边界控制您可以滚动相机或移动单位的距离，以及地图地形本身的延伸范围。目前，我们的地图大小合适，所以我们将保持不变。

![img](038-mapproperties-bounds.jpg)



## 纹理

纹理选项卡让您更改所使用的图块组，并允许您更换纹理。我们将保留我们的地图使用Agria图块组。

![img](039-mapproperties-textures.jpg)



## 加载画面

加载画面选项卡包含用于编辑地图加载时显示的图像的控件。melee设置将自动生成一个带有地图名称和与地图上使用的星球图块组对应的图像的加载画面。对于我们的目的，这是可以的，所以我们将保持不变。

![img](040-mapproperties-loadingscreen.jpg)

现在我们已经准备好测试我们的地图了！在测试地图之前，请确保保存地图。按下编辑器工具栏最右侧的"测试文档"按钮启动StarCraft II，并自动加载您的地图。该按钮下方有带有字母"SC"和一个箭头的标识。

## 翻译 E:\SC2Code\blizzard-tutorials-chinese\docs\Classic_Tutorials\02_Trigger_Module\1.md.part-0.md

---
title: 第一部分
author: blizzard
category: 触发模块

---
# 触发模块

在这个三部分的教程中，您将了解到《星际争霸 II 编辑器》提供的许多功能之一，同时制作一个类似《自由之翼》战役中第一任务的小冒险地图。

如果您还没有完成此教程的第一部分，请在[[这里](../terrain/1)]找到。

如果您想直接开始本教程而不必经过地形教程，您可以使用我们在该教程中制作的地图，位于[[这里](#finishedMap)]。



通过创建触发器来学习如何使用触发模块处理胜利、失败和游戏内脚本事件。

[下载触发模块 - 成品地图文件](https://web.archive.org/web/20130126143031/http://media.blizzard.com/sc2/game/maps-and-mods/tutorials/trigger/Trigger-Module-finished-product.SC2Map)

[下载触发模块 - 完善地形地图文件](https://web.archive.org/web/20130126143031/http://media.blizzard.com/sc2/game/maps-and-mods/tutorials/trigger/Trigger-Module-fleshed-out-terrain.SC2Map)

[下载触发模块 - 起始点地图文件](https://web.archive.org/web/20130126143031/http://media.blizzard.com/sc2/game/maps-and-mods/tutorials/trigger/Trigger-Module-starting-point.SC2Map)



## 最终结果

这是我们在本教程中要实现的最终结果：

![img](001-endresult-ultralisk.jpg)

![img](002-endresult-cinematic.jpg)

我们将能够玩过一段探险风格的短任务，在这个任务中，我们的英雄将调查谁在摧毁和吃掉阿格里亚当地殖民地的作物的谜团。



## 介绍

触发模块是游戏玩法和叙事的发生地。在这里，您可以创建游戏内的影片，游戏中央出现单位，创建和追踪目标，等等。

触发器基本上可以看作是一组指令。当您希望游戏中发生某事时，您使用触发器告诉游戏何时发生以及如何发生。



1. 触发器由几个部分组成：

2. **事件** - 这是触发器运行的原因。如果我们希望设置一个触发器在英雄死亡时结束游戏，那么该触发器的事件将是“**当单位死亡时**”。
3. **条件** - 条件确保触发器仅在特定情况下运行。在上述示例中，当触发器因为单位死亡而运行时，我们会添加一个条件来确保**死亡的单位是英雄**。
4. **动作** - 动作是在运行触发器时执行的指令。在我们的示例中，当我们的英雄死亡时运行的动作是“**玩家1游戏结束**”。

## 开始之前

我们将继续使用本教程第一部分中的地图。在教程中，我们只完成了峡谷和军事前哨站的创建。在本教程中，我们使用了学习第一部分教程时掌握的所有概念来完成地图的其余部分。

如果您不想花时间装饰地图的其余部分，您可以使用我们制作的地图作为本教程的起点，位于[这里](https://web.archive.org/web/20130126143031/http://us.battle.net/sc2/en/game/maps-and-mods/tutorials/trigger/#finishedMap)。

我们添加了几个主要区域，我们的英雄将参观这些区域，您可以在下面的图片中看到：

![img](003-fullyartified-colony.jpg)

我们在地图的东南部添加了一个小殖民地，就在路边。这些是那些作物被摧毁的可怜人们。

![img](004-fullyartified-farms.jpg)

我们还添加了一个摧毁的农田区域，中心有一个异种虫（潜伏）。消灭这个单位是我们地图的目标。

![img](005-fullyartified-optionalarea.jpg)

我们还在殖民地的北部和作物的东部添加了一个小的可选区域。这里会有一些异虫单位。

![img](006-fullyartified-scatteredzerg.jpg)

最后，我们在地图各处散布了一些小型异虫单位，供玩家与之互动。



## I. 设置视图选项

如果还没打开，通过点击编辑器工具栏上的触发模块按钮或按下[F6]键来打开触发模块。

![img](007-opentriggermodule-triggermodulebutton.jpg)

在我们深入了解触发器之前，让我们快速看一下如何设置触发模块窗口的不同方式。尽管您也被鼓励查看并尝试使用其他选项。

### A. 显示子视图

触发窗口包含地图上所有触发器的列表，这在左侧部分。地图默认已经创建了一个对战初始化触发器。

如果您想修改触发器中的任何事件、条件或动作，您必须双击该项目以打开一个窗口，在该窗口中您可以编辑事件、条件或动作。

但是，如果我们启用子视图，当我们单击项目以选择它时，其内容将显示在一个额外的部分中，该部分将显示在触发器内容下方。要切换“使用子视图”选项，请按窗口顶部工具栏上的“使用子视图”按钮。

![img](008-viewoptions-subviews.jpg)

### B. 隐藏库存

所有星际争霸 II 的事件、条件和动作都包含在“触发库存”中。用户可以创建自己的触发库存。但是，对于这个地图，我们不需要创建任何触发库存，所以我们将其隐藏。要切换触发库存，请在位于“使用子视图”按钮旁边的工具栏上按“显示库存”按钮。

![img](009-viewoptions-showlibraries.jpg)

### C. 更多选项

在窗口顶部的“视图”菜单中可以找到更多选项。目前我们保持不动，但是如果您愿意的话，随时可以尝试其他选项。



## II. 我的第一个触发器 - 胜利和失败触发器

让我们创建一些触发器！我们将首先创建的两个是简单的胜利和失败触发器，当玩家击败异种虫和奈德斯虫时，以及当玩家单位死亡时触发。

## 翻译 E:\SC2Code\blizzard-tutorials-chinese\docs\Classic_Tutorials\02_Trigger_Module\1.md.part-1.md

在我们进行操作之前，我们应该删除近战初始化触顺。近战初始化触发器包含了准备《星际争霸2》近战地图的动作；我们不需要它来制作我们的地图，因为我们要制作的是一个自定义地图，不需要像采矿或建造建筑这样的功能。您可以通过选择触发器并按[Delete]键，或右键单击它并选择“Clear”选项来删除触发器。

### A. 失败触发器

在我们的英雄死亡时应该运行失败触发器，这将导致玩家 1 失败。

#### 创建新触发器

1. 在触发器列表上右键单击并选择“新建>新触发器”，或按[Ctrl+T]创建一个新触发器。

2. 我们将为新触发器命名为“失败”。

3. 选择触发器以查看其内容。

![img](010-fefeat-newtrigger.jpg)

#### 创建新事件

1. 要向触发器添加新事件，右键单击事件标签并选择“新建>新事件”，或单击事件标签并按[Ctrl+E]。

![img](011-defeat-neweventwindow.jpg)

2. 在弹出的窗口中，选择“单位死亡”事件，然后按“确定”。

#### 创建新条件

1. 右键单击触发器内容列表并选择“新建>新条件”，或按[Ctrl+K]。

2. 弹出的窗口中包含条件类型列表。从列表中选择“比较条件”类型，并按“确定”。我们选择比较条件是因为我们想比较死亡的单位与我们的英雄单位。如果它们相同，则条件为真，触发器的动作将被执行。

![img](012-defeat-newconditionwindow.jpg)

3. 当您选择了刚刚创建的条件后，您可以在子视图部分看到其内容。子视图中应该包含“值 1”、“运算符”和“值 2”字段。

![img](013-defeat-conditioncontents.jpg)

4. 双击“值 1”字段以弹出可供选择的条件列表，然后选择“触发单位”。触发单位指的是引发触发器运行的特定单位。在这种情况下，引发触发器运行的单位就是死亡的单位。

![img](014-defeat-conditionvalue1.jpg)

5. 运算符字段是我们选择条件两个值之间的关系方式。在这种情况下，只有两个选项：相等（==）或不相等（！=），因为我们比较的两个单位要么相同，要么不相同。没有“有点相同”的值。我们将保留运算符为“==”，因为我们希望在死亡的单位是英雄单位时运行触发器。

![img](015-defeat-conditionvalue1selected.jpg)

6. 双击“值 2”以再次打开条件列表。这次我们不会从列表中选择条件。相反，列表上方有一排单选按钮，用于控制您可以选择的条件值的类型。现在，我们正在查看条件功能列表。选择“值”单选按钮以显示地图上存在的单位列表。当我们制作地图地形并放置玩家 1 的单位时，我们放置了 2 名海军陆战队员和一个吉姆·雷诺（突击队）单位。在列表中找到吉姆·雷诺（突击队）并选择他，然后按“确定”。

![img](016-defeat-conditionvalue2.jpg)

#### 创建新动作

1. 右键单击触发器内容列表并选择“新建>新动作”，或按[Ctrl+R]。

2. 在弹出的动作列表中找到并选择“为玩家结束游戏”。在“查找”字段中键入您要查找的触发器的全部或部分内容也将有助于缩小搜索范围。

![img](017-defeat-newactionwindow.jpg)

3. 选择动作后，将显示其内容，就像我们制作条件时一样。

![img](018a-defeat-subviewhighlighted.jpg)

4. 双击“类型”字段，将值从“胜利”更改为“失败”。

#### 测试一下！

![img](018b-defeat-completedtrigger.jpg)

我们已经完成了我们的第一个触发器！让我们进入游戏，测试我们的新触发器。

1. 按编辑器工具栏最右侧的“测试文档”按钮，或按[Ctrl+F9]。

![img](019-testtriggers-testdocumentbutton.jpg)

2. 进入地图后，选择您的单位并命令它们攻击吉姆·雷诺。当他死亡时，您应该看到游戏结束菜单弹出，如下所示：

![img](020-testtriggers-defeatscreen.jpg)

### B. 胜利触发器

接下来我们将制作一个简单的胜利触发器。这个触发器将在地图上放置的 Nydus Worm 和 Ultralisk 单位全部死亡时以玩家 1 的胜利结束游戏。

如果您尚未在地图上放置 Nydus Worm 和 Ultralisk（潜伏）单位，您应该立即进行这样的操作。有关如何在地图上放置单位的信息，请参阅本教程系列的第 1 部分，位于[地形模块](https://web.archive.org/web/20130126143031/http://us.battle.net/sc2/en/game/maps-and-mods/tutorials/terrain/3)的单位部分。我们已经将这两个单位放置在地图的农田区域：

![img](-003-victorytrigger-placedunits.jpg)

在制作触发器之前，我们需要为我们在任务中要击败的这两个单位创建一个变量。

#### 变量！

星际争霸 II 编辑器中的变量工作方式与脚本和编程语言中的变量相同。

对于那些不熟悉此概念的人，变量是可以设置为某个值的标识符。例如，如果我们的变量是 a，那么我们可以说 a = 5。如果我们在等式中使用 a，则相当于在等式中使用数字 5，因此 a + 2 = 7。您可以随时更改变量设置的值。因此，我们可以在完成 a + 2 等式后将 a = 5 替换为 a = 6，以便在下次使用 a 时，我们使用数字 6 而不是 5。在星际争霸 II 编辑器中，我们可以有许多不同类型的变量，如单位、整数和文本。

#### 在触发器模块中制作变量

1. 在触发器列表中右键单击并选择“新建>新变量”，或按[Ctrl+B]。给您的新变量命名为 NydusWorm。

## 翻译 E:\SC2Code\blizzard-tutorials-chinese\docs\Classic_Tutorials\02_Trigger_Module\1.md.part-2.md

## 2. 当您选择变量时，可以在右侧看到其内容。每个变量都有一个类型。类型对应于变量可以存储的值类型。它们可以存储整数、实数、文本、单位等等。我们将把这个变量的类型设置为“Unit”，因为我们希望这个变量存储我们放置在地图上的具体 Nydus Worm（坑筑虫）单位。

![img](021-victory-newvariable.jpg)

## 3. 双击右侧部分的“初始值”字段。

## 4. 选择“值”单选按钮，然后找到并选择 Nydus Worm （Canal）单位。

![img](022-victory-selectnyduswormunit.jpg)

## 5. 重复这些步骤，为 Ultralisk（猛犸虫）创建一个变量。

现在我们准备创建胜利触发器。开始创建触发器吧。

![img](023-victory-newtrigger.jpg)

#### 事件

上一个触发器是每当一个单位死亡时运行的事件。这一次，我们将使用一个名为周期性事件的事件，使触发器以重复间隔运行。

1. 在触发器区域右键单击，选择新建 > 新建事件，或按 [Ctrl+E]。

2. 然后在弹出窗口中，从功能部分选择周期性事件。

3. 将持续时间的值从 5.0 更改为 1.0。

4. 将时间类型值保持为游戏时间。

#### 条件

对于这个触发器，我们需要两个条件：我们要检查的每个单位一个条件。

1. 右键单击触发器区域，选择新建 > 新建条件，或按 [Ctrl+K]。

2. 选择“比较”作为条件类型，并按确定。

3. 选择新条件以查看其内容在子视图部分。

4. 将值 1 更改为“单位存活”。

5. 将单位值更改为我们创建的 NydusWorm 变量。

6. 双击值 2 打开值 2 选择窗口，确保“真”复选框未选中，然后按“确定”。我们希望将值 2 设置为假，因为我们希望触发器在单位不存活时运行。

![img](024-victory-truecheckbox.jpg)

7. 对于 Ultralisk 重复步骤 1 到 6。通过复制第一个触发器并更改“Unit”变量，您可以节省一点时间，因为第二个触发器的其余部分将对两者都相同。

![img](025-victory-twoconditions.jpg)

当一个触发器中有两个条件时，只有当两个条件均为真时触发器的行动才会运行。如果想要在两个条件中的任何一个为真时运行触发器，可以添加一个“或”条件，然后在“或”条件内创建条件。这样，如果“或”条件内的任何条件为真，则整个条件为真，触发器将运行。

在我们的例子中，为了完成任务，我们希望 Nydus Worm 和 Ultralisk 都死亡，因此我们不会使用“或”条件。

#### 动作

创建另一个“结束玩家游戏”动作，就像我们上一个触发器所做的那样，但这一次确保它是以胜利结束游戏，而不是失败。

![img](026-victory-completedtrigger.jpg)

### C. 文件夹

保持我们的触发器有序很重要，所以在移动到下一部分之前，我们将在触发器列表中创建一个文件夹，并将我们的胜利、失败和变量拖放到其中。

1. 右键单击鼠标在触发器列表中选择新建 > 新建文件夹，或左键单击鼠标在触发器列表中为该部分获得焦点，按[Ctrl+G]。

2. 将您的触发器和变量像在桌面上的任何其他文件或文件夹中一样拖放到文件夹中。

通过本教程，您会看到我们创建了多个文件夹，按照它们的功能对触发器进行分组：胜利和失败触发器、游戏过程触发器、目标触发器等。

![img](027-newfolder-stuffinfolder.jpg)

导航至：

- [下一部分](../2)

## 翻译 E:\SC2Code\blizzard-tutorials-chinese\docs\Classic_Tutorials\02_Trigger_Module\2.md.part-0.md

---
title: 第二部分
author: jrepp
category: 01_介绍

---
# 触发模块 - 第2部分

## 三. 使用区域的触发器

区域是地图上可以通过触发器引用的区域。您可以在单位进入或离开区域时运行触发器，向当前位于区域内的任何单位发布命令，在区域内的随机点创建单位等等。

在我们的地图中，当我们的单位进入殖民地所在的区域时，我们将创建一个触发器为玩家1创建额外单位，另一个触发器当我们的单位进入单位周围的区域时让超级兵取消潜伏状态。

### A. 放置区域

在我们的触发器中使用区域之前，我们需要将其放置在地图上。

1. 打开地形模块，并通过按[R]键选择区域图层。

2. 从小地图下面的按钮行中选择两种形状之一--正方形或圆形。

3. 将视图移动到农场区域，左键单击并拖动鼠标以在农场区域中心放置一个区域。

4. 如果要更改区域的名称，请从左侧的区域列表中选择该区域，然后按Enter键打开区域属性窗口。

![图片](028-placingregions-placed2.jpg)

5. 您可以通过双击小地图下方区域列表中的区域并在弹出窗口中输入所需名称来重命名一个区域。我们将保留区域的名称为"Region 001"，这是默认名称。

### B. 进入超级兵区域导致单位取消潜伏状态

除非超级兵取消潜伏状态，否则我们将无法消灭超级兵并赢得任务。使用我们的新区域，我们可以让他在我们的英雄靠近时取消潜伏状态。

让我们切换回触发器编辑窗口，通过按[Ctrl+G]热键创建一个名为“游戏事件”的新文件夹。在该文件夹中，使用[Ctrl+T]热键创建一个名为“取消潜伏状态的超级兵”的新触发器。然后，选择该触发器并添加以下事件、条件和动作：

#### 事件：

我们需要一个事件，在我们的单位进入我们刚刚创建的区域时触发。

1. 在触发器区域右键单击，选择新事件。

2. 然后在弹出窗口中，从功能部分选择“单位进入/离开区域”。

3. 将“区域”值更改为我们的新区域（截图中的Region 001）。选择区域时，“来源”应默认为“函数”，我们需要更改为“值”才能选择区域。我们还可以使用“选择”按钮在地形编辑器中查找并选择区域。

#### 条件：

对于这个触发器，我们需要两个条件：一个用于检查我们要检查的每个单位。

1. 在触发器区域右键单击，选择新条件，选择比较并按OK。

2. 将值1设置为“单位的所有者”。

3. 单位子值应为“触发单位”。

4. 值2应为1（指代玩家1）。

#### 动作：

对于这个触发器，我们将创建两个动作。首先，我们将命令超级兵取消潜伏状态。其次，我们将添加一个动作来揭示整个农场区域。

1. 在触发器区域右键单击，选择新动作。

2. 在弹出窗口中，选择“打开/关闭触发器”动作并按“确定”。

3. 确保“触发器”值设置为“当前触发器”，“状态”值设置为“关闭”。

这样可以使取消潜伏状态触发器只运行一次。如果我们不关闭这个触发器，那么触发器将会一遍又一遍地运行。

4. 创建一个“下达命令”动作。

5. 为该单位选择超级兵变量。

6. 选择“无目标命令”的命令。

7. 对于能力命令，选择“超级兵取消潜伏状态”。

8. 将队列字段设置为“替换现有命令”。

9. 创建一个“揭示区域”动作。

10. 将“区域”值设置为我们在事件中使用的区域。

11. 将持续时间设置为0.0。这样可以确保该区域永远保持揭示状态；没有掩盖区域的迷雾会在设置为揭示0.0秒的区域上出现。

![图片](029b-unburrowultralisk-completedtrigger.jpg)

12. 将玩家和检查悬崖级别保留在其默认值。

#### 保存！测试！

现在是一个好时机再次进入地图并测试我们的工作；同时现在也是保存工作的好时机[Ctrl+S]，以免丢失任何工作。

![图片](019-testtriggers-testdocumentbutton.jpg)

1. 点击编辑工具栏最右侧的“测试文档”按钮，或按[Ctrl+F9]。

![图片](030-testtriggers-victoryscreen.jpg)

2. 地图加载后，您的单位将受到黄色电脑玩家的攻击。我们稍后会解决这个问题。现在，请使用雷诺和他的两名海军陆战队员击败黄色电脑玩家，然后寻找并消灭殖民地农田区域中的超级兵和莱达斯虫。超级兵应该会取消潜伏状态，您应该能够消灭这两个单位以触发胜利画面：

如果没有，请返回检查您的触发器；可能存在遗漏的步骤或错误的数值设置。请查看步骤，检查触发器，然后重试！

### C. 进入殖民地区域导致殖民者发出关于调查庄稼和生成增援的传输

当我们进入殖民地时，殖民者应该通过传输解释他们的问题。

![图片](031-placingregions-placed1.jpg)

创建一个覆盖殖民地区域的新区域。

创建一个新的触发器，在您进入区域时发送传输。

#### 事件：

1. 创建一个单位进入/离开区域事件。

2. 将“区域”值从整个地图更改为您的新区域。

#### 条件：

1. 创建一个新的比较条件。

2. 将“值1”更改为“单位的所有者”。

3. 将“单位”子值更改为“触发单位”。

4. 将“操作”保持为“==”。

5. 将“值2”更改为“1”。

#### 动作：

1. 创建一个“打开/关闭触发器”动作，并确保触发器设置为当前触发器，状态设置为关闭。

2. 创建一个发送传输动作。

![图片](032a-entercolony-sendtransmission.jpg)

## 翻译 E:\SC2Code\blizzard-tutorials-chinese\docs\Classic_Tutorials\02_Trigger_Module\2.md.part-1.md

```markdown
3.	在发送传输时，您可以修改谁发送传输，播放什么声音文件，字幕是什么，等等。这些是我们设置的选项：

4.	接下来，添加一个“创建具有默认朝向的单位”动作。

5.	将“数量”值设置为5。

6.	将“类型”值设置为“Marine”。

7.	将“玩家”值设置为1。

8.	将“标志”值保持不变。

9.	我们希望海军单位出现在殖民者建筑物之一。为此，我们需要将“点”值设置为“单位位置”。

- 双击“点”值，选择“函数”单选按钮。从函数列表中选择“单位位置”，然后按“确定”。
- 将“点”值设置为“单位位置”会在“单位位置”下创建一个新的子值。
- 双击这个新的“单位”值，选择“值”单选按钮以查看地图上可用的单位。
- 选择其中一个殖民者建筑物，然后按“确定”。



![img](032b-entercolony-createunits.jpg)

完成后，动作将如下所示：

10.	创建一个“对单位组发布订单”动作。

11.	将“组”值设置为“最后创建的单位”，在弹出窗口的“来源”下找到。

12.	将“顺序”值设置为“订单目标单位”。

13.	将“能力”值设置为“移动”。

14.	将“单位”值设置为Jim Raynor（突击队员），在“值”来源下找到，因为他是我们地图上的一个单位。

15.	将“队列”值保持为“替换现有订单”。

16.	重复步骤4-6来创建一些医疗兵。

![img](033-entercolony-completedtrigger.jpg)



## IV. 完成触发器

除非我们给予玩家一个目标，否则玩家将不知道在地图中应该做什么，因此接下来要创建的触发器列表中的下一个触发器是发现目标和完成目标。

让我们通过右键单击触发器列表窗口并选择新建文件夹或使用[Ctrl+G]热键来创建另一个名为“目标”的文件夹。

### A. 发现目标

发现目标触发器将在屏幕左上方创建目标，并包含让玩家知道目标是什么的文本。此触发器将在游戏开始时运行。

#### 新变量：

我们需要添加一些变量来跟踪我们的两个目标。

1.	NydusWormObjective
到目前为止，我们所有的变量都是整数。将此变量的类型更改为“目标”。

2.	UltraliskObjective
类型：目标

![img](034-discoverobjective-newvariables.jpg)

创建一个名为“Discover Objective”的新触发器。

#### 事件：

1. 创建地图初始化事件。

#### 条件：

对于这个触发器，我们不需要设置条件，因为它需要在每次游戏开始时运行。

#### 动作：

1. 创建一个“等待”动作。这将使触发器暂停指定秒数。我们在这个触发器中使用等待，以便玩家有时间在我们向他们提供信息之前在地图上取得方向。他们将有时间看到环境并找到地图上的单位，然后他们将看到目标出现。我们将“时间”值设置为2秒。

2. 接下来，制作一个“创建目标”动作。保持“状态”和“类型”值设置为“激活”和“主要”，但将文本和描述更改为与杀死Nydus Worm相关的内容。

3. 添加一个“设置变量”动作。选择我们之前建立的“NydusWormObjective”变量，并选择第二个值为“上一个创建的目标”，以便我们可以通过调用该变量来引用我们的新目标。

4. 为Ultralisk目标重复步骤2和3。

完成后，您的触发器应如下所示：

![img](035-discoverobjective-completedtrigger.jpg)

#### 保存！测试！

现在当您开始游戏时，您会在屏幕上看到一些漂亮的目标！按[Ctrl+F9]来测试地图，看我们新的触发器是否起作用。

![img](036-discoverobjective-ingame.jpg)

### B. 完成目标

这个触发器将在目标完成时触发，并将目标状态设置为“已完成”。

#### 事件：

1. 创建一个“单位死亡”事件。

#### 条件：

我们需要在这个触发器中设置条件，但我们不会将它们放在条件部分。相反，我们将使用一个特殊动作在动作部分中创建它们。

#### 动作：

有时，在触发器中，根据游戏情况选择不同的动作。对于这个触发器，根据死亡的单位是Nydus Worm还是Ultralisk，我们将更改一个目标或另一个目标的状态为“完成”。为此，我们可以使用一个“If Then Else”动作。

“If Then Else”动作包含用于条件的部分，并分为两个动作部分。如果条件为真，则执行第一组动作。如果条件为假，则执行第二组动作。

1. 创建一个“如果-则-否则”动作。

2. 在“如果”部分中，进行比较条件以检查触发单位是否为Nydus Worm（您需要将值1从“单位的所有者”更改为“触发单位”）。

3. 在“然后”部分中，创建一个“设置目标状态”动作，将Objective设置为我们的“NydusWormObjective”变量，并将状态设置为“已完成”。

4. 将“否则”部分留空。

5. 为Ultralisk重复步骤1-4。

现在，如果任何单位死亡，我们的“完成目标”触发器将触发；然后，我们的“If Then”动作将检查该死亡是我们两个目标中的哪一个；如果是，那么该目标的状态将设置为“完成”。

![img](037-completeobjective-completedtrigger.jpg)

#### 保存！测试！

让我们再次测试我们的地图，确保在杀死适当单位时目标正确完成。

前往：

- [上一部分](../1)
- [下一部分](../3)
```

## 翻译 E:\SC2Code\blizzard-tutorials-chinese\docs\Classic_Tutorials\02_Trigger_Module\3.md.part-0.md

---
title: 第三部分
author: jrepp
category: 01_介绍

---

# 触发器模块 - 第三部分

## V. 使用点的触发器

点在触发器中被用于各种目的。它们被用作在一个点产生单位的参考，命令单位移动到特定位置，在地图上特定位置创建效果等。点在编辑器中可见，但在游戏中不可见。

![img](039-placepoints-placed.jpg)

放置和修改点的工作方式与放置和修改装饰物和单位的方式相同。

### A. 放置点

首先，我们需要放置一个点，以便在触发器中使用它。

1. 打开地形模块，并通过按下[P]键选择点层。

2. 从小地图下方的按钮行中选择看起来像一个大箭头的正常点按钮。它是该行中最左边的按钮。

3. 将视图移动到农场区域，并左键单击将一个点放置在农场区域的中心。

4. 如果您想要更改点的名称，请从左侧的点列表中选择该点，然后按Enter键以打开点属性窗口。

![img](040-placepoints-placedfarm.jpg)

### B. 标记农作物 POI

现在我们有一个点，我们可以在触发器中引用它。

1. 切换回触发器模块，并选择“发现目标触发器”。

2. 在触发器末尾添加一个新的“创建朝向角度的标记”动作。

3. 对于“位置”值，请选择我们刚刚在地形模块中创建的点。请记住点击弹出窗口中的“值”单选按钮以查看地图上的点列表。

4. 对于“模型”值，请选择“标记目标”或“标记首领”。

在选择您的标记模型时，您可以在搜索框中输入“标记”以查看可用的标记模型列表。

![img](041a-pingcrops-pingselection.jpg)

5. 将“颜色”设置为任何看起来好看的值。将其保留为黑色将导致标记被隐藏，因为标记将用于未探索的迷你地图区域，而迷你地图上的未探索区域已经是黑色的。我们选择了绿色作为标记颜色。

6. 对于“持续时间”，选择任何您喜欢的值。我们将持续时间设置为0，这将导致标记永久存在，或直到我们使用触发器动作移除标记。

![img](041b-pingcrops-pingaction.jpg)

创建目标后，标记将出现并向玩家指示他应该前往的位置。

### C. 起始位置和玩家属性

起始位置是近战地图中具有特殊属性的点。制作近战地图时，玩家的大厅和工人将在起始位置创建，玩家的摄像机也将在游戏开始时居中。

我们将在玩家1单位的正上方放置一个起始位置。在接下来的部分中，我们将在触发器中使用它来在地图开始时将摄像机居中于此点。

同样，也为玩家2、3和4放置起始位置点：

![img](042-startlocations-placed.jpg)

接下来，我们将为我们的单位和计算机的单位设置一些玩家属性。我们可以在玩家属性窗口中修改每个玩家的颜色、标记、种族和起始位置。

1. 通过打开编辑器顶部的“地图”菜单选项并单击“玩家属性…”打开玩家属性窗口。

2. 对于此地图，我们将设置以下属性：

![img](043-startlocations-playerproperties.jpg)

为AI玩家添加起始位置可以让我们为这些玩家启用剧情AI。在地图中启用剧情AI将使所有那些隐藏的异虫单位在我们的单位靠近时自动解除潜伏状态。稍后我们将更详细地讨论这个问题。一旦为计算机玩家设置了起始位置数值，您将注意到我们在地图上放置的起始位置点的颜色与相关玩家的颜色相匹配：

![img](044-startlocations-placedcolor.jpg)

## VI. 地图初始化触发器

在本节中，我们将创建一些“地图初始化”触发器，在地图加载完成后运行，并在你首次启动任务时设置一系列不同的游戏选项和设置。这些触发器将使玩家的单位与殖民者以及军事前哨盟友，设置摄像机位置在任务开始时，打开我们的任务目标。

让我们首先创建一个文件夹来保存我们将要创建的所有触发器，就像我们迄今为止一直在进行的其他触发器一样。按[Ctrl+G]键创建一个新文件夹，并命名为“地图初始化”。

### A. 联盟

您可能已经注意到，在测试地图时，由计算机玩家2和3拥有的军事前哨和殖民者单位会在看到我们的英雄单位时对其发动攻击。将玩家1、2和3设置为盟友将阻止这种情况发生。

为此，我们需要在新创建的“地图初始化”文件夹中创建一个名为“联盟”的新触发器。

#### 事件：

为此触发器创建一个“地图初始化”事件，以便在地图开始时运行。

#### 条件：

无

#### 动作：

1. 创建一个“设置联盟”动作，将“源”设置为玩家1，将“目标”设置为玩家2。有几种不同的“联盟设置”值可供选择。我们将使用“盟友”以便与玩家2友好，但不会看到他们看到的内容；只有我们的单位会显示地图。

2. 创建另一个“设置联盟”动作，将“目标”值设置为玩家3，将“联盟设置”设置为盟友。

3. 为了以防万一军事单位和殖民者互动，我们还将玩家2和玩家3设置为盟友。

![img](045-mapinit-alliances.jpg)

### B. 开启剧情AI以使异虫单位解除潜伏状态

除了深渊蠕虫和虫龙外，我们在地图上放置了许多其他异虫单位，包括潜伏的孢子虫、潜伏的蟑螂和潜伏的刺蛇单位。然而，如果我们现在让我们的单位在地图上四处走动，那么我们所要面对的唯一敌人就只有虫龙了，因为我们制作了一个触发器来使其解除潜伏状态。所有其他潜伏单位都会保持在潜伏状态。

我们可以为解除这些单位的潜伏状态创建一个触发器，但是如果我们打开剧情AI的话，那么当我们的单位靠近时，所有那些潜伏的敌人单位都会自动解除潜伏状态。

创建一个名为“启动剧情AI”的新触发器。

#### 事件：

## 翻译 E:\SC2Code\blizzard-tutorials-chinese\docs\Classic_Tutorials\02_Trigger_Module\3.md.part-1.md

创建一个“地图初始化”事件用于这个触发器，以便在地图启动时运行。

#### 条件:

无

#### 动作:

创建一个“为玩家启动战役AI”动作，并将“玩家”值设为4。

当地图启动时，我们将把摄像头视角移动到我们单位的中心，并从黑色渐变显示，以产生戏剧效果。我们的新触发器将被称为“摄像头”。

![img](046-mapinit-startcampaignai.jpg)

### C. 渐变进入地图并将摄像头对准我们的英雄

#### 事件:

1.	地图初始化

#### 条件:

无

#### 动作:

1.	添加一个“平移摄像头”动作。将“点”设置为起始位置001（记住，你可以通过点击“值”单选按钮找到先前创建的点列表），并将持续时间设置为0.0。这将使摄像头立即切换到我们的起始位置，而不是在一段时间内平移到该位置。

2.	添加一个“淡入/淡出”动作。将“淡入”值设置为“淡出”，“持续时间”设置为0.0，将“颜色”设置为黑色（0%，0%，0%）。这将使游戏从黑屏开始，让我们逐渐淡入。

3.	添加另一个“淡入/淡出”动作，使其在2秒内淡入。

![img](047-mapinit-camera.jpg)

#### 保存它！测试一下！

现在我们已经设置好了地图初始化触发器，让我们再次进入游戏，看看它是如何运作的。

![img](048-mapinit-testingitout.jpg)

游戏开始时，我们应该与玩家2和3结盟，摄像头应该对准我们的英雄。当我们在地图上行走时，流浪的异虫单位应该解散地攻击我们。

跳到：

- [上一部分](../2)
- [下一部分](../4)

## 翻译 E:\SC2Code\blizzard-tutorials-chinese\docs\Classic_Tutorials\02_Trigger_Module\4.md.part-0.md

---
title: 第四部分
author: jrepp
category: 01_介绍

---
# 触发模块 - 第四部分

## VII. 使用摄像机的触发器 - 任务胜利影片（非常简单）

当任务结束时，我们应该展示一段小小的胜利影片，作为战胜敌人的奖励，同时也为我们讲述的小故事画上一个完美的句号。为此，我们将学习并放置几个我们可以在影片中使用的“摄像机”。

在《星际争霸 II》编辑器中，摄像机位于地形编辑器中。每个摄像机都包含一个摄像机瞄准的点，与该点的距离，以及摄像机查看该点的角度。每个摄像机还包含一系列关于曝光、景深效果等方面的设置。

### A. 放置摄像机

您可以在地形模块的摄像机图层中放置和管理摄像机。

1.	切换到地形模块中的摄像机图层。要执行此操作，按下[C]键并在使用地形模块时，或选择图层>摄像机菜单选项。

2.	将编辑器摄像机移动到您想要的位置。按住[Ctrl+右键单击]并拖动鼠标以调整摄像机的俯仰和偏航角。按住[右键单击]并拖动以调整摄像机的目标点。

3.	按下“创建摄像机”按钮来创建您的第一个摄像机。我们已经将我们的摄像机放置在殖民地的中心，因为这里将是我们的影片发生地点。

![img](049-cameralayer-placed1.jpg)

4.	右键单击您在地形模块窗口左侧摄像机列表中刚刚创建的摄像机，然后选择“修改属性”。您可以在属性窗口中修改摄像机设置。在本教程中，我们将保留所有摄像机的默认设置。

![img](050-cameralayer-cameraproperties.jpg)

参考：

- **视野角度**：调整摄像机的视野范围。将此值设置高于 35 可以获得鱼眼镜头效果。对于长焦镜头效果，请将此值设置为小于 20。
- **翻转**：如果您想使摄像机倾斜或翻转，可以调整此值。
- **景深效果**：这些值定义了查看此摄像机时焦点的位置。如果您希望所有物体都保持焦距，则希望大的“Amount”、”Depth”和“End”值，以及一个较低的“Start”值。
- **远裁剪 / 近裁剪**：远裁剪和近裁剪之间的所有地形不会绘制在屏幕上。不绘制所有地形将提高性能。
- **目标**：摄像机在地面上所看的点：摄像机的中心和焦点。

5.	创建第二个用于影片的摄像机。我们已经将我们的第二个摄像机放置在殖民地，但这次是从不同的角度观察殖民地。

![img](051-cameralayer-placed2.jpg)

### B. 播放影片

现在我们已经放置了几个摄像机，我们可以着手制作胜利影片触发器。

我们将在胜利 / 失败文件夹中创建名为“胜利影片”的新触发器。

#### 事件：

无 - 我们将直接从我们的胜利触发器中运行触发器。

#### 条件：

无

#### 动作：

1.	“允许跳过触发器”动作使玩家可以通过按[Esc]键跳过触发器的剩余操作。这在过场动画中很有用，因为玩家并不总是想观看整个过场动画，尤其是如果他/她已经看过。

2.	创建一个“淡入 / 淡出”动作。将“淡入”值设置为“淡出”，持续时间为 2 秒。

3.	添加“影片模式”动作，将影片模式打开。在影片模式中，用户界面被隐藏，屏幕的顶部和底部有黑色的信封条，使动作看起来更“影片化”。

4.	在殖民地中心放置一个点。我们将移动我们的单位到这个点进行影片制作。

![img](052-victorycinematic-pointplaced.jpg)

5.	为移动我们的单位，我们将创建一个“挑选单元组中的每个单位”动作。对于“单位组”值，请选择“与条件匹配的区域内单位”（在“功能”下），然后将“玩家”字段设置为“1”（选择“值”单选按钮并输入“1”）。这一动作类似于 For 循环，选中地图上符合这些条件的每个单位，从而使我们可以对它们执行操作。

![img](053-victorycinematic-pickunitsingroup.jpg)

6.	在“挑选单元组中的每个单位”动作的“动作”部分中，创建一个“立即移动单位”动作。对于“单位”值，请选择“挑选的单位”。这将使用当前与“挑选单元组中的每个单位”动作选定的单位。将“点”值设置为我们放置在殖民地中心的点。

![img](054-victorycinematic-moveunitinstantly.jpg)

7.	重复步骤 4 和 5，但针对玩家 3 的单位，以便殖民者也被移动到殖民地中心进行影片制作。

8.	双击“单位筛选器”值，并确保选择“值”单选按钮。在列表中找到“建筑物”，将其状态从“允许”更改为“排除”。这将使得玩家 3 控制的建筑物不会移动到影片中的点。

9.	接下来，添加一个“应用摄像机对象”动作。我们将持续时间设置为 0，以便立即应用摄像机。将“摄像机对象”设置为我们创建的第一个摄像机。

![img](055-victorycinematic-apply-camera-object.jpg)

10.	添加另一个“应用摄像机对象”动作，并将“摄像机对象”设置为我们的第二个摄像机。将此动作的持续时间设置为 10 秒。这将在地图上两个我们创建的摄像机之间进行 10 秒的摄像机平移。

11.	添加另一个“淡入 / 淡出”动作，将“淡入”值设置为“淡入”，持续时间为 2 秒。

12.	创建一个“发送传输”动作，让雷诺表示完成了任务。这是我们设置的选项：

![img](056-victorycinematic-transmission1.jpg)

13.	创建另一个“发送传输”动作，以便殖民者感谢雷诺。这是我们设置的选项：

![img](057-victorycinematic-transmission2.jpg)

14.	再添加一个“淡入 / 淡出”动作，并将其设置为“淡出”，持续时间为 5 秒。

我们现在拥有一个完整的胜利影片！

![img](058-victorycinematic-completedtrigger.jpg)

## 翻译 E:\SC2Code\blizzard-tutorials-chinese\docs\Classic_Tutorials\02_Trigger_Module\4.md.part-1.md

我们快要完成了。我们电影的最后一步是在胜利触发器中进行操作。

1. 添加一个“打开/关闭触发器”动作，这样胜利触发器只会运行一次。请记住，如果我们不关闭这个触发器，那么胜利触发器将会一遍又一遍地运行。

2. 添加一个“等待”动作，并将“持续时间”设为5秒。这将给玩家一些时间来陶醉于胜利之中，然后胜利的电影将开始播放。玩家将能够看到Ultralisk和Nydus Worm单位完全倒下并死亡，这对玩家来说是一种令人满足的观看体验。

3. 添加一个“运行触发器”动作。将“触发器”设置为我们的胜利电影触发器，并确保将其设置为“等到完成”。否则，游戏会在剧情动画播放完毕之前结束。

![img](059-victorycinematic-victorytrigger.jpg)

我们的触发器现在已经完成。我们应该能够进入地图，四处奔跑，杀敌，完成一些目标，观看我们的胜利电影并赢得这场任务。

导航至：

- [上一部分](../3)
- [数据模块](../1)

## 翻译 E:\SC2Code\blizzard-tutorials-chinese\docs\Classic_Tutorials\03_Data_module\1.md.part-0.md

---
title: 第一部分
author: jrepp
category: 01_介绍

---
# 数据模块 - 第一部分

在这个三部分的教程中，您将熟悉星际争霸2地图编辑器提供的许多功能之一，同时制作一个类似《自由之翼》战役中第一个任务的小冒险地图。

如果您尚未完成本教程的第一部分，请到[[这里](../terrain/1)]找到它。

如果您尚未完成本教程的第二部分，请到[[这里](../trigger/1)]找到它。

如果您想直接开始本教程，而不必经过地形和触发器教程，请使用我们在这些教程中一直在进行的地图，位于[[这里](https://web.archive.org/web/20130814095747/http://us.battle.net/sc2/en/game/maps-and-mods/tutorials/data/1#finishedMap)]。

## 目标：

通过编辑单位、能力、效果和武器的现有数据，熟悉数据模块。

## 结果：

当我们完成本教程时，我们将拥有一个已修改的吉姆·雷诺（突击队员）单位，具有额外的生命值、护甲、不同的能力和修改后的武器。

![img](001-finishedproduct-modifiedunitingame.jpg)

## 介绍

《星际争霸II》带有数百个预设单位、装饰物、地形和技能。但是，如果我们想要创建一个拥有全新单位或技能的地图呢？或者一个暗影刺客能够闪烁、大型巡洋舰没有护甲但拥有疯狂的生命值的地图呢？数据模块就是我们可以设置所有这些的地方。事实上，数据模块让我们几乎可以修改《星际争霸II》的所有内容。

在本教程中，我们将介绍修改现有数据的方法，包括修改单位生命值、护甲、起始能量，向单位添加和移除现有能力，以及修改武器开火速率和伤害。

### I. 导航数据编辑器

要打开数据模块，按[F7]或从任何其他编辑器模块顶部的工具栏中单击数据模块按钮。数据模块按钮上有一个蓝色陆战队员的图片。

![img](002-navigating-toolbarbutton.jpg)

第一眼看到数据模块窗口可能让人望而生畏。有很多用小字体写着的单词表和带有许多选项的下拉菜单，其目的可能并不那么直观。然而，一旦我们解释了组织方式，就不会感觉那么艰巨。

#### A. 数据树

我们可以将《星际争霸II》中的数据想象为一棵树。《星际争霸II》中的每个地图至少有一个与之关联的“Mod”，其中包含有关该地图上可用的单位、能力、武器、地形、效果、用户界面等的信息。

![img](003-navigating-datadiagram.jpg)

##### 1. 目录

   这个主干分成不同的数据“目录”。 “单位”是一个目录。“能力”是一个单独的目录。这些目录共同组成整个游戏数据。

##### 2. 对象

每个目录包含“对象”，这些是该目录中的具体条目。在单位目录中，“陆战队员”是一个对象。“追猎者”是另一个对象。

##### 3. 字段

每个对象包含与它关联的“字段”列表。这些是定义每个单位的信息类型。对于陆战队员对象，“最大生命值”是一个字段。“能力”是另一个字段。

##### 4. 值

每个字段具有一个或多个“值”。有些是一个单一的值，比如“最大生命值”。陆战队员的最大生命值为45。有些具有值列表，比如“能力”，因为每个单位可以有多个能力。

![img](004-navigating-windowbreakdown.jpg)

#### B. 设置我们的工作空间

在我们开始工作之前，我们将设置几个选项，就像我们在触发器模块教程中做的一样。请记住，我们要设置的所有选项都是为了跟随本教程中的图片。设置编辑器工作的方式并没有对错之分；所以尝试一下，看看哪种方式最适合您。

![img](005-navigating-selectedviewoptions.jpg)

##### 1. 查看原始数据

我们将关闭此选项。每个对象都有一个ID，用于引用它，并且有一个相关的文本值作为其名称。以我们将要修改的单位吉姆·雷诺（突击队员）为例。他的ID是Raynor，但他的名称是吉姆·雷诺（突击队员）。显示原始数据将让我们查看Raynor而不是吉姆·雷诺（突击队员）。

![img](006-navigating-rawdata.jpg)

##### 2. 将对象列表显示为树

我们将关闭此选项。显示对象列表将根据类别将对象列表组织成文件夹，这样您可以像在计算机上查看文件夹时一样查看对象列表。

![img](007-navigating-showobjectlist.jpg)

##### 3. 显示所有对象源

我们将关闭此选项。当我们修改数据时，我们不会修改整个游戏的游戏数据；我们只会修改特定地图的数据。这些新数据存储在我们正在制作的地图中。将此选项设置为开启将会显示原始数据作为一个条目，然后将我们的新修改数据作为另一个条目，当我们修改现有的单位时。由于我们关闭了此选项，当我们修改单位吉姆·雷诺（突击队员）时，我们将不会看到该单位的两个条目，而只会看到一个。

![img](008-navigating-showmultisource.jpg)

##### 4. 显示对象资源浏览器

我们将打开此选项。资源浏览器视图很适合向您展示数据中相互连接的对象。如果我们正在查看吉姆·雷诺（突击队员）并且想快速查看他的武器数据，我们可以在资源浏览器部分找到他的武器，并选择它以显示其数据，而不必导航到武器选项卡并在游戏中的武器列表中找到他的武器。

## 翻译 E:\SC2Code\blizzard-tutorials-chinese\docs\Classic_Tutorials\03_Data_module\1.md.part-1.md

![图片](009-navigating-showexplorerview.jpg)

##### 5. 表格视图
我们要将此选项打开。当此选项打开时，我们会看到一个表格，左侧是对象字段列表，右侧是字段值。双击字段或值将打开一个新窗口，其中包含编辑值的控件。打开此选项将自动关闭详细视图和 XML 视图。

![图片](010-navigating-tableview.jpg)

##### 6. 详细视图
我们要将此选项关闭。当此选项打开时，我们不会看到字段和值列表的表格，而是会看到用于编辑这些值的所有控件。打开此选项将自动关闭表格视图和 XML 视图。

![图片](011-navigating-detailview.jpg)

##### 7. XML 视图
我们要将此选项关闭。当此选项打开时，我们会看到以 XML 格式排列的数据的文本编辑器视图。星际争霄 II 中的所有游戏数据都以这种格式存储和读取。数据模块的主要目的是使不熟悉 XML 的人更容易阅读和修改这些数据。我们将在另一个教程中详细介绍这个视图。打开此选项将自动关闭表格视图和详细视图。

![图片](012-navigating-xmlview.jpg)

##### 8. 显示默认值
我们要将此选项打开。为了节省空间，我们并不存储每个单位的每个字段的每个值，而是为一些对象存储一些默认值，然后设置新的对象，使其从这些首个或父对象“继承”值。在编辑器中，这些默认值显示为灰色，并且可以通过切换此选项打开/隐藏。如果我们正在查找一个未明确设置给单位的值，这可能会让我们感到困惑，因为这个值对我们来说是隐藏的。

![图片](013-navigating-showdefaultvalues.jpg)

##### 9. 显示高级值
我们要将此选项打开。默认情况下，某些需要详细了解游戏数据的字段是隐藏的。有经验的用户可能需要使用这些字段来实现更高级的功能。切换此选项将显示这些字段。
##### 10. 显示字段类型名称
我们要将此选项关闭。字段按“字段类型”组织，以便所有与单位行为或单位能力相关的字段都在表格视图中分组在一起。有时这有助于查找字段，但有时如果不知道所需字段所属的字段类型，可能会感到困惑。目前我们会将其关闭。

![图片](014-navigating-showfieldtypes.jpg)

##### 11. 合并结构值
我们要将此选项打开。一些对象字段是相关的。双击相关字段中的任何一个将打开相同的窗口，其中包含所有相关字段的控件。其中一个例子是单位命令卡字段。打开此选项将在表格视图中将所有这些字段合并为一个字段，并在字段名称后加上“+”符号。

![图片](015-navigating-combinefields.jpg)

##### 12. XML 语法高亮显示
我们要将此选项打开。一些对象字段是相关的。双击相关字段中的任何一个将打开相同的窗口，其中包含所有相关字段的控件。其中一个例子是单位命令卡字段。打开此选项将在表格视图中将所有这些字段合并为一个字段，并在字段名称后加上“+”符号。
##### 13. 提交 XML 更改
除非在 XML 视图中工作时有未提交的 XML 数据更改，否则此按钮将被禁用。在本教程中我们不使用 XML 视图，所以我们不会使用此按钮。

前往：

- [下一部分](../2)  

## 翻译 E:\SC2Code\blizzard-tutorials-chinese\docs\Classic_Tutorials\03_Data_module\2.md.part-0.md

---
title: 第二部分
author: jrepp
category: 01_介绍

---

# 数据模块 - 第二部分

## 二、改变单位名称/生命值/护甲/能量

是时候修改一些数据了！我们将要修改的第一批数据将是简单的、单值字段，只是为了入门。我们将要修改吉姆·雷诺（司令）的名称、生命值、护甲和能量。

### A. 打开单位目录：

1. 单位目录应默认打开，但如果没有打开，请点击工具栏下的“+”选项卡以打开可用目录的上下文窗口。
2. ![img](016-changingunitvalues-opencatalogcontextmenu.jpg)

3. 选择“编辑游戏数据”，然后选择“单位”。
4. ![img](017-changingunitvalues-openunitscatalog.jpg)

5. 单位选项卡将出现在我们用来打开单位目录的“+”选项卡的同一组选项卡中。您打开的任何目录都会添加选项卡。

### B. 名称

1. 滚动列表或使用单位对象列表上方的搜索栏，找到并选择吉姆·雷诺（司令）。
2. 在对象上右键单击，选择“修改单位...”或直接按[Enter]键选择对象。
3. 输入您想要的单位名称。我们将使用"人民的英雄"。
4. ![img](018-changingunitvalues-unitpropertieswindow.jpg)

5. 您会注意到旧名称的一部分仍然存在：“（司令）”。这是因为这不是单位的名称的一部分；这是单位名称的后缀。每个对象都可以附加一个前缀和后缀，该前缀和后缀会显示在编辑器中，但不会显示在游戏中。这样可以更容易地区分在编辑器中使用的两个共享相同名称的不同对象。在这种情况下，我们有3个在战役各个任务中使用的不同吉姆·雷诺单位。我们使用不同的后缀来区分它们。
6. 要删除单位后缀，确保在对象列表中选择了该单位，然后查看字段列表，找到“编辑器后缀”字段。双击字段值以打开一个窗口，让我们修改单位的后缀。
7. ![img](019-changingunitvalues-doubleclickfieldvalue.jpg)

8. 删除"(司令)"文本，然后按“确定”。
9. ![img](020-changingunitvalues-editorsuffixwindow.jpg)

您可能注意到，我们的单位对象在编辑器中的颜色从蓝色变成了绿色。这是因为这个单位包含了特定于我们当前工作的地图的数据。基本的色彩方案是：

- 灰色：基本的、默认的、核心游戏数据
- 蓝色：来自暴雪依赖或模组的数据，例如自由或战役数据
- 橙色：来自自定义依赖或模组的数据
- 绿色：来自您当前工作中的地图文件的数据。





C. 生命值

接下来，我们将要修改雷诺的生命值。我们需要修改2个字段的值：最大生命值和起始生命值。我们将这两个值都修改为650。

![img](021-changingunitvalues-changedhealthvalues.jpg)

### D. 护甲

护甲值列在生命护甲字段下。我们将雷诺的护甲值更改为3。我们还将生命护甲名称更改为"人民的护甲"。

### E. 能量

最后，我们将要修改雷诺的能量值。我们需要修改2个字段的值，就像我们为雷诺的生命值所做的那样："最大能量"和"起始能量"。我们将更改他的技能，使他使用不消耗能量的技能，因此我们将这两个值都设置为0。

### F. 测试

现在我们已经更改了一些单位数据，让我们保存工作并运行地图以查看我们的更改。在开始游戏并选择我们修改后的单位时，我们应该看到他有一个新的名称、生命值、护甲、护甲名称，并且不再具有能量：

![img](022-changingunitvalues-changedvaluesingame.jpg)



## 三、改变武器射击速率和伤害

我们将假设雷诺没有一把比其他海军陆战队士兵更强大的特殊枪械；他只是需要更多时间来瞄准并击中目标的致命部位。为了让它看起来像是发生了这种情况，我们将更改雷诺武器的射击速率，使其比正常情况下慢，并增加武器造成的伤害。

### A. 射击周期

单位的攻击信息并不直接存储在单位数据中。有时，我们希望单位具有不止一种攻击方式，就像血吞虫或蟑螂，它们既有近战又有远程攻击。

因此，要更改武器的射击速率，我们需要在武器目录中选择雷诺的武器。我们可以像之前一样从“+”选项卡选择目录显示武器目录，然后在列表中找到雷诺的武器（名为雷诺 - 高斯步枪(Horner05S)），或者我们可以使用“资源管理器”部分找到雷诺的武器：

![img](023-changingunitvalues-selectweapon.jpg)

选择武器后，找到周期字段并将其值更改为1.92，大约是通常速度的两倍慢。我们还将武器的名称从高斯步枪更改为“人民的枪”。

### B. 武器伤害效果

武器的数据存储在两个不同的位置。关于武器如何使用的信息存储在武器数据本身中。关于单位开火/使用武器时武器的效果被存储在效果目录中。

效果是数据中的推动者和变革者。每当某物作用于其他事物时，它都是通过效果来实现的。能力、行为和武器都可以触发效果。宿主风暴能力触发一组宿主风暴效果。母舰隐身行为定期触发一个搜索单位以隐身的效果。武器在开火时也会触发效果。

我们不会在本教程中详细介绍效果的工作原理。它是一个非常多功能的系统，但因此也有很多需要解释的内容。

- 效果以一系列事件的方式展开，就像一棵树一样。
- 一个效果可以触发一个或多个其他效果，每个效果都有其特定功能。
  - 有些比较简单。雷诺的武器调用一个单一效果，对我们用武器瞄准的单位造成伤害。
  - ![img](024-changingeffectsvalues-raynorweaponeffectstree.jpg)

  - 有些则更为复杂，比如宿主风暴。宿主风暴调用一个效果，持续几秒钟，然后定期调用另一个效果，在一个小范围内搜索单位。这种搜索效果在找到每个单位时会调用一个对该单位造成伤害的效果。
  - ![img](025-changingeffectsvalues-psistormeffectstree.jpg)
- 还有不同类型的效果。
  - 有些仅用于调用其他效果。
  - 有些用于造成伤害。
  - 有些用于在区域内搜索单位。


### C. 测试

## 翻译 E:\SC2Code\blizzard-tutorials-chinese\docs\Classic_Tutorials\03_Data_module\2.md.part-1.md

让我们保存工作并再次运行地图以查看更改。雷诺应该能够攻击的频率较低，但每次攻击造成的伤害更大：

导航至：

- [上一部分](../1)
- [下一部分](../3)

## 翻译 E:\SC2Code\blizzard-tutorials-chinese\docs\Classic_Tutorials\03_Data_module\3.md

---
title: 第三部分
author: jrepp
category: 01_介绍

---

# 数据模块 - 第三部分

## IV. 修改单位的法术组

接下来，我们将修改我们的英雄能够释放的技能。设置单位的能力有两个步骤：将能力添加到单位，并在命令卡上添加一个按钮，链接到该能力。

### A. 能力数组

如果我们的英雄没有相应的能力，我们将无法将能力命令添加到他的命令卡中，因此在修改命令卡之前，我们需要查看他的能力列表。

1. 在单位目录打开的情况下，选择人民英雄。
2. 定位“能力 +”字段，并双击值部分。在打开的窗口中，我们将看到单位具有的能力列表。
3. ![img](027-changingabilitiesvalues-abilitieslist.jpg)

在添加我们想要英雄拥有的能力之前，我们应该删除我们不希望他拥有的那些。

1. 要删除一个能力，请选择它，然后按窗口右侧的红色“x”按钮。
2. 重复步骤1，删除列表中所有能力，除了停止，攻击和移动。这三个对于我们的单位执行正常功能（如移动，巡逻和攻击）至关重要。
3. ![img](028-changingabilitiesvalues-deleteability.jpg)

现在我们只剩下基本的能力，我们将添加我们想要单位具有的特殊能力。

1. 在相同的“能力 +”窗口打开的情况下，按刚刚按过的红色“x”按钮正上方的绿色“x”按钮。
2. ![img](029-changingabilitiesvalues-addingability.jpg)
3. 在打开的弹出窗口中，打开下拉菜单，选择雷诺突击队 - 火炮狙击能力。
4. 重复步骤1和2，添加泰克斯 - 投掷手榴弹和斯旺 - 放置炮塔的能力。在所有能力添加完毕后，按“确定”按钮关闭窗口。
5. ![img](030-changingabilitiesvalues-newabilslist.jpg)

现在我们的能力准备就绪，可以将它们放在单位的命令卡上。

![img](031-changingcommandcardvalues-cmdcardwindow.jpg)

### B. 移除命令卡按钮

与能力列表一样，我们应该先移除不需要的命令卡按钮，然后再添加新的按钮。

1. 选择位于命令卡按钮区域左下角的按钮。
2. ![img](032-changingcommandcardvalues-buttonselected.jpg)
3. 您会注意到按钮区域下方的字段发生变化，显示的是该特定按钮的设置。我们可以看到按钮称为“种植破坏装置”，命令类型是“能力命令”，等等。由于我们刚刚从单位中删除了此按钮引用的能力，因此能力和能力命令部分都为空。

4. 要删除此按钮分配及其相应的能力信息，请按命令卡区域下方按钮部分右侧的红色“x”按钮。
5. ![img](033-changingcommandcardvalues-deletebutton.jpg)

6. 重复步骤1和2，删除手榴弹，时间裂隙设备和实验等离子枪按钮。

现在我们可以添加新的按钮和命令，让我们的英雄使用。

1. 选择底部左侧的按钮位置。
2. 按照用于删除按钮的红色“x”按钮正上方的绿色“x”按钮。
3. ![img](034-changingcommandcardvalues-addbutton.jpg)

4. 在弹出窗口中，找到并选择穿透者子弹（雷诺）按钮，然后按“确定”。
5. ![img](035-changingcommandcardvalues-addcommandbutton.jpg)

6. 在命令类型下拉菜单中，选择能力命令。能力命令允许我们将此按钮与单位拥有的能力之一关联起来。
7. 将要求保持为（无）。要求部分帮助确定何时显示或隐藏此按钮，何时启用或禁用，并灰暗显示。我们希望此能力始终可用，并且始终显示。
8. 对于能力部分，请从能力列表中选择雷诺突击队 - 火炮狙击。
9. 对于能力命令，请选择雷诺的穿透者子弹。

![img](036-changingcommandcardvalues-finishedbuttonoptions.jpg)

重复这些步骤，为泰克斯 - 投掷手榴弹和斯旺 - 放置炮塔的能力添加命令按钮：

![img](037-changingcommandcardvalues-finishedbuttonoptions2.jpg)

![img](038-changingcommandcardvalues-finishedbuttonoptions3.jpg)

### C. 测试一下

现在我们的单位——人民英雄，拥有了一套新的能力，让我们跳入游戏中测试一下！不要忘记先保存您的工作。

![img](039-changingcommandcardvalues-ingame.jpg)

导航到：

- [上一部分](../2)
- [下一部分](../4)

## 翻译 E:\SC2Code\blizzard-tutorials-chinese\docs\Classic_Tutorials\03_Data_module\4.md.part-0.md

---
title: 第四部分
author: jrepp
category: 01_导论

---
# 数据模块 - 第四部分

## V. 为单位添加动画

在测试能力时，您可能已经注意到，人民英雄在使用能力时就像一个傻瓜站在那里一样。当然，他仍然使用这些能力，但他并没有动手使它们发生。就好像他能够从肚脐射出手榴弹，创建炮塔，让虫族单位仅凭思想就爆炸。为了使人民英雄在使用能力时正确地执行动画，我们必须深入了解 Actor 目录。与 Effects 目录一样，Actor 是一个非常多才多艺但复杂的系统。

- 虽然单位、能力、效果和其他目录定义了在星际争霸 II 中发生的事情，然而 Actor 目录则是定义了当这些事情发生时，它们是什么样子和听起来是什么样子的。您在游戏中看到的每个单位、效果和能力都与一个 actor 相关联。
  - 关于单位如何运作的所有信息都存储在 Units 目录中：
    - 生命值
    - 能量
    - 能力
    - 移动速度
  - 所有关于单位外观的信息都在 Actor 中：
    - 模型
    - 动画
    - 单位图标
    - 声音
- 与效果一样，actor 也有不同类型。Actor 可以用于控制：
  - 单位
  - 导弹
  - 声音
  - 效果
  - 等等
- 我们使用 Actor Messages 来告诉 actor 做什么以及何时做。每个 Actor Message 都有一个事件、零个或多个术语和一个消息。
  - 事件 - 我们等待游戏中发生的某些事件，这些事件将触发我们希望发送给 actor 的消息。例如，我们等待地狱火单位攻击某物。
  - 术语 - 这类似于触发器中的条件。当事件发生时，我们会检查确保某些游戏条件为真。例如，当地狱火单位攻击某物时，我们会检查它是否拥有升级攻击或否。
  - 消息 - 当事件发生时，我们希望发生什么是消息。例如，当地狱火单位执行攻击时，我们告诉它播放其攻击动画。

- 打开 Actor 目录。

- 选择雷诺 - 雷诺。

- 查找并双击 “Events +” 字段值以打开 Actor Messages 窗口。您可以看到之前解释过的事件、术语和消息的概念在实践中的应用。

  ![img](040-changingunitactor-actorwindow.jpg)

对于这个能力，我们将指示雷诺角色播放他的攻击动画，因为这将使他的枪指向能力的方向，并看起来像他正在射击 Penetrator Round。

### 创建事件

1. 要创建新事件，请在 Actor Messages 列表中的任何位置右键单击鼠标，然后选择 “添加事件” 选项。

   ![img](041-changingunitactor-addeventoption.jpg)

2. 选择刚刚创建的新动作，我们可以在 Actor Messages 窗口的右侧看到其事件选项。

3. 对于 Msg Type，请从列表中选择 Ability。

   1. 有许多不同类型的消息，从单位创建、使用能力、单位死亡、向单位添加或移除行为等。
   2. 从此列表中选择 Ability 将让我们选择一个将触发 Actor Message 的能力。

4. 对于 Source Name，请选择雷诺突击队 - Railgun Snipe。

   1. 由于我们选择了 Ability 作为我们的消息类型，因此 Source Name 选项列出了游戏中的所有能力。

5. 对于 Sub Name，请选择 Source Cast Start。

   1. 由于我们选择了 Ability 作为我们的消息类型，因此 Sub Name 列出了能力可能具有的所有不同阶段。这样我们就可以确定在能力执行期间的具体时间点，我们的 Actor Message 将会触发。

   2. 一些能力阶段的示例包括：能力开始施法时，完成施法时，开始或停止通道时，开始或停止准备施法时等。

   3. Source Cast Start 意味着当来源（我们的单位）开始施放能力时。因此，当人民英雄开始使用 Railgun Snipe 能力时，该 Actor Message 将触发。

      ![img](042-changingunitactor-snipeevent.jpg)

### 创建术语

对于这个 Actor Message，以及我们将在本教程中制作的其他 Actor Message，我们不需要创建任何术语。我们将在以后的教程中介绍如何创建术语。目前可以简单地说，它们与创建事件和消息类似。

### 创建消息

1. 当我们创建事件时，在其下方自动创建了一个默认消息。选择该消息，并可以在 Actor Messages 窗口的右侧看到其选项。

2. 将目标字段留空。目标是我们想要发送此消息的 actor。因为我们想要将此消息发送给此 actor，所以我们不需要目标。

3. 将 Msg Type 字段更改为 Animation Play。

   1. 有许多不同类型的 actor message 类型。

   2. 我们可以更改角色大小、角色颜色/色调、角色透明度，我们可以更改该角色使用的模型。我们甚至可以在 actor messages 中创建其他 actor。

   3. 当我们完成对它们的使用时，我们也使用 actor messages 来销毁 actor，因此如果我们的事件是 “单位死亡”，我们的消息可以是 “销毁 actor”。

      ![img](043-changingunitactor-snipemessage1.jpg)

4. 在参数部分，选择 Name 字段。在参数部分下方，您将看到一个名称下拉菜单。在该下拉菜单右侧，您将看到一个自定义按钮。将名称下拉菜单选项更改为任何可用的下拉菜单选项，或按“自定义”按钮创建自己的名称。

   1. 动画的名称并不影响动画本身；它只是让我们在其他 actor messages 中引用它。
   2. 例如，我们可以在一个消息中说“开始播放动画 FunTimes”，然后在另一个消息中说“停止播放 FunTimes 动画”。

5. 仍然在参数部分中，选择 Animation Properties。在参数部分下方，您将看到一个 Animation Properties 下拉菜单。从列表中选择 Attack。

   1. 这包含了游戏中的所有可用动画名称的列表。并非每个模型都具有每个动画。要查看特定 actor 可用哪些动画的列表，请右键单击对象列表中的 actor，并选择“预览 actor”。

## 翻译 E:\SC2Code\blizzard-tutorials-chinese\docs\Classic_Tutorials\03_Data_module\4.md.part-1.md

```markdown
      ![img](044-changingunitactor-previewactoroption.jpg)

      这将打开预览窗口（我们将在未来的教程中详细介绍），并显示我们角色的模型和信息。在预览器窗口的右侧中部是一个文件夹列表。展开"动画序列"文件夹，您将看到可用于查看的角色模型的动画。

      ![img](045-changingunitactor-previewer.jpg)

   2. 当您从下拉菜单中选择一个选项时，第二个下拉菜单将出现，让您添加更多的修改器到动画中。在这种情况下，我们不需要任何修改器。

6. 在"参数"部分，将“时间类型”从“自动”更改为“持续时间”，将“时间变体”从-1更改为2。这将使动画在2个游戏时间秒内播放完毕。如果我们将这些选项保持为默认值，动画将以默认速度播放然后停止，这比能力施法所需的时间更快。

7. 我们将保持在"参数"部分中其他内容不变。

![img](046-changingunitactor-animationsingame.jpg)

## B. 投掷手榴弹

对于这个能力，我们将告诉Raynor角色播放他的“法术”动画，这将使Raynor角色做出一次上举投掷动作，看起来像在扔手榴弹。当角色消息全部设置好时，应该是这样的：

![img](047-changingunitactor-grenademessageoptions.jpg)

对于这个能力，我们将告诉Raynor角色像我们在扔手榴弹能力中所做的那样播放他的“法术”动画，这样他看起来像在扔炮台。当角色消息全部设置好时，应该是这样的：

![img](048-changingunitactor-turretmessageoptions.jpg)

现在，我们已经将英雄的其余能力动画都连接好了，让我们保存我们的工作并在游戏中进行测试。

![img](049-changingunitactor-animsingame.jpg)

就是这样！我们已经设置好了我们的自定义英雄“人民英雄”，具有新的生命值、护甲和能源值，修改后的武器以及新的能力。在这三个教程的过程中，您已经熟悉了星际争霸II编辑器。虽然我们只是触及了表面，但希望这一系列教程已经开始为您探索地形、触发器和数据打下坚实基础。在未来的教程中，我们将更多地了解数据、高级触发器概念等。不要忘记，游戏和Battle.net上有大量现有的模组和地图，它们展示了如何为您自己的自定义地图创建地形、触发器和数据的示例。期待下一次，愉快编辑！

转到：

- [上一部分](../3)
```  

## 翻译 E:\SC2Code\blizzard-tutorials-chinese\docs\Classic_Tutorials\04_Misc\actor-cheats.md.part-0.md

# 角色作弊

使用 Patch 1.4.0，modders 现在可以使用角色作弊来在编辑器中运行测试地图时创建和操作角色。这对于快速测试想法而无需设置数据或执行触发器非常有用。

在运行测试地图时，作弊也可以用于修改和检查几乎任何角色，这对于调试运行时角色问题很有帮助。

作弊还可用于发送几个新启用的 dump 消息，如 AnimDumpDB、AttachDump、HostedPropDump、RefDump 和 TextureDump。这些消息使 modders 能够在游戏运行时检查某些角色的内部方面，这对于作为额外调试辅助工具很有帮助。

## 角色作弊概念

### 引用名称

术语 "Ref Name" 是 "Actor Reference Name" 的缩写，它唯一标识称为角色引用 ("actor ref" 或简称 "ref") 的系统变量类型。根据 1) 引用名称的含义和 2) 它所用于的上下文，角色引用可以解析为给定角色。在指定的地方，引用名称可用在许多作弊中。它们的可用性可能会有所不同，取决于它们被使用的上下文：

- D- 在 Actor(D)ata 中
- T- 在 (t)riggers 中的与角色相关的函数内
- C- 通过角色 (c)heats

当前可用的引用名称包括：

| **::HoverTarget**       | C    | 鼠标指针下的角色。                                       |
| ----------------------- | ---- | ------------------------------------------------------ |
| **::LastCreated**       | DTC  | 在触发器中，这将解析为通过触发器函数直接成功创建的最后一个角色（但不会通过任何其他方式创建，比如通过数据中的消息作为触发器调用的结果）。在其他任何地方，它还包括通过 Create 消息明确创建的角色（即 Create SomeActor）。这旨在通过各种不同变体中的 LastCreated() 机制最大化一致性，同时尽量在其他任何地方遵守最少惊讶规则。 |
| **::LastCreatedActual** | DTC  | 用户通过任何方式成功创建的最后一个角色。包括通过 Create 消息创建的角色，角色请求创建，或系统内部创建的角色（例如当 CActorAction 创建散架时）。 |
| **::Main**              | DTC  | ::User 范围内的 "主" 角色。                               |
| Doodad                  |      | CActorDoodad。                                        |
| Unit                    |      | CActorUnit。                                          |
| 其余                    |      | 范围内创建的第一个角色。                                 |
| **::PortraitGame**      | DTC  | 游戏肖像窗口的主要角色，目前，在选择什么都不会改变。     |
| **::PortraitGameSelf**  | DTC  | 该角色范围内主要角色的肖像。用于从单位的范围内的任何角色向其肖像角色发送消息很有用。如果肖像是当前单位以外的其他人，则不返回任何内容。 |
| **::Self**              | D    | 接收事件的角色。                                         |
| **::User**              | TC   | 包含最近一次 ActorFrom 作弊的结果。                           |
| **::global.<RefName>**  | DTC  | 来自全局引用表的角色引用。                                   |
| **::scope.<RefName>**   | DTC  | 来自包含范围引用表的角色引用。                                |
| **::actor.<RefName>**   | DTC  | 来自包含角色引用表的角色引用。                                 |
| **TargetKey**           | TC   | 由 ::User 范围的关键表示的角色。当结果集中有多个命中时，仅返回其中的第一个。 |

### 分支引用名称

|                  |      | 注意                                                     |
| ---------------- | ---- | ------------------------------------------------------ |
| **::Creator**    | DTC  | ::User 角色的创建者。                                      |
| Hosts            |      | 主机角色是从中继承数据的一个角色，例如承受、容纳的道具等。          |
| **::Host**       | DTC  | 主要主机。用于承受和容纳的道具。                                  |
| **::HostImpact** | DTC  | 用于定位光束的影响点。                                          |
| **::HostLaunch** | DTC  | 用于定位光束的发射点。                                          |
| **::HostReturn** | DTC  | 神经丝使用的目标主机作为返回行程的目标。                           |
| **::Supporter**  | DTC  | 用于将一个角色的生存期与 "支持" 角色链接（通常用于设置事件，告诉一个角色当其支持角色死亡时死亡）。 |

### 范围引用名称

| **::Actor**        | TC   | ::User 角色的范围。                                       |
| ------------------ | ---- | ------------------------------------------------------ |
| **::LastCreated**  | TC   | 用户通过作弊或客户端代码成功创建的最后一个范围。在数据内部不相关，因为数据不创建范围。  |
| **::PortraitGame** | TC   | 游戏肖像窗口的范围。                                      |
| **::Selection**    | C    | 所选单位的范围。即使选择了多个单位，也只返回单个范围。             |
| **::User**         | TC   | 包含最近一次 ActorScopeFrom 作弊的结果。当该引用被填充为新的有效角色范围时，自动设置为值 ::LastCreated。 |

### 内容关键

Create 消息可以使用 1 到 3 个内容关键。这些关键使触发器和作弊能够更轻松地使用相同数据输入创建各种角色实例，但具有不同的 "内容" 参数。例如：

`ActorCreateAt Model Hydralisk `

`ActorCreateAt Model Marine`

这两个作弊都创建名为 "Model" 的 CActorModel。第一个使用 "Hydralisk" 资产创建，第二个使用 "Marine" 资产创建。各种类型的角色基于情况支持不同的创建参数样式。以下是支持内容参数的角色类型列表，以及指定顺序。

#### CActorBeam ModelLink RefLaunch RefImpact

* **ModelLink** - 用于光束的 modelData 条目的名称。
* **RefLaunch** - 用于填充光束的 ::HostLaunch 的 ref 名称。
* **RefImpact** - 用于填充光束的 ::HostImpact 的 ref 名称。

#### CActorList RefName

* **RefName** - 用于填充列表的源 ref 名称。

#### CActorModel

* **ModelLink** - 用于该模型的 modelData 条目的名称。
* **Variation** - 模型的特定变体编号，如果需要（否则会随机选择）。

#### CActorSound

* **SoundLink** - 要使用的声音的名称。

#### CActorSplat

## 翻译 E:\SC2Code\blizzard-tutorials-chinese\docs\Classic_Tutorials\04_Misc\actor-cheats.md.part-1.md

* **ModelLink** - 要用于解密的模型数据条目的名称。

## 演员作弊用法

用户可以在从编辑器中运行地图时将演员作弊输入到聊天栏中。

输出内容将进入 Alert.txt 日志，该日志可在用户的“StarCraft II/GameLogs”目录中找到。Alert.txt 日志的文件名前面附加有日期和时间戳，因此实际示例的名称如下：“2011-08-08 10.30.05 Alerts.txt”。

目前不支持快捷方式，但以后可能会添加快捷方式。



### 演员作弊清单

在每个命令的给定语法中，由花括号{}括起的参数表示可选参数。对于某些作弊成功执行时，将设置两个全局变量，“::User actor” 和 “::User scope” 值，其他作弊可以基于这些值进行操作。杀死演员和范围的作弊不包括那些可能破坏当前活跃单位和效果的演员和范围。

#### ActorCreateAt

在指定位置创建一个演员。将“::User actor” 设置为此演员，并将“::User scope” 设置为其范围。

此作弊对于直接在测试地图上创建一个演员，以便观察其属性并与之交互，而无需等待地图遇到通常会创建演员的情况非常有用。坐标使用户能够精确放置演员用于战斗测试等场合。

##### 语法

```ActorCreateAt x,y actorName {contentName} {content2Name} {content3Name}```

##### 示例

```ActorCreateAt 50,50 Model Drone ```<br/>
```ActorCreateAt 50,50 NexusSplat```

#### ActorCreateAtCursor

在鼠标光标位置创建一个演员（以及包含它的演员范围）。将“::User actor” 设置为此演员，并将“::User scope” 设置为其范围。

此作弊对于直接在测试地图上创建一个演员，以便观察其属性并与之交互，而无需等待地图遇到通常会创建演员的情况非常有用。它将演员放置在光标位置，因此用户无需担心获取特定坐标以将演员定位在易于看到的位置。

##### 语法

```ActorCreateAtCursor actorName {contentName} {content2Name} {content3Name}```

##### 示例

```ActorCreateAtCursor Model Drone ```<br/>
```ActorCreateAtCursor NexusSplat```

#### ActorDumpAutoCreates

转储所有像这样创建的所有演员的列表：

```xml
<On Terms="UnitBirth.Marine" Send="Create"/>
```

这种演员创建模式称为“自动创建”，因为演员会自动响应消息而创建自身。这与以下创建模式不同：

```xml
<On Terms="ActorCreation" Send="Create SomeActor"/>
```

因为这里的“Create”消息明确指定要创建的演员。

ActorDumpAutoCreates可用于追踪某些事件无意间创建的演员。

##### 语法

```ActorDumpAutoCreates```

#### ActorDumpEvents

转储“::User actor”看到的所有演员事件列表，不包括自动创建事件。

此作弊可用于在地图上执行各种文本搜索，例如，如果用户想要查看响应给定信号事件的所有演员，不管它们位于哪个依赖关系中。

##### 语法

```ActorDumpEvents```

#### ActorDumpLeakRisks

转储比特定年龄大的演员列表，这些演员可能泄露。用户可以检查闪光模型是否超过一分钟，例如，因为闪光通常不持续那么长时间。某些类型的演员永远不会出现在泄漏风险列表中，因为它们由系统自动清理，因此通常不会受到不良数据的泄露。

如果地图随着时间的推移变得逐渐变慢，此作弊可以确定是否泄漏演员为原因。

##### 语法

```ActorDumpLeakRisks age```



#### ActorDumpLive

转储整个地图上存活的演员列表，由包含的范围排序。

此作弊有助于确定演员是否存在，尽管它们未出现在游戏世界中预期的位置。错误出现在0,0 的演员仍将显示在活动演员列表中。

##### 语法

```ActorDumpLive```



#### ActorFrom

从一个活动的演员中根据引用名称设置一个新的“::User actor”。

此作弊对于将游戏世界中的各种演员设置到“::User ref”，以便用户可以向其发送作弊命令非常重要。

##### 语法

```ActorFrom RefName```

##### 示例

```ActorFrom ::HoverTarget```<br/>
```ActorFrom ::Selection```

#### ActorFromActor

将“::User actor”设置为通过另一个演员和分支引用名称引用的演员。

此作弊对于将游戏世界中的各种父级和子级演员设置到“::User ref”，以便用户可以向其发送作弊命令非常有用。通常用于对演员的“::Host ref”执行操作。

##### 语法 

```ActorFromActor refName```

##### 示例

```ActorFromActor ::Host```

将“::User actor”设置为托管它的演员。

```ActorFromActor ::Creator```

将“::User actor”设置为创建它的演员。

#### ActorKillAll

杀死所有演员，除了那些属于活动单位和效果树的演员。

有助于清除测试地图中的演员，以便随后可以隔离地测试单个演员。

#### 语法: 

```ActorKillAll```

#### ActorKillClass

杀死鼠标光标范围内指定类别的所有演员。如果未指定范围，则为无限。

如果某些类型的演员让用户难以专注于解决方案，用户可以使用该命令清除区域（或整个地图）中的特定类型演员。例如，可能需要杀死所有地形演员以确认它们是否导致性能问题。

#### 语法: 

```ActorKillClass class {range}```


示例:

```ActorKillClass Model 15 ActorKillClass Sound```

#### ActorKillLink 

杀死鼠标光标范围内具有指定演员链接的所有演员。如果未指定范围，则为无限。

可以用于清除区域（或整个地图）中特定演员条目的所有实例，如果它们让用户难以专注于解决方案。例如，如果创建了太多模型并掩盖了用户正在调试的攻击的某个其他部分的图形 FX，则可能需要杀死特定名称的所有模型。或者，用户可能会杀死带有给定名称的所有声音，以查看是否可以听到与特效相关联的其他声音。

#### 语法: 

```ActorKillLink link {range}```



##### ActorSend

向当前活动的“::User actor”发送一个有效的用户消息。

## 翻译 E:\SC2Code\blizzard-tutorials-chinese\docs\Classic_Tutorials\04_Misc\actor-cheats.md.part-2.md

迄今为止最常用的演员作弊，也是开发人员（内部或外部）与演员互动的主要方式之一。

#### 语法：

```ActorSend message```

#### 示例：

```ActorSend Destroy ActorSend SetTintColor {255,255,0}```

#### ActorSendTo

向系统演员引用发送消息，使用::User演员来帮助解析系统演员引用。换句话说，这个例程向分支引用名称发送消息（尽管也适用于::Main引用名称）。

此作弊可以是向分支演员发送消息的简便方式；用户无需首先使用ActorFromActor作弊将它们设置为::User引用。

语法：
ActorSendTo refName message

示例：
ActorSendTo ::Host SetOpacity 0.5 ActorSendTo ::Main SetTintColor {255,0,0}

#### ActorScopeDumpLive

在整个地图上列出存活范围的列表。

这个作弊可用于查找消耗资源但不再有（有用的）演员的演员范围。

语法：
ActorScopeDumpLive

**ActorScopeFrom**

这个作弊对于将游戏世界中的各个范围设置为::User范围引用至关重要，从而使用户可以轻松找到并向该范围内的任何演员发送消息。

语法：
ActorScopeFrom scopeName

示例：
ActorScopeFrom ::PortraitGame ActorScopeFrom ::Selection

杀死当前设置的::User演员和::User范围。此命令无法杀死用于防止意外结果的活单位或效果的范围。

这个作弊是一种有效的方式来杀死用户一直在尝试的一个或多个演员，只需杀死它们所在的范围即可（因为这将杀死范围内的所有演员）。

语法：
ActorScopeKill

**ActorScopeOrphan**

这个作弊可用于测试ActorOrphan消息对::User范围内的演员的影响。

语法：
ActorScopeOrphan

**ActorScopeSend**

在用户想要向范围内所有演员发送消息的罕见情况下非常有用。

（另外，虽然这个作弊看起来似乎是将范围内所有模型染成红色（例如），但通常最好让子演员从::Main演员托管，并继承tintColor属性。然后用户仅向范围的::Main演员发送SetTintColor消息，并依赖于托管道具的继承来传播颜色更改。当一个范围中可能包含不应该被染成红色的演员（如敌人影响火花）以及打算染成红色的演员时，后一种方法通常更佳。广播tintColor消息会使范围内的所有模型变红。）

语法：
ActorScopeSend message

示例：
ActorScopeSend Destroy

**ActorUsersDump**

如果用户忘记了这些引用当前设置为什么，这个命令是有用的。

语法：
ActorUsersDump

**ActorUsersFromHoverTarget**

非常有用，可以检查和操作游戏世界中不属于可选对象的任何演员。

语法：
ActorUsersFromHoverTarget

**ActorUsersFromPortraitGame**

可用于检查和操作图像窗口中包含的演员。

语法：
ActorUsersFromPortraitGame

**ActorUsersFromSelection**

非常有用，可以检查和操作游戏世界中属于可选对象的任何演员。

语法：
ActorUsersFromSelection

**ActorWorldParticleFXDestroy**

可用于立即清除世界中模糊的粒子和带状FX（通常在游戏暂停时），以便仔细检查模型或其他一些视觉FX的部分。

语法：
ActorWorldParticleFXDestroy

## 

演员转储消息

用户可以向演员发送演员转储消息，以从中获取有用的与调试相关的信息。

**AliasDump**

打印出当前与演员关联的所有演员别名。

**AnimDumpDB**

打印出与演员关联的模型可用的所有动画。为每个动画打印出持续时间，以及它是否是循环动画。

**AttachDump**

打印出与演员关联的模型上存在的所有附加点。还打印出用户指定的附加键和与每个附加点相关联的目标附加体积。

**HostedPropDump**

如果存在指定的托管道具，则打印出与其关联的所有信息。如果IncludeChildren参数为1，则打印出目标演员的所有子项的道具信息。

示例：
HostedPropDump 0 TintColor HostedPropDump 1 TeamColor

语法：
HostedPropDumpAll IncludeChildren

打印出与演员上存在的所有托管道具相关的所有信息。如果IncludeChildren参数为1，则对所有目标演员的子项执行相同操作。

**RefDump**

打印出由refName指定的演员的调试信息。目前，这仅适用于系统ref表中的演员引用，即格式为::actor.someUserRef、::scope.someUserRef和::global.someUserRef的引用。

示例：
RefDump ::actor.someUserRef

**RefTableDump**

打印出给定Ref表中所有演员引用的调试信息。RefTableType参数区分大小写，期望的标记为Actor、Scope或Global。

示例：
RefDumpAll Actor

**TextureDump**

打印出目标演员关联模型当前使用的所有纹理。指示哪些纹理与纹理槽相关联，以及它们是否已被其他动态纹理替换和替换。

**TextureDumpDB**

打印出与目标演员关联的模型上可供动态纹理替换使用的所有纹理。

## 翻译 E:\SC2Code\blizzard-tutorials-chinese\docs\Classic_Tutorials\04_Misc\mapmaking-best-practices.md.part-0.md

# 地图制作：艺术和表演中的最佳实践

![地图制作：艺术和表演中的最佳实践](https://web.archive.org/web/20160505140409im_/http://bnetcmsus-a.akamaihd.net/cms/blog_header/b3/B3FQCUUA4HBW1461972169271.jpg)

上周，我们在 Team Liquid 公布了第七届 Team Liquid 地图比赛！我们非常激动地期待社区中富有创造力的大脑为我们开发新颖有趣的地图，供我们在即将到来的梯队赛季中进行游玩。

随着社区中地图制作活动的加剧，我们希望借此机会与您分享一些最佳实践，我们相信这对所有社区地图制作者都是有益的。这些最佳实践完全与地图制作的艺术方面有关，它们的使用不仅可以让地图看起来很棒，而且还可以在我们的玩家在 StarCraft II 上进行游玩时在各种各样的设备上表现良好。因此，废话不多说，让我们开始讨论装饰物：地图制作者可用的各种结构、植被和装饰模型。

## 装饰物

[![img](https://web.archive.org/web/20160505140409im_/https://bnetcmsus-a.akamaihd.net/cms/content_entry_media/AH0O3MMAJ3IP1461966790257.jpg)](https://web.archive.org/web/20160505140409/https://bnetcmsus-a.akamaihd.net/cms/content_entry_media/00354ZPG88NO1461966790159.jpg)

**图片 A：** 在这个场景中有 200 棵树。虽然看起来很漂亮，但这对性能是不必要地苛刻。许多树重叠在一起或被其他树覆盖。

**图片 B：** 在这里，树木数量减少了一半，但每棵树都有更多的空间，重叠更少，且整体外观得到保留。这对于性能有限的玩家是有价值的。

[![img](https://web.archive.org/web/20160505140409im_/https://bnetcmsus-a.akamaihd.net/cms/content_entry_media/3PPAL00W5LLZ1461966790108.jpg)](https://web.archive.org/web/20160505140409/https://bnetcmsus-a.akamaihd.net/cms/content_entry_media/W82EPJAA2T451461966790139.jpg)

**图片 A：** 这些装饰物有隐藏成本......

**图片 B：** 当地形被隐藏时，您可以看到被降低到地形下方的其余装饰物。像这样的大型装饰物仍然*完全渲染*并具有大量的过度绘制。

[![img](https://web.archive.org/web/20160505140409im_/https://bnetcmsus-a.akamaihd.net/cms/content_entry_media/AG4EYN69P72K1461966791686.jpg)](https://web.archive.org/web/20160505140409/https://bnetcmsus-a.akamaihd.net/cms/content_entry_media/EW2138CYW6TU1461966791619.jpg)

**图片 A：** 过度绘制为什么不好？这里是一棵靠近水域的大树（已经昂贵的渲染）。您可以看到水面上的阴影。

**图片 B：** 在这张图片中，您可以看到*即使将摄像机移开*并且树木不再显示在屏幕上，阴影仍然可见，这意味着树木仍然需要被渲染。

[![img](https://web.archive.org/web/20160505140409im_/https://bnetcmsus-a.akamaihd.net/cms/content_entry_media/5RVFS0PEORVY1461966791826.jpg)](https://web.archive.org/web/20160505140409/https://bnetcmsus-a.akamaihd.net/cms/content_entry_media/VEWS0M5K02UC1461966791820.jpg)

**图片 A：** 在区域中均匀放置物体看起来更自然，但这会遮挡单位或为某些单位提供不公平的优势。

**图片 B：** 尽量保持游戏区域畅通无阻，并将大部分装饰物放置在不可玩区域或您不希望玩家去的区域。

------

## 灯光和阴影

[![img](https://web.archive.org/web/20160505140409im_/https://bnetcmsus-a.akamaihd.net/cms/content_entry_media/B0TYOSB0EDAW1461966791343.jpg)](https://web.archive.org/web/20160505140409/https://bnetcmsus-a.akamaihd.net/cms/content_entry_media/BMRCJ4RL5DJJ1461966791301.jpg)

在创建一个级别时，请选择色彩和谐的装饰物、雾和灯光，限制您的调色板。颜色过多会从游戏玩法中分散注意力，使焦点远离单位。

[![img](https://web.archive.org/web/20160505140409im_/https://bnetcmsus-a.akamaihd.net/cms/content_entry_media/QJV4ZFF8RHUV1461966790476.jpg)](https://web.archive.org/web/20160505140409/https://bnetcmsus-a.akamaihd.net/cms/content_entry_media/X73YUFNA4Z9I1461966790408.jpg)

在照明您的级别时，最高优先级应该是**单位的可读性**。在左边，您会看到 MarSara 照明，这是一个不错的起点。从那里开始，尝试调整设置以为您的级别设定基调和氛围。右边的图像具有不错的沉郁照明，而单位仍然保持可读性。 

[![img](https://web.archive.org/web/20160505140409im_/https://bnetcmsus-a.akamaihd.net/cms/content_entry_media/Q9TI74STRWOA1461966791157.jpg)](https://web.archive.org/web/20160505140409/https://bnetcmsus-a.akamaihd.net/cms/content_entry_media/FPJL9G9H56F21461966791161.jpg)

确保在地图上任何装饰物出现的位置绘制通路。这将防止单位进入到网格的几何结构中。这包括填补小单位（如虫族）卡住的地方。按 H 键查看通路菜单。

## 翻译 E:\SC2Code\blizzard-tutorials-chinese\docs\Classic_Tutorials\04_Misc\mapmaking-best-practices.md.part-1.md



## 翻译 E:\SC2Code\blizzard-tutorials-chinese\docs\Classic_Tutorials\04_Misc\mastering-mapmaking.md.part-0.md

# 掌握地图制作：第二部分

![掌握地图制作：第二部分](https://web.archive.org/web/20170209153457im_/http://bnetcmsus-a.akamaihd.net/cms/blog_header/8m/8M6TGX6XMH511486146089715.jpg)

就像天空中的星星一样，多年来，数十张由社区制作的地图在科普鲁星区遍地开花。每张地图都是其创作者辛勤劳动的见证，许多地图不止一次地重回人们的视野。与此同时，新的地图制作者不断加入银河系的行列，而更加成熟的创作者则继续构思新的轨道站或完善其现有的行星战场。

地图制作并不容易——它需要创造力和技术娴熟。地图制作是一个独特的方式，在这个环境中，您的创作可以被地球上一些最有技巧的策略游戏玩家测试，从而提升您的游戏设计技能。

最新的TeamLiquid地图比赛正在进行中，我们希望延续我们[上一篇地图制作更新](https://web.archive.org/web/20170209153457/http://battle.net/sc2/blog/20097658)并将我们的建议集中在地图制作的更技术性方面。这一次，我们将关注平衡和设计相关的改进与性能之间的对比。请注意任何您不熟悉的技巧。就像Egon Stetmann可能曾经说过的那样，“最迟钝的铅笔胜于最锐利的头脑”。

## 地形

[![图片](https://web.archive.org/web/20170209153457im_/https://bnetcmsus-a.akamaihd.net/cms/content_entry_media/OUO6AN1UWNYR1486171698424.jpg)](https://web.archive.org/web/20170209153457/https://bnetcmsus-a.akamaihd.net/cms/content_entry_media/1EYY7FOQG6EB1486171699274.jpg)

**图片A：** 在贝尔希尔荒野上，您可以看到一个海军陆战队员被放置在一个碉堡后面，以一种他无法被近战单位攻击的方式。这种设计缺陷为碉堡突袭策略提供了不公平的优势。

**图片B：** 在这里，一块石头被放置在海军陆战队员原来站立的空间中。一个海军陆战队员再也不能站在这个位置了，解决了地图上的缺陷。寻找所有主要和自然基地中类似情况的地方。

[![图片](https://web.archive.org/web/20170209153457im_/https://bnetcmsus-a.akamaihd.net/cms/content_entry_media/AL0O650KEH4W1486171699462.jpg)](https://web.archive.org/web/20170209153457/https://bnetcmsus-a.akamaihd.net/cms/content_entry_media/O2GWCUR8PG4F1486171699469.jpg)

**图片A：** 多年来的一些地图都犯过这个错误，在这里展示的是贝尔希尔荒野。只有两个晶塔，一个探测器就能完全保护自己并放置一个无法被工人攻击的光子炮。

**图片B：** 两个晶塔不应该在主基地、自然基地或第三个基地位置形成一个完整的光子炮防御墙。在这个位置的左侧添加一些额外的地形，这样光子炮就不能再如此轻易、廉价地抵御近战单位的攻击。

[![图片](https://web.archive.org/web/20170209153457im_/https://bnetcmsus-a.akamaihd.net/cms/content_entry_media/SSYKC40PLF3M1486171699687.jpg)](https://web.archive.org/web/20170209153457/https://bnetcmsus-a.akamaihd.net/cms/content_entry_media/YRNVGLNVA0V41486171700554.jpg)

**图片A：** Liberator是比赛早期的强大骚扰工具，为了制约它们，很重要的是让海军陆战队员能够始终攻击那些攻击自己矿线的Liberator（在没有高级弹道学的情况下）。在这里，海军陆战队员无法达到Liberator。

**图片B：** 在图片B中，我们添加了额外的地形，以确保当Liberator能够攻击经济时，海军陆战队员总是能够赶走它。这是一个重要的地图细节。

[![图片](https://web.archive.org/web/20170209153457im_/https://bnetcmsus-a.akamaihd.net/cms/content_entry_media/183BPDTYO5071486171699589.jpg)](https://web.archive.org/web/20170209153457/https://bnetcmsus-a.akamaihd.net/cms/content_entry_media/UQE41E5QAGKI1486171699549.jpg)

**图片A：** 这是一个相当简单但令人惊讶常见的地图疏忽。正如您所见，图片A显示了单位在装饰物中穿插的情况。

**图片B：** 既地面单位也空中单位不应该能够穿插在装饰物中。在这个示例中，简单地移除了装饰物，解决了问题。

## 寻路

[![图片](https://web.archive.org/web/20170209153457im_/https://bnetcmsus-a.akamaihd.net/cms/content_entry_media/9NNWUHCT6HRY1486171700402.jpg)](https://web.archive.org/web/20170209153457/https://bnetcmsus-a.akamaihd.net/cms/content_entry_media/27Q776TZKSGZ1486171701733.jpg)

**图片A：** 在这个图片中，矿区或瓦斯矿之间没有任何空间。这意味着工人和骚扰单位在这个空间中移动的选择非常有限。

**图片B：** 如此版本所示，矿线应该始终在其后具有一些路径，以及在任何瓦斯矿之间和矿线内部至少有一个空间。

[![图片](https://web.archive.org/web/20170209153457im_/https://bnetcmsus-a.akamaihd.net/cms/content_entry_media/WRRRG6EHBK1R1486171698284.jpg)](https://web.archive.org/web/20170209153457/https://bnetcmsus-a.akamaihd.net/cms/content_entry_media/58GSYDQHROA61486171699243.jpg)

**图片A：** 始终要彻底测试影响空中寻路的阻挡器。在这里，我们可以看到一个可能导致空中单位被困的阻挡器的例子。当两个或更多空中寻路阻挡器相邻放置时，通常会出现问题，形成空中单位被困的区域。

**图片B：** 一个简单的解决方法是避免使用这样的设计。只有当它们是地图设计的重要部分时，才使用空中阻挡器，而且只有当它们经过充分测试以确保没有意外行为时。

## 翻译 E:\SC2Code\blizzard-tutorials-chinese\docs\Classic_Tutorials\04_Misc\mastering-mapmaking.md.part-1.md

这就是全部内容了！希望这些提示能够帮助您制作尽可能有趣和平衡的地图。祝您在本赛季的TeamLiquid地图大赛中好运！如果您有任何问题或需要我们在下方评论区内提供其他帮助，请告诉我们。您也可能希望收藏此页面，因为它应该对您设计终极星际争霸 II 地图的探索有所帮助！

## 翻译 E:\SC2Code\blizzard-tutorials-chinese\docs\Classic_Tutorials\04_Misc\missile-movers.md.part-0.md

# 导弹移动

导弹移动系统采用视频编辑器的比喻。地图制作者可以将多达5个运动阶段依次链接在一起，通过混合进行过渡，在必要时可以添加额外的运动覆盖层到阶段顶部，以进一步定制它们的外观，类似于如何在视频流上叠加视频处理效果。

导弹通常用于配置基于导弹的攻击，但基础运动也可以用于在跳跃时驱动收割者的身体或在攻击时驱动脊刺爬行者的触手。



## 运动驱动器

每个运动阶段的核心是一个驱动器。有四种类型：

1. **引导** - 导弹在3D空间中跟随目标移动，就像标准制导导弹一样。
2. **弹道** - 导弹以抛物线轨迹飞行。

3. **抛物线** - 导致导弹采取固定的抛物线弧线，而不考虑其加速度和减速度。
4. **投掷** - 导弹沿着指定方向的任意线性路径行进。



## 运动覆盖层

覆盖层导致导弹以某种漂亮的方式沿着核心驱动路径移动。用户可以在同一驱动器上叠加多达两种不同的覆盖层，例如通过正弦波同时变化水平和垂直轴上的运动。

虽然它们会改变导弹在游戏中的实际位置，但实际上并不会改变它们下方的运动驱动器的路径。换句话说，具有正弦波运动覆盖层的制导导弹实际上有一个无形的制导路径，指导其到达目标，即使它看起来是以正弦波方式运动的。

有三种类型：

1. **波浪** - 使导弹在移动时来回摆动，呈正弦波形式。
2. **轨道** - 使导弹具有螺旋形运动，像螺旋桨一样。

3. **左轮** - 类似于轨道覆盖层，但轨道运动不总是朝着相同方向前进--它在运动轴上追踪在发射时生成的任意旋转。根据涉及的速度，这可能使导弹旋转经过目标，此时它会减速然后沿另一个方向旋转回去。



## 阶段过渡和混合

用户通过指定阶段的尾声来配置阶段的结束。尾声通过相对于源或相对于目标的“已移动距离”阈值来结束阶段。相对于源的尾声为正，相对于目标的尾声为负。

在数据中指定尾声时，必须指定“混合点”值和“停止点”值。如果这两个值相同，则一旦达到指定的尾声距离，导弹将立即切换到下一个阶段。如果这两个值不同，则运动阶段将在两个值之间混合。在混合处于激活状态时，两个阶段（当前阶段和下一个阶段）并行运行，并且它们的结果被混合在一起。一般来说，混合会导致更平滑的运动，尤其是当混合阶段的运动驱动器不同时。混合几乎总是必要的，以避免故障。



## 工作原理

与星际争霸II中的许多其他对象一样，导弹既有同步游戏部分又有异步角色部分。导弹每秒模拟其游戏状态32次，这是普通单位速率的两倍。与其他一切一样，它们在有足够时间绘制时绘制，这意味着它们可以在每次游戏循环之间绘制多次（如果游戏顺畅运行）到长时间内根本不绘制（在帧率低迫切的情况下）。导弹的游戏部分每个游戏循环模拟两次，然后将数据传输到导弹的角色侧，后者在手头的数据之间插值。在紧急帧率低迫切情况下，角色部分可能落后，此时用户会看到导弹跳跃。

由于游戏/角色分离，实际上导弹有两条飞行路径：游戏路径和角色路径。游戏路径从攻击者的原点到目标的原点。角色路径从发射附着点到着陆附着点。内部会发生一种叫做适应的过程，以确保用户在屏幕上看到的导弹跟踪基本的游戏路径，同时直接在发射和着陆附着点之间移动。

值得注意的是，运动覆盖层是同步的。这使它们能够更加戏剧化，而不会导致抽搐的运动。它们实际上会按比例减少底层驱动器运动，使得实际导弹速度（包括覆盖层）与用户指定的速度相匹配。



## 数据配置

### 相关目录

- *MoverData.xml* 用于确定导弹到达目标的路径。
- *EffectData.xml* 用于配置导弹的发射导弹效果，该效果将确定导弹的源和目标，并可选择用于导弹的移动器。

- *UnitData.xml* 为导弹分配单位，以便它可以在游戏世界中被视为可交互对象。
  
- *WeaponData.xml* 或 *AbilData.xml* 用于配置触发发射导弹效果的武器或能力。
- *ActorData.xml* 用于声明导弹的角色部分，并通过角色动作配置攻击的视觉和音频，包括选择导弹在其中移动的发射和目标附着点。

### 移动器数据编辑细节

为了最小化移动器数据输入，从一个运动阶段的数据自动传递到下一个阶段，除非在那里它是不相关的或被覆盖的。

用户以秒为单位输入时间数据，以度为单位输入角度数据。



## 详细的运动阶段

每个运动阶段都有适用于两种或两种以上阶段驱动器类型的一些通用字段，以及一系列字段，用于定制特定驱动器。它还具有一个用于变化运动覆盖层比例的小数组。

**驱动器** - 驱动整个阶段的运动类型：可调适应抛物线、弹道、引导或投掷。

**加速度** - 控制导弹加速的速度。可以是负值，以减速导弹。

**加速度范围** - 用于在基本加速度值上添加随机额外量的范围。

**速度**

阶段开始时导弹的速度。用户通常在第一个阶段上配置此值，因为在大多数情况下，导弹的实际速度在飞行时会自动传递到下一个阶段。（速度目前不会传递到弹道阶段，也不会传递到导弹的旋转方向不指向投掷方向的阶段中。）

该字段被弹道驱动器独特地解释为水平速度恒定。

**速度范围** - 用于在基本速度值上添加随机额外量的范围。

**最小速度** - 导弹在阶段中可能的最小速度。可用于确保减速不会完全停止导弹。
**最大速度** - 导弹在阶段中可能的最大速度。

## 翻译 E:\SC2Code\blizzard-tutorials-chinese\docs\Classic_Tutorials\04_Misc\missile-movers.md.part-1.md

**重力** - 导弹所经历的重力。通过调整这个数值，可以使某些类型的导弹看起来“漂浮”（低重力）或在运动中表现得更具侵略性（高重力）。

**清障** - 这是导弹能够接近地面的最短距离。对于可能在从上方或下方攻击目标时可能与悬崖边缘碰撞的导弹类型非常有用。最好避免在弹道导弹中使用此选项。

**清障前瞻** - 此数值决定了在寻找可能与地面碰撞的时候需要前瞻多远。单位前瞻得越远，就能越早开始调整路径，但会增加更多性能开销。

**忽略地形** - 此标记确定导弹是否使用清障和清障前瞻字段，还是直接穿过地形。

**转向类型**

决定导弹朝向目标转向的方式，以及是否关注由人类战斗机飞行员维持的上方概念。可以有三个值：

- *默认*。导弹像战斗机飞行员一样转向，更倾向于使用让其更快抵达目标的转向弧线，偏航或俯仰。这取决于导弹的偏航和俯仰速率，以及目标的相对位置。不同于战斗机飞行员，导弹不会自行调整，开心地保持颠倒状态。
- *恢复至上方*。导弹像真正的战斗机飞行员一样转向，旋转回来以使其上方轴向指向天空当它不在转向时。这种转向类型可能导致导弹执行著名的由著名的德国第一次世界大战王牌飞行员设计的“伊梅尔曼转弯”。

- *最佳*。导弹使用四元数到达最优三维旋转，以尽快到达目标。这可能导致看似不考虑物理规律的反直觉旋转。

**跟踪**

调整导弹在目标移动时的反应方式，可能导致导弹看起来表现异常的方式：

- *无“钩”*。默认设置。导臹角色追踪同步运动，除了在最终同步步骤中发生异步步骤外，该角色始终沿着前一个同步步骤的航线继续。当导弹略微偏离目标位置时，朝向其会使导弹在飞行的最后几秒内发生剧烈旋转。不使用此设置可能导致导弹在击中目标前突然转向，而在错误情况下设置此选项可能导致导弹看似擦肩而过目标。
- *线性*。导弹始终指向最初发射时建立的方向。激光常使用此选项，应该不会旋转。而导致其侧向滑动，就像第一部星际争霸中那样。

- *实际*。导弹在最终同步步骤中保持朝向相同的方向，就像无“钩”一样，但仍可以引导朝向精确的冲击点。

**到达测试类型**

控制导弹测试自身是否足够接近目标来被认为“到达”。可以有三个值：

- *自适应*。默认设置。该测试在目标点使用二维，对目标单位时自动切换到三维。
- *二维*。导弹使用二维测试，这意味着一个电磁脉冲导弹可能在目标上方远距离爆炸，但仍被认为已击中目标。

- *三维*。导弹查看真实的三维距离以确定到达。弹道导弹通常对点目标执行二维测试，但有时需要对急剧弧线进行三维测试。如果没有进行三维测试，弹道导弹会在目标远上方爆炸，因为它在XY平面上几乎正好在目标上方，尽管在三维空间中仍然很远。

- *从不*。导弹永远不会造成影响。这在需要将导弹投向特定方向，且导弹扫描周围目标行为时很有用。

**融合类型**

控制重叠阶段之间融合发生的方式。可以有三个值：

- *线性*。直线融合。
- *对数*。导致融合迅速开始但逐渐减弱。结果看起来曲线非常平滑。

- *指数*。导致融合缓慢开始但指数增长。

**结尾**

一个控制阶段何时以及如何结束的关键字段。它有4个与之关联的不同值：

- *融合位置*。决定给定阶段何时开始融合到下一个阶段。如果该数字等于停止位置，则意味着该阶段有一个硬过渡，没有融合。若该数字为正数，则表示当导弹距离发射导弹的单位已行进了该距离时开始融合。若为负数，则表示当导弹距离目标该距离时开始融合。在第一个阶段，可以为零，表示立即开始融合，或者如果是最后一个阶段的唯一条目，也可以为零。在这种情况下，意味着当导弹击中目标时，阶段结束。总体而言，这是沿着核心运动驱动器（例如，引导驱动器的核心引导路径）的距离，不考虑导弹由于覆盖物而行进的额外距离。
- *停止位置*。控制如果有融合时阶段实际结束。

- *融合范围*。添加到融合位置值的随机值的上限。这会导致导弹飞行路径在每次发射时产生变化。它不会导致融合位置超越停止位置。始终为正数。

- *停止范围*。添加到停止位置的随机值的上限。始终为正数。

**旋转启动角色类型**

配置导弹的视觉部分在发射时的旋转，使其表面旋转无需匹配游戏启动旋转。

- *无*。默认设置。导弹角色的发射旋转匹配导弹的游戏旋转。
- *发射到目标*。导臂在发射时直接面向其冲击点。如果导弹从车辆的侧部发射，可能不是一个很好的选择。

- *发射到目标二维*。类似于“发射到目标”，但导弹保持与地面平行。

- *提供*。表示导弹角色的发射旋转通过游戏代码内部供给给角色。由触手使用。

**旋转角色类型**

配置导弹在飞行时的旋转，使其表面旋转不一定与其实际行进路径相关。

- *无*。默认设置。导弹角色的旋转与导弹的游戏旋转相匹配。
- *对接*。导臂到达位置，并与确定其冲击点的角色的反向旋转位置相匹配。这种类型的角色旋转用于触手回归，以确保触手的“头部”精确匹配其后坐动画。如果导弹的冲击点具有0，-1，0的前向矢量，那么导弹在朝向目标移动时将具有0，1，0的前向矢量。这是因为导弹面对触手的所有者，即使触手似乎仍然面向其目标。

## 翻译 E:\SC2Code\blizzard-tutorials-chinese\docs\Classic_Tutorials\04_Misc\missile-movers.md.part-2.md

- **看向目标。** 使导弹直接对准其碰撞点，无论它如何移动。对于让空对地导弹似乎从战斗机机身上掉落，然后点火，同时仍然面向碰撞点很有用。

- **看向目标 2D。** 类似于看向目标，但导弹始终与地面平行。可以用于类似飞碟的弹道弹头，无论方向如何，始终表现为横向移动。

- **竖直。** 导弹始终保持直立（如人形行走），无论其当前方向如何。换言之，它既没有俯仰也没有滚转。

- **零滚动。** 导弹永远不会滚动，尽管可能具有不同的俯仰。

**超时**

导致一个阶段在经过一定时间后终止。如果该阶段具有混合，它会启动混合并导致混合的结束与正常情况下相隔相同距离（即，如果设置混合和停止时间分别为5和7，那么引发混合在2开始会导致停止在4结束）。

**叠加效果**

最多包含两个缩放值的数组。（系统不支持更多，因为如果叠加效果太多，单个叠加效果将很难分辨。）缩放控制叠加效果的大小。对于波浪叠加效果，缩放控制波浪的振幅，而对于轨道和回旋叠加效果，它控制了旋转半径。


## 详细的引导驱动

引导驱动支持典型的制导导弹。它使导弹追踪目标，无论其移动到哪里。大多数不是简单弹道抛射物的导弹都在某个地方具有引导驱动阶段。

**定位**

分别限制导弹在飞行员使用的三个传统旋转轴（偏航、俯仰和翻滚）上的旋转速度。这使用户可以配置导弹，就像配置战斗机一样，战斗机的翻滚速度比俯仰速度快，俯仰速度比偏航速度快。

偏航、俯仰和翻滚以度每秒表示。该字段还支持特殊的“最大”值，这意味着导弹可以在该轴上的每次导弹模拟中以最大可能的速率转向。当导弹足够靠近目标时，该值对于始终击中目标至关重要。

**定位范围** - 类似于定位，但每个值是添加到基本偏航、俯仰和翻滚值上的旋转速率偏差的上限。

**定位加速度** - 使用户能够加速各种转向速率。

**定位加速度范围** - 类似于定位范围，但用于转向加速度。

**飘移角度**

使导弹能够像赛车游戏中的汽车一样进行飘移，但是在3D空间中。如果导弹指向目标超过此角度，它将开始飘移。这会导致导弹沿着其原始路径滑行，边行进边减速。随着导弹运动速度变慢，其加速度增加（就像赛车在滑行得越慢时轮胎的抓地力增加一样），使导弹最终能够摆脱飘移状态。

**飘移减速**

导致飘移中的导弹离开飘移的速率。如果此值较高，则导弹会快速摆脱飘移状态。


## 详细的弹道驱动

弹道驱动使用户能够创建典型的类似弹射的抛射物。它们是通过水平速度或飞行时间来配置的，但不能同时使用。

**速度**

这是所有驾驶员使用的通用字段，但被弹道驱动器独特地解释为恒定的水平速度。这使用户可以在平衡目的上将弹道驱动器视为标准制导导弹。这也使得不可能创建目标距离、发射角度和发射速度的无效组合。

**飞行时间**

控制抛射物到达目标所需的时间，无论距离如何。使用户能够安排弹道抛射物到达时间，并且使得不可能创建无效的弹道导弹配置。

**结尾高度**

类似于标准结尾，但按百分比计算，并与海拔相关。正值表示在飞行抛物线的上升阶段上，负值表示在下降阶段。例如，数值0.9表示在上升阶段距离顶点90%，而-0.9表示在下降阶段距离顶点90%。


## 详细的抛物线驱动

抛物线驱动最适用于像收割者（专为其开发的单位）这类跳跃型行为。它允许在整个抛物线运动速度上进行精确控制，而不会使抛物线弧线在任何方面变形。

**垂直抛物线**

启用时，确保导弹始终平行于地面，这使得类似收割者的单位在整个飞行路径上始终保持直立。如果未设置此标志，则抛物线会控制导弹的前进矢量，使其在导弹上下飞行轨迹上向上和向下俯仰（例如，足球的鼻尖在飞行时首先向上然后向下）。

**抛物线间隙**

指定移动器在发射点或目标点中较高者之上创建多少飞行高度（即，额外的高度）。这是一个变化器，因此可以是基础加随机范围，以提供视觉差异。

**抛物线距离**

这是一个数字数组，指定4个抛物线“热点”的长度。

- *发射.* 这是抛物线的第一部分，通常表示某种起飞。

- *顶点之前.* 顶点在抛物线前沿的距离。用于开始减速以使轨迹略升高。

- *顶点之后.* 离顶点在抛物线后沿的距离。用于减少上升的减速度，甚至开始从提升中加速。

- *降落.* 在最终着陆点之前的距离。通常表示某种着陆。

**抛物线加速**

这是一个数字数组，指定抛物线不同部分的加速度。不同部分包括：

- *发射.* 抛物线的第一部分。
- *上升.* 在发射点和顶点之间。

- *顶点.* 抛物线的“凸点”。

- *下降.* 在发射点和着陆点之间。

- *降落.* 在最终着陆前的距离。

如果要使用减速使导弹看起来“提升”得更逼真，通常最好具有一个“顶点之前”的值比“顶点之后”的值更长。

## 翻译 E:\SC2Code\blizzard-tutorials-chinese\docs\Classic_Tutorials\04_Misc\missile-movers.md.part-3.md

## 详细介绍投掷驱动器

使导弹沿着任意线性路径移动。虽然看似用途有限，但实际上这是从视觉冲击力角度而言最灵活且强大的驱动器。将其与混合物相结合，并在同时发射的导弹组中进行变化，投掷驱动器可以创造出令人惊叹的独特视觉图案。

**投掷旋转类型**

- *无。* 默认值。如果是第一阶段，导弹沿投掷方向前进，但在其他情况下将继续沿当前方向前进，因为投掷可以改变导弹的方向而不影响其旋转。

- *发射器正向* 。使导弹在本阶段开始时朝向发射单元或发射单元的炮塔（如果有）。仅在第一阶段有用。
- *瞄准目标* 。导臹始终直接对准其撞击点。

- *瞄准目标2D* 。类似于瞄准目标，但导弹始终与地面平行。

- *向前投掷* 。导弹面向投掷方向。

- *向量化* 。允许用户在本地坐标中配置任意面朝方向。用于导臹从发射单元以一种夸张的“休眠”姿势抛出，然后激活（在此情况下，导弹指向其他地方是传达视觉信息的原因）。例如，投掷可用于像投放炸弹一样释放导弹，而向量值可用于使导弹在下落到点火高度时始终指向正前方。

**投掷向量**

投掷的本地坐标。它们不需要被规范化。

**投掷波段偏航**

允许用户在偏航平面上配置投掷方差，作为相对于核心投掷轴的偏差。

- *正向最大* 。控制偏航方差在正向（顺时针）方向的外部偏航限制。实际上可以是负值，用于非对称方差。
- *负向最大* 。可选。控制偏航方差在负向（逆时针）方向的外部偏航限制。实际上可以是正值，用于非对称方差。

- *正向最小* 。可选，但如果使用需要配置负向最大和负向最小。可用于打开偏航带中的间隙，以便导弹指挥左右两侧飞行，而不是在中间飞行。

- *负向最小* 。可选，但如果使用需要配置负向最大和正向最小。类似于正向最小，但是在负方向。

换句话说，用户可以指定一段投掷弧，或者在弧度偏向右侧或左侧，他可以防止导弹从弧中的间隙中发射出去，从而不会穿过袭击飞船的机身。这些数字还使得更容易创建：A）海星式的突发图案和B）夸张的“鞭击”式攻击，导臹在击中目标之前朝特定方向突出。

**投掷波段俯仰**

类似于投掷波段偏航，但用于俯仰。当使用了所有四个偏航和俯仰最小值时，这意味着导弹会在正方形环中脱颖而出，而不是横跨整个正方形区域。正如上文所述，这对于创建某些喷射导弹图案是有用的。

**向前投掷**

在使用向量旋转类型时，本地坐标空间中配置任意面向的向量。



## 详细介绍叠加

与阶段不同，叠加应用于导弹的整个飞行路径。用户可以在给定导弹上有最多两个同时叠加，并且每个叠加对最终导弹位置有相等的贡献。

叠加具有一个规模概念，即它们从核心驱动器飞行路径偏离的距离。规模在飞行路径的两端都为零，但可以在飞行中间每个阶段基础上变化。叠加系统自动使用三次样条曲线平滑地混合规模值，导弹在移动时在其中点实现给定阶段的规模。

由于叠加导致导弹额外飞行的距离不影响阶段结束；这完全受核心驱动器运动的控制（这种额外距离很难准确预测，并且实际上显着改变了导弹阶段更替的方式，这是过于变化的）。

**类型**

叠加的类型，是Wave、Orbit还是Revolver。

**极性**

允许用户控制叠加运动的方向。对于Wave叠加，这控制第一个“隆起”的方向，是正方向还是负方向。对于Orbit叠加，它控制轨道是顺时针运动（正方向）还是逆时针运动（负方向）。当尝试协调一对导弹的组合外观时，控制这些是有用的。极性支持多个值：

- *正向*。叠加向正方向移动。
- *负向*。叠加向负方向移动。

- 随机。叠加有50%的机会朝着正方向或负方向移动。

- *交替*。叠加根据不断前进的滚动指数决定方向。指数每当攻击单元执行攻击或操作时递增，因此可用于定期变化，形成条纹状模式。

**极性驱动器**

指定正在使用的滚动指数或执行指数，以驱动交替类型的极性。字符串“::RollingIndex”指定叠加的极性由滚动指数交替，而相关效果ID指定它由在给定效果树中连续执行的每次效果交替。指定效果交替极性在给定攻击中交替极性。

**轴**

本地坐标中控制叠加运动应用的轴线。对于Wave叠加，这控制正弦波的方向。对于Orbit和Revolver叠加，它控制旋转轴。在大多数情况下，这将是0,-1,0（向前）或0,1,0（向后）。但是，通过变化可以创建不寻常和倾斜的叠加（例如，为轨道创建横向旋转轴会形成垂直环面飞行图案）。

**波长**

指定Wave叠加完成整个360度正弦波的距离，或者指定Orbit叠加完成整个旋转的距离。

基础。控制最小波长距离。

范围。将添加到基础距离的随机值的外部边界。这导致正弦波和轨道明显变化，通常会产生更接近真实世界外观的效果。

**波长更改概率**

在每一半波（即在每个波“隆起”后）或一半轨道之后重新计算波长的百分比机会。


## 详细介绍Revolver叠加

Revolver类似于Orbit，但不总是朝着相同方向移动。它们意在模拟罗宇星飞行模式中的“醉醺醺导弹”，其导弹以懒散的、缓慢变化方向和速度的旋转轨道运动。

## 翻译 E:\SC2Code\blizzard-tutorials-chinese\docs\Classic_Tutorials\04_Misc\missile-movers.md.part-4.md

- **左轮速度** - 指定了旋转速度的旋转速度。
- **左轮速度范围** - 用于在基础左轮速度值上额外随机添加的范围。
- **左轮最大速度** - 指定了旋转速度的最大旋转速度。
- **左轮最大速度范围** - 用于在基础左轮最大速度值上额外随机添加的范围。
- **左轮加速度** - 指定了旋转加速度的旋转加速度。
- **左轮加速度范围** - 用于在基础左轮加速度值上额外随机添加的范围。

## 支持系统

### 预览器

对于轻松和清晰地观察导弹发射和影响点的模型连接点位置是必要的。

### 特效

几种特效对于实际发射导弹是必要的：
- 发射导弹特效。启动导弹的特效，因此对于所有导弹的创建是必要的。有用的字段包括：
   - 影响范围。导弹目标触发影响的距离。启用基于邻近性的引爆。
   - 重定向过滤器。确定导弹认为哪种类型的目标是攻击的对象，如果其目标在到达之前死亡。
   - 重定向范围。在此范围内的单位是可以重新定向目标的候选者。
   - 重定向标记。位于标志字段中。表示此导弹可以重新定向。

发射导弹特效还允许用户根据各种条件配置导弹使用的一组动态移动器：
   - 移动器 - 链接。导弹在发射时可以选择的移动器列表。
   - 移动器 - 范围小于或等于。与移动器列表相对应的列表。发射器与目标之间的距离必须小于或等于此值，以便相应的移动器成为选择的候选者。
   - 移动器滚动模式。可以是条纹或弹跳。条纹选择类似12341234的模式的移动器，而弹跳选择类似1234321234的模式的移动器。
   - 移动器滚动跃点。指示每次新攻击发生时跳跃多少移动器数组项目。
   - 移动器执行模式。类似于移动器滚动模式，但针对父级发射导弹特效的执行。
   - 移动器执行跃点。类似于移动器滚动跃点，但针对父级发射导弹特效的执行。
   - 移动器执行范围。控制单个执行突发中的条纹或弹跳数量。

例如，滚动跳跃为4，执行跳跃为1，执行范围为4，移动器执行模式为弹跳，具有7次攻击突发将产生以下模式：
0.1.2.3.2.1.0 4.5.6.7.6.5.4 8.9.10.11.10.9.8

另一个相关的是返回移动器字段，用于触手。返回移动器是通过触手与其源的距离来选择的。

- *创建持久特效*。这对于使导弹的突发传播到用户控制的时间表上的特定点是必要的。

### 附加方法

控制游戏选择从哪些附加点启动和影响的附加点。在控制攻击的Action actor中指定要使用的附加方法。

### 导弹演员

演员系统的这一部分使数据能够将动画与阶段的开始和结束相关联。还可以根据从这些点经过的时间来触发动画。

## 提示和技巧

这一部分包含有关实现特定视觉效果或避免已知问题的有用建议。

**给导弹短暂的“充能”动画**

例如，大和炮似乎在发射前聚集能量。像这样做的最佳方法是给引导导弹阶段0速度和加速度，但给出所需动画持续时间的超时。

**防止导弹永远循环**

当一个导弹没有足够的转向率永远无法到达静态目标时会发生这种情况。如果目标在最后一刻移动，然后要么死亡或停止移动，使其刚好在导弹能够转向它的能力范围内，这种情况可能会发生。避免这种情况的方法是给导弹一个“终结者阶段”，这是一个带有最大定向的引导阶段。这使导弹能够立即转向，从而导致无法逃脱。

**强制斜滑导弹到达目标**

没有使用这些技术，有远见的玩家可以永远通过在导弹即将击中他们的单位前进行“躲闪”来领导斜滑导弹。处理该问题的最直接方法是给斜滑运动阶段设置一个超时时间。在执行此操作时，重要的是要记住下一个阶段需要陡峭的斜滑减速，但是没有斜滑角度。这使导弹可以快速摆脱滑动，但不会突然。另一个方法是给斜滑导弹一个正面片尾。这样可以在导弹移动了特定距离后，以新的动作方式退出滑行。

**避免发射单位被击毙后导弹悬停**

如果一个单位配置为使用持续性效果来发射一串或一波导弹，那么该持久效果必须标记为通道效果。这确保单位不会在播放死亡模型时意外尝试创建导弹，因为这可能导致导弹得到空的配置数据。

**消除旋转员产生的向后查看循环**

如果一个导弹的旋转够急，并且它试图慢慢穿过转弯内部，就会引起回环。旋转器总是试图围绕飞行路径旋转，因此急转弯实际上会导致导弹位置看起来向后移动，因为快速旋转的驱动器导致导弹的最终叠加位置围绕急转弯的焦点旋转。解决此问题的方法是增加旋转员的旋转速度，使其快速跳过在内侧转弯点的位置。另外，可以避免急转弯或减小叠加的比例，以减少此副作用的显著程度。通常只需在急转弯点上简单减小叠加比例，对整体视觉影响很小。

**防止叠加导弹跳过目标**

当一个叠加导弹配置为使用无钩子演员跟踪（默认情况下），这会导致导弹在接近目标时锁定最终航线。问题是叠加可以导致导弹在发生这种情况时朝向错误方向，导致导弹的视觉表示飞向远方。解决方案是简单地设置导弹使用真实的演员跟踪，因为它存在是为了处理这种情况。

## 翻译 E:\SC2Code\blizzard-tutorials-chinese\docs\Classic_Tutorials\04_Misc\publishing.md

# 发布

新的 Battle.net 发布系统允许您直接将地图和模组发布到 Battle.net 服务，这些内容将永久存储在线并供其他玩家在游戏中使用。如果您想与其他玩家在线玩您的地图，或者希望其他人能够在他们的地图中使用您的模组，那么首先必须将其发布到 Battle.net。



## 发布您的地图或模组

![img](http://media.blizzard.com/sc2/game/maps-and-mods/tutorials/publishing/en-us/publishing-window.png)

发布是通过编辑器完成的。首先，打开您要发布的地图或模组，然后从任何模块窗口中使用“文件 > 发布”命令。这将打开一个对话框，用于配置发布的详细信息，如下：

登录 - 单击左侧面板中的“登录”按钮，使用您的 Battle.net 帐户和星际争霸 II 角色登录到 Battle.net。

- 发布名称 - 您的地图或模组的发布名称在 Battle.net 上唯一标识它，此名称不能已被其他用户发布的任何现有地图或模组使用。默认情况下，这将是通过“地图 > 地图信息”定义的名称或在“总览管理器”内的“文档信息”组件中定义的名称。

如果此名称已被使用，或者您希望使用不同的名称进行发布，请单击“更改名称”按钮输入新名称。您还可以为游戏支持的每种语言指定不同的名称，但这不是必需的。请注意，每种语言中的名称必须在所有语言中都是唯一的。

- 修订版 - 每个发布的文件都有与之关联的版本号。当重新发布已经发布的地图或模组（即使用相同的发布名称）时，此版本号将自动递增。您可以选择将其递增为次要修订版，通常表示只进行了小的调整或修复，或作为主要修订版，表示进行了重大更改。

- 发布（仅适用于地图）- 当您选择“私人发布”时，地图将不会对其他玩家在游戏中可见，只有您才能创建使用此地图的游戏，之后您可以邀请其他玩家加入游戏。这是在发布到所有人之前与在线朋友测试地图的一个好方法。当您选择“公共发布”时，地图将对整个星际争霸 II 社区可见，并任何人都可以创建游戏使用您的地图。

- 作者 - 作者名称将自动显示为您的星际争霸 II 角色，或者您可以选择“显示真实姓名”以显示您的真实姓名。

- 编辑锁定（仅适用于地图）- 在首次发布地图之前，您需要选择它是锁定的还是未锁定的。

> 注意：一旦发布，锁定的地图将无法被任何人（包括您自己）在编辑器中打开。如果要防止其他人使用编辑器查看或复制您的地图，请选择此选项。但请确保保留地图的本地副本，以便将来可以在编辑器中进行修改。

> 注意：未锁定的地图可以被其他用户在编辑器中打开。如果您想与其他地图制作者分享地图，则选择此选项。这是贡献给地图制作社区的好方法，但请记住其他人可以复制并发布地图。

- 锁定（仅限所有者使用）（仅适用于模组）- 与地图类似，模组也必须是锁定的或未锁定的。

> 锁定的模组不会对其他用户可见，只有您才能在您制作的地图中包含它。

> 未锁定的模组可以被其他用户在他们的地图中使用，与其他地图制作者分享您的模组可以极大地惠及地图制作社区。但与地图一样，请记併其他人也可能复制未锁定的模组。

- 存储要求 - Battle.net 对每个用户发布文件有以下限制：最多可发布十个个人地图或模组（在对话框中表示为“槽”），总大小不超过 50 MB，并且单个地图或模组的使用量不超过 10 MB。

如果发布地图或模组还有其他要求，这些要求将会在左侧列出。一切都配置完成后，您可以接受对话框，文件将被上传至 Battle.net。上传进度可以在自动显示的“文件传输”窗口中查看。上传完成后，您可以进入游戏并玩您的地图！



## 管理您的已发布文件

![img](http://media.blizzard.com/sc2/game/maps-and-mods/tutorials/publishing/en-us/manage-published-window.png)

当您将一个或多个文件发布到 Battle.net 后，您可以在任何编辑器模块中使用“文件 > 管理已发布”命令打开一个窗口，以查看您当前已发布的所有文件。您可以从此窗口登录到 Battle.net，必须登录才能查看您的文件。

- 使用的存储空间 - 显示您的帐户当前正在使用的发布槽和存储空间。

- 文件列表 - 列出已发布到您的帐户的所有地图和模组，并显示有关文件状态的基本详细信息。选择一个文件将在右侧显示附加信息和预览图片。

- 从帐户中删除 - 此按钮将从您的帐户中删除所选的地图或模组，并释放一个存储槽。这意味着它将不再在 Battle.net 服务中可用。请注意，对于模组，任何包含该模组的现有发布地图仍然可以访问旧模组数据，但新创建的地图将无法使用它。

- 在编辑器中打开 - 此按钮将在编辑器中打开地图或模组，以便进行修改并保存到新的本地文件。这只适用于未锁定的地图或模组。

## 翻译 E:\SC2Code\blizzard-tutorials-chinese\docs\Data_Primer\01_Simple_Firebolt\01_Firebolt.md.part-0.md

---
title: 数据基础知识1-简单的火雷霆术
authors:
    - duckies
proofreading/readability edits:
    - zerakim
---

# 能力创建基础知识1：带有数据收集的简单火雷霆术

!!! info
    以下教程旨在面向完全初学者，假定编辑器的能力有限或几乎没有。

在本教程中，我们将逐步介绍制作一个简单的弹道攻击能力的所有步骤 - 我们将向目标敌人发射导弹，它在命中时造成伤害。与星际争霸2中大多数默认基于弹道的武器相同。

## 最终结果

![](Assets/1SimpleFirebolt.gif)

## 简介

!!! warning
    在继续之前，请确保您的编辑器设置与以下设置匹配：

**数据编辑器设置**

![](Assets/0_preferences.png)


**文档依赖项**

![](Assets/0_dependency.png)

## 步骤0：准备/数据收集
作为编辑器的新手，我们将不是从零开始创建事物，而是复制/复制现有内容，直到我们对自己的实验感到自信。为了帮助我们正确复制和组织事物，我们将使用5.0中引入的新功能 - 数据收集！

![](Assets/1-0_DataCollectionFind.png)

打开数据编辑器，点击小加号`+`，然后转到`编辑游戏数据` -> `数据收集`。

让我们创建一个名为“**火法师 - 火雷霆术**”的数据收集，然后点击“建议”按钮，以便编辑器自动为我们命名ID。

![](Assets/0-1_FirstCollectionCreate.png)

### 数据收集 - 是什么意思

在处理数据收集时有一些微妙之处。其中一个想法是为我们提供能够将新创建的数据分组到收集中的能力，使得我们创建的数据自动放入一个特殊文件夹以便组织和访问。

要将新创建的数据识别为数据收集的一部分 - 该数据的ID必须以数据收集的名称作为前缀。好的，我们该怎么做呢？

首先，我们需要了解“ID”是什么。编辑器中的所有数据字段都有名称和ID。名称对其没有限制，用于使编辑器可读，而ID值是后端代码中使用的内容。它们有一些规则，例如不能有空格并且必须是唯一的。

通常，当我们创建一个新元素时，我们会为其提供一个名称，然后建议为其生成ID。在上面的示例中，“火法师 - 火雷霆术”建议的ID是“FireMageFirebolt”。

因此，当创建新数据时，知道我们要利用数据收集，我们会将我们的数据命名为以下方式 - “**数据收集名称 @ 数据元素名称**”（或者对于我们的示例，“**火法师 - 火雷霆术 @ DataElement**”），然后单击建议并完成。然而，当编辑器看到元素的ID中的收集前缀并将其识别为数据收集的部分时 - 它将还会为该元素添加自己的前缀。因此，我们将得到以下结果：

  “Fire Mage – Firebolt @ Fire Mage – Firebolt @ DataElement”

|Fire Mage – Firebolt @|Fire Mage – Firebolt @|DataElement|
| ------------- | ------------- |------------- |
|编辑器自动生成的数据收集的前缀|我们在为其命名以便包含在数据收集中时添加的前缀|数据元素名称|

嘛... 由于编辑器会添加自己的前缀，那么我们添加的就不再必要了。难道我们只是再次打开每个元素并删除我们的前缀吗？

这是与数据收集相关的唯一不便之处。当我们命名事物时，建议元素ID后，我们将不得不手动删除我们的前缀。

![](Assets/1-0_NamingRouteneExample.gif)

或者作为替代，我们也可以直接将数据收集的ID复制粘贴到元素的ID中。使用您喜欢的任何方法。

---

另外，请打开我们将要使用的其余标签：

- `编辑游戏数据` -> `能力`
- `编辑游戏数据` -> `效果`
- `编辑游戏数据` -> `单位`
- `编辑角色数据` -> `角色`
- `编辑艺术和声音数据` -> `按钮`

## 步骤1：导弹

如果我们要发射抛射物 - 那么我们首先需要制作一个抛射物。或者复制一个现有的并更改其模型以符合要求。我选择复制Karass的武器的抛射物。前往单位数据选项卡，在“武器 - Karass”单位中找到，右键单击，复制单位。标记其单位和角色，这两者总是相互关联的，由于我们将修改视觉效果 - 还需标记用于复制的模型。

![](Assets/1-1_WeaponDuplication.png)

现在最重要的部分开始了 - 明确命名事物，以免以后变得令人头痛。将单位重命名为“projectile”，添加数据收集的前缀（FireMageFirebolt@）到单位的ID，将角色重命名为“Missile”，将数据收集的前缀添加到角色的ID，将模型重命名为“Model”，将数据收集的前缀添加到模型的ID。我再次强调，每次制作新的数据元素时 - 我们将添加数据收集的ID。这可能需要一些时间适应。

![](Assets/1-1_MissileCreation1.png)
*单位*

![](Assets/1-1_MissileCreation2.png)
*角色*

![](Assets/1-1_MissileCreation3.png)
*模型*

---

!!! warning
    命名模式非常重要 - 到达此步骤后，您应该看到的结果如下图所示。

    ![](Assets/1-1_NamingReminder.png)

如果我们点击该模型，我们将能够查看模型数据。在其中双击“**模型**”字段，点击“**浏览**”。让我们选择`FrenzyMissile.m3`作为我们的导弹模型。这是我们需要在此更改的所有内容。

![](Assets/1-1_MissileModelSelect.png)

## 步骤2：能力

为了制作我们的简单火雷霆术能力，我们需要以下数据：

1. **能力** - 包含有关我们法术的一般信息的数据项（例如范围、成本、杂项属性如施法时间、有关能力目标的信息、自动施法属性等）。  
1. **按钮** - 包含图标、工具提示、可见于玩家的法术名称以及我们在单位命令卡上看到的相关信息的数据项。  
1. **效果** - 构成能力逻辑的数据条目。  
1. **角色** - 创建视觉和声音效果以及通常控制屏幕显示的数据条目。

### 准备能力和按钮

让我们逐步进行。首先 - 在能力数据选项卡中，创建一个新的“**效果 - 目标**”类型的能力。由于数据收集处理命名，我们可以将此条目简单称为“能力”。目前我们无法做太多。



## 翻译 E:\SC2Code\blizzard-tutorials-chinese\docs\Data_Primer\01_Simple_Firebolt\01_Firebolt.md.part-1.md

![](Assets/1-2_AbilityNaming.png)

接下来让我们制作一个按钮！在按钮数据选项卡中创建一个按钮，将其热键设为 Q，并将图像设置为您认为最适合的图标。我觉得 `ui_tipicon_campaign_zerus03-yagdrafireball.dds` 对于这个能力来说是一个不错的图标选择。

![](Assets/1-2_AbilityButtonNaming.png)

按钮创建完成后，让我们将其添加到该能力的命令列表中。返回到该能力，在其“**Commands+**”字段中，双击它，并将其设置为“**Execute**”命令的默认按钮。

![](Assets/1-2_AbilityCommands.png)

---

### 将能力添加到单位中

尽管现在我们的能力没有任何作用，但仍然可以将其添加到一个单位中。我们可以通过这种方式来检查在开发的不同阶段它是如何工作的。我们可以使用 Karass（星际争霸II：自由之翼中的高阶圣堂武士英雄）作为我们的施法者。

进入单位的“**Abilities+**”字段，并通过点击小绿色`+`按钮将我们的能力加入其中。

![](Assets/2-2_AddAbilityToUnitAbilities.png)

之后进入单位的“**Command Card+**”字段，
1. 点击您希望放置按钮的按钮插槽
1. 点击小绿色`+`按钮以添加一个按钮
1. 选择我们之前创建的按钮
1. 在“**Command Type**”中选择“Ability Command”
1. 在“**Ability**”中选择我们的能力。单位拥有的能力通常位于列表顶部，因此您无需搜索它们。

|![](Assets/2-2_AddAbilityToCC1.png)|![](Assets/2-2_AddAbilityToCC2.png)|![](Assets/2-2_AddAbilityToCC3.png)|
| ------------- | ------------- |------------- |

---

## 步骤 2-1：效果

好了——是时候构建驱动该能力的逻辑了。

这个能力有两个作用：
1. 从施法者发射导弹到目标。
1. 撞击目标时对其造成伤害。

首先，我们需要发射一个导弹。前往效果数据选项卡，创建一个新的“**Launch Missile**”效果。

这个效果正如其名，使用我们提供的设置来发射导弹。

目前我们只需设置应该发射哪种导弹。找到“**Ammo Unit**”字段，并将其设置为我们在第一步中复制的弹药单位。

|![](Assets/2-3_LaunchMissileNaming.png)|![](Assets/2-3_LaunchMissileAmmoUnit.png)|
| ------------- | ------------- |

为了让导弹在撞击时造成伤害，我们还需要一个伤害效果，让我们开始吧。

创建一个新的“**Damage**”效果。

将“**Amount**”字段设置为 20，并将“**Death**”字段设置为“**Fire**”。这样，如果此效果杀死敌人-它将使被击杀的单位播放火焰死亡动画（如果有的话）。

此外，找到“**Response Flags+**”字段，并勾选“**Acquire**”和“**Flee**”。这将导致敌人对这种伤害效果做出反应，否则他们会像大木头一样被打击而不动。

|![](Assets/2-3_DamageNaming.png)|![](Assets/2-3_DamageEffectFields.png)|![](Assets/2-3_DamageResponseFlags.png)|
| ------------- | ------------- |------------- |

为使发射的导弹在撞击时造成伤害，将我们的伤害效果放入发射导弹效果的“**Impact Effect**”字段中。

![](Assets/2-3_ImpactEffectLinking.png)

现在我们已经制作了我们需要的两个效果，我们可以将我们的发射导弹效果添加到该能力中。因此，前往能力数据，找到“**Effect+**”字段，并将我们的发射导弹效果放在那里。我们还需要在“**Range+**”字段中指定该能力的射程。让我们将其设置为 10。

![](Assets/2-3_AbilityEffectLinking.png)

---

## 步骤 2-2：演员

如果现在我们测试该能力，它会执行游戏逻辑——导弹从施法者飞向目标并在撞击时造成 20 点伤害。但它会从施法者的脚下飞出，落在敌人的脚下，没有任何音效、爆炸或其他视觉效果。

我们将利用演员将我们的逻辑包装成漂亮的视觉效果。

|![](Assets/2-4_ActorlessLogic.gif)*游戏逻辑*|![](Assets/2-4_ActorsAdded.gif)*游戏逻辑 + 演员*|
| ------------- | ------------- |


#### 射程演员（次要修饰，不必要但好看）
首先，由于我们刚刚设置了能力的射程，让我们添加一个射程演员。该演员负责在我们目标能力或在单位上移动光标时创建射程指示器。

我们可以复制一个或从头开始创建一个。射程演员没有太多内容，因此让我们直接创建一个。

我们将创建“**Range**”演员，并将其父级设置为“**Range Abil**”。这样做后，编辑器将为我们提供令牌字段（屏幕底部），在其中我们可以放置我们的能力，编辑器在一定程度上将调整演员的数据以适用于所指定的能力。

|![](Assets/2-4-1_RangeActorNaming.png)|![](Assets/2-4-1_RangeActorToken.png)|
| ------------- | ------------- |

在填写能力令牌后，找到“**Events+**”字段，右键单击，悬停在“**Reset To Parent Value**”上，并选择“**Range Abil**”。这样将重置演员的事件，但同时也会调整它们使其适用于我们在令牌能力字段中指定的能力。

![](Assets/2-4-1_RangeActorEventsReset.png)



#### 攻击演员

现在让我们让我们的导弹行为就像星际争霸II大多数其他导弹一样-从单位的武器射向目标的身体。为此，我们将需要一个“**Action**”演员。

!!! 信息
    动作演员控制所有与视觉/声音相关的事物，这些事物在常规攻击期间发生。在简单的层面上，它是用来确保攻击正确发射和撞击，考虑到在目标具有护盾时显示攻击击中护盾，而不是直接击中单位。

让我们复制“Karass Attack”，它已经有一个听起来像法术发射的不错的音效。像往常一样，当复制时，我们会标记我们想要更改的东西（除了那些我们已经制作的，比如导弹）。

复制完成后，注意底部的令牌字段。用我们的效果替换“**Impact Effect**”和“**Launch Effect**”。

## 翻译 E:\SC2Code\blizzard-tutorials-chinese\docs\Data_Primer\01_Simple_Firebolt\01_Firebolt.md.part-2.md

|![](Assets/2-4-2_AttackActionDuplication.png)|![](Assets/2-4-2_AttackActionTokens.png)|
| ------------- | ------------- |

!!! info
    在填充令牌时，演员的“**事件+**”字段将自动调整到它们（不像以前我们在范围演员填充时那样），因此无需重置“**事件+**”字段。

在攻击演员中找到“**导弹**”字段，并用我们的投射物替换它。

![](Assets/2-4-2_AttackActionMissileSet.png)

我们现在已经完成了演员字段，让我们改变我们复制的模型。转到模型数据中，将“**模型**”字段更改为某种爆炸效果。
`MiraHorner_Wraith_Coop_Missile_Impact.m3` 效果很好。

现在我们的导弹应该能够如预期地运作并发出声音。但是使用该技能的单位会怎么样？

#### 动画/演员事件
![](Assets/2-4-3_IdleCasting.gif)


如果我们测试文档，我们会发现尽管武器从施法者的手中发射并击中目标的身体，就像所有其他抛射物一样—卡拉斯一直站在原地，而咒语却在进行。我们需要给卡拉斯的演员一个指示——如果卡拉斯施放我们的咒语——则播放特定动画。

通常情况下，我们会进入单位演员的“**事件+**”字段并将新事件添加到单位默认事件的大列表中。但是还有另一种更有组织的方法。我们创建一个类型为“**事件宏**”的演员，向其中添加我们的事件，然后将该宏添加到单位演员使用的宏列表中。这样，我们就无需浏览其他事件，而且我们始终知道在哪里查找/编辑特定能力的演员消息。


创建一个类型为“**事件宏**”的演员。

![](Assets/2-4-3_AnimationMacroNaming.png)

打开它的“**事件+**”字段并添加以下内容：

对于事件

|||
| ------------- | ------------- |
|**消息类型：**|**能力**|
|**来源名称：**|选择我们的能力|
|**子名称：**|**源开始施法**|


对于消息

|||
| ------------- | ------------- |
|**消息类型：**|**播放动画**|
|**名称：**|任何您想要的名称，如果您尚未使用过此字段，请手动添加动画名称。这些可以是任何值，因此以对您有用的方式命名它们。我通常将我的Q咒语的动画命名为“SpellQ”|
|**动画属性：**|**咒语**，**A**|


|![](Assets/2-4-3_AnimationMacroEventsEvent.png)|![](Assets/2-4-3_AnimationMacroEventsAction.png)|
| ------------- | ------------- |

然后将“**时间类型**”设置为“**时间比例**”，将“**时间变体**”设置为“1.0”。

这将使动画以您在模型查看器中看到的速度播放（您可以在教程末尾找到有关此内容的信息）。

![](Assets/2-4-3_AnimationMacroEventsAnimTimes.png)


接下来，转到单位演员，找到名为“**宏+**”的字段，并将我们的宏添加到该列表中。

![](Assets/2-4-3_AnimationMacroUnitAddition.png)


---


## 步骤 2-3：其他内容

### 按钮工具提示

让我们为我们的按钮添加一个适当的工具提示。返回到我们在按钮数据选项卡中创建的按钮。我们将添加一个关于“使用火焰箭击中目标，造成20点伤害”的一般描述。

![](Assets/2-4-4_ButtonTooltipText.png)

但是等一下！我们可以直接在工具提示中引用各种数据字段，因此让我们直接从伤害效果中提取伤害值。

请注意，文本窗口下有各种不同的按钮。点击“**选择字段...**”。对于“**类型**”，选择“**效果**”，找到我们的伤害效果，选择伤害值，然后点击“确定”。现在我们的引用将显示在“**数据引用**”下方。可以通过点击“**插入：**”按钮在文本中的任何位置插入它。

|![](Assets/2-4-4_ButtonTooltipReferenceFinish.png)|![](Assets/2-4-4_ButtonTooltipReferenceEffect.png)|
| ------------- | ------------- |

---

#### 最后的润色

一切现在应该都运作正常。但是如果我们仔细观察，会发现动画与能力不太同步——导弹飞出得太早了。让我们通过简单地在能力中将“**施法开始时间**”设置为0.5来延迟第一个效果的执行。（或者我们也可以通过让动画快进来解决，但这是另一天的信息）。

#### 总结

我们的数据工作完成了。让我们返回到数据集合选项卡，选择我们的数据集合，然后单击“**数据集合**” -> “**自动填充数据集合**”。通过这种方式，我们可以查看我们制作的所有元素，并且如果需要，复制所有元素。更改数据集合的名称还将重命名其所有元素。

|![](Assets/2-5_CollectionAutofill.png)|![](Assets/2-5_CollectionSummary.png)|
| ------------- | ------------- |

!!! warning
    重命名数据集合时，文本中的引用不会更新，因此如果我们重命名我们的数据集合，我们将不得不手动更新所有文本引用，例如我们在按钮工具提示中引用伤害效果的地方。


|![brrrrrrrrrrr](Assets/1SimpleFirebolt.gif)|
| ------------- | 
|*火焰箭完成！*|

# 奖励 1：制作一个更酷的火焰箭（技能级别——基本）

现在我们有了基本的发射-命中能力，让我们让它变得更有趣。我们不再发射一个，而是要使我们的能力连续发射15枚导弹。

但首先，我们需要做出决定。我们是继续更改我们的能力，还是制作一个新技能？

也许我们将来会想使用原始能力，或将其保留作为其他简单抛射物技能的模板。

因此，让我们将我们更酷的火焰箭制作为一个新技能。

打造更酷火焰箭的第一步是重复我们为简单火焰箭所做的步骤，因此让我们复制我们以前的工作。

## 步骤 1：数据集合复制

在数据集合选项卡上右键单击我们的火焰箭数据集合，然后选择“**复制数据集合...**”

![](Assets/P2_1_DCDuplication1.png)

编辑器将打开一个窗口显示要复制的所有元素 + 为数据集合提供新 ID 建议（现在只是“FireMageFirebolt2”）

![](Assets/P2_1_DCDuplication2.png)

## 翻译 E:\SC2Code\blizzard-tutorials-chinese\docs\Data_Primer\01_Simple_Firebolt\01_Firebolt.md.part-3.md

```markdown
点击“确定”，现在我们有两个相同的数据集合。但是我们新复制的数据集合ID末尾有一个“2”（通常我们看不到）。我们需要双击元素查看其ID，或者通过按Ctrl+D切换到原始数据视图，或者通过"**View**"->"**View Raw Data**"。

![](Assets/P2_1_DCDuplication3.png)

让我们为新的数据集合更改名称，怎么样叫做“火法师 - 召唤”（并像往常一样建议一个新的ID，以适应我们的名称）。

完成后，我们需要手动执行一些操作：
1. 将按钮名称更改为“召唤”（因为复制只会影响数据集合的名称，而不会影响作为元素名称的文本）；
2. 修复召唤按钮工具提示中的伤害参考；
3. 将复制的动画宏演员添加到卡拉斯单位演员；
4. 将召唤能力添加到卡拉斯；
5. 将召唤能力添加到卡拉斯的命令卡中。

完成所有这些操作后，我们可以进行测试文档，并观察我们的卡拉斯能够施放两次相同的能力。

!!! 信息
    虽然数据集合复制窗口看起来类似于普通复制窗口，但无法取消选中单个元素以进行复制。如果我们想仅复制集合的部分内容，则需要手动进入数据集合中的"**Data Record**"字段并在那里删除不需要的元素。复制完成后，它们可以使用通常的自动填充功能重新添加回去。

---

## 步骤2：附加效果

### 创建持续型

为了多次执行我们的“**发射导弹**”效果，我们将利用“**创建持续型**”效果（当您想重复某事时，例如：高隐士的心灵风暴中每个刻度的伤害）。

创建一个“**创建持续型**”效果，并命名为“**启动持续型**”。

![](Assets/P2_2_CPNaming.png)

将“**位置**”设置为“**目标单位**”。

将“**周期计数**”设置为15。

将“**周期持续时间**”设置为0.125。

将“**周期效果**”设置为“火法师 - 召唤 @ 发射导弹”。

![](Assets/P2_2_CPProperties.png)

在“**标志+**”中选中“**持续引导**”和“**引导中**”。这将使施法者不得不专注于攻击，以便任何方式移动或取消能力都将停止持续效果。

![](Assets/P2_2_CPFlags.png)

!!! 信息
    没有这两个标志技能也能正常工作。如果您想要能够发射能力并立即逃跑 - 请随意不使用它们。

### 能力

接下来，转到能力，并将其效果更改为我们的新持续效果。

通过这样做，我们可以测试文档并查看该能力确实起作用。

---

## 步骤3: 收尾/杂项

#### 按钮

让我们为我们的新技能选择一个更具表现力的按钮图像 - `btn-ability-tychus-odin-barrage.dds` 应该可以。

之后，在按钮的工具提示中反映我们对能力所做的更改。

"`使用 <d ref="Effect,FireMageInvoke@StartPersistent,PeriodCount"/> 发射火箭，每个火箭造成 <d ref="Effect,FireMageInvoke@Damage,Amount"/> 伤害。`"

#### 演员

在动画宏中 - 将动画属性更改为“**法术**”。

![](Assets/P2_3_AMAproperty.png)

### 更炫 Launch Missile

在我们的发射导弹效果中，转到“**移动器+**”字段，并添加“暴风导弹”。这将在通过该效果发射导弹时覆盖导弹的默认移动器。

![](Assets/P2_3_LMMover.png)
 
 
## 步骤4: 运行地图，放置一些敌人，用火箭炮炸掉他们。
|![](Assets/1CoolerFirebolt.gif)|
| ------------- | 
|*更酷的火箭炮完成！*|

* [数据入门1 - 简单火箭炮.SC2Map](Assets/DataPrimer1-SimpleFirebolt.SC2Map)

---

# 附赠2: 查找模型动画和附着点

当我们为能力设置动画属性时，我们如何知道要指定什么，为什么“法术，A”表示投掷动作，而只有“法术”会使卡拉斯把手放在一起？

要了解可以在这里使用什么，我们需要在**剧情编辑器**中查看模型。

让我们返回到单位数据选项卡。点击卡拉斯。在链接元素中，我们可以看到这个单位的主演员。点击它。找到“**模型**”字段。这是模型数据元素的名称。我们可以通过链接的元素导航到它，就像我们导航到这个演员一样。

|![](Assets/P3_1_UnitToActorNavigation.png)|![](Assets/P3_1_ActorModelField.png)|![](Assets/P3_1_UnitToModelNavigation.png)|
| ------------- | ------------- | ------------- | 

这次，我们很容易找到我们正在寻找的内容，但我还是想展示一下它们如何连接起来，以防有必要。

进入模型数据后，点击模型字段。然后点击“**查看剧情编辑器**”。

我们会看到类似下面的内容。

|![](Assets/P3_1_CutscneEditorDefault.png)|
| ------------- |

### 查找模型动画

右键单击右下角的蓝线，选择“**更改动画**”。现在我们可以查看并预览模型的动画。

|![](Assets/P3_1_CutscneEditorViewAnimation.png)|
| ------------- |
---

### 查找模型附着点

- “**渲染**” -> “**显示几何**” -> “**附着点**”（或只需按“A”键切换此）
- “**对象**” -> “**模型数据**”（或只需按“Shift+D”）

在模型数据窗口中选择附着点会使其在剧情编辑器中闪烁。

|![](Assets/P3_1_CutscneEditorViewAttachmentPoints.png)|![](Assets/P3_1_CutscneEditorViewAttachmentPointsNames.png)|
| ------------- | ------------- |

---

通过这些步骤，我们已经迈出了向数据中制作精彩内容的第一步。

调查默认能力是如何制作的，以您和其他可能查看代码的人可以理解的方式命名事物。

尝试并实验吧！还要查看本网站的其他教程，以获取更多信息。从现在开始事情只会变得更好。
```  

## 翻译 E:\SC2Code\blizzard-tutorials-chinese\docs\New_Tutorials\01_Introduction\001_Editor_Introduction.md

---
title: 编辑器介绍
author: jrepp
category: 01_介绍

---
# 介绍

星际争霸 II 编辑器是一套与星际争霸 II 捆绑在一起的游戏开发工具套件。这些正是暴雪自己在开发最新版本星际争霸时所使用的工具。编辑器与战网和暴雪游戏厅一起，提供了一个强大的游戏开发平台，托管系统和多人网络。

![编辑器工具套件](./resources/001_Editor_Introduction01.png)

星际争霸 II 编辑器于 2010 年首次与《自由之翼》一起发布，使玩家可以访问游戏的所有艺术和资源。这延续了暴雪向玩家社区提供完全访问其创意工具的传统，这一传统始于 1994 年《战争craft 2：黑暗潮汐》的发布。随着每个星际争霸 II 版本的推出，编辑器中添加了更多内容，包括一个包含所有《魔兽争霸 III》资源的官方套件。

## 游戏厅

星际争霸 II 修改社区回应了成千上万的自定义地图和修改。他们所有的创作都可以在由暴雪托管的平台上找到，称为游戏厅，玩家可以使用星际争霸 II 游戏客户端访问。在游戏厅中，玩家可以发现，玩耍并分享一个充满活力的在线游戏开发社区。使用编辑器将使您可以访问这个社区，包括展示您自己的项目，向观众展示，获得反馈，探索他人的游戏，获得灵感，最重要的是玩耍。

![游戏厅中的游戏](./resources/001_Editor_Introduction02.png)

## 功能

编辑器是一个专业品质的游戏引擎，具有广泛的功能，包括自己的脚本语言。尽管如此，您不需要编码经验即可开始。如果您想开始学习如何使用编辑器，那么您来对地方了。本站点是任何想要学习使用星际争霸 II 编辑器的人的必备手册和课程计划。因此，请阅读介绍，然后开始探索本站点。

由于其作为地图设计中第一个社区工具之一的历史，编辑器通常被称为“地图编辑器”。但是，编辑器远不止于简单的地图创建。它是一个强大的游戏引擎，您可以使用它来制作各种类型的游戏、地图和修改星际争霸 II 体验。

![各种社区创作](./resources/001_Editor_Introduction03.png)

如果您是竞技星际争霸 II 的粉丝，您可以为其他星际争霸 II 玩家创建新的近战地图进行对战。您的地图甚至可能变得足够受欢迎，成为总决赛中的决定性比赛的场地。

从那里，您可以开始调整和探索星际争霸的游戏性。您可以将自定义数据修改应用于任何现有的星际争霸 II 近战地图，包括您自己创建的地图。然后，您可以将您的地图打造成完整的自定义战役，在星际争霸的世界中讲述您自己的故事。

或者，您可以开始创建自己的游戏类型。开发者们创作了从简单环境到复杂的塔防地图，甚至是广阔的 RPG 史诗。您可以从魔兽和星际争霸的自定义游戏漫长历史中汲取灵感，这个繁荣的修改文化孕育了塔防和英雄激斗者等流派，如 DotA 和我们自己的风暴英雄（这款游戏的原型是在星际争霸 II 编辑器中构建的）。

模块
-----------

模块是主编辑器的主要分区。每个都提供了一个更小，更专注的编辑器，用于游戏开发过程的特定部分。作为个体工具，每个模块都非常专业化。作为一个整体，它们为您提供了构建整个游戏所需的创造性控制力。

 * **地形编辑器:** 地形编辑器允许您雕刻地形并赋予游戏世界。近战地图设计者可以为竞技战斗绘制景观，对于其他类型的创作，这是构建世界外观的主要工具。
 * **触发器编辑器:** 触发器编辑器是您为游戏赋予生命和逻辑的地方。您可以选择使用星际争霸 II 的内部脚本语言或适合编程新手的有用 GUI 系统。
 * **数据编辑器:** 数据编辑器是现有游戏资产和您独特创作的存储库。在这里，您可以设计单位、增益、能力、效果、声音等内容。随着您在创作游戏的经验增加，这些创作将一直存在，随时准备在新游戏领域中重新利用。
 * **导入器:** 导入器允许您从编辑器外部引入自定义设计的资产，包括 3D 模型，图像，音乐或任何您需要的其他内容。
 * **UI 编辑器:** UI 编辑器为您提供定义和创建自定义界面的工具，或修改已在星际争霸 II 中找到的界面。
 * **剧情编辑器:** 剧情编辑器允许您创建自己的影片，是游戏叙事和在游戏外展示 Machinima 内容的工具。
 * **文本编辑器:** 文本编辑器允许您更改游戏文本的字体、样式等排版效果。
 * **AI 编辑器:** AI 编辑器是您将创建和修改决定单位行动的人工智能的地方，打造一个终极的竞技对手，或定义您自定义游戏的由计算机控制的居民的思维。

前行！
-------

现在是学习和创造的绝佳时机。本站点将作为指南，帮助您进入星际争霸 II 编辑器的许多创意可能性。继续阅读，并记得享受其中。

![图片](./resources/001_Editor_Introduction04.png)

探索的冒险在等待着！（来源：njordys）

## 翻译 E:\SC2Code\blizzard-tutorials-chinese\docs\New_Tutorials\01_Introduction\002_Getting_to_the_Editor.md

---
title: 进入编辑器
author: jrepp
category: 01_介绍

---
# 进入编辑器

编辑器随 StarCraft II 的所有版本捆绑提供，包括自由之翼、虫群之心和虚空遗迹。它也包含在免费的 StarCraft II 入门版中。您可以通过访问 us.battle.net/arcade/en/download 下载入门版，如下图所示。

![客户端下载页面](./resources/002_Getting_to_the_Editor01.png)



下载客户端后，您可以通过 Battle.net 启动器访问编辑器。

![Battle.net 启动器](./resources/002_Getting_to_the_Editor02.png)

您将在启动器中的标题链接下方找到“启动编辑器”按钮。下面的图像显示了启动器的两个版本中的外观。

![客户端标题链接](./resources/002_Getting_to_the_Editor03.png)

您还可以在 StarCraft 安装文件夹和“开始”菜单链接中找到编辑器的本地链接。其图标如下所示。

![编辑器图标](./resources/002_Getting_to_the_Editor04.png)

您会发现打开任何本机的 .SC2Map 文件都会启动编辑器。它们的图标如下所示。

![地图图标](./resources/002_Getting_to_the_Editor05.png)

您还会发现 StarCraft II 登录界面左侧有一个选项卡，上面有一个名为“打开编辑器”的链接。该菜单如下图所示。

![登录界面编辑器链接](./resources/002_Getting_to_the_Editor06.png)

启动后，编辑器将显示其启动画面，同时加载。根据您的游戏设置和默认加载的地图集，这可能需要一些时间。启动画面如下图所示。

![编辑器启动画面](./resources/002_Getting_to_the_Editor07.png)

## 翻译 E:\SC2Code\blizzard-tutorials-chinese\docs\New_Tutorials\01_Introduction\003_Navigating_the_Interface.md

# 导航界面

编辑器分为八个不同的模块，每个模块展示游戏构建过程中的不同视图。这种分工在将开发过程的每个部分分开并理解时非常有用。然而，不同的视图数量意味着需要一些时间来理解导航整体环境和每个单独模块的基本规则。在下面，您将找到有关工具栏、视图和全局可用实用工具的快速描述。

如果您想了解每个模块特定界面的更多信息，您可以参考更深入介绍该模块的文章。

## 工具栏

在任何模块的顶部，您将找到一组选项卡和工具栏，它们将随着您在编辑器中的每个视图而变化。这些组件会根据您在编辑器中的视图不同而略有变化，为每个模块提供相关选项。从上到下，其主要组件有标题栏、文件栏和主工具栏。

![工具栏和选项卡集合](./resources/003_Navigating_the_Interface01.png)

主工具栏在整个编辑器中保持不变。尽管看起来像单一、实心的条形，但实际上由三个组件组成。其中两个组件，最左侧的实用工具栏和最右侧的导航栏是不变的，无论您在编辑器中的位置如何，它们的按钮都保持不变。工具栏的中间部分是针对当前模块的一个栏。这些包括地形栏、触发器栏、数据栏、AI 栏、UI 栏和剧情栏。导入器和文本编辑器没有具体的栏，但您会在概述管理器中找到一个概述栏。主工具栏如下图所示。

![主工具栏](./resources/003_Navigating_the_Interface02.png)

## 实用工具栏

实用工具栏提供了一些标准功能，这些功能对每个模块都是相关的。您可以通过其绿色按钮来识别此栏。下面您将找到该栏的图像以及其功能的细分。

![实用工具栏](./resources/003_Navigating_the_Interface03.png)

| 按钮           | 功能                                                         |
| --------------- | ------------------------------------------------------------ |
| 新建 (Ctrl+N)  | 启动“新建文档”窗口，允许您创建新地图和修改。              |
| 打开 (Ctrl+O)  | 启动“打开文档”窗口，允许您打开本地文件或从战网下载文件。    |
| 保存 (Ctrl+S)  | 保存当前文件。                                               |
| 撤消 (Ctrl+Z)  | 撤销当前模块中所做的最后更改。                               |
| 重做 (Ctrl+Y)  | 重新应用使用撤消撤销的最后更改。                             |
| 剪切 (Ctrl+X)  | 删除当前选择并将其保存到剪贴板中。                           |
| 复制 (Ctrl+C)  | 复制当前选择并保存到剪贴板中。                              |
| 粘贴 (Ctrl+V)  | 将当前存储在剪贴板中的元素粘贴到位置。<br />对于剪切，这也将清除剪贴板。对于复制，剪贴板保留其选择。 |

请注意，这些操作是上下文敏感的，您可以根据您在编辑器中的当前模块使用它们。这意味着，如果您在触发器编辑器中，复制和粘贴将操作触发器、操作或事件等内容。同样，如果您在地形编辑器中，您可以复制和粘贴完全不同的元素，如单位或装饰物。

## 导航栏

**导航栏** 用于在各模块之间进行导航。您可以通过其蓝色按钮来识别它。下面您将找到该栏的图像以及其功能的描述。

![导航栏](./resources/003_Navigating_the_Interface04.png)

| 功能                       | 效果                                                         |
| -------------------------- | ------------------------------------------------------------ |
| 地形编辑器 (F5)            | 进入地形编辑器。                                             |
| 触发器编辑器 (F6)          | 进入触发器编辑器。                                           |
| 数据编辑器 (F7)            | 进入数据编辑器。                                             |
| 文本编辑器 (F8)            | 进入文本编辑器。                                             |
| 导入器 (F9)                | 进入导入器。                                                 |
| AI 编辑器 (Shift+F5)       | 进入AI 编辑器。                                              |
| UI 编辑器 (Shift+F6)       | 进入UI 编辑器。                                              |
| 剧情编辑器 (Shift+F7)      | 进入剧情编辑器。                                             |
| 概述管理器 (F12)            | 进入概述管理器。                                             |
| 测试文档 (Ctrl+F9)         | 启动当前地图进行测试，如“首选项”中指定的那样。             |

这个栏是非常有用的“测试文档”功能的主要场所，您会经常使用它。您也可以使用它导航至概述管理器，它类似于对整个项目和每个模块进行鸟瞰。

## 其他栏

标题选项卡显示了编辑器中的当前位置，以及活动项目的当前位置和文件结构。下面显示了一个示例。

![标题栏](./resources/003_Navigating_the_Interface05.png)

从战网访问文件时，文件结构将采用 \[战网：文件名\] 的形式。

文件栏也是您会找到许多选项卡的地方，这些选项卡涵盖项目各方面的选项。类似于主工具栏，不管您目前的位置如何，它都提供文件、编辑、视图、地图、模块、窗口和帮助选项卡。根据您在编辑器中的当前位置，还会发现其他一些上下文敏感的选项。

![文件栏](./resources/003_Navigating_the_Interface06.png)

编辑器还提供一些上下文敏感的功能，只能在您目前位置可用和相关的位置使用。这些在描述编辑器中的主要位置、八个模块和概述管理器的文章中有更详细的讨论。

## 快捷键

编辑器支持广泛的快捷键，并允许完全定制其所有标准控件。您可以为几乎所有可用的功能设置快捷键，其中大部分没有默认快捷键。您可以通过导航至“文件” ▶︎ “配置控件”来访问快捷键控件。这将启动“配置控件”窗口，如下所示。

![快捷键配置](./resources/003_Navigating_the_Interface07.png)

## 翻译 E:\SC2Code\blizzard-tutorials-chinese\docs\New_Tutorials\01_Introduction\004_Maps.md

# 地图类型

编辑器将文件分为两种主要类型，每种类型都具有不同的目的。它们被称为地图和模组。

对于熟悉暴雪编辑工具的人来说，地图可能是最直观的类型。地图将单一游戏类型整合到一个文件中，结合了地形、代码和数据。每当您玩《星际争霸》游戏时，您实际上是启动一个地图文件。

所有地图至少在表面下运行一些数据。近战地图拥有在文件中包含的非常基本的默认游戏指令。这些指令会生成单位并启动任何需要的计算机控制的 AI。街机地图可以包含详尽的自定义数据，以呈现全新类型的游戏玩法。在这两种情况下，地图内部数据直接连接到单一软件包中的顶层地形数据中，即地图。

但并非总是如此。有时将数据与地图地形分开会很有用，这是模组的主要目的。

## 地图类型

如上所述，近战地图需要默认的游戏指令集。它们被用于玩标准的多人游戏《星际争霸》游戏。由于其作为一款首要的竞技游戏的性质，近战模式遵循着特定的暴雪标准。对于任何对地图数据的更改都将被标记为不适合近战使用。因此，近战地图只描述诸如地形设计和基地布局之类的组件。设计这些元素本身是一个非常广泛的专业领域。

一旦在游戏的数据中进行了更改，将其从近战地图标准更改为街机地图，则它将被标记为街机地图。这些地图可以充分利用编辑器塑造《星际争霸》全新体验的能力。此外，街机地图被组织到《星际争霸 II》的战网的一个独立区域中，称为街机。在街机中，特殊的组织功能使创作者能够以比近战地图更强大的方式托管、分发和宣传他们的游戏。

地图的其他流行术语包括“自定义地图”和“使用地图设置”。这些术语分别指的是从《魔兽争霸 III》和《星际争霸：毁灭之日》中定制规则的地图。由于这些游戏的文化势头，这些术语通常与当前首选术语“街机地图”可以互换使用。

值得注意的是，“自定义地图”在另一个语境中仍然存在。该术语现在指的是使用近战地图和所谓的扩展模组。地图设计和模组数据在战网的“自定义游戏”界面中相互结合，让用户更多地控制协作，并为玩家提供更多的自定义选项。

另一个值得关注的话题是战役地图。这些地图形成一个统一的战役，通过链接类似单人模式的主世界元素来创建。战役地图会对数据进行改动。因此，如果您将任何可用的暴雪战役地图上传到战网，它们将被标记为街机地图。您可以将自己的战役发布到街机中作为一系列独立的街机地图。通常，它们被类似地标记，并包含指引玩家从一个地图到另一个地图的各种提示。编辑器中还有一些选项，供希望构建离线战役的人使用。

## 翻译 E:\SC2Code\blizzard-tutorials-chinese\docs\New_Tutorials\01_Introduction\005_Creating_a_Map.md

# 创建地图

任何项目的第一步都是创建一个新文档，可以是地图或模组。在创建文档时，您将看到一些选项，以帮助您快速配置项目。这些初始配置可以在编辑器内随后更改。

## 地图创建选项

启动编辑器后，导航到任何编辑器屏幕左上角的文件选项卡。

[![文件菜单](./resources/005_Creating_a_Map01.png)](./resources/005_Creating_a_Map01.png)
*文件菜单*

这将带您进入“新文档”窗口，在那里您可以选择要创建的文档类型。

[![选择文档类型](./resources/005_Creating_a_Map02.png)](./resources/005_Creating_a_Map02.png)
*选择文档类型*

在这种情况下，通过单击左侧按钮选择“Arcade Map”，然后点击“下一步”继续。您将进入依赖项部分，如下图所示。

[![选择依赖项](./resources/005_Creating_a_Map03.png)](./resources/005_Creating_a_Map03.png)
*选择依赖项*

依赖项描述了哪些模组文件将为项目提供资源。您始终可以通过导航到“自定义”标题，然后选择不选择任何内容来继续。这将提供一个完全空白的项目，没有模组文件依赖项。在本示例中，您将使用大量的星际争霸资源存档，通常被称为“标准依赖项”。使用标准依赖项是与编辑器一起工作的主要优势之一。

要导入最新版本的星际争霸资源，请选择“Swarm之心”标准依赖项，然后通过选择“下一步”继续。这将带您到地图配置部分，如下图所示。

## 地图配置

[![示例生成选项](./resources/005_Creating_a_Map04.png)](./resources/005_Creating_a_Map04.png)
*示例生成选项*

地图配置屏幕是您将对地形初始外观做出一些基本决策的地方。每个选项的影响在下表中有所说明。

| 属性                      | 影响                                                                                                                                                                        |
| ------------------------ | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------ |
| 尺寸 (宽 x 高)           | 设置地图的初始全尺寸。您可以稍后从地图边界选项更改此设置。尺寸范围为32至256单位，每次增加8单位。                                                                     |
| 可玩尺寸                | 地图上单位可以行进的实际区域，根据地图两侧的硬编码变量缓冲进行校正。在某些极小尺寸下，将避免此缓冲区。                                                                       |
| 尺寸描述                | 地图尺寸的基本描述。选项包括微小、小、中、巨大和史诗。                                                                                                                       |
| 使用地形                | 取消此选项将取消地形生成。尽管某些情况下可能需要一个无地形地图，但它在功能上类似于一个模组。                                                                              |
| 纹理设置                | 选择地图的“地形类型”，这是用于构建环境中地面的八种纹理的调色板。这也适用于淤泥视觉效果、悬崖类型、照明和大气音效设置。                                                              |
| 初始纹理                | 生成时，整个地形将被涂抹为此单一类型的地形设置。                                                                                                                           |
| 基本高度                | 所有地形都将以此默认高度生成。如果未选中“添加随机高度”选项，则地形将生成为平滑表面。                                                                                    |
| 添加随机高度            | 在基本高度中创建随机扭曲，扭曲的大小由强度和变化性选项滑块决定。这有助于产生更具自然基础的地形。                                                                           |

遵循上面我们所制定的“示例生成指南”图像中的准则，将使您得到一个看起来类似于下图的地图。这个地图已为启动项目做好准备。此时，通常明智地保存您的文件。

[![新生成的岩石地图](./resources/005_Creating_a_Map05.png)](./resources/005_Creating_a_Map05.png)
*新生成的岩石地图*

## 翻译 E:\SC2Code\blizzard-tutorials-chinese\docs\New_Tutorials\01_Introduction\006_Mods.md

# 模组

模组将游戏的素材与地图文件分开。因此，它们永远无法在《星际争霸》本身中启动，只能在编辑器中处理。通过将模组放置在地图文件中，最终可使其可用。地图对这些模组文件的要求被称为依赖性。这种安排的优势很容易解释；将游戏数据与地图地形分开允许模组被托管在各种不同的地图中。这意味着自定义游戏模式可以被移植到许多不同设计的位置，无论是出于美学还是游戏性方面的原因。

## 模组类型

模组类型在很大程度上受到模组应用的影响。有两类模组。更典型的依赖性模组包含触发器、数据以及任何类型的非地形编辑器信息。您可以通过编辑器将这些模组上传到Battle.net。然而，要制作一个完整的游戏，它们最终需要作为依赖性添加到编辑器中的活动地图中。这种设计使它们成为基本的组织和实用构造，准备用于任何需要使用自定义数据的地图。

扩展模组同样包含所有类型的改变游戏数据，并在编辑器内构建，但与之相反的是它们在Battle.net的“自定义游戏”界面上应用，方法是选择一个基础地图，然后选择一个扩展模组。这允许地图和模组设计的区分。通过这种方式，模组制作者可以在各种情况下使用地图，而无需明确的协作。扩展模组还可以包含依赖性模组的依赖性，因此可以被认为是基本依赖性模组的应用。

观察者接口是扩展模组的特殊子类。这类模组只能对编辑器的UI部分进行修改。这在定制《星际争霸》比赛的竞技观赛体验中有特殊应用。这些接口也可以在重播观看中激活使用。

## 模组用途

模组对于避免冗余非常有用。想象一下，您设计了一个自定义战役，其中穿插着特殊规则、角色和玩家决策，共有十张地图。如果没有使用模组，您将不得不为战役的每一集重复这些自定义规则。通过将游戏元素移入数据构造，即模组，您可以消除不断重建地图的需要。

在考虑持续更新自定义战役的可能性时，使用模组变得更加关键。没有标准的模组依赖性，每个更新周期都要求您对每张地图进行修改。您可能会将数据从一张地图复制粘贴到另一张地图中进行更新，但如果无法控制这些版本中的任何一个，灾难性失败的可能性将很大。模组将组织这些更改并将其传播到每一个利用该模组的地图，为您节省大量工作。

除此之外，通过将游戏设计的大部分内容分成独立的模组，模组使得您可以通过将大量工作分区来分开项目工作。这允许多个开发人员在单个项目上进行合作，每个人负责不同方面的工作，比如过场动画、数据和地形。

模组通常用于捆绑大量素材，以便在Battle.net和Arcade上简化游戏过程。请记住，在《星际争霸》中，文件存储在Battle.net服务器上，然后下载并在本地访问。如果项目的模组部分在游戏版本之间保持不变，即使对游戏的其他部分进行了修改，玩家也无需再次下载这些模组。如果使用得当，这可以简化开发过程并在线共享游戏。支持这一点，模组文件的最大大小为100 MB，而地图的最大大小为20 MB。这鼓励智能数据使用，并增加地图使用自定义素材的能力。

## 翻译 E:\SC2Code\blizzard-tutorials-chinese\docs\New_Tutorials\01_Introduction\007_Creating_Mods.md

# 创建Mods

尽管地图文件始终是编辑器的最终产品，但mod文件才是任何项目的真正核心。通过将数据与构建的地图分离，mods允许开发和共享更自由的项目。这种关系超越了易用性。Mods将项目的可能性扩展到以前在暴雪编辑器中从未有过的程度。发现这一点的最佳方式是尝试编辑器构建、组合和利用mods的能力。

## 创建基本Mod

通过导航到 文件 ▶︎ 新建来创建一个新文档。这将启动“新建文档”窗口，在其中你应该选择创建一个“依赖Mod”。点击“下一步”进入“选择依赖项”标题，选择“自定义”，然后点击“确定”。现在使用地形模块导航到 Mod ▶︎ Mod信息，打开“Mod属性窗口”。在那里，输入标题“教程依赖项”到“名称”字段。你也可以输入一条描述，说明“这是一个教程依赖项”。使用下面的图像作为指南。

[![Mod的创建与配置顺序](./resources/007_Creating_Mods01.png)](./resources/007_Creating_Mods01.png)
*Mod的创建与配置顺序*

你现在已经创建了一个简单的mod。'依赖Mod'是基本mod类型。它的名称源自于任何插入到mod中的地图都进入一种称为依赖关系的关系。当你在“选择依赖项”视图下选择了“自定义”并将其留空时，mod文件被设置为没有基础依赖项。一个空的mod是一个完全自定义项目的最佳起点。你的mod中唯一的信息是在最后一步中包含的几个细节。

将你的mod保存到首选位置，名称为“教程依赖项”。StarCraft为mods分配了.SC2Mod文件扩展名。

## 向Mod添加数据

mod的最终目的是成为资产的容器。通过向你的基本mod中添加一些触发器，你可以了解更多信息。请注意，一个mod文件将需要一个触发器库来保存其触发器。而对于地图文件来说，可以支持不在库中的触发器。

移至 **触发器模块**，在这里你将创建触发器库。右键单击 **触发器面板**，转到库 ▶︎ 新建库。新库将显示在列表面板中。将其重命名为教程库。现在通过选择触发器面板，转到新建 ▶︎ 新建动作定义，添加一个动作定义，将其命名为“依赖消息”。在这个动作定义中，通过动作 ▶︎ 调试消息添加一个新的动作。最后，将此动作的文本字段更改为“这是来自依赖关系的消息”。你应该看到类似下面的内容。

[![Mod的触发器库](./resources/007_Creating_Mods02.png)](./resources/007_Creating_Mods02.png)
*Mod的触发器库*

## 使用Mod作为依赖项

既然你已经设置好mod文件，你需要创建一个新的地图文件来测试它作为依赖项。你可以通过导航到 文件 ▶︎ 新建 ▶︎ 休闲地图 来这样做。在地形屏幕上点击“恢复默认设置”，并将此地图保存为“教程Mod测试”。

要将一个mod作为这个地图的依赖项添加进去，请导航到 文件 ▶︎ 依赖项。根据默认地图配置，“Liberty (Mod)”标准依赖项已经被包含了。由于你想添加一个自定义mod，选择“添加其他”。

[![添加依赖项视图](./resources/007_Creating_Mods03.png)](./resources/007_Creating_Mods03.png)
*添加依赖项视图*

这将启动一个“选择文档”窗口，可以访问存储在本地和Battle.net上的mod文件。在这种情况下，你已经将所需的mod文件保存在本地。使用提供的文件浏览器找到它，然后点击“确定”，之后你将被发送回依赖项选择屏幕。

[![添加自定义依赖项](./resources/007_Creating_Mods04.png)](./resources/007_Creating_Mods04.png)
*添加自定义依赖项*

通过点击“确定”完成添加依赖项，然后重新打开触发器模块。现在是一个很好的时机确保启用库显示，你可以通过查看 ▶︎ 显示库来做到这一点。你的自定义模式内的触发器资产现在应该可见并准备好使用。在顶部的列表面板中，你会看到标题为内置、Liberty和教程库的触发器库。

![从Mod导入的库](./resources/007_Creating_Mods05.png)
*从Mod导入的库*

通过将一个“依赖消息”动作添加到地图中的“混战初始化”触发器来测试依赖项的功能。右键点击“动作”标题下方，然后转到新建 ▶︎ 新建动作 ▶︎ 依赖消息。请注意，导入的动作定义将显示其来源为“教程库”，而不是Blizzard库中的“内置”或“Liberty”。然后，删除所有多余的默认混战动作。这将使你得到以下设置。

[![使用的依赖项动作定义](./resources/007_Creating_Mods06.png)](./resources/007_Creating_Mods06.png)
*使用的依赖项动作定义*

现在运行你的文档作为测试，应该会得到类似下面图像的结果。

[![来自依赖库的输出](./resources/007_Creating_Mods07.png)](./resources/007_Creating_Mods07.png)
*来自依赖库的输出*

## 翻译 E:\SC2Code\blizzard-tutorials-chinese\docs\New_Tutorials\01_Introduction\008_Map_Properties.md.part-0.md

# 地图属性

地图属性影响各种设置，决定了从如何在战网上处理您的游戏大厅到“战争迷雾”行为。您可以通过地图 ▶︎ 地图信息，从任何编辑器模块导航到收集的地图属性。

![地图标签](./resources/008_Map_Properties01.png)
*地图标签*


请注意，“地图属性”实际上指的是管理高级地图决策的八个选项卡的分组。访问地图选项卡下的任何八个选项卡标题将引导您到相同的“地图属性”窗口。这些选项卡在以下部分中进行了拆分。

### 地图信息

地图信息属性确定有关地图的后勤细节。

![信息标签](./resources/008_Map_Properties02.png)
*信息标签*

<table>
<colgroup>
<col style="width: 10%" />
<col style="width: 89%" />
</colgroup>
<thead>
<tr class="header">
<th>属性</th>
<th>详细信息</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>名称</td>
<td>地图名称，在战网、街机和发布屏幕等位置显示。</td>
</tr>
<tr class="even">
<td>建议玩家数</td>
<td>地图可能需要的玩家数量的内部注释。这与“游戏信息”和“地图信息”屏幕中发现的“建议玩家”值无关，这些值是从大厅信息自动生成的。</td>
</tr>
<tr class="odd">
<td>描述</td>
<td>用于描述地图内容的区域。这一部分经常用于作者署名或任何可能引起观众兴趣的一般消息。</td>
</tr>
<tr class="even">
<td>预览图像</td>
<td>此图像在多种情况下显示。</td>
</tr>
<tr class="odd">
<td></td>
<td><ul>
<li>作为街机“浏览”屏幕上的主缩略图。</li>
<li>在战网“自定义游戏”部分中突出显示游戏时。</li>
<li>在发布屏幕中。</li>
<li>作为默认地图设置下的地图预览屏幕。</li>
<li>在街机的“游戏信息”屏幕上，如果未选择任何屏幕截图。</li>
</ul></td>
</tr>
<tr class="even">
<td></td>
<td>可以设置为地图图像、自定义图像或隐藏。最后一个选项导致以上列表中的任何情况都没有图像显示。</td>
</tr>
<tr class="odd">
<td>游戏迷你地图图像</td>
<td>确定迷你地图将使用的图像。选项包括地图图像或自定义图像。传统上应该是地图图像，但为非传统游戏提供了这个选项。</td>
</tr>
<tr class="even">
<td>迷你地图分辨率</td>
<td>确定迷你地图的质量级别如下：普通：256 x 248，高：512 x 496，超高：1024 x 992。</td>
</tr>
<tr class="odd">
<td>区域</td>
<td>选择输入信息的地区版本。您还会注意到一个“复制到所有区域”的按钮，它将当前视图中的信息移到所有其他现有地区。</td>
</tr>
</tbody>
</table>

## 地图选项

地图选项是一个游戏性和视觉定向选项的收集，用于改变游戏。这里还有一些后勤选项，可以影响地图创建过程中的决策。

![选项标签](./resources/008_Map_Properties03.png)
*选项标签*

| 属性                  | 详细信息                                                                                                                                                                                                                                                                                                                                 |
| ---------------------- | --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| 未探索区域类型        | 设置地图使用的“战争迷雾”类型。选项包括灰色蒙版、黑色蒙版和黑色蒙版（减小半径）。此外，“修改”选项卡将指引您到数据模块，以便更高程度的自定义。                                                                                                                                                                                    |
| 最小飞行高度          | 设置飞行单位将下降到的最小高度。                                                                                                                                                                                                                                                                                                         |
| 静态阴影强度          | 设置静态映射阴影的不透明度，供低图形使用。                                                                                                                                                                                                                                                                                                |
| “游戏选项”标志       | 禁用观察者：阻止在线比赛中的观察者。<br>禁用重放记录：关闭地图会话中的重放存档。<br>禁用触发器预加载：任何在触发器中明确引用的数据都有资格进行预加载，以在牺牲触发器加载时间的情况下减少初始加载时间。<br>在线游戏期间隐藏错误：防止在战网上显示任何地图调试或错误消息。<br>测试文档期间隐藏错误：防止在使用“测试文档”功能期间显示任何地图调试或错误消息。<br>显示游戏开始倒计时：在地图加载后启用动画倒计时。<br>分时触发器事件：自动间隔周期触发器，以优化性能并避免触发器排队。<br>使用水平视场：将游戏从默认的垂直视场转换为水平视场。对于自定义项目（如第一或第三人称射击游戏）很有用。 |
|                      |                                                                                                                                                                                                                                                                                                                                           |
| 发布选项              | 将地图类别设置为对战/自定义地图或街机地图。此区分确定地图是否在战网的“自定义游戏”或街机部分中可用。“自动添加多人游戏数据”允许对对战/自定义地图在游戏启动时添加所需的多人游戏依赖项。“隐藏战网大厅”允许街机地图用户在等待游戏开始时最小化大厅。 |

## 地图边界

地图边界允许动态调整地图内可玩区域和摄像机区域的尺寸限制。地图两侧的箭头按钮允许沿特定轴进行调整。

![边界标签](./resources/008_Map_Properties04.png)
*边界标签*

| 属性                   | 详细信息                                                                                          |
| ---------------------- | ------------------------------------------------------------------------------------------------ |
| 修改摄像机边界        | 锁定或解锁摄像机区域大小调整的效果。                                                              |
| 修改地图边界          | 锁定或解锁对可玩地图区域大小调整的效果。                                                          |
| 恢复为默认值          | 将所有配置的边界更改为它们的默认设置。                                                          |
| (地图尺寸) 描述       | 地图尺寸的基本生成描述。选项包括：微型、小型、中型、巨大和史诗。                                |
| 可玩区域尺寸         | 当前地图的尺寸，减去地图周围无法游玩的缓冲区域。                                                |
| 完整地图尺寸         | 当前地图的尺寸，包括缓冲区域。                                                                  |

## 翻译 E:\SC2Code\blizzard-tutorials-chinese\docs\New_Tutorials\01_Introduction\008_Map_Properties.md.part-1.md

## 地图对称性

![对称性选项卡](./resources/008_Map_Properties05.png)
*对称性选项卡*

地图对称性用于在地图中设置对称性控制。在地形生成中，对称性通常是竞技地图的必要特性，有助于提高游戏竞争性。

## 地图纹理

![纹理选项卡](./resources/008_Map_Properties06.png)
*纹理选项卡*

每个地图使用特定的纹理集类型，这是一个包含八种用于绘制地图地面的纹理的调色板。您可以在"地图纹理"选项卡中选择这些调色板使用。注意，悬崖风格也是这个调色板的一部分，可能会在此处进行配置。

## 地图标签

地图标签用于创建用于组织地形对象的难度标签，例如单位、装饰物、区域和点，允许您在以后查看时对其进行筛选。

![标签选项卡](./resources/008_Map_Properties07.png)
*标签选项卡*

## 地图加载画面

"地图加载画面"选项卡允许您配置在地图加载时显示给玩家的引导画面。

[![加载画面选项卡](./resources/008_Map_Properties08.png)](./resources/008_Map_Properties08.png)
*加载画面选项卡*

## 翻译 E:\SC2Code\blizzard-tutorials-chinese\docs\New_Tutorials\01_Introduction\009_Player_Properties.md

# 玩家属性

玩家属性是设置游戏中许多基本选项的地方。您可以通过从编辑器的任何模块导航到地图▶︎玩家属性来找到它们。这将启动下方显示的窗口。

[![玩家属性窗口](./resources/009_Player_Properties01.png)](./resources/009_Player_Properties01.png)
*玩家属性窗口*

## 玩家属性字段

玩家属性涉及控制、起始位置、种族和颜色等问题。在这方面，它类似于典型的战网大厅。更改这些属性将影响在线游戏时游戏大厅的外观。然而，这些选项进一步延伸，因为它们还控制与非传统游戏相关的全局属性。

以下表格详细列出了玩家属性中的选项以及每个选项的描述。

| 操作            | 效果                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| -------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------ |
| \#             | 用于排序和引用玩家的编号。                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       |
| 名称           | 一个多功能的ID。通常在突出显示由该玩家拥有的单位时显示，但也可以在其他方面使用。在在线游戏中，玩家的战网ID总是显示为名称属性。由Hostile或Neutral控制的玩家拥有的单位不显示名称。                                                                                                                                                                                                                                                                                                                          |
| 颜色           | 确定玩家的队伍颜色。如果设置，这在游戏大厅中是不可更改的。与近乎游戏玩法不同，多个玩家可以被分配相同的队伍颜色。总共有16种颜色选项，设置为(Any)将允许玩家从大厅中选择他们的颜色。                                                                                                                                                                                                                                                                                                      |
| 种族           | 确定玩家从选项Protoss、Terran、Zerg、Neutral或(Any)中选择的种族。选择Neutral将使玩家的种族随机，而设置为(Any)将允许玩家从大厅选择他们的种族。                                                                                                                                                                                                                                                                                                                                         |
| 控制           | 确定每个玩家插槽的控制器。用户为人类玩家创建一个插槽，在游戏的大厅中添加一个开放插槽，可由人类玩家或由AI控制的计算机填充。None将玩家插槽设置为无玩家。这是默认值。计算机创建一个由游戏默认AI控制的玩家。 Neutral创建一个由所有其他玩家具有中立联盟设置的计算机控制玩家。 Hostile创建一个由所有其他玩家具有敌对联盟设置的计算机控制玩家。 |
| 起始位置       | 通过“为每个玩家创建近战起始单位”操作来确定默认单位的创建位置。在所有其他地图类型中，除非另有说明，否则将控制玩家的相机起始位置。                                                                                                                                                                                                                                                                                                                                                                   |
| 徽章           | 设置用于支持徽章的玩家单位的默认徽章。                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         |
| 默认观察者     | 在没有查看特定玩家视角时，确定观察者玩家的相机设置。                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           |

请注意，尽管有16个玩家插槽，但星际争霸II仅支持最多15名人类玩家。至少必须将一个插槽设置为Neutral、Hostile或None。这包括正在观看在线比赛的玩家。

## 玩家自定义

在近战地图中，仅通过玩家属性就可以用于自定义场景。请看下方如何创建一个简单的Protoss对抗Zerg主题地图的方法。

[![自定义游戏玩家属性](./resources/009_Player_Properties02.png)](./resources/009_Player_Properties02.png)
*自定义游戏玩家属性*

## 附件

 * [009_Player_Properties_Completed.SC2Map](./maps/009_Player_Properties_Completed.SC2Map)
 * [009_Player_Properties_Start.SC2Map](./maps/009_Player_Properties_Start.SC2Map)

## 翻译 E:\SC2Code\blizzard-tutorials-chinese\docs\New_Tutorials\01_Introduction\010_Team_Placement.md

# 队伍安置

Team Placement 提供了一组控件，用于组织玩家的生成点。这种组织从“起始位置”点开始，您可以使用 Terrain Module 放置这些点。这些点表示玩家可能生成的所有可能位置，但它们只是标记。在特定情况下，没有逻辑决定哪些玩家可以生成到这些点上。相反，这种逻辑是在 Team Placement 中设置的，其中位置被分组成特定的安排，确定团队如何以及在哪里生成。

尽管该系统最初是为近战地图而建立的，但在处理非传统游戏时仍然很有用。通过使用起始位置将玩家分组并控制团队生成相对于敌人的位置，可以用于任何地图类型，尽管在近战游戏之外的场景中可能用途有限。

基本队伍安置（Team Placement (Basic)）和高级队伍安置（Team Placement (Advanced)）是玩家属性的子类，并可以在玩家属性选项卡下找到。否则，您可以通过导航至地图 ▶︎ Team Placement (Basic) 或 地图 ▶︎ Team Placement (Advanced)来找到 Team Placement。

[![Team Placement Views](./resources/010_Team_Placement01.png)](./resources/010_Team_Placement01.png)
*队伍安置视图*

在本文旁边，您会找到一个示范地图。这张地图包含了大约12个起始位置，这些位置大致均匀地分布在一个正方形的边缘周围，允许进行许多合理的团队生成安排。

![示范地图迷你地图](./resources/010_Team_Placement02.png)
*示范地图迷你地图*

## 基本队伍安置

通过导航至地图 ▶︎ Team Placement (Basic) 打开基本队伍安置。除了当前项目的迷你地图外，您还会看到地图上每个起始位置的列表。您可以通过选择每个起始位置并将它们连接到潜在的盟友来确定队伍。对于基本队伍安置，您必须使用游戏变体或触发器来激活游戏中的这些队伍。

## 演示基本队伍创建

您可以通过选择起始位置子视图下的一个起始位置，然后选择链接盟友子视图下另一个起始位置的复选框来创建队伍链接。使用示范地图，在地图的西北角选择起始位置 001，然后点击其两个最近的相邻起始位置 Start Location 002 和 Start Location 012 的复选框。当您将盟友添加到一个队伍时，他们的起始位置将变为绿色。完成这一步应该得到以下结果。

[![基本队伍设置](./resources/010_Team_Placement03.png)](./resources/010_Team_Placement03.png)
*基本队伍设置*

每个起始位置旁边的盟友字段将显示连接到每个起始位置的盟友数量。通常情况下，对于近战地图，您希望每个起始位置都有相同数量的盟友，这将展示对称排列选项的数量。继续链接起始位置，连接剩余三个角落的起始位置到各自的相邻位置。完成后的地图应如下图所示。请注意，每个潜在的团队安排都有相同数量的盟友。

[![完全配置的队伍安置](./resources/010_Team_Placement04.png)](./resources/010_Team_Placement04.png)
*完全配置的队伍安置*

## 高级队伍安置

通过导航至地图 ▶︎ Team Placement (Advanced) 打开高级队伍安置。在迷你地图视图旁边，您将找到“团队”和“已链接敌方团队”的列表。团队类别使您可以像在基本队伍安置中那样排列团队，然后与敌对团队配置配对。与基本队伍安置不同，这是一个最终选项，处理团队构建和可能的敌对团队安排的选择。完成后，游戏可以被暂时设置在“游戏变体”中，然后完全准备好进行游戏。

## 演示高级队伍创建

点击“团队”子视图下方的“New”按钮即可添加一个团队。您将进入下图所示的窗口。

![团队创建弹出窗口](./resources/010_Team_Placement05.png)
*团队创建弹出窗口*

在这里，您可以通过选择组的起始位置来构建团队。在本例中，选择“Start Location 001”，“Start Location 002”和“Start Location 012”来创建一个位于地图西北角的团队。命名为“3 V 3 North West”。使用类似的命名约定为地图的每个角落重复此过程。您现在应该总共有四个团队。请注意，每当添加一个团队时，它都会作为“已链接敌方团队”变为可用。

现在，您可以将两个团队作为敌人链接起来。选择一个团队，以“3 V 3 North West”为例，然后从“已链接敌方团队”子视图中选择您希望成为可能的敌对团队安排的团队。结果应如下图所示。

[![作为敌人配置的团队安排](./resources/010_Team_Placement06.png)](./resources/010_Team_Placement06.png)
*作为敌人配置的团队安排*

该系统支持任意规模的团队，但是这些团队应该与规模相同的对手组配对。还值得注意的是，团队之间不能共享任何起始位置。尽管如此，在此处支持许多可能的配置。下面您将找到另一种可能的安排。

[![进一步的团队安排可能性](./resources/010_Team_Placement07.png)](./resources/010_Team_Placement07.png)
*进一步的团队安排可能性*

最后，您应该了解高级队伍安置比基本队伍安置更强大。因此，如果在地图中同时配置了这两个区域，则高级队伍安置将优先。

## 附件

* [010_Team_Placement_Completed.SC2Map](./maps/010_Team_Placement_Completed.SC2Map)
* [010_Team_Placement_Start.SC2Map](./maps/010_Team_Placement_Start.SC2Map)

## 翻译 E:\SC2Code\blizzard-tutorials-chinese\docs\New_Tutorials\01_Introduction\011_BattleNet_Info.md

# Battle.Net 信息

Battle.net 信息是自定义展示地图在街机模式下的中心。

## 常规

[![常规选项卡](./resources/011_BattleNet_Info01.png)](./resources/011_BattleNet_Info01.png)
*常规选项卡*

在常规选项卡下设置了项目的图标和关联的网站。网站将追加到游戏详细信息的底部，并可以提供到社区网站的超链接。项目的图标经常在街机中用作项目的主要表示。这包括浏览屏幕、正在进行的游戏列表和许多其他位置。在下图中，您可以看到在概览屏幕上游戏标题旁边的图标。

[![街机概览屏幕](./resources/011_BattleNet_Info02.png)](./resources/011_BattleNet_Info02.png)
*街机概览屏幕*

## 屏幕截图

屏幕截图选项卡允许您选择五个宣传截图发布到项目的概览屏幕。

[![屏幕截图选项卡](./resources/011_BattleNet_Info03.png)](./resources/011_BattleNet_Info03.png)
*屏幕截图选项卡*

屏幕截图可以通过存档浏览器或本地计算机上传。每张截图必须具有 800x600 像素的分辨率。如果您的屏幕截图超过默认分辨率，您将被提示裁剪源图像到所需大小。选中“游戏内可用”选项将单独将该屏幕截图添加到游戏数据中（以发布大小为代价）。添加后，您的屏幕截图将用于填充“概览”屏幕上的“屏幕截图”轮换，如下图所示。

[![概览屏幕中的屏幕截图](./resources/011_BattleNet_Info04.png)](./resources/011_BattleNet_Info04.png)
*概览屏幕中的屏幕截图*

## 游戏玩法

您可以在“游戏玩法”选项卡下添加详细的玩法说明。街机中的玩家将在“游戏玩法”屏幕上看到这些详情。玩家通常会在地图加载或在大厅空置时查看此屏幕。这为您提供了在加载屏幕之前传达一些战略或游戏信息的机会。您可以查看下图中如何构建您的“游戏玩法”部分。

[![游戏玩法选项卡](./resources/011_BattleNet_Info05.png)](./resources/011_BattleNet_Info05.png)
*游戏玩法选项卡*

填写基本说明、如何获胜和高级说明字段将填充它们在“游戏玩法”屏幕上对应的部分。“使用项目符号”选项，您的玩法说明在街机上保持相同的项目符号外观。您可以在以下图像中看到街机中这些描述的外观。

. [![图片](./resources/011_BattleNet_Info06.png)](./resources/011_BattleNet_Info06.png)

街机游戏玩法屏幕

## 游戏玩法截图

“游戏玩法截图”选项卡的功能与“屏幕截图”选项卡相同，用于向项目的街机页面的“游戏玩法”部分添加高达五张截图。

[![游戏玩法截图选项卡](./resources/011_BattleNet_Info07.png)](./resources/011_BattleNet_Info07.png)
*游戏玩法截图选项卡*

截图应调整为 800x600 像素，您可以为每张截图添加说明以帮助增加上下文。一旦添加，这些截图将用于填充“游戏玩法”屏幕最右侧的部分，如下图所示。

![](./resources/011_BattleNet_Info08.png)
*街机游戏玩法屏幕中的游戏玩法截图*

## 教程

“教程”选项卡可用于设置项目的指导教程地图。设置后，玩家可以通过“概览”屏幕上的“播放教程”按钮单独访问此地图。教程地图可用于让玩家在主地图所需的基本技能上获得一个安全、无风险的学习空间。玩家将被提供播放教程地图的选项，如下图所示。

[![概览屏幕上的播放教程按钮](./resources/011_BattleNet_Info09.png)](./resources/011_BattleNet_Info09.png)
*概览屏幕上的播放教程按钮*

“教程”选项卡本身如下所示。

[![教程选项卡](./resources/011_BattleNet_Info10.png)](./resources/011_BattleNet_Info10.png)
*教程选项卡*

教程地图通过“教程地图文件”进行关联。有三个选择：选择“自定义”将提供教程作为当前地图的教程游戏变体。选择“其他”允许您定义另一个地图文件，可以保存在本地或在 Battle.net 上，以用作教程。或者，您可以选择“无”，这将从“概览”屏幕上移除“播放教程”按钮。

“教程游戏速度”选项允许您在不影响主地图的情况下设置教程地图的游戏速度。

## 补丁说明

“补丁说明”选项卡允许您为项目的每个版本添加补丁说明。这些说明将公开显示在街机的“补丁说明”屏幕上。用户可以使用此页面跟踪任何重要更新和平衡更改，以及查看地图是否仍在维护中。

[![补丁说明选项卡](./resources/011_BattleNet_Info11.png)](./resources/011_BattleNet_Info11.png)
*补丁说明选项卡*

每个“补丁说明”条目包含版本、日期和一组说明。补丁永远根据其版本号显示，最新补丁位于顶部。每组说明最多可以有 100 行，而单行长度不能超过 140 个字符。您可以手动设置版本和日期，并且无需匹配街机发布系统生成的值。

[![街机补丁说明屏幕](./resources/011_BattleNet_Info12.png)](./resources/011_BattleNet_Info12.png)
*街机补丁说明屏幕*

## 翻译 E:\SC2Code\blizzard-tutorials-chinese\docs\New_Tutorials\01_Introduction\012_Game_Variants.md

# 游戏变体

设置游戏变体允许开发人员指定地图上的战网大厅中玩家可用的选项。与游戏属性一起，游戏变体控制您的项目可能呈现的不同模式的区别。这些变体只能在地图文档中设置，而不能在mod文件中设置。通过从编辑器中的任何位置导航到地图▶︎游戏变体来配置它们。您可以在下面的图像中看到位置。

[![导航至游戏变体](./resources/012_Game_Variants01.png)](./resources/012_Game_Variants01.png)
*导航至游戏变体*

一旦选择了游戏变体，您将看到以下窗口。

[![游戏变体窗口](./resources/012_Game_Variants02.png)](./resources/012_Game_Variants02.png)
*游戏变体窗口*

请注意左侧边栏，标题为“变体”。此列表详细说明了游戏可用的所有模式，无论您选择哪个选项卡视图，它都会保持活动状态。您可以通过在此侧栏中右键单击并选择“添加”或“添加标准”来创建新变体。

如果您正在开展新项目，在开始编辑变体之前，您需要取消选择底部左侧角的“使用默认变体”选项以退出默认设置。从侧边栏中选择一个变体将允许您在三个选项卡中更改其设置：游戏类型、游戏属性和玩家属性。这些选项卡中的设置稍后将在本文中详细介绍。

## 变体 - 大厅视图

游戏变体用于定义街机大厅主机可用的选项。这些选项可通过典型大厅的“设置”面板访问，如下图所示。

[![默认大厅](./resources/012_Game_Variants03.png)](./resources/012_Game_Variants03.png)
*默认大厅*

## 游戏类型

[![游戏类型选项卡](./resources/012_Game_Variants04.png)](./resources/012_Game_Variants04.png)
*游戏类型选项卡*

变体的基本设置在游戏类型选项卡中确定。模式定义了通常被认为是变体的内容，而类别则提供了排序选项。这将在玩家在游戏大厅中看到的“类别”和“模式”字段中反映出来。游戏的 Genre 设置，位于变体窗口顶部的下拉菜单中，定义了该地图在街机中按照主搜索类别进行排序。

## 游戏属性

[![游戏属性选项卡](./resources/012_Game_Variants05.png)](./resources/012_Game_Variants05.png)
*游戏属性选项卡*

游戏属性选项卡确定了典型大厅的“设置”部分中找到的大多数可配置值。这里的每个五个属性都可以设置为默认值。在某些情况下，可以使用“移除值”选项从可能选择的列表中删除值。每个属性的细节在下表中有所说明。

| 属性            | 详情                                                                                                                                                                                                                                                              |
| ---------------- | ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| 游戏时长        | 游戏结束后的时间长度。通常情况下，将其设置为无限，游戏将有自己的方法确定何时结束游戏。                                                                                                                 |
| 游戏隐私        | 确定比赛历史和建造顺序可见性选项。这主要用于支持高水平的竞技游戏，玩家可能希望将某些游戏信息保密。标准设置“正常”在游戏后将比赛历史和建造顺序设置为可见。                                                   |
| 游戏速度        | 确定引擎运行的具体游戏速度。标准设置为更快。                                                                                                                                                      |
| 大厅延迟        | 设置游戏从大厅启动后将播放的倒计时器。标准设置为 10 秒。                                                                                                                                           |
| 锁定联盟        | 设置联盟锁定状态。解锁的联盟将允许玩家在游戏中协商他们的盟友和敌人。默认情况下显示，但被锁定。也可以隐藏，这将锁定联盟但不会显示这些联盟是什么。                                |

为了了解这些属性如何在大厅中设置，重要的是了解访问 的概念。每个属性都有一个特定的访问，确定是否可以在游戏大厅中更改它。如果属性设置为解锁，它可以在大厅中更改。锁定属性可以在大厅中看到，但无法更改。隐藏属性既不能被看到也不能被更改。在大厅中可配置的任何属性只能由大厅主机设置。

## 玩家属性

[![玩家属性选项卡](./resources/012_Game_Variants06.png)](./resources/012_Game_Variants06.png)
*玩家属性选项卡*

玩家属性选项卡是玩家属性的更详细版本。在这里，您可以为每个单独玩家设置属性，包括 种族、颜色、障碍等标准近战选项。

与游戏属性选项卡类似，每个属性的访问可以在此处设置，但这里是基于每个玩家的基础进行处理。

## 翻译 E:\SC2Code\blizzard-tutorials-chinese\docs\New_Tutorials\01_Introduction\013_Standard_Dependencies.md.part-0.md

# 标准依赖

StarCraft II三部曲中使用的每个数据资产都通过依赖模块进行分发。这些标准依赖建立在游戏的基础 Core.SC2Mod 的基础上，并提供与特定版本的 StarCraft 相关的资产。本文详细介绍了每个标准依赖，包括其目的和内容的信息，无论是资产还是其他依赖。

[![标准依赖选择](./resources/013_Standard_Dependencies01.png)](./resources/013_Standard_Dependencies01.png)
*标准依赖选择*

![图片](./resources/013_Standard_Dependencies02.png)

包含支持自由之翼对抗游戏的主要数据资产。

依赖内容: 空值

数据计数:

单位 432 技能 227 行为 139

效果 474 武器 57 验证器 636

升级 111 演员 1930 移动器 61

模型 2042 纹理 259 声音 3398

按钮 496 灯光 134 地形类型 24

![图片](./resources/013_Standard_Dependencies03.png)

为自由之翼多人对抗游戏制定的更新和平衡更改。

依赖内容:

![自由](./resources/013_Standard_Dependencies02.png)
*自由*

数据计数:

单位 2 技能 48 行为 20

效果 55 武器 12 验证器 8

升级 49 演员 32 移动器 2

模型 1 纹理 1 声音 1

按钮 3 灯光 0 地形类型 0

![图片](./resources/013_Standard_Dependencies04.png)

独特于自由之翼单人战役的数据和资产。

依赖内容:

![自由](./resources/013_Standard_Dependencies02.png)
*自由*

数据计数:

单位 950 技能 282 行为 340

效果 913 武器 112 验证器 206

升级 156 演员 2571 移动器 71

模型 2150 纹理 338 声音 1714

按钮 320 灯光 294 地形类型 1

![图片](./resources/013_Standard_Dependencies05.png)

包含与自由之翼剧情模式相关的资产，例如来自海皮里恩号内部和一些战役升级的配音。

依赖内容:

![图片](./resources/013_Standard_Dependencies14.png) ![图片](./resources/013_Standard_Dependencies14.png)

自由 自由战役

数据计数:

单位 8 技能 37 行为 3

效果 10 武器 5 验证器 2

升级 91 演员 119 移动器 0

模型 31 纹理 0 声音 3215

按钮 1 灯光 0 地形类型 0

![图片](./resources/013_Standard_Dependencies06.png)

包含支持虫群之心对抗游戏的主要数据资产。

依赖内容:

![自由](./resources/013_Standard_Dependencies02.png)
*自由*

数据计数:

单位 330 技能 383 行为 187

效果 577 武器 32 验证器 291

升级 84 演员 1699 移动器 30

模型 1436 纹理 74 声音 1314

按钮 129 灯光 43 地形类型 64

![图片](./resources/013_Standard_Dependencies07.png)

为虫群之心多人对抗游戏制定的更新和平衡更改。

依赖内容:

![图片](./resources/013_Standard_Dependencies14.png) ![图片](./resources/013_Standard_Dependencies14.png)

自由 虫群

数据计数:

单位 4 技能 64 行为 47

效果 144 武器 21 验证器 48

升级 49 演员 156 移动器 5

模型 2 纹理 0 声音 14

按钮 30 灯光 1 地形类型 0

[![图片](./resources/013_Standard_Dependencies08.png)](./resources/013_Standard_Dependencies08.png)

独特于虫群之心单人战役的数据和资产。

依赖内容:

![图片](./resources/013_Standard_Dependencies14.png) ![图片](./resources/013_Standard_Dependencies14.png) ![图片](./resources/013_Standard_Dependencies14.png)

自由 自由战役 虫群

数据计数:

单位 705 技能 554 行为 492

效果 1722 武器 212 验证器 508

升级 111 演员 2021 移动器 83

模型 1386 纹理 20 声音 1160

按钮 573 灯光 82 地形类型 1

![图片](./resources/013_Standard_Dependencies09.png)

包含与虫群之心剧情模式序列相关的资产，例如登上凯瑞甘的利维坦。

依赖内容:

![图片](./resources/013_Standard_Dependencies14.png) ![图片](./resources/013_Standard_Dependencies14.png) ![图片](./resources/013_Standard_Dependencies14.png) ![图片](./resources/013_Standard_Dependencies14.png)

自由 自由战役 虫群 虫群战役

数据计数:

单位 157 技能 0 行为 0

效果 0 武器 0 验证器 0

升级 0 演员 258 移动器 0

模型 320 纹理 59 声音 840

按钮 0 灯光 84 地形类型 1

![图片](./resources/013_Standard_Dependencies10.png)

包含支持虚空之遗对抗游戏的主要数据资产。

依赖内容:

![图片](./resources/013_Standard_Dependencies14.png) ![图片](./resources/013_Standard_Dependencies14.png)

自由 虫群

数据计数:

单位 284 技能 428 行为 133

效果 520 武器 37 验证器 227

升级 75 演员 1553 移动器 27

模型 1173 纹理 68 声音 1283

按钮 110 灯光 46 地形类型 40

![图片](./resources/013_Standard_Dependencies11.png)

为虚空之遗多人对抗游戏制定的更新和平衡更改。

依赖内容:

![图片](./resources/013_Standard_Dependencies14.png) ![图片](./resources/013_Standard_Dependencies14.png) ![图片](./resources/013_Standard_Dependencies14.png)

自由 虫群 虚空

数据计数:

单位 8 技能 51 行为 47

效果 122 武器 30 验证器 52

升级 41 演员 131 移动器 5

模型 18 纹理 0 声音 4

按钮 10 灯光 2 地形类型 0

![图片](./resources/013_Standard_Dependencies12.png)

包含独特于虚空之遗单人战役的数据和资产。

## 翻译 E:\SC2Code\blizzard-tutorials-chinese\docs\New_Tutorials\01_Introduction\013_Standard_Dependencies.md.part-1.md

依赖内容：

![图像](./resources/013_Standard_Dependencies14.png) ![图像](./resources/013_Standard_Dependencies14.png) ![图像](./resources/013_Standard_Dependencies14.png) ![图像](./resources/013_Standard_Dependencies14.png) ![图像](./resources/013_Standard_Dependencies14.png)

自由 自由战役 群居 群居战役 虚空

数据统计：

单位 566 能力 700 行为 767

效果 2977 武器 166 验证器 848

升级 327 演员 2851 移动者 133

模型 1698 贴图 19 声音 2164

按钮 740 灯光 48 地形类型 0

![图像](./resources/013_Standard_Dependencies13.png)

包含与“Swarm之心”的故事模式序列相关的资产，例如登上“Adun之矛”。

依赖内容：

![图像](./resources/013_Standard_Dependencies14.png) ![图像](./resources/013_Standard_Dependencies14.png) ![图像](./resources/013_Standard_Dependencies14.png) ![图像](./resources/013_Standard_Dependencies14.png) ![图像](./resources/013_Standard_Dependencies14.png) ![图像](./resources/013_Standard_Dependencies14.png)

自由 自由战役 群居 群居战役 虚空 虚空战役

数据统计：

单位 217 能力 0 行为 2

效果 1 武器 0 验证器 0

升级 0 演员 232 移动者 0

模型 569 贴图 49 声音 4004

按钮 0 灯光 265 地形类型 0

![## War3.Sc2Mod](./resources/013_Standard_Dependencies14.png)
*## War3.Sc2Mod*

从《魔兽争霸III》中获取的模型、艺术品、界面和声音资源的高清更新。

依赖内容：空

数据统计：

单位 0 能力 0 行为 0

效果 0 武器 0 验证器 0

升级 0 演员 0 移动者 0

模型 0 贴图 0 声音 0

按钮 0 灯光 0 地形类型 0

![图像](./resources/013_Standard_Dependencies15.png)

支持《魔兽争霸III》艺术更新的数据和资产，使其成为游戏的可玩版本。

依赖内容：

![图像](./resources/013_Standard_Dependencies14.png) ![图像](./resources/013_Standard_Dependencies14.png)

自由 War3

数据统计：

单位 1595 能力 960 行为 83

效果 2092 武器 754 验证器 260

升级 0 演员 3068 移动者 384

模型 2669 贴图 61 声音 2782

按钮 2077 灯光 0 地形类型 2

## 依赖冲突

将模块中的依赖项填充为具有相同依赖内容的依赖项将导致标准依赖冲突，如下图所示。

![标准依赖冲突](./resources/013_Standard_Dependencies16.png)
*标准依赖冲突*

## 翻译 E:\SC2Code\blizzard-tutorials-chinese\docs\New_Tutorials\01_Introduction\014_The_Importer.md

# 导入工具

导入工具允许您将来自标准星际争霸库之外的自定义资产整合到您的项目中。

# 浏览导入工具

通过导航到模块 ▶︎ 导入工具打开导入工具。这将呈现给您以下视图。

[![导入工具](./resources/014_The_Importer01.png)](./resources/014_The_Importer01.png)
*导入工具*

在左侧，您将看到一个标记为“文档文件”的子视图。这是所有导入文件按其各自目录列出的位置。在右侧，您将看到一个标记为“文件信息”的子视图。这是一个信息窗口，显示当前文件的详细信息。激活文件的导入工具将类似下面的图片。

[![激活项目中的导入工具](./resources/014_The_Importer02.png)](./resources/014_The_Importer02.png)
*激活项目中的导入工具*

正如您所见，即使文件已经被导入到项目中，它们在导入工具中仍保持其文件结构。虽然其名称暗示导入工具仅用于向项目引入新文件，但它也充当一种‘导入模块’，您可从其中查看引擎外的任何资产并查看其当前文件结构。

## 导入文件

通过右键单击“文档文件”区域并导航到导入文件来导入文件。这将启动下面显示的“导入文件”窗口。

[![导入文件](./resources/014_The_Importer03.png)](./resources/014_The_Importer03.png)
*导入文件*

此窗口将自动填充所选目录中的所有文件。标记为复选框的每个文件将在您点击“确定”按钮后被导入到导入工具中。您可以通过选中或取消选中文件夹层次结构的顶部来激活或停用特定文件夹中的所有文件。

选中最顶部的文件夹，这里是“桌面”，将准备好导入每个目录文件。一旦您做出选择，您可以使用“导入路径”字段在导入工具中设置文件结构。上面的图片显示了从暴雪自定义地图StarJeweled借来的资产。它将被导入到路径'Assets/Textures'，这将把纹理'StarJeweled\_Gem\_Black.dds'放置在星际争霸资产结构中一个预先存在的位置。

## 导入文件目录

回到导入工具，您会看到文件名被标记为绿色。这表示文件已被导入，但未保存。导入工具中有几种颜色编码的状态，如下表所示。

| 颜色  | 状态                                       |
| ----- | ------------------------------------------ |
| 绿色  | 文件已被导入，但未保存。                   |
| 红色  | 文件已被移除，但未保存。                   |
| 蓝色  | 文件已被移动或重命名，但未保存。           |
| 黑色  | 文件已保存。                               |

此时，您应该保存以巩固文件在项目文件结构中的位置，如下所示。

[![导入文件结构](./resources/014_The_Importer04.png)](./resources/014_The_Importer04.png)
*导入文件结构*

接下来，确认文件是否在正确的目录中。请记住，文件被设置为路径到'Assets/Textures'文件夹，但似乎保留了其原始位置的'StarJeweled Assets'文件夹。您可以使用导入工具的文件移动功能来纠正这一问题。

## 移动文件

您可以通过右键单击文件并导航到移动文件来移动文件。完成后，将出现“移动文件”窗口。该窗口提供将资产移动到“现有路径”或“新路径”的选项。选择“新路径”，并输入“Assets/Textures”以将文件移动到应该最初放置的目录中。

![更改文件路径](./resources/014_The_Importer05.png)
*更改文件路径*

在保存文件后检查导入工具应该展示如下所示的结果。

![已更正目录的导入文件](./resources/014_The_Importer06.png)
*已更正目录的导入文件*

现在文件看起来已在正确位置。作为最后检查，您可以通过导航到窗口 ▶︎ 控制台来打开归档浏览器。在控制台中键入 'browse'。使用浏览器的搜索功能并输入资产名称来确认其在文件结构中的位置。这一操作的结果如下所示。

![](./resources/014_The_Importer07.png)
*归档浏览器确认正确的文件结构*

## 翻译 E:\SC2Code\blizzard-tutorials-chinese\docs\New_Tutorials\01_Introduction\015_Finding_Help.md

# 寻求帮助

由于游戏设计的广泛性质，可能永远不会有一个单一的全面指南，包括您想要了解的一切。解决这个问题的最佳方式通常是与社区互动。寻求教育和贡献是非常有益的，也有助于解决问题。知道在这些情况下可以找到帮助是作为开发者的重要一部分。

## 态度说明

在开始讨论之前，请记住您正在向另一个个人请求帮助。他们可能正在自愿提供时间，所以要充分利用他们回答问题的时间。您应该开始准备寻求帮助。仔细检查问题，确保问题不是由于挫折或疲劳导致的。准备好任何可能需要的截图和信息，尽可能简洁地描述您的问题。

寻求帮助时，保持有礼貌和耐心很重要。有时候可能感觉没有人在关注你，但值得考虑的是，对于其他人来帮助您可能需要一些时间，特别是如果您的问题很困难。如果是一个特定问题，可能需要一些时间才能找到已经处理过该问题的其他人。如果您感觉没有得到帮助，可以尝试自己探索以解决问题。

## 社区论坛

讨论论坛可能是获取您所需信息的绝佳地方。您可以在<http://us.battle.net/sc2/en/forum/index>找到暴雪官方星际争霸 II 论坛。有几个论坛可以找到帮助，但您可能希望从“开发、反馈和讨论”部分开始。

[![暴雪官方 SC2 论坛](./resources/015_Finding_Help01.png)](./resources/015_Finding_Help01.png)
*暴雪官方 SC2 论坛*

请注意，这些论坛被分为不同子论坛，大部分以编辑器模块为标题。在适当的子论坛发帖可以确保您的问题找到最适当的听众。您也可以尝试搜索社区论坛，其中最引人注目的是 SC2Mapster。您可以找到它在地址<http://www.sc2mapster.com/forums>。您会想要关注“开发”论坛部分。与暴雪的官方论坛一样，那里的论坛也被分为子论坛。

[![SC2Mapster 社区论坛](./resources/015_Finding_Help02.png)](./resources/015_Finding_Help02.png)
*SC2Mapster 社区论坛*

无论论坛是官方的还是非官方的对讨论质量没有影响，但如果您有软件问题，最好在官方论坛上解决，因为暴雪员工经常访问。一些社区网站，如SC2Mapster，还拥有IRC频道上的实时聊天。这些可以是向活跃用户提问问题并快速指导您解决问题的好地方。

## 建立关系

几乎每个开发者在某个时候都需要帮助测试他们的游戏。通过自愿帮助他人，您很快就会交到朋友。拥有一个强大的开发者网络是解决问题和学习的最佳方式。将来，在寻找测试者时，您将获得帮助。一旦您开始建立自己的知识库，自愿帮助解决问题可以帮助您与社区建立关系。

## 扩展您的搜索

面临问题时寻找帮助的另一种方法是查找现有的文档或教程。您可能希望将搜索重点放在大型基于社区的媒体网站上。像YouTube这样的服务拥有多年积累的大量社区教程。

现有的星际地图可能是自我教育的最佳资料。任何状态设置为“已解锁”的地图都可以被任何编辑器用户打开、阅读和修改。但请记住原作者的意愿，如果您将另一个人的作品作为自己的作品重新发布，可能会受到惩罚。

其中值得注意的“已解锁”内容包括暴雪利用编辑器制作的作品。整个战役已经向公众公开供学习，以及许多暴雪街机项目。通过“文件”▶︎ “打开”▶︎ “战网”，然后将搜索来源设置为“暴雪”，点击“前往”。这将提供暴雪发布地图的完整列表。特别值得调查的地图包括“星际大师”、“Left 2 Die”和“艾尔厨师”。

[![暴雪的开源地图之一](./resources/015_Finding_Help03.png)](./resources/015_Finding_Help03.png)
*暴雪的开源地图之一*

如果您的问题涉及更一般的概念，例如数学、物理或设计，请不要犹豫将您对知识的追求扩展到这些主题中。更专业的网站、书籍和其他资料将帮助您学习这些学科。然后您可以将新知识应用于游戏开发。这样，您可以继续用新颖且令人激动的灵感丰富您的设计。

## 翻译 E:\SC2Code\blizzard-tutorials-chinese\docs\New_Tutorials\01_Introduction\016_Publishing.md.part-0.md

# 发布

虽然使用“编辑器”制作的项目可以在本地以单人形式进行游玩，但大多数创作者的意图是在线分享他们的作品。幸运的是，作为暴雪游戏的托管平台，Battle.net已经得到扩展，以支持在星际争霸引擎下工作的开发人员。过去，项目必须通过游戏托管来共享，这是《魔兽争霸III》和《星际争霸：自由之翼》的情况。现在，玩家可以找到并下载游戏，无需开发人员的干预。这种独立系统还为用户提供了额外的保护、版本控制和本地化支持。

然而，基于网络的项目共享需要游戏开发人员进行一些更多的预先准备。这种准备以“编辑器”中的新发布系统的形式呈现。您可以通过导航到“文件 ▶ Publish”来找到它们，这将启动下面展示的“发布文档”窗口。

[![发布文档窗口](./resources/016_Publishing01.png)](./resources/016_Publishing01.png)
*发布文档窗口*

您将首先看到的屏幕是“登录”视图，“验证”字段中提到了发布状态。正如您所见，由于“未登录到Battle.net”，用户无法继续。为了进行发布，您需要一个附有完整版星际争霸II的Battle.net帐户。“编辑器”本身配备了星际争霸II：入门版，但免费用户无法在线发布。这个功能可以通过任何版本的星际争霸II帐户获得，包括独立游戏。

如果单击“登录”按钮，您将被提示输入您的帐户名称和密码。

![Battle.net登录窗口](./resources/016_Publishing02.png)
*Battle.net登录窗口*

在这里输入您的帐户电子邮件和密码，然后选择“连接”。如果您的帐户关联有身份验证器，另一个窗口将要求您输入身份验证器代码。如果您打算经常进行发布，您可能会想要使用“记住帐户”切换，这可以节省您大量时间。

一旦您登录并返回主屏幕，应该会看到“验证”显示更加鼓舞人心的“准备发布”消息。您还应该发现“下一步”按钮现在可以使用。在继续之前，请注意“发布到区域”的控件。这些是方便选项，允许您的项目一次发布到多个区域，而无需再次登录。

## 发布要求

从“登录”窗口选择“下一步”将带您到主要的发布视图“配置选项”。在将游戏托管到Battle.net之前，游戏必须满足一系列要求。这个屏幕为您提供了几种选项来准备项目上传，但最重要的是底部子视图中的发布要求。如果您的项目未达到这些要求中的任何一个，那么“验证”字段将显示“由于下面的问题无法发布”，如下图所示。

[![发布选项窗口](./resources/016_Publishing03.png)](./resources/016_Publishing03.png)
*发布选项窗口*

发布要求通常是需要在上传前澄清的一些小型后勤问题。下表详细列出了一些常见问题及其解决方案。在这些解决方案中提到的一些选项将在后续部分中进行更详细的描述。

| 要求                                                              | 描述及解决方法                                                                                                                                                                                                                                                    |
| ------------------------------------------------------------------ | ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| 文档描述未更改为默认文本。                                       | 项目必须更改其默认描述。                                                                                                                                                                                                                                          |
|                                                                   | 返回编辑器，导航到“Map ▶︎ Map Info”，并更改“描述”字段中的文本。                                                                                                                                                                                                  |
| 必须选择已锁定/未锁定模式。                                       | 发布的地图必须设置为已锁定或未锁定之一。                                                                                                                                                                                                                         |
|                                                                   | 从发布系统的“Configure Options”窗口中的“Locked/Unlocked Mode”字段中设置地图为已锁定或未锁定之一。                                                                                                                                                              |
| 已存在名称'X' \[Locale\].                                          | 在指定区域的语言环境中，发布名称“X”已经被使用。                                                                                                                                                                                                                 |
|                                                                   | 为所有地区选择一个新的发布名称，或返回到“发布到区域”选项，然后手动为有问题的区域进行本地化处理，并使用不同的名称。请注意，这种方法将导致项目以后需要进行多次发布。                                                                              |
| 请求的发布名称包含不可接受的词语。                               | 项目的发布名称中存在保留词语。                                                                                                                                                                                                                                    |
|                                                                   | 更改发布名称。                                                                                                                                                                                                                                                     |

一旦满足了所有发布要求，“验证”字段将显示“准备发布！”

## 发布选项

“配置选项”包括一系列选项，旨在为地图准备发布，并在上传前解决要求问题。以下是详细说明。

| 字段                | 详情                                                                                                                                                                                                                                                          |
| ------------------- | -------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| 发布名称            | 项目的发布名称。这是在线使用的名称，默认设置为“Map Info”中设置的项目名称。您可以使用“更改名称”按钮更改此名称。                                                                                                                                            |
| 语言环境            | 选择用于发布的本地化版本。                                                                                                                                                                                                                                      |
| 修订                | 增加自动生成的“版本”字段。主要版本的增量为1.0，而次要版本的增量为0.1。修订与发布名称相关联。每当名称更改时，值将重置为默认值0.0。                                                                                                                           |
| 发行                | 设置游戏的可访问性。私人模式要求上传者托管，并且需要为每个玩家手动邀请。公共模式允许任何人托管。                                                                                                                                                        |
| 作者                | 使用您的Battle.net ID列出作者信息。如果选择“使用真实名称”，则将附加您的暴雪帐户的名称。                                                                                                                                                                      |
| 锁定/未锁定模式     | 锁定状态与源项目的可用性有关。任何开发人员都可以在编辑器中下载未锁定的地图。设置为已锁定将删除源项目的公共可用性。                                                                                                                                       |

在考虑已锁定和未锁定状态时要小心。前者将完全保护您的地图免受任何开发人员的侵害，包括您自己。如果选择了此状态并遗失文件，您的项目将保留在线，无法恢复。将项目设置为未锁定可以纠正这个问题，同时还使您能够与其他开发人员共享项目，有助于促进协作知识的增长。

## 文件管理

在配置每个项目选项并满足所有要求后，您可以点击“下一步”到达“存储要求”视图。这将为您展示文件占用的空间以及项目的大小限制。

![存储要求视图](./resources/016_Publishing04.png)
*存储要求视图*

## 翻译 E:\SC2Code\blizzard-tutorials-chinese\docs\New_Tutorials\01_Introduction\016_Publishing.md.part-1.md

每个 Battle.net 账户被分配以下存储空间：20 个同时上传的文件、总计 157 MB 的上传空间，以及地图最大单独上传大小为 20 MB，模组为 100 MB。这些限制不在区域之间共享。如果您接近任何这些限制，您可以选择“管理文件”来对当前上传文件进行更改。您将被带到下面显示的“管理已发布文件”窗口。

[![已发布文件管理器](./resources/016_Publishing05.png)](./resources/016_Publishing05.png)
*已发布文件管理器*

该屏幕显示您账户当前上传的所有项目，列出它们的锁定状态、发布、版本和大小。突出显示一个项目将显示其完整详情。任何已发布的项目均可从 Battle.net 中删除。如果您需要释放空间，可以使用“从账户中删除”按钮。完成后，关闭窗口，通过单击“检查存储要求”视图中的“确定”来发布。您将看到一个包含 EULA 和 TOU 协议的弹出窗口。

[![合规性检查](./resources/016_Publishing06.png)](./resources/016_Publishing06.png)
*合规性检查*

确认您遵守协议后，单击“是”进行发布。

## 翻译 E:\SC2Code\blizzard-tutorials-chinese\docs\New_Tutorials\01_Introduction\017_Editor_History.md

# 编辑器历史

暴雪公司在其即时战略游戏旁边发行了许多编辑套件。随着每一次新版本的发布，工具的功能不断增强，为社区提供了更广泛的机会。正是这个漫长的开发和完善过程使得我们今天拥有了星际争霸 II 编辑器。本文将简要介绍这些编辑器的历史，其中许多仍在积极使用中，以便更好地理解星际争霸 II 编辑器。

![图片](./resources/017_Editor_History02.png)

《魔兽争霸 II 地图编辑器》于 1995 年发布。玩家首次有机会进入开发者工具，创建自己的地图，既可用于朋友间的对战，也可用于自定义战役。

[![地图编辑器视图](./resources/017_Editor_History03.png)](./resources/017_Editor_History03.png)
*地图编辑器视图*

显著的新功能

- 玩家首次可以使用编辑器为暴雪 RTS 制作自定义任务。
- 地形可以使用七个元素在各种大小的地图上建造。
- 所有主要资源都可以放置在地图上。
- 使用任何单位、建筑和战役英雄，并将它们分配给高达八个不同的玩家方。
- 将地图配置为四种可用地形集之一。
- 编辑升级成本、起始资源和单位属性。
- 将八个玩家方中的每一个分配给各种 AI 控制器。

在《魔兽争霸 II 地图编辑器》下，所有地图的自定义设置都通过五个属性窗口进行配置，如下图所示。

[![编辑器属性窗口](./resources/017_Editor_History04.png)](./resources/017_Editor_History04.png)
*编辑器属性窗口*

没有支持任何自定义逻辑、对象或类似的功能，使地图创建者无法丰富项目。尽管如此，仍有许多独特的地图利用创意地形和单位布置来构建有趣的体验。

[![魔兽争霸 II 地图创建](./resources/017_Editor_History05.png)](./resources/017_Editor_History05.png)
*魔兽争霸 II 地图创建*

![图片](./resources/017_Editor_History06.png)

《星际争霸战役编辑器》于 1998 年发布。通过支持触发器，一种脚本逻辑，地图创建者的选项得到了极大扩展。新的 Battle.net 也使得玩家能够更轻松地连接和分享地图，引发了自定义创作受众的激增。

[![战役编辑器视图](./resources/017_Editor_History07.png)](./resources/017_Editor_History07.png)
*战役编辑器视图*

显著的新功能

- 现在包括通过触发器编辑器的自定义逻辑系统。
- 可以使用任务简报编辑器构建任务前故事模式序列。
- 可以为地形集添加多样的环境元素。
- 雾战数据可以绘制到地图中。
- 可以导入并使用自定义声音进行叙述序列或其他效果。
- 可以构建对玩家输入和驱动触发器做出反应的位置。
- 单位和英雄可以重命名，使地图创建者能够为地图创建新的想象主题样式。

新编辑器出现为任务序列和触发逻辑拓宽了编辑体验。

![](./resources/017_Editor_History08.png)
*任务简报编辑器 -- 触发器编辑器*

由于积极的在线社区和扩展工具的结合，许多新的游戏类型和故事得以共享。使用这些工具创造的许多创新促成了游戏世界的更广泛发展。

[![星际争霸地图创建](./resources/017_Editor_History09.png)](./resources/017_Editor_History09.png)
*星际争霸地图创建*

![图片](./resources/017_Editor_History10.png)

《魔兽争霸 III 世界编辑器》于 2002 年发布。为了适应迈向 3D 的过渡以及《魔兽争霸 III》的需求，编辑器的功能扩展到了如此多样化和规模，以至于被分解为各个独立模块。这些工具已经成为一套编辑套件，为其用户提供了游戏开发的所有主要学科的控制权。

[![世界编辑器视图](./resources/017_Editor_History11.png)](./resources/017_Editor_History11.png)
*世界编辑器视图*

显著的新功能

- 编辑器现在由八个模块组成：地形编辑器、触发器编辑器、声音编辑器、对象编辑器、战役编辑器、AI 编辑器、对象管理器和导入管理器。
- 可在地图项目数据中创建完全新的单位、对象、升级、能力、物品和英雄。
- 可以设置自定义摄像机，并在游戏过程中动态使用。
- 触发系统被扩展以提供重要的游戏时脚本。

几乎每个工具功能的扩展导致编辑器发展成为一个模块化工具集。

![](./resources/017_Editor_History12.png)
*对象编辑器模块 -- 触发器编辑器模块*

在这一点上，即时战略游戏编辑工具已经发展成为一个强大的游戏开发套件。随着活跃至今的社区和许多发布项目的漫长历史，《魔兽争霸 III 世界编辑器》仍然受到设计学生、爱好者和玩家的喜爱。 

[![魔兽争霸 III 地图创建](./resources/017_Editor_History13.png)](./resources/017_Editor_History13.png)
*魔兽争霸 III 地图创建*

## 翻译 E:\SC2Code\blizzard-tutorials-chinese\docs\New_Tutorials\02_Terrain_Editor\018_Terrain_Editor_Introduction.md

# 地形编辑器介绍

地形编辑器提供了控制项目中世界外观的工具。地形编辑器让您可以在七个层次中工作，因此您可以根据您的需求构建地图，无论是竞争性的还是创造性的。

![](./resources/018_Terrain_Editor_Introduction1.png)
*Masvard的地形场景 'One Wicked Dream'*

## 层次

![图片](./resources/018_Terrain_Editor_Introduction2.png)

这是用于构建世界的最底层。在这里，您可以抬高或降低基本地貌以形成山丘和山谷。地面上涂有一种动态绘画系统，应用了各种草地、泥土、金属、岩石等的调色板。您可以在其上添加植被、水域、悬崖和坡道。

![图片](./resources/018_Terrain_Editor_Introduction3.png)

这个层次允许您放置任何单位、建筑物或可破坏地形。

![图片](./resources/018_Terrain_Editor_Introduction4.png)

这一层允许您放置数千个与编辑器一起提供的装饰元素之一。这些小玩意可以被精心制作和修改到最微小的细节，使您能够为您的景观增添味道。

![图片](./resources/018_Terrain_Editor_Introduction5.png)

这一层是您放置点的地方，这些点用于标记数据中的位置并触发游戏的部分内容。这就是您计划设计效果放置的方式。

![图片](./resources/018_Terrain_Editor_Introduction6.png)

与点类似，区域允许您划定具有特定游戏条件的整个区域。通过在编辑器视图中构建这些区域，您将能够直观地了解您的项目逻辑和实际游戏将如何配合。

![图片](./resources/018_Terrain_Editor_Introduction7.png)

您可以在此层中安排和设置摄像机。编辑器具有强大的选项，使您可以在三维空间的任何位置设置摄像机对象，测试它们，然后将它们用于过场动画或游戏。在使用摄像机时还有各种可用的视觉效果，您可以将其导出到新项目中继续使用。

![图片](./resources/018_Terrain_Editor_Introduction8.png)

路径图层是您设置特定单位类型规则的地方，无论是地面单位还是飞行单位，并确定地图的哪些区域可以通行。正确控制路径使您能够决定玩家可以旅行的位置。

## 翻译 E:\SC2Code\blizzard-tutorials-chinese\docs\New_Tutorials\02_Terrain_Editor\019_Terrain_Editor_Interface.md

# 地形编辑器界面

地形编辑器可能是编辑器中最多样化的部分。除了用作地图设计的工作空间之外，它还是许多其他部分与地图文件交互的地方。例如，触发器编辑器通过点和区域与地形编辑器进行通信。数据编辑器通过单位和其他实体与之通信，而剧情编辑器则通过摄像机等方式运行。

## 界面

[![乌旋塔克的伽尼米德的界面视图](./resources/019_Terrain_Editor_Interface1.png)](./resources/019_Terrain_Editor_Interface1.png)
*乌旋塔克的伽尼米德的界面视图*

正如你从上面可能猜到的那样，地形编辑器充当一种项目中心。最终结果是，它具有广泛的选项和功能。这导致它被分成七个单独的层。您可以使用主工具栏上的地形栏来导航这些层。在那里，您会找到按钮，直接进入每个层，如下所示。

![地形栏](./resources/019_Terrain_Editor_Interface2.png)
*地形栏*

默认情况下，这些层分开明确。一旦启用了一个层，您只能处理指定给该层的元素。在使用地形编辑器时，您始终只能有一个活动层。您可以通过检查当前突出显示的层按钮来找到您目前的位置。

每一层都有自己的选项。这些选项显示在主地形视图的左侧的一个大面板上。这被称为“UI面板”。下面的图像显示了在打开“单位层”时的外观。

![UI面板](./resources/019_Terrain_Editor_Interface3.png)
*UI面板*

**UI面板**随当前层的不同而改变。每个层都有一个调色板，其中提供了该层中大多数主要控件。您可以在处理每个层的个别文章中更详细地阅读有关调色板的信息。值得注意的是，顶部的“文件”选项卡提供了许多选项，这些选项被分成子选项卡。下面将对这些进行描述。

## 视图选项

这些选项控制编辑器内单个组件的可见性，更改当前视口属性，并为相机功能提供一些支持。您可以从“视图”选项卡中找到它们，如下所示。

![视图选项卡](./resources/019_Terrain_Editor_Interface4.png)
*视图选项卡*

| 操作               | 效果                                                                                     |
| -------------------- | ------------------------------------------------------------------------------------------ |
| 显示UI面板        | 控制UI面板的可见性。                                                   |
| 显示UI              | 控制显示几个高级UI功能的可见性，例如帧率。                |
| 显示层           | 分别控制每个层的可见性。                                        |
| 显示名称          | 控制元素名称的可见性，如点和区域。                  |
| 显示标签           | 控制在“地图属性”菜单中创建的标签的可见性。                  |
| 显示难度      | 控制单位的难度设置的可见性。                                |
| 显示背景      | 控制编辑器显示中的天空盒的可见性。                               |
| 显示放置网格  | 控制网格组件的可见性。                                                |
| 显示路径  | 控制不同类型路径的可见性，例如“不可通行区域”。         |
| 显示地形         | 控制可见性某些地形组件，如蔓生物、水域或地图边界。|
| 启用物体声音 |	切换在编辑器中放置对象时的声音效果。                               |
| 锁定游戏视图 | 锁定摄像机到近战游戏中找到的特定设置。|

## 渲染选项

这一部分包含您可以用来控制编辑器中高级图形元素可见性的选项。您可以在“渲染”选项卡中找到它们，如下所示。

![渲染选项卡](./resources/019_Terrain_Editor_Interface5.png)
*渲染选项卡*

| 操作              | 效果                                                                                |
| ------------------- | ------------------------------------------------------------------------------------- |
                  | 控制不同类型着色器的可见性。                            |
| 显示光照       | 选择显示游戏光照或当前正在编辑的自定义光照。 |
| 显示雾特效    | 控制雾特效的可见性。                                              |
| 显示粒子     | 控制包括模型、演员等在内的粒子元素的可见性。  |
| 显示线框模式 | 启用一种显示每个元素的线框模式。	                            |

以下是一张几个食脑虫被设定为在线框模式下显示的截图。

[![线框模式](./resources/019_Terrain_Editor_Interface6.png)](./resources/019_Terrain_Editor_Interface6.png)
*线框模式*

## 层选项

这一部分允许您控制任何给定时间哪些层是活动的，打破它们的默认分离。您可以使用“选择自”字段来激活不同配置的层。您还会在这里找到导航选项，它们允许您像地形栏一样从层移动到层。您可以使用“图层”选项卡找到层选项，如下所示。

![图层选项卡](./resources/019_Terrain_Editor_Interface7.png)
*图层选项卡*

## 工具

在这里，您将找到支持选择和设计地图等基本功能的选项。您可以使用“工具”选项卡导航工具。

![工具选项卡](./resources/019_Terrain_Editor_Interface8.png)
*工具选项卡*

| 操作              | 效果                                                                    |
| ------------------- | ------------------------------------------------------------------------- |
| 选择模式     | 允许您使用鼠标选择对象。                             |
| 测量距离     | 将光标变为测量工具。                                 |
| 对齐网格        | 更改放置元素的网格对齐行为。                       |
| 对角选择  | 旋转选择轴的轴，使框选择沿着45°轴发生。 |
| 使用分组选择  | 将选择行为更改为仅影响组内的单位。           |
| 使用对称  | 切换用于地图的对称行为。                           |

“测量距离”选项会更改默认鼠标，以便您可以从一个点测量到另一个点。这在确定事物的粗略距离（如近战地图设计）以及帮助计算触发器或数据时很有用。您可以通过点击一次开始测量，然后在您所需的端点处单击来使用该工具。下面的图像显示了“测量距离”的操作示例。

[![测量工具](./resources/019_Terrain_Editor_Interface9.png)](./resources/019_Terrain_Editor_Interface9.png)
*测量工具*

## 翻译 E:\SC2Code\blizzard-tutorials-chinese\docs\New_Tutorials\02_Terrain_Editor\020_Terrain_Layer.md.part-0.md

# 地形图层

地形图层涉及地形设计的基本元素，包括地面纹理、高程、悬崖和水域。您可以通过单击下方显示的图标，在地形栏中访问它。

![地形图层图标](./resources/020_Terrain_Layer1.png)
*地形图层图标*

## 地形调色板

每个地图都从创建屏幕开始，在这里您将做出有关地图外观的基本决策，确定其纹理、高度和大小。一旦编辑器生成了地图，它将在地形编辑器中打开，为您提供一块全新的地形板、一块空白画布。

[![地图创建](./resources/020_Terrain_Layer2.png)](./resources/020_Terrain_Layer2.png)
*地图创建*

地形开发过程通常从地形图层开始。延续绘画主题，该图层中的工具称为画笔。这些画笔可以在下方的地形调色板中找到。

![地形调色板](./resources/020_Terrain_Layer3.png)
*地形调色板*

## 画笔选项

选择任何画笔将显示调色板中的各种修改器。每个画笔都有选项，允许您控制 '绘制' 地形的方式。下面您将看到这些选项的一个示例，然后是所有可用选项的详细说明。

[![画笔选项](./resources/020_Terrain_Layer4.png)](./resources/020_Terrain_Layer4.png)
*画笔选项*

| 属 性      | 效 果                                                                                                                                                                                                                                                                               |
| ---------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------ |
| 增 益      | 调整执行当前操作的大小。                                                                                                                                                                                                                                                            |
| 大 小      | 更改执行当前操作的尺寸。                                                                                                                                                                                                                                                            |
| 速 度      | 调整执行当前操作的速度。                                                                                                                                                                                                                                                            |
| 形 状      | 选择执行当前操作的区域形状。                                                                                                                                                                                                                                                        |
| 样 式      | 将效果应用于正在执行的操作。这些包括各种不透明度、形状和随机性选项。                                                                                                                                                                                                              |
|            | 画笔样式是默认标准，没有额外效果。                                                                                                                                                                                                                                                  |
|            | 喷枪样式在应用区域的边缘周围应用一定程度的不透明度，由可变性滑块控制。                                                                                                                                                                                                               |
|            | 噪声风格向应用添加一个随机成分，而分形风格则递归地应用画笔。这最后两种风格及其与属性可变性和分辨率的修改最好通过编辑器中找到的预览来描述。 |

除了这些常规选项外，地形图层中提供的九种画笔每种都有许多独特的选项。您可以在下面的部分中阅读有关这些画笔及其选项的详细说明。

## 画笔

![图片](./resources/020_Terrain_Layer5.png)

此工具允许您将纹理绘制到地图表面上。绘制是用一种混合系统完成的，该系统允许每张地图上的八种纹理进行动态分层。

[![纹理画笔及其使用](./resources/020_Terrain_Layer6.png)](./resources/020_Terrain_Layer6.png)
*纹理画笔及其使用*

| 属 性           | 效 果                                                                                                                                                                                               |
| ---------------- | ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| 添加纹理       | 使用选定的画笔选项将当前选择的纹理应用到地图上。                                                                                                                                                    |
| 移除纹理       | 使用选定的画笔选项从地图中移除当前选择的纹理。                                                                                                                                                      |
| 均匀纹理       | 以锁定的 Alpha 值将当前纹理应用到地图上，导致不透明度无变化。                                                                                                                                     |
| 替换纹理       | 用第二个纹理替换第一个纹理选择，不会改变任何其他纹理。                                                                                                                                           |
| 涂抹纹理       | 将用户点击的第一个纹理推到其他纹理上，只要按住按钮不放。                                                                                                                                          |
| 模糊纹理       | 软化相邻纹理之间的边界。                                                                                                                                                                          |
| 填充纹理       | 使用选择的纹理填充整个区域。区域的选择基于单击画笔时的海拔高度。                                                                                                                                    |

![图片](./resources/020_Terrain_Layer7.png)

此工具允许您改变地形拓扑。使用该画笔制作的所有高度特征将保持在单位移动可通过的路径上，无论它们看起来多么奇异。您可以使用悬崖和路径工具进行路径划分。

[![高度画笔及其使用](./resources/020_Terrain_Layer8.png)](./resources/020_Terrain_Layer8.png)
*高度画笔及其使用*

| 属 性   | 效 果                                                                                               |
| ------ | ---------------------------------------------------------------------------------------------------- |
| 提 升  | 根据画笔选项和幅度增加目标区域的高度。                                                             |
| 降 低 | 根据画笔选项和振幅减少目标区域的高度。                                                              |
| 均匀   | 改变画笔目标区域内的高度，使之大致相等。                                                          |
| 噪音   | 对目标区域的高度应用随机变化。                                                                       |
| 幅度   | 设置高度调整的大小，类似于标准画笔选项的增量。                                                    |

![图片](./resources/020_Terrain_Layer9.png)

此工具更改目标选择的悬崖级别。地形有四个不同级别，具有特殊的游戏规则和交互。基于地面的单位通过坡道在层之间移动。您还可以使用此工具放置这些坡道。

[![悬崖画笔及其使用](./resources/020_Terrain_Layer10.png)](./resources/020_Terrain_Layer10.png)
*悬崖画笔及其使用*

| 属 性          | 效 果                                                                                                                                                  |
| -------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------- |
| 提升悬崖      | 将当前目标区域中的所有地形提升一个悬崖级别。如果该区域已在最高级别，则不会更改。                                                                      |
| 降低悬崖      | 将当前目标区域中的所有地形降低一个悬崖级别。如果该区域已在最低级别，则不会更改。                                                                      |
| 同一级悬崖    | 使用此画笔单击选择目标区域的悬崖级别，按住按钮将在移动画笔时应用此悬崖级别的任何地方。                                                               |
| 添加坡道      | 在目标处为不同地形级别之间创建坡道，如果可能的话。                                                                                                |
| 移除坡道      | 移除目标区域中的任何坡道。                                                                                                                         |
| 类型          | 在当前地形类型中的坡道可能视觉风格之间切换。                                                                                                        |

![图片](./resources/020_Terrain_Layer11.png)

此工具允许您从编辑器中提供的动态场景对象数组中进行选择。这些地形对象需要特殊的放置和与装饰品或单位的合作，才能产生所需效果。

[![地形对象画笔及其使用](./resources/020_Terrain_Layer12.png)](./resources/020_Terrain_Layer12.png)
*地形对象画笔及其使用*

## 翻译 E:\SC2Code\blizzard-tutorials-chinese\docs\New_Tutorials\02_Terrain_Editor\020_Terrain_Layer.md.part-1.md

| 属性                 | 效果                                                                                   |
| ------------------- | --------------------------------------------------------------------------------------- |
| 添加地形对象          | 在目标区域放置当前选择的地形对象。                                                     |
| 显示地形单元          | 显示目标区域中已更改可见性的任何地形单元。                                             |
| 隐藏地形单元          | 更改目标区域中任何地形单元的可见性。                                                   |
| 地形对象清单          | 所有可用地形对象的列表，按适当应用的悬崖级别排序。                                   |

[![图片](./resources/020_Terrain_Layer13.png)](./resources/020_Terrain_Layer13.png)

此刷子将应用区域到地图上，其中水将被渲染。在这种情况下，“水”实际上指的是各种动态流体，在某些地形类型中可能会出现为熔岩或酸。这些区域通过此刷子锁定为一个常量大小，以平方单位应用。

![水刷和其用途](./resources/020_Terrain_Layer14.png)
*水刷和其用途*

| 属性                  | 效果                                                                                             |
| --------------------- | ------------------------------------------------------------------------------------------------- |
| 添加水                 | 在目标区域应用水区域。                                                                          |
| 移除水                 | 移除目标区域内的任何水区域。                                                                   |
| 水类型列表              | 提供可应用的各种水类型选择。请注意，这些不与地形类型相关联，可以以任意量应用。              |
| 状态                    | 在当前水类型中切换到任何备用设置。                                                            |
| 高度                    | 正在应用区域中水的高度。水在每个区域以固定高度应用。此设置可能会影响特定区域的外观，从浅滩到被淹没。 |

[![图片](./resources/020_Terrain_Layer15.png)](./resources/020_Terrain_Layer15.png)

此工具渲染道路，道路被视为一种特殊类型的视觉元素。道路会沿着此工具放置的路径自动渲染点。该系统旨在快速生成外观逼真的道路，无需放置单独的装饰片段。

![道路刷和其用途](./resources/020_Terrain_Layer16.png)
*道路刷和其用途*

| 属性              | 效果                                                                                                           |
| ----------------- | --------------------------------------------------------------------------------------------------------------- |
| 添加道路           | 通过放置单个点创建道路段。在当前放置的点之外单击将添加新的段。在当前放置的点内单击允许您更改道路段。            |
| 类型               | 在当前地形类型中选择可用的道路纹理。                                                                             |
| 道路宽度           | 更改当前放置的道路段的宽度。                                                                                   |

## 植被刷

![图片](./resources/020_Terrain_Layer17.png)

此工具允许您绘制区域，因此编辑器可以根据其当前纹理自动生成植被。植被是一种自动生成的视觉元素，类似于装饰物，在编辑器中不能直接更改。

![植被刷和其用途](./resources/020_Terrain_Layer18.png)
*植被刷和其用途*

| 属性                  | 效果                                                                                                                                                     |
| -------------------- | --------------------------------------------------------------------------------------------------------------------------------------------------------- |
| 允许植被              | 设置目标区域以允许生成植被。激活刷子后，这些区域将显示为灰色叠加。                                                                                    |
| 禁止植被              | 设置目标区域不生成植被。                                                                                                                              |
| 每个单元的密度        | 确定在使用生成植被选项时要生成的植被量。                                                                                                             |
| 生成植被              | 在地图的标记区域内创建植被元素。还将清除上次生成运行的植被，更新植被状态已更改的区域。                                                             |

[![图片](./resources/020_Terrain_Layer19.png)](./resources/020_Terrain_Layer19.png)

此工具让您可以存取四个照明区域的调色板，并将其绘制到地图上。它还允许您混合这些区域。游戏启动时，每个单独的区域将应用相应的照明选项。具有混合照明区域的任何区域也将混合照明选项。这使您能够构建动态、逼真的照明环境。激活刷子时，四个照明区域将使用红色、绿色、蓝色和黄色的着色叠加显示。

![照明刷和其用途](./resources/020_Terrain_Layer20.png)
*照明刷和其用途*

| 属性                    | 效果                                                                                                                                    |
| ----------------------- | ---------------------------------------------------------------------------------------------------------------------------------------- |
| 添加照明                | 使用所选刷子选项将当前选择的区域应用到地图上。                                                                                        |
| 移除照明                | 使用所选刷子选项从地图上移除当前选择的纹理。                                                                                         |
| 统一照明                | 刷子的第一次点击会采样选择区域的构成。继续使用刷子将应用该构成到其他区域。                                                         |
| 模糊照明                | 在相邻光区域之间创建更柔和的混合。                                                                                                    |
| 填充照明                | 使用所选灯光区域填充整个区域。区域基于单击刷子时的高度选择。                                                                         |

[![图片](./resources/020_Terrain_Layer21.png)](./resources/020_Terrain_Layer21.png)

蔓延工具允许您在地图上创建蔓延，而无需蔓延生成的异虫单位。它还允许您为某些区域指定特殊规则，以允许或禁止蔓延。

![蔓延刷和其用途](./resources/020_Terrain_Layer22.png)
*蔓延刷和其用途*

| 属性                 | 效果                                                                                            |
| -------------------- | -------------------------------------------------------------------------------------------- |
| 添加蔓延              | 将蔓延应用到目标区域。                                                                          |
| 移除蔓延              | 从目标区域中移除蔓延。                                                                          |
| 不允许蔓延            | 标记选定区域不允许生成蔓延。                                                                    |
| 允许蔓延              | 标记选定区域允许生成蔓延。                                                                    |

## 翻译 E:\SC2Code\blizzard-tutorials-chinese\docs\New_Tutorials\02_Terrain_Editor\021_Units_Layer.md

# 单位层

单位层是您可以在地图上放置单位并以各种方式配置它们的地方。虽然单位可能通过触发器或其他来源进入游戏，但直接在编辑器中放置它们对于设计游戏的外观和感觉很有用。您可以通过单击下面显示的图标从地形栏访问此层。

![单位层图标](./resources/021_Units_Layer1.png)
*单位层图标*

## 单位调色板

“单位”是一个非常灵活的术语，通常指的是玩家可以操作的角色，比如海军陆战队员、狂热者等。这些示例实际上是单位，但在编辑器的上下文中，该术语更广泛地指代一种数据类型。在这种情况下，单位是可以放置在编辑器中并在游戏中使用的实体。这包括传统的星际争霸单位，还包括视觉道具、可摧毁的地形、资源、建筑、标记和小动物。

正如前面提到的，单位层是一个很好的工具，可用于设置游戏的工作部件，完全避免任何编码。这对于完全初学者来说可能很有用，但也为任何经验水平的用户提供了组装快速模型的能力。您在地表编辑器中放置的每个单位都将在游戏中可见，除非稍后使用触发器修改或禁用它们。您可以查找、选择和放置单位，使用单位调色板中提供的选项，如下所示。

![单位调色板](./resources/021_Units_Layer2.png)
*单位调色板*

单位调色板的主要特点是列出了在地图中可供放置的所有单位。此列表是从地图当前的数据结构中填充的，包括其依赖项和当前地图的任何本机数据。该列表还为您提供了三层过滤器，允许您按照玩家、对象类型、种族和对象类型查找。您可以在下面的图像中看到它的使用方式。

![查找近战建筑](./resources/021_Units_Layer3.png)
*查找近战建筑*

该调色板还拥有一些辅助功能。现有对象列表记录了您在地图上放置的每个单位。它提供了有关每个单位类型的详细信息，其所有者，是否属于任何当前群组以及其可见性状态。这对于在拥挤的地图中查找单位或在性能故障排除期间估算整体单位数量非常有用。最后，还有一个预览功能，显示当前选定的放置单位的渲染。您可以使用标准摄像机控件重新定向此视图。这些功能显示在下面的图像中。

[![单位预览和现有对象列表](./resources/021_Units_Layer4.png)](./resources/021_Units_Layer4.png)
*单位预览和现有对象列表*

## 放置单位

要放置单位，请查看单位调色板中的列表，手动查找主题，或使用搜索栏和过滤器。尝试通过在搜索栏中键入Thor来选择一个Thor。单击单位并导航至主视口将显示一个准备放置的透明预览单位。

[![单位放置预览](./resources/021_Units_Layer5.png)](./resources/021_Units_Layer5.png)
*单位放置预览*

再次单击以放置单位，单位应变为实体，并现在将显示在现有对象列表中。

## 配置已放置单位

在地形编辑器中放置单位时，您还可以展开一些属性以便轻松配置它们。您可以通过双击主视窗中的Thor来编辑Thor的属性。这将打开下面显示的“对象属性”窗口。

[![单位对象属性](./resources/021_Units_Layer6.png)](./resources/021_Units_Layer6.png)
*单位对象属性*

对象属性窗口允许您对选定单位进行各种调整。显示的选项可能因您正在处理的单位而异。下面将会对此窗口允许您编辑的属性进行详细说明。

| 属性      | 描述                                                                                       |
| --------- | ------------------------------------------------------------------------------------------ |
| 名称      | 为指定单位设置自定义标签。此标签在“现有对象”列表中可见。                                    |
| 玩家      | 设置单位的所有权。                                                                        |
| 位置      | 通过X和Y坐标设置单位在地图中的位置。                                                     |
| 旋转      | 调整编辑器中单位的朝向角度。                                                             |

作为展示这些功能实用性的练习，使用先前的步骤在地图上放置几个Thor。编辑每个单位的对象属性，并确保它们的所有者值均为Player 1。现在选择最初的单个Thor，并将其所有权设置为Player 3。使用其对象属性名称为其添加标签TEST UNIT。如果检查“现有对象”列表，带标签的单位应当清楚可区分，如下图所示。

[![带标签的单位](./resources/021_Units_Layer7.png)](./resources/021_Units_Layer7.png)
*带标签的单位*

返回到分配给Player 3的Thor，并将其所有权更改为Player 1。将这些Thors在单位层上移动在一起。您甚至可以使用它们的旋转属性使它们都面向相同方向，使它们看起来完全相同。请注意，旋转270°的单位将朝向相机。您应该得到类似下图的结果。

[![具有名称属性的单位位置](./resources/021_Units_Layer8.png)](./resources/021_Units_Layer8.png)
*具有名称属性的单位位置*

在正常情况下，这些单位将无法区分。在这种情况下，您为Thor分配的标签仍然显示在调色板的现有对象列表中，这将有助于在混乱后找到您独特的Thor。如果您为此单位赋予了某些特殊的游戏关联，例如在触发器中引用，那么快速在地形模块中找到它的能力特别有用。

## 附件

 * [021_Units_Layer.SC2Map](./maps/021_Units_Layer.SC2Map)  

## 翻译 E:\SC2Code\blizzard-tutorials-chinese\docs\New_Tutorials\02_Terrain_Editor\022_Doodads_Layer.md

# Doodads 图层

Doodads 图层包含称为 doodads 的装饰性环境物体。这些是编辑器中的基本地图样式元素，有数千种可用。您可以通过地形栏找到此图层，使用下面看到的图标。

![Doodad 图层图标](./resources/022_Doodads_Layer1.png)
*Doodad 图层图标*

## Doodads 调色板

Doodads 调色板作为 doodads 的目录，允许您对 doodads 进行排序、搜索和放置。对于 Doodads 的使用没有限制，调色板可以让您访问当前版本中提供的任何 doodads。请注意，doodads 可能会积累得很快，过度使用 doodads 是性能下降的常见原因。当 Doodads 图层处于活动状态时，您会在地形编辑器的最左侧找到此调色板。调色板本身如下所示。

![调色板预览和现有对象列表](./resources/022_Doodads_Layer2.png)
*调色板预览和现有对象列表*

Doodad 调色板拥有五个搜索过滤器，帮助您查找地图元素。您可以通过导航到特定下拉菜单并选择筛选选项来应用这些过滤器，如下所示。

![Doodad 过滤](./resources/022_Doodads_Layer3.png)
*Doodad 过滤*

列表将更新以包括具有所选属性的每个 doodad。这些过滤器可以叠加，因此您可以一次按多个属性搜索。以下表格包含您可以使用的过滤器的详细信息。

| 过滤器        | 描述                                                                                                                                                                                                                         |
| --------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| 气候           | 地形类型的主要分区，通过一般季节、生物圈或感觉来帮助缩小 doodad 选项。                                                                                                                                           |
| 地形类型       | 通过原始设计用于放置 doodad 的特定设置和纹理集进行筛选。使 doodads 与地图的地形类型相匹配是选择相辅相成的优秀起点。                                                                    |
| 角色类型       | 默认设置为 Doodad。通常，此筛选器应保持在此设置上，但在高级用法中，此筛选器允许您将一些其他类型作为地图装饰放置，就好像它们是 doodad 一样。                                                               |
| 父级            | 通过 Data Editor 中的 doodad 的亲属关系进行筛选。与角色类型一样，这是一种高级用法类别，允许放置一些非传统的 doodad 元素。                                                                        |
| Doodad 类型    | 通过每个 doodad 预期用途的标签进行筛选。提供了有用的描述性类别，如 Environment，其中包含树木和灌木，或 Cliff 和 Ramp，其中包含可以嵌入墙壁的 doodads。|

除了搜索过滤器，doodad 图层还提供了一些用于放置和编辑现有 doodads 的补充功能。与单位图层一样，存在一个现有对象列表，跟踪当前放置在编辑器中的所有 doodads，并且一个预览，提供了当前选择的 doodad 的渲染。双击一个 doodad 将启动其‘对象属性’窗口，您可以在其中为其添加名称，并以多种方式更改其视觉属性。以下是这些功能的组合展示。

[![Doodad 预览和现有对象列表](./resources/022_Doodads_Layer4.png)](./resources/022_Doodads_Layer4.png)
*Doodad 预览和现有对象列表*

## 翻译 E:\SC2Code\blizzard-tutorials-chinese\docs\New_Tutorials\02_Terrain_Editor\023_Points_Layer.md.part-0.md

# 点层

点层使用称为点的标记元素。点向其他模块传达位置，并可以通过下面所示的图标在地形栏中访问。

![点层图标](./resources/023_Points_Layer1.png)
*点层图标*

## 点调色板

点调色板是您可以找到用于创建不同类型点的工具以及地图中每个活动点列表的地方。当点层处于活动状态时，您可以在地形编辑器左侧找到它。

[![带有现有点列表的点调色板](./resources/023_Points_Layer2.png)](./resources/023_Points_Layer2.png)
*带有现有点列表的点调色板*

有四种类型的点，普通点、起始位置、声音发射器和3D点。您可以通过选择它们各自的工具并单击地图上所需的位置来放置每个点。这将在该位置标记一个点并在该位置创建一个标记。放置点后，可以通过选择并拖动标记来移动点。尽管它们的标记出现在地图上，但点不会占用任何空间，并且在编辑器之外不可见。您还可以通过右键单击点调色板中的点并更改它们的“在编辑器中显示”属性来单独隐藏标记。点标记显示在下面图像中所示的编辑器中。

[![四种类型的点标记](./resources/023_Points_Layer3.png)](./resources/023_Points_Layer3.png)
*四种类型的点标记*

## 点类型

[![图像](./resources/023_Points_Layer4.png)](./resources/023_Points_Layer4.png) 普通点在XY平面上标记地图上的特定坐标。

[![图像](./resources/023_Points_Layer5.png)](./resources/023_Points_Layer5.png) 起始位置分配给玩家，标记他们的初始起始位置。这是一个特殊的区分，在整个编辑器中有几个用途。这些点标记生成标准近战游戏中基地和工作者的产生位置。它们还为其各自的玩家设置默认初始摄像头位置。

[![图像](./resources/023_Points_Layer6.png)](./resources/023_Points_Layer6.png) 声音发射器在其位置播放声音。通常它们在地图上的特定距离范围内产生环境音效。这意味着您可以将它们用作一种音频小工具，创建装饰性和氛围性声音。

[![图像](./resources/023_Points_Layer7.png)](./resources/023_Points_Layer7.png) 三维点类似于普通点，但具有附加的高度值，这意味着它们用于在XYZ或3D空间中标记坐标。

## 点属性

点有许多配置选项，可以从“点属性”窗口中设置这些选项。您可以通过双击地形模块中点的标记来访问此窗口。或者，您可以双击点调色板上列表中的点名称。下面是一个点属性窗口的示例以及它提供的选项的解释。

![点属性](./resources/023_Points_Layer8.png)
*点属性*

| 属性      | 描述                                                                                                                                                                                                                                                                       |
| --------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------ |
| 名称      | 用于在点调色板中识别点的标签。                                                                                                                                                                                                                                           |
| 位置      | 点在地图上的位置，作为XY值。                                                                                                                                                                                                                                             |
| 旋转      | 存储在点内的角度，可能会用到。点的默认朝向是270度。带有自定义标记的点将显示此朝向。                                                                                                                                                                                     |
| 颜色      | 给点的标记着色。这个选项对于起始位置不可用。                                                                                                                                                                                                                               |
| 附加到    | 选择一个带“选择”的单位将立即将点的位置设置为该单位的位置。然后，点将随着单位的移动而保持附加，允许它作为单位位置的标记，有助于向其他模块传达动态位置。                                                                                                        |
| 模型      | 自定义点的标记模型。                                                                                                                                                                                                                                                      |
| 高度      | 仅适用于3D点。设置点位置的Z分量。                                                                                                                                                                                                                                         |
| 声音      | 仅适用于声音发射器。设置由发射器播放的声音。                                                                                                                                                                                                                             |

## 演示点

打开此文章提供的演示地图。您将看到一个小课程嵌套在一个太空平台上，已经放置了几个点。该课程应该如下图所示。

[![演示地图课程](./resources/023_Points_Layer9.png)](./resources/023_Points_Layer9.png)
*演示地图课程*

这里的目标是利用一些现有的触发代码，将生成一个海军陆战队员，然后允许地图上的信标将海军陆战队员从一个平台传送到另一个平台。转到触发编辑器，注意“初始化”触发器。已经设置了一个用于生成海军陆战队员的触发器，但需要一个点来生成海军陆战队员。该触发器显示如下。

![需要生成点的触发器](./resources/023_Points_Layer10.png)
*需要生成点的触发器*

通过转到地形编辑器并单击点调色板中的普通点工具，在左侧最左侧的空间平台附近单击以创建一个点。双击新建的标记以打开“点属性”窗口，并将点命名为“海军陆战队员生成位置”。您应该看到类似下图的内容。

![命名一个点](./resources/023_Points_Layer11.png)
*命名一个点*

返回到触发编辑器并将生成触发器的“点”值设置为“海军陆战队员生成位置”。完成后的触发器应与下图匹配。

![点连接到触发器](./resources/023_Points_Layer12.png)
*点连接到触发器*

现在您的海军陆战队员已准备好使用传送系统，但是如果您注意到地图上控制传送的点已移出位置，您会发现使用“对象组”帮助您重新定位这些点很有用。您可以通过导航到地图▶︎对象组▶︎点来找到它们。

将这些点分组在一起可以让您一次性操作它们。首先，您需要将它们都放在一个组中。右键单击左侧子视图，选择“添加组”。将组命名为“传送点”，然后右键单击右侧子视图，选择“添加点”。这将启动“放置对象”窗口，您可以在该窗口中将点添加到组中。选择传送点01a、传送点01b、传送火花点01a和传送火花点01b，然后单击“确定”。这个过程如下图所示。

![创建对象组](./resources/023_Points_Layer13.png)
*创建对象组*

## 翻译 E:\SC2Code\blizzard-tutorials-chinese\docs\New_Tutorials\02_Terrain_Editor\023_Points_Layer.md.part-1.md

現在，您應該確保使用組選擇，方法是導航至 工具 ▶ 使用組選擇。這意味著移動組中的任何一個點也會移動該組中的所有其他點。請選擇其中一個分組的傳送點使用此功能。將最左側的點移動到太空平台上最左側的信標。現在，兩組點應該與信標對齊，如下所示。

![](./resources/023_Points_Layer14.png)
*將點對齊到傳送信標*

現在運行地圖以進行測試，應該會在“海軍出生點”生成一位海軍。從那裡，您可以將海軍移動到信標上，這將使他從最右側平台傳送，然後再返回。

[![傳送完成](./resources/023_Points_Layer15.png)](./resources/023_Points_Layer15.png)
*傳送完成*

## 附件

 * [023_Points_Layer_Completed.SC2Map](./maps/023_Points_Layer_Completed.SC2Map)
 * [023_Points_Layer_Start.SC2Map](./maps/023_Points_Layer_Start.SC2Map)  

## 翻译 E:\SC2Code\blizzard-tutorials-chinese\docs\New_Tutorials\02_Terrain_Editor\024_Regions_Layer.md.part-0.md

# 区域层

区域层允许您创建区域。区域是地图上标记的区域，通信其他模块中可以使用的区域。区域与点不同，它们标记地图上的特定形状，而不是单个坐标。使用下面显示的图标从地形栏中选择此层。

![区域层图标](./resources/024_Regions_Layer1.png)
*区域层图标*

## 区域调色板

区域调色板是您将找到用于创建区域的控件以及地图上已有的任何区域的列表的地方。当地形编辑器的区域层处于活动状态时，此调色板位于主视口的左侧。它看起来像下面的图片。

![区域调色板](./resources/024_Regions_Layer2.png)
*区域调色板*

区域由使用三种工具应用于地图的形状组成：矩形、圆形和菱形。在编辑器中，区域的区域用有色覆盖标记，但在正常游戏中是不可见的。您还可以通过组合任意数量的基本形状来构建组合区域。可以以正的方式组合形状，使它们的区域相加，也可以以负的方式组合，使一个区域从现有区域中减去。

您可以通过选择区域并查看区域调色板的底部子视图来检查区域的组成。此列表将显示该区域中包含的所有基本形式的总计以及它们是以积极还是消极的方式组合。

## 区域属性

使用“区域属性”窗口构建组合区域。可以通过双击地图视图中的现有区域或在“区域”调色板中找到该区域来查找此窗口。您可以在下面的图片中看到“区域属性”窗口的示例。

![组合区域构建](./resources/024_Regions_Layer3.png)
*组合区域构建*

在这里，您可以通过从单个正区域开始来构建组合。然后，通过右键单击形状列表并选择“添加圆形”、“添加矩形”或“添加菱形”来添加形状。这些形状中的任何一个都可以选择“否定”选项更改为切割。正区域显示为蓝色覆盖，而负区域显示为红色。在地图视图中，实际形状将显示为有色覆盖，其中负切除区域将显示为透明。在地图视图中，上述示例将显示如下。

[![编辑器中的组合区域](./resources/024_Regions_Layer4.png)](./resources/024_Regions_Layer4.png)
*编辑器中的组合区域*

## 演示区域

打开本文附带的演示地图。该地图由位于山顶的小要塞组成，距离一对玩家拥有的地狱火有一段距离。

[![演示地图路线](./resources/024_Regions_Layer5.png)](./resources/024_Regions_Layer5.png)
*演示地图路线*

如果您检查该地图中的触发器编辑器，您将发现在“玩家1占领基地”下有一个简短的操作，一旦单位进入区域，将把要塞的中立单位控制权交给玩家。为了实现这一点，您需要在要塞入口附近创建一个区域，然后将其与此触发器连接起来。

通过单击“区域”调色板中的三个区域工具之一创建一个区域。在这里，添加区域菱形工具最为恰当。选择它，然后在地图视图上点击并拖动以绘制区域。这将给您一个看起来像下面图片的东西。

[![创建区域](./resources/024_Regions_Layer6.png)](./resources/024_Regions_Layer6.png)
*创建区域*

如果您不喜欢区域的放置位置，可以通过将光标切换到选择模式来调整其大小。按下键盘上的空格键将鼠标光标在普通指针和用于区域创建的带加号的指针之间切换。一旦进入选择模式，单击区域将重新激活它，使您可以通过将其点击并拖动到另一个位置来移动它。您可以按住Ctrl键并单击区域边缘来调整区域的大小，将其拖动到新的尺寸。

现在，单击“区域”调色板中的区域以启动其“区域属性”窗口，然后导航到“常规”选项卡。将名称设置为“占领基地”。属性窗口应该看起来像下面显示的那样。

![区域属性内容](./resources/024_Regions_Layer7.png)
*区域属性内容*

您可以在上述“常规”选项卡下的最左侧视图中编辑该区域。值得注意的是，区域的尺寸和位置在“形状”选项卡下显示为大小和中心。如果您在原始位置时遇到问题，可以在这里确认区域大小。

接下来，返回地形模块，并通过选择“添加区域矩形”工具准备另一个区域。这次，创建区域以包含整个山顶要塞。将此区域重命名为“整个基地”。您将得到下面的图片。

![当前区域布局](./resources/024_Regions_Layer8.png)
*当前区域布局*

如果看不到整个场景，请尝试缩小或通过转到“查看” ▶︎ “整个地图”来设置摄像机为俯视视图。从这个视图，您可以放大并获得与示例图中看到的透视相同的视角。请注意，您也可以通过在地图视图中选择特定区域来突出显示特定区域，正如上面的“占领基地”区域所做的那样。

不幸的是，“整个基地”区域现在内含矿物区和一处虚拟气露。根据触发器模块中的操作，这将导致玩家获得对这些资源的控制。资源通常必须属于中立玩家。您可以使用组合区域来构建一个包括基地的区域，但也要考虑到这些元素。

通过创建两个矩形区域准备您的组合区域，一个围绕着矿区，另一个围绕着虚拟气田。您可以将这些区域更改为负区域，这样它们将从较大形状中切除出来，确保资源不被包括在区域内。完成此过程后，应呈现以下视图。

[![预备的切割区域](./resources/024_Regions_Layer9.png)](./resources/024_Regions_Layer9.png)
*预备的切割区域*

为了确保一切清晰易读，已为新区域和“占领基地”区域设置了自定义颜色。您可以通过前往区域属性 ▶︎ 常规 ▶︎ 自定义颜色来执行此操作。您现在可以通过选择其三个组成区域，然后导航到“区域属性”窗口，创建一个组合区域。通过按住Shift键单击“占领基地”、“区域001”和“区域002”来选择所有区域。现在右键单击“区域”调色板，并导航到编辑 ▶︎ 合并选择。

[![收集的区域属性](./resources/024_Regions_Layer10.png)](./resources/024_Regions_Layer10.png)
*收集的区域属性*

## 翻译 E:\SC2Code\blizzard-tutorials-chinese\docs\New_Tutorials\02_Terrain_Editor\024_Regions_Layer.md.part-1.md

这个视图呈现了在地形编辑器中所见的抽象内容。从这里，您可以通过选择两个最小的区域并将它们的状态更改为负来创建切口。负形状将会以红色绘制，这应该会给您一个类似于下面区域属性窗口中所示的结果。

[![构建的复合区域](./resources/024_Regions_Layer11.png)](./resources/024_Regions_Layer11.png)
*构建的复合区域*

返回地图视图现在应该显示包含整个要塞的区域，但是周围有两个资源空隙。

[![准备切口区域](./resources/024_Regions_Layer12.png)](./resources/024_Regions_Layer12.png)
*准备切口区域*

现在这些区域有意义了，您可以切换至触发器编辑器，然后返回到“Player 1 Capture Base”触发器。选择“单位进入/离开区域”事件，并双击“区域”字段。这将打开一个“区域”窗口，其中列出了地图上的活动区域。选择复合区域“Capture Base”，然后点击“确定”，如下图所示。

[![选择复合区域](./resources/024_Regions_Layer13.png)](./resources/024_Regions_Layer13.png)
*选择复合区域*

然后移至“更改所有者”动作，并使用前面描述的方法将“区域”字段设置为“Capture Base”。

项目完成后，您可以花点时间审查其功能。通过将山脚下的恶灵移动到“Capture Base”区域，触发事件将把“整个基地”区域中的一切转移到玩家控制下。由于复合区域中的切口，矿石和气矿应保持为中立实体。

如果一切正常，点击“测试文档”并引导恶灵进入要塞入口应会正确地转移所有权，如下图所示。

[![占领要塞](./resources/024_Regions_Layer14.png)](./resources/024_Regions_Layer14.png)
*占领要塞*

## 附件

- [024_Regions_Start.SC2Map](./maps/024_Regions_Start.SC2Map)
- [024_Regions_Completed.SC2Map](./maps/024_Regions_Completed.SC2Map)

## 翻译 E:\SC2Code\blizzard-tutorials-chinese\docs\New_Tutorials\02_Terrain_Editor\025_Cameras_Layer.md

# 摄像头层

StarCraft通常以标准的近战游戏所特有的俯视角度呈现。

[![标准近战视图](./resources/025_Cameras_Layer1.png)](./resources/025_Cameras_Layer1.png)
*标准近战视图*

很容易忽视这个视角是游戏视觉设计的中心要点。尽管引擎在单人游戏中经常使用电影效果，但玩家们经常会忘记他们是通过一个动态、完全可移动的摄像头观看游戏。

通过摄像头层，可以使用一种名为摄像头的游戏对象来描述独特的视角、效果和动作。这一层使您能够轻松进入这些对象内部，可以从它们的视角看事物并为使用配置它们。然后，您可以使用触发器编辑器和剧情编辑器在各种电影或游戏中使用摄像头，以为玩家提供更丰富的体验。要了解更多关于摄像头的信息，请使用下面图片所示的图标从地形栏中切换到摄像头图层。

![摄像头层图标](./resources/025_Cameras_Layer2.png)
*摄像头层图标*

## 摄像头对象

一旦创建，摄像头会在编辑器中显示为标记对象，显示其位置和方向，就像实际摄像头一样。摄像头只会出现在编辑器中，它们显示为幻影3D模型，如下图所示。

[![摄像头对象](./resources/025_Cameras_Layer3.png)](./resources/025_Cameras_Layer3.png)
*摄像头对象*

尽管它具有说明性外观，但此帧左侧的摄像头本质上与“点层”中找到的点相同。摄像头与“3D点”紧密相关，因为它是空间中具有X、Y和Z值的点。摄像头和3D点之间的主要区别在于，摄像头还具有向量。这个向量是在3D空间中描述方向的箭头。

摄像头的点和向量的组合相当于位置和视角。当引入一个摄像头对象时，摄像头会传输描述“它在哪里”和“它在看什么”的信息给游戏，为玩家设置视角。透过上述摄像头的镜头看到的视图如下。

[![摄像头视图](./resources/025_Cameras_Layer4.png)](./resources/025_Cameras_Layer4.png)
*摄像头视图*

记住编辑器中摄像头的3D模型标记，将它们视为物理摄像头会使工作更容易。在构建游戏场景和影视时，您可能会发现自己需要管理许多摄像头。在这些情况下，将自己视为导演，设置场景并放置特定的摄像头镜头会有所帮助。

## 摄像头调色板

您将在摄像头层的摄像头调色板中找到摄像头和创建控制。如下所示。

![摄像头调色板](./resources/025_Cameras_Layer5.png)
*摄像头调色板*

此调色板上的主列表跟踪当前地图中可用的每个摄像头。您可以通过从列表中选择摄像头然后单击“查看所选摄像头”来查看任何摄像头。在这里，您还可以通过“保存视图到文件”选项支持将摄像头配置导出到文件。通过此处的“创建摄像头”按钮创建摄像头，在编辑器中生成一个与您当前视角相对应的摄像头。

## 摄像头属性

一旦创建摄像头，您可以通过其“摄像头属性”对其进行配置。这可以通过在摄像头调色板上右键单击摄像头并导航到“摄像头属性”来实现。然后将显示如下的“摄像头属性”窗口，以及其选项的详细说明。

![摄像头属性](./resources/025_Cameras_Layer6.png)
*摄像头属性*

| 属性            | 描述                                                                                                                                                            |
| --------------- | --------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| 距离            | 确定摄像头与其目标之间的距离。                                                                                                                                   |
| 横滚            | 以页面平面上的角度旋转摄像头。如果将摄像头视为您的头部，则横滚可被视为以能够将视图颠倒的方向旋转。                                                             |
| 偏航            | 将摄像头左右旋转。如果将摄像头视为您的头部，这将相当于从左到右看或摇摆头部产生“否”动作。                                                                        |
| 俯仰            | 将摄像头上下旋转。如果将摄像头视为您的头部，这将相当于以“是”动作点头。                                                                                           |
| 目标X           | 摄像头向其指向的地图X坐标。                                                                                                                                       |
| 目标Y           | 摄像头向其指向的地图Y坐标。                                                                                                                                       |
| 目标Z偏移      | 摄像头与目标点之间的差别。本质上是摄像头的Z坐标或高度。也称为高度偏移。                                                                                        |
| 脚下虚化      | 使视图中的组件模糊以类似于现实世界视觉。此设置设置此效果的开始、结束和程度。                                                                                     |
| 视野            | 控制相机可见的游戏世界范围。                                                                                                                                     |
| 近裁剪         | 最接近裁剪平面的距离，超出此距离不会渲染任何游戏元素。在3D空间中，渲染开始的起始距离。                                                                         |
| 远裁剪         | 最远裁剪平面的距离，超出此距离不会渲染任何游戏元素。在3D空间中，渲染停止的距离。                                                                             |
| 阴影裁剪     | 绘制阴影的最小距离。                                                                                                                                              |
| 自定义颜色    | 在编辑器中对摄像头模型进行染色。                                                                                                                                  |

## 自由摄像头控制

编辑器提供了一组用于在3D空间中移动视点的热键，称为自由摄像头控制。通过在使用创建摄像头工具之前定位视点，您可以使用这些控件作为一种直观设计摄像头的方式。您可以通过导航到“文件”▶︎“配置控件”，然后搜索“自由摄像头”标签来查看这些控件，如下图所示。

[![自由摄像头控制](./resources/025_Cameras_Layer7.png)](./resources/025_Cameras_Layer7.png)
*自由摄像头控制*

## 翻译 E:\SC2Code\blizzard-tutorials-chinese\docs\New_Tutorials\02_Terrain_Editor\026_Pathing_Layer.md

# 路径层

路径层是您控制地图中路径的地方。作为一个概念，路径描述了在一个区域内允许哪些动作，比如移动、建造或飞行。铺设路径区域确定了规定这些动作可以发生的地方。您可以通过点击下面图片所示的图标在“地形栏”中访问该层。

![路径层图标](./resources/026_Pathing_Layer1.png)
*路径层图标*

## 路径调色板

无论在编辑器中如何清楚地界定环境，玩家总是会探索地图边缘并超越预期的边界。因此，地图需要关于哪些类型的基本动作应该允许，哪些不应该允许的信息，否则游戏玩法就会崩溃。您可以使用规则强制的路径区域为地图引入这些信息。

创建路径区域非常直截了当。您只需要了解特定类型的区域禁止做什么，然后决定在哪里应用这些规则就行。您可以在“路径调色板”中找到创建路径区域的工具。调色板本身位于“地形编辑器”中的路径层。

[![路径调色板视图](./resources/026_Pathing_Layer2.png)](./resources/026_Pathing_Layer2.png)
*路径调色板视图*

## 路径类型

![图片](./resources/026_Pathing_Layer6.png) 使用类似笔刷的工具绘制了几种路径区域类型。这些区域被绘制到地形上作为覆盖层，为四种不同的路径类型之一着色地图。当玩家启动您的游戏时，路径规则将应用于标记的区域。下面将详细介绍此工具可用的修饰符。

| 属性         | 效果                                                                                                                |
| ------------ | ------------------------------------------------------------------------------------------------------------------- |
| 添加路径     | 将选定的路径类型应用于目标区域。                                                                                   |
| 移除路径     | 从目标区域移除所有路径。                                                                                           |
| 大小         | 更改正在应用路径的区域大小。                                                                                       |
| 形状         | 更改正在应用路径的区域形状。                                                                                       |
| 无路径       | 此路径类型阻止任何单位进入此区域。红色着色。                                                                     |
| 地面         | 此路径类型描述了具有特定规则的区域，如地面，适用于某些能力和其他数据类型。绿色着色。                             |
| 无建筑       | 此路径类型阻止任何单位在该区域建造结构。黄色着色。                                                                |
| 无挖掘       | 此路径类型阻止任何单位在该区域使用挖掘能力。蓝色着色。                                                            |

下图显示了使用绘制路径的区域。

[![绘制的路径区域](./resources/026_Pathing_Layer4.png)](./resources/026_Pathing_Layer4.png)
*绘制的路径区域*

请注意，塔结构已标记为无路径区域，以防止单位被投放到它们的装饰高地。地面上的某个区域已标记为无建筑区域。在这里，设计者认为该区域的金属栅栏不适合作为任何建筑的目标。

![图片](./resources/026_Pathing_Layer6.png) 创建无路径区域的选项。它将将目标点的地形水平设置为不支持路径，类似于泛洪方式。

![图片](./resources/026_Pathing_Layer6.png) 路径填充，但适用于飞行单位在该区域的路径。

您可以在路径调色板的单独视图下找到最后两个路径选项。此视图提供了每个活动动态路径对象的列表，类似于“点层”和“区域层”中找到的列表。与绘制路径着色区域不同，动态路径对象在编辑器中使用标记显示，如下图所示。

[![动态路径填充和无飞行区域](./resources/026_Pathing_Layer7.png)](./resources/026_Pathing_Layer7.png)
*动态路径填充和无飞行区域*

## 翻译 E:\SC2Code\blizzard-tutorials-chinese\docs\New_Tutorials\02_Terrain_Editor\027_Lighting.md

# 灯光

编辑器拥有强大的灯光系统，您可以使用它为项目创建各种情绪、外观和感觉。下面的图像是通过仅编辑灯光就能以不同方式实现相同场景的示例。

[![同一场景的不同灯光效果](./resources/027_Lighting1.png)](./resources/027_Lighting1.png)
*同一场景的不同灯光效果*

## 灯光细节

实际上，在“星际争霸”引擎中可以通过多种方式实现灯光。您可能还记得在角色身上附加了街灯道具和矿业灯等光源。一些法术和能力效果甚至可以以有趣的方式动态照亮场景，但本文将关注地图中的全局灯光效果。

地图中的灯光一次设置为特定风格。然后可以在游戏中动态地将其改变为其他风格。您将在一个名为“Lights”的广泛数据类型中找到这些灯光风格，它直接通过数据编辑器进行处理。由于在处理灯光时提供了许多选项，编辑器还配备了一个名为灯光窗口的特殊工具。这个界面将所有灯光控件收集起来，与编辑器中预构建的灯光风格一起放置。

[![同一场景的不同灯光效果](./resources/027_Lighting2.png)](./resources/027_Lighting2.png)
*同一场景的不同灯光效果*

## 展示灯光

打开本文提供的演示地图。您将看到其中含有的一个场景，其中酒吧前部用默认灯光设置照亮，看起来像自然阳光。首先，您将学习如何将灯光从白天变为黑夜，然后如何使用触发器逐渐引入白天灯光，模拟日出。

最好从数据编辑器开始。灯光是基于当前地形类型应用的。这是指数据中用于控制纹理、道具风格等地形的指定。演示地图设置为“Agria (Jungle)”类型。点击“新建标签”+按钮并导航到编辑地形数据 ▶︎ 地形类型来打开“地形类型标签”。现在，通过双击下方显示的“灯光”属性来设置灯光。

[![灯光数据属性](./resources/027_Lighting3.png)](./resources/027_Lighting3.png)
*灯光数据属性*

如果不确定地图使用的地形类型是什么，可以通过导航到地图 ▶︎ 地图纹理 来查看。字段“当前纹理集”将提供答案，如下所示。

![检查地形类型](./resources/027_Lighting4.png)
*检查地形类型*

单击“灯光”字段将启动“对象值”窗口。找到“Mar Sara夜间测试”灯光，选择它，然后单击“确定”。

![选择灯光](./resources/027_Lighting5.png)
*选择灯光*

确认已成功更改地形的灯光设置，方法是打开地形模块并选择渲染 ▶︎ 显示灯光 ▶︎ 游戏灯光。主视图应显示出更加黑暗、黄昏般的场景。以下显示了原始灯光设置与新设置之间的差异。

[![灯光变化](./resources/027_Lighting6.png)](./resources/027_Lighting6.png)
*灯光变化*

现在进入触发器编辑器，打开“初始化”触发器。该触发器使用一些操作来移除游戏的用户界面，显示地图以供查看，并应用标准相机。通过在“操作”标题下右键单击并导航到新建 ▶︎ 新建操作 来添加一个新的“等待”操作。将此操作的“时间”字段设置为2.0。然后添加“设置灯光”操作，使用相同的过程。将“灯光”字段设置为“Mar Sara白天测试”，并将“融合时间”更改为6.0。这样，您将得到以下结果。

[![准备好的触发器](./resources/027_Lighting7.png)](./resources/027_Lighting7.png)
*准备好的触发器*

地图现在已完成。如果运行测试，在短暂等待后，“Mar Sara夜间测试”当前的灯光风格将逐渐变化，混合成“Mar Sara白天测试”。给予了一个类似日出的黑夜转白天的灯光过渡。启动“测试地图”功能以查看结果。它将缓慢改变场景的设置，类似于下面显示的顺序。

[![模拟日出的灯光变化](./resources/027_Lighting8.png)](./resources/027_Lighting8.png)
*模拟日出的灯光变化*

## 附件

- [027_Lighting_Completed.SC2Map](./maps/027_Lighting_Completed.SC2Map)
- [027_Lighting_Start.SC2Map](./maps/027_Lighting_Start.SC2Map)

## 翻译 E:\SC2Code\blizzard-tutorials-chinese\docs\New_Tutorials\02_Terrain_Editor\028_Lighting_Window.md.part-0.md

# 光照窗口

光照窗口是一个用于修改和预览编辑器内灯光的界面。您可以使用它来创建全新的照明布局，也可以使用游戏中现有的任何照明资源。您可以在下方的图片中看到其外观。

[![光照窗口及其用途](./resources/028_Lighting_Window1.png)](./resources/028_Lighting_Window1.png)
*光照窗口及其用途*

您可以通过在编辑器的任何位置导航到 窗口 ▶︎ 光照 来访问光照窗口。游戏中的每个灯光设置都在此处找到，分组为 UI灯光，图块集灯光，人物肖像灯光和电影灯光等类别。在这里，您可以浏览和修改这些设置，甚至在项目之间导入和导出灯光。要执行此操作，请导航至 文件 ▶︎ 导出灯光 或 文件 ▶︎ 导入灯光。在编辑器外部，这些被存储为 .SC2Lighting 文件。

由于光照窗口中参数繁多，修改灯光可能令人望而生畏。这些参数被分为全局、色调映射、颜色化、变化、SSAO、地形、区域、主光、填充和背光等十个类别。以下将更详细地讨论这些类别。

理解这些属性的最简单方法是使用光照窗口在主编辑器视图中预览灯光，这将随着每次更改而动态更新。您可以通过打开窗口，然后移至地形编辑器来实现此目的。通过导航至 渲染 ▶︎ 显示灯光 ▶︎ 游戏灯光 来配置灯光以显示游戏灯光。对灯光选择和更改的任何操作都应立即在编辑器视图中呈现，给您充分的机会进行测试和实验。

接下来的部分将探讨灯光选项卡中每个功能，包括其属性描述和一些效果的预览。每个预览都展示了位于最左侧的基础照明布局，设置为 'Agria (Jungle)' 照明。这将与每个图像的标题中描述的各种照明修改一起显示。这些修改不是累积的，每个修改都是基础照明的修改。

## 全局

[![全局灯光](./resources/028_Lighting_Window2.png)](./resources/028_Lighting_Window2.png)
*全局灯光*

| 属性               | 详情                                                                                                          |
| ------------------ | ------------------------------------------------------------------------------------------------------------- |
| 环境光颜色       | 定义影响每个表面的全局照明颜色。                                                                           |
| 镜面光系数       | 设置从反射表面发射光的大小。                                                                              |
| 发射光系数       | 设置从发射纹理发射光的大小。                                                                             |
| 光照日时间       | 设置光照的时间值。这些时间值用于“白天时间”照明，通过一系列光来模拟行星运动中发生的变化。 |
| 当前测试时间     | 在编辑器预览中设置当前时间。将其设置为光照日时间将测试当前光照。                                 |

[![图片](./resources/028_Lighting_Window3.png)](./resources/028_Lighting_Window3.png)

基础 -- 红色环境 -- 绿色环境 -- 蓝色环境 -- 高镜面光 -- 高发射光 -- 低发射光

## 色调映射

[![色调映射](./resources/028_Lighting_Window4.png)](./resources/028_Lighting_Window4.png)
*色调映射*

| 属性                | 详情                                                                                                                                                  |
| ------------------- | ----------------------------------------------------------------------------------------------------------------------------------------------------- |
| 曝光度              | 设置应用于场景的光量。                                                                                                                               |
| 泛光阈值            | 设置应用泛光的最低光值。泛光是一种具有明显出血效果的边缘光，从光滑的物体中发出。低泛光常见于夜间。                                            |
| 环境光系数          | 设置环境光的强度。目前在编辑器中未激活。                                                                                                              |
| 扩散光系数          | 设置对象产生的白光量。                                                                                                                               |
| 白点                | 当方法设置为 Reinhards 时，设置应用于场景的光量。                                                                                                     |
| 方法                | 更改应用色调映射的方式。每种方法都是一种不同的算法，影响亮度和对比度。                                                                               |

[![图片](./resources/028_Lighting_Window5.png)](./resources/028_Lighting_Window5.png)

基础 -- 高曝光度 -- 低泛光阈值 -- 高扩散光系数 -- 极端扩散光系数 -- 高白点带 Reinhards 映射 -- 线性色调映射

## 颜色化

[![颜色化](./resources/028_Lighting_Window6.png)](./resources/028_Lighting_Window6.png)
*颜色化*

| 属性            | 详情                                                                                                                         |
| --------------- | --------------------------------------------------------------------------------------------------------------------------- |
| 输入低点      | 控制场景中暗部的对比度。必须低于输入高点。                                                                              |
| 输入高点      | 控制场景中高光的对比度。必须高于输入低点。                                                                              |
| 输入伽马      | 控制场景中中间调的对比度。                                                                                                |
| 输出低点      | 调整场景中的暗部，同时保留颜色。必须低于输入高点。                                                                    |
| 输出高点      | 调整高光的亮度，同时保留颜色。必须高于输入低点。                                                                      |
| 亮度            | 设置在场景中反射的光量的强度。                                                                                           |
| 对比度          | 设置暗部和高光之间差异的强调。                                                                                          |
| 色调            | 色调改变场景中所有物体的颜色值。这在关闭 Colorize 的情况下更容易识别。                                           |
| 饱和度          | 设置场景中颜色的强度。                                                                                                    |
| 亮度度          | 改变场景中的总体光量。                                                                                                   |
| 调色            | 修改场景中颜色的强度和对比度。关闭此选项会修改色调、饱和度和亮度对光照的影响方式。                            |
| 校正伽马    | 在激活时，根据显示器的伽马设置校正场景的颜色。                                                                          |

[![图片](./resources/028_Lighting_Window7.png)](./resources/028_Lighting_Window7.png)

基础 -- 提高输入低点 -- 降低输入高点 -- 高输入伽马 -- 增加输出低点 -- 增加输出高点 -- 高对比度

[![图片](./resources/028_Lighting_Window8.png)](./resources/028_Lighting_Window8.png)

基础 -- 高对比度 -- 关闭 Colorize 的情况下降低色调 -- 关闭 Colorize 的情况下增加色调 -- 低饱和度 -- 增加亮度 -- 关闭校正伽马

## 变化

变化是可以影响场景整体照明的简单滤镜。选择任何变化控件将向光添加相关属性。

[![光照变化](./resources/028_Lighting_Window9.png)](./resources/028_Lighting_Window9.png)
*光照变化*

## 翻译 E:\SC2Code\blizzard-tutorials-chinese\docs\New_Tutorials\02_Terrain_Editor\028_Lighting_Window.md.part-1.md

| 属性                               | 详情                                                                                                                                               |
| ---------------------------------- | ------------------------------------------------------------------------------------------------------------------------------------------------- |
| 区域                               | 设置变化是否适用于场景的暗部、中间色调或高光部分。                                                                                                 |
| 灵敏度                             | 控制应用滤镜的强度。这些是相加的；红5等于五次应用红1。                                                                                        |
| 颜色设置                           | 应用所选颜色。选项包括红色、青色、洋红色、绿色、蓝色和黄色。                                                                                  |
| 光照设置                           | 对场景应用更多的明暗。这些元素相互抵消。                                                                                                       |
| 降低饱和度和增加饱和度             | 对场景应用更多或更少的饱和度，改变对颜色的重点。这些元素相互抵消。                                                                            |

[![图像](./resources/028_Lighting_Window10.png)](./resources/028_Lighting_Window10.png)

基础 - 青色中间调 - 紫色暗部 - 绿色高光 - 更深的蓝色暗部 - 黄色较亮中间调 - 更饱和度

## Ssao

[![环境光遮蔽](./resources/028_Lighting_Window11.png)](./resources/028_Lighting_Window11.png)
*环境光遮蔽*

屏幕空间环境光遮蔽（SSAO）是一种渲染技术，根据物体与摄像机的距离进行着色。这些设置当前不活动。

## 地形

[![地形光照](./resources/028_Lighting_Window12.png)](./resources/028_Lighting_Window12.png)
*地形光照*

| 属性                           | 详情                                                                                                       |
| ------------------------------ | ---------------------------------------------------------------------------------------------------------- |
| 地形镜面指数                   | 设置从地形高光反射的基本光量。                                                                              |
| 地形漫反射倍增器               | 设置地形一般光反射的幅度。                                                                                 |
| 地形高光倍增器                 | 设置地形高光反射的幅度。                                                                                   |
| 蔓延镜面指数                   | 设置从蔓延反射的基本光量。                                                                                 |
| 蔓延 HDR 漫反射倍增器          | 设置蔓延的一般光反射的幅度。                                                                               |
| 蔓延 HDR 高光倍增器            | 设置蔓延的高光反射的幅度。                                                                                 |
| 蔓延 HDR 自发射倍增器          | 设置从蔓延自发光贴图中创建的光的数量。                                                                     |

[![图像](./resources/028_Lighting_Window13.png)](./resources/028_Lighting_Window13.png)

基础 - 增加地形镜面指数 - 增加地形漫反射 - 增加地形高光倍增器 - 减小蔓延镜面指数 - 增加蔓延 HDR 漫反射倍增器 - 增加蔓延 HDR 高光倍增器

## 区域

[![区域光照](./resources/028_Lighting_Window14.png)](./resources/028_Lighting_Window14.png)
*区域光照*

区域定义将独立应用于地图某一区域的光照设置。在地形模块的地形层中，可以使用光照刷在最多四个区域上绘制光照。每个区域都具有高度可配置性，支持独立的关键、背景、填充和环境设置。设置后，该区域内的光照将覆盖全局光照。您可以在地形模块的地形层中将光照区域应用于地形。

[![基础 - 绘制区域](./resources/028_Lighting_Window15.png)](./resources/028_Lighting_Window15.png)
*基础 - 绘制区域*

## 关键、填充和背景光照

这三个相关类别构成了三点照明模型，是各种媒体中对场景进行照明的传统方法。关键是主要光源，它照亮场景的主要组件，并且是外观、颜色和阴影的主要强调者。填充是传统上从关键光源侧面照射的次要光源。填充光源有助于衬托物体，减轻个别阴影的影响，并产生柔和的照明。

背光，顾名思义，要么在场景后方照亮，要么从场景另一边照亮。通常，背光设置为给场景中的对象产生一种光环效果，用照明环绕它们的边缘将它们与周围环境分开。您将在光照窗口的三个类似选项卡中找到这些照明类型。下面显示其中一个。

[![主要照明](./resources/028_Lighting_Window16.png)](./resources/028_Lighting_Window16.png)
*主要照明*

| 属性                 | 详情                                                                                                                                                                                                   |
| -------------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------ |
| 漫反射颜色           | 设置光的整体表面反射的颜色。                                                                                                                                                                         |
| 漫反射倍增器         | 设置光的整体表面反射的强度。                                                                                                                                                                         |
| 镜面颜色             | 设置光的直接反射的颜色。                                                                                                                                                                             |
| 镜面倍增器           | 设置光的直接反射的强度。                                                                                                                                                                             |
| 方向                 | 使用 H 和 V 控件设置光的方向。 H 或水平角对应的正北是 0，正东是 90，正南是 180，正西是 270。V 或垂直角对应于光的高度。目标正上方是 90，直接正下方是 270。请注意，位于地平线下方的光源将不会照亮地形的纹理。 |

## 自定义光照

打开本文提供的演示地图。在那里，您应该看到用于创建本文某些图像的场景。这是一个电影风格的黑色幽默酒吧前台。不幸的是，明亮的白天照明破坏了氛围。您可以使用光照界面解决这个问题。要探索光照定制，请通过**窗口 ▶︎ 光照窗口**导航到光照窗口。现在选择预设光照设置“自定义夜光”并单击“00:00:00”以打开光源。

[![起始光](./resources/028_Lighting_Window17.png)](./resources/028_Lighting_Window17.png)
*起始光*

从这里开始对光照进行一系列调整，效果将在下方的照片条中列出。与我们先前示例中使用的图像不同，这些效果是累积的。通过比较每个步骤的结果，使用此示例图像来感受不同光照属性的效果。通过此练习结束时，这个场景应该具有更多的电影风格吸引力。

## 翻译 E:\SC2Code\blizzard-tutorials-chinese\docs\New_Tutorials\02_Terrain_Editor\028_Lighting_Window.md.part-2.md

```markdown
1. 在全局设置中，将环境颜色设置为R86、G79、B147。将镜面光强度系数设置为0.6，散射光强度系数设置为1.1。
2. 在色调映射中，将曝光度从1.5降低至0.6。
3. 将泛光阈值从1.0降低至0.1。将漫反射光强度系数从1.0增加至1.4。
4. 在着色设置中，将输入低阈值从0增加至0.05。将输入高阈值从1减少至0.9。
5. 将着色强度从0.3增加至0.5。
6. 在地形设置中，将地形漫反射光强度系数从1.0减少至0。将地形镜面光强度系数从3.75减少至0。

![](./resources/028_Lighting_Window18.png)
*基础 -- 步骤1 -- 步骤2 -- 步骤3 -- 步骤4 -- 步骤5 -- 步骤6*

## 附件

 * [028_Lighting_Window_Start.SC2Map](./maps/028_Lighting_Window_Start.SC2Map)
 * [028_Lighting_Window_Completed.SC2Map](./maps/028_Lighting_Window_Completed.SC2Map)
```  

## 翻译 E:\SC2Code\blizzard-tutorials-chinese\docs\New_Tutorials\02_Terrain_Editor\029_Time_of_Day_Lighting.md.part-0.md

# 白天照明

作为一款实时战略游戏，星际争霸拥有许多以时间为中心的系统。对于照明来说，有一个有用的设置叫做白天照明。这个系统允许照明根据时间的流逝而反应，改变其条件以模拟白天和黑夜的交替。循环将会重复，除非被告知停止，只要游戏持续存在。您可以将其应用作为建立情绪和氛围的策略，但它也通过连接一组白天验证器支持各种游戏特性。这使您能够在游戏循环中触发不同的效果。

## 创建白天照明

打开本文附带的演示地图。在里面，您会看到一个场景，外面是一家酒吧，背景是一些燃烧的残骸。转到数据编辑器，通过点击绿色+，然后导航到编辑艺术和声音数据 ▶︎ 灯光，打开灯光选项卡。通过右键单击主视图内部并选择添加灯光，创建一个新的灯光。将灯光命名为“白天照明”，然后点击建议以生成一个ID。接下来，使用下拉菜单将“灯光组”设置为“平铺集”。这个过程应该看起来像下面的图片。

[![创建灯光](./resources/029_Time_of_Day_Lighting1.png)](./resources/029_Time_of_Day_Lighting1.png)
*创建灯光*

点击您的新灯光，然后双击“白天”字段。如果未激活“组合结构值”选项，此字段将标记为“白天信息数组”。这将启动“对象值”窗口。

在这个窗口中，您会看到所有当前有灯光行为的时间的列表。目前您只会看到值为00，这是00:00:00的缩写。白天时间使用HH:MM:SS的24小时制格式记录，即小时，分钟，秒。00值等于零点，即午夜。如果这里只有一个值，那么白天行为默认是恒定的，这意味着您游戏的照明将保持恒定。

右键单击白框内并选择“添加灯光”以添加一个新的白天时间。下面是此操作的示例。

[![添加白天灯光](./resources/029_Time_of_Day_Lighting2.png)](./resources/029_Time_of_Day_Lighting2.png)
*添加白天灯光*

通过点击“时间”字段的第一个术语并输入6，将这个新灯光设置为06:00:00。该字段反映了HH:MM:SS格式。现在，添加另外两个灯光，分别为12:00:00和18:00:00，以总共创建四个白天时间点。完成后的数组应该看起来像这样。

[![数组中的四个白天灯光](./resources/029_Time_of_Day_Lighting3.png)](./resources/029_Time_of_Day_Lighting3.png)
*数组中的四个白天灯光*

点击“确定”以关闭窗口，更新数据编辑器中的灯光。现在再次双击“白天”字段以重新打开它。值得注意的是，灯光窗口是一个需要大量更新的接口。它会直接将数据推送到编辑器视图，创建一个非常有用的灯光样式动态渲染。将信息直接发送到编辑器的数据和触发功能有时可能会卡住。经常手动刷新几次可以避免此行为，这就是您刚刚做的。

现在，点击数组中的第一个灯光00以突出显示它，然后点击“修改灯光”按钮以在灯光窗口中打开当前灯光。

[![灯光在灯光窗口中打开](./resources/029_Time_of_Day_Lighting4.png)](./resources/029_Time_of_Day_Lighting4.png)
*灯光在灯光窗口中打开*

灯光窗口将启动，然后自动显示当前灯光中所选的白天灯光。请注意，该文件夹按您在创建时选择的平铺集类型进行分类。灯光窗口通常尚未更新包含数组中所有白天值。如果文件夹只包含00:00:00值，请通过突出显示00:00:00，右键单击并选择“添加到套”的方式刷新窗口。如下图所示。

![刷新灯光集](./resources/029_Time_of_Day_Lighting5.png)
*刷新灯光集*

灯光窗口将更新，并应该在“白天照明”集合下显示五个条目。右键单击额外的00:00:00灯光（用于刷新窗口），然后选择“从套中删除灯光”。

现在，您可以配置您的四个白天灯光，为每个设置不同的属性。游戏将白天照明用作规划。随着时间的流逝，游戏逐渐改变其照明属性，从当前值转变为数组中下一个灯光的值。它一遍又一遍地重复此过程，因此通过为每天的各个部分制作逼真的灯光，您将看到一个可识别的白昼和黑夜周期发展。

从头开始配置灯光属性可能会非常耗时。最好是从现有灯光中复制数据并将其用作修改的基础。您可以通过使用“马萨拉夜间测试”文件夹中的一些设置作为您白天和黑夜照明的基础。导航至“马萨拉夜间测试”文件夹并突出显示其中的灯光。选择该灯光后，使用编辑 ▶︎ 复制灯光集来复制其属性。

![复制灯光集](./resources/029_Time_of_Day_Lighting6.png)
*复制灯光集*

返回“白天照明”设置中的00:00:00灯光，突出显示它并使用编辑 ▶︎ 粘贴灯光集将复制的数据粘贴进去。您可以在下面和左侧看到这个过程，而更新为粘贴属性的灯光则显示在右侧。

[![粘贴灯光集 -- 粘贴的灯光](./resources/029_Time_of_Day_Lighting7.png)](./resources/029_Time_of_Day_Lighting7.png)
*粘贴灯光集 -- 粘贴的灯光*

使用复制的属性作为基础，现在您可以配置00:00:00时刻的灯光。转到其“键”选项卡，并将水平角（H）设置为180，垂直角（V）设置为80。将灯光移动到这个低角度高位置将有助于创造00:00:00，即午夜时期所期望的黑暗氛围。这应该看起来像下面的图片。

[![设置关键照明](./resources/029_Time_of_Day_Lighting8.png)](./resources/029_Time_of_Day_Lighting8.png)
*设置关键照明*

## 翻译 E:\SC2Code\blizzard-tutorials-chinese\docs\New_Tutorials\02_Terrain_Editor\029_Time_of_Day_Lighting.md.part-1.md

要完成设置这个灯光，转到“填充”标签，将H设置为45，V设置为45。在“背面”标签下，将H设置为0，V设置为45。现在移动到“Mar Sara Day Test”文件夹，突出显示其00:00:00灯，并将其复制。将其数值粘贴到“Time of Day Lighting”设置中的06:00:00灯。导航至“全局”标签，并将“光照时间”设置为6 0 0。这是设置白天光照时间最重要的字段。您不需要在上一个示例中设置它，因为默认值为0 0 0。下面的图片展示了如何设置数值。

[![设置光照时间](./resources/029_Time_of_Day_Lighting9.png)](./resources/029_Time_of_Day_Lighting9.png)
*设置光照时间*

对于此灯光，将关键H设置为270，V设置为350。将填充H设置为135，V设置为5。然后将背景H设置为90，V设置为45。这些设置使得这个模拟日出的灯光在物体上产生非常长的阴影和大量的背景光。

重复这个过程，完成最后两个灯光的设置，并使用以下输入。

对于12:00:00的灯光。

  - 将“Mar Sara Day Test”中的00:00:00灯复制到“Time of Day Lighting”中的12:00:00灯。
  - 将“光照时间”设置为12 0 0。
  - 将关键H设置为0，V设置为275。将填充H设置为225，V设置为60。将背景H设置为180，V设置为45。

这将配置光照几乎直射，就像太阳处于正午时分一样。

对于18:00:00的灯光。

  - 将“Mar Sara Night Test”中的00:00:00灯复制到“Time of Day Lighting”中的18:00:00灯。
  - 将“光照时间”设置为18 0 0。
  - 将关键H设置为90，V设置为350。将填充H设置为315，V设置为5。将背景H设置为270，V设置为45。

这将使灯光设置在西方，产生类似于06:00:00日出的长阴影，但方向相反。

关闭光照窗口并打开数据编辑器。如果尚未完成，请突出显示“Time of Day Light”灯。

转到“每个游戏循环的时间”，将其设置为0 20 0，如下图所示。

[![设置游戏循环时间](./resources/029_Time_of_Day_Lighting10.png)](./resources/029_Time_of_Day_Lighting10.png)
*设置游戏循环时间*

这个值确定全天光照循环所需的时间。在这里设置一个短暂的20秒时段将允许您在地图测试中预览效果。最后，转到“地形类型”标签，突出显示“Agria (Jungle)，并将“光照”设置为“Time of Day Lighting”。下面显示了这个步骤。

[![在地形类型中启用自定义灯光](./resources/029_Time_of_Day_Lighting11.png)](./resources/029_Time_of_Day_Lighting11.png)
*在地形类型中启用自定义灯光*

您的灯光设置现在已经完成。使用“测试文档”功能来测试地图。这将显示一个夸张的昼夜循环，其中夜景被日出打断，白天快速过去，太阳落下，场景又陷入黑夜，无限重复。这种行为是由于场景在短短几秒钟内快速经过这四种灯光设置，将它们的特点从一个到另一个融合。要更好地了解如何使用时间设置的灯光融合，请随时使用光照窗口检查个别灯光。

您可以在下面看到此测试运行的结果。

![](./resources/029_Time_of_Day_Lighting12.png)
*使用时间光照从日出到日落*

## 附件

 * [029_Time_of_Day_Lighting_Start.SC2Map](./maps/029_Time_of_Day_Lighting_Start.SC2Map)
 * [029_Time_of_Day_Lighting_Completed.SC2Map](./maps/029_Time_of_Day_Lighting_Completed.SC2Map)

## 翻译 E:\SC2Code\blizzard-tutorials-chinese\docs\New_Tutorials\02_Terrain_Editor\030_Texture_Sets.md.part-0.md

# 纹理设置

在任意地图的地形上可用的纹理类型被组织成集合。从历史上看，这些集合被称为瓷砖集合，这归因于实时战略游戏类型的2D根源。不过现在，在《星际争霸II编辑器》中，它们被称为纹理设置，指的是它们由单独的纹理资产组成这一事实。这个命名游戏实际上延伸得更远，纹理设置的数据类型在数据编辑器中被称为地形类型。那些预设集合的名称对于有着战役或竞技星际争霸经验的人可能会很熟悉。例如：贝尔希尔（Bel'Shir）、夏库拉斯（Shakuras）和夏尔（Char）。下面是在地形调色板中呈现的一个这样的设置示例。

![Bel'Shir纹理设置](./resources/030_Texture_Sets1.png)
*Bel'Shir纹理设置*

纹理设置/类型的构成受限于性能原因。地形编辑器提供的强大景观绘制允许在其纹理调色板之间有大量的混合。因此，任何给定时间可用的纹理范围必须受到限制。幸运的是，现有的调色板可以进行配置，也可以完全新建以打开更多多样化的纹理选项供特定项目使用。

## 地形纹理

地形类型由一组八个单独的纹理组成，这些保存在数据中作为地形纹理。这种类型是由原始纹理文件构建的，然后注入了几个字段。这样做可以为纹理提供适当的信息，如物理、光照和植被类型，使其能够在游戏中使用。地形纹理类型的一些重要字段可以在下表中找到。

| 属性              | 详情                                                                                                                                                                                                                   |
| ----------------- | ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| 物理材质         | 报告给演员系统的材质，用于在该纹理空间上发生某些事件。例如，在触发编辑器中，可以让演员播放不同的声音或使用替代模型，这取决于纹理的物理材质。                                                                 |
| 装饰物             | 通过地形调色板的生成植被功能，确定在该地形上生成何种类型的植被。                                                                                                                                             |
| 纹理               | 为地形纹理设置可见纹理。它提供了特定纹理的外观，但如果需要法线贴图，则不会始终通过编辑器精确反映其实际游戏内外观。                                                                                       |
| 法线贴图        | 设置法线贴图，控制反射颜色和游戏光照数据。省略法线贴图可能导致图形错误。                                                                                                                                    |

## 创建自定义地形纹理

首先，创建一个新的Arcade地图，并将其默认纹理设置为'贝尔希尔（Jungle）'。对于本教程，您不需要指定任何其他地图属性。现在移动到数据编辑器，方法是导航到Modules ▶︎ Data。

在数据中，打开地形纹理选项卡，并通过右键单击对象列表并选择“添加地形纹理”来创建一个地形纹理。这应该显示如下。

[![创建地形纹理](./resources/030_Texture_Sets2.png)](./resources/030_Texture_Sets2.png)
*创建地形纹理*

这将启动一个'地形纹理属性'窗口。在“名称”下输入“演示纹理”，然后点击“建议”按钮生成一个ID。完成的地形纹理创建屏幕应如下所示。

[![创建地形纹理](./resources/030_Texture_Sets3.png)](./resources/030_Texture_Sets3.png)
*创建地形纹理*

点击“确定”以创建您的地形纹理，然后继续到新创建的纹理字段。您现在应该通过双击“纹理”字段来选择一个原始纹理，如下图所示。

![创建地形纹理](./resources/030_Texture_Sets4.png)
*创建地形纹理*

打开“纹理”字段将启动一个“对象数值”窗口，其中包含浏览选项。点击“浏览”按钮会将您带到存档浏览器，您可以在那里选择一个纹理。快速通过搜索功能选择lavasilvertoprock.dds纹理，然后点击“确定”完成选择。

![选择地形纹理](./resources/030_Texture_Sets5.png)
*选择地形纹理*

您还必须提供一个法线贴图纹理，与基础纹理一起。双击“法线贴图”字段右侧的单元格，并重复与“纹理”字段相同的过程。这次，找到 texturelavasilvertoprock\_nrm.dds 纹理并点击“确定”以选择。

[![选择地形纹理法线贴图](./resources/030_Texture_Sets6.png)](./resources/030_Texture_Sets6.png)
*选择地形纹理法线贴图*

请注意，纹理名称中的后缀 \_nrm 标识着这是与您的纹理相关联的法线贴图。然而，值得注意的是，编辑器中有些法线贴图使用结束为 \_normal 或 \_norm。如果编辑器找不到与您的纹理相关联的法线贴图，您应该为“法线贴图”字段选择与“纹理”字段使用过的相同纹理文件。如果您根本不提供任何法线贴图，可能会由于引擎缺少某些灯光和颜色信息而遇到图形问题。

## 设置自定义植被

使用地形编辑器中的“生成植被”功能，您可以在“允许植被”区域中的每个地形纹理中填充其相关类型的植被，这些植被从“装饰物”字段绘制。向正在构建的纹理添加此功能应该有教育性。要为新纹理添加植被支持，双击“装饰物 - ”标题右侧的单元格。

[![植被装饰物输入](./resources/030_Texture_Sets7.png)](./resources/030_Texture_Sets7.png)
*植被装饰物输入*

从刚刚打开的“对象数值”窗口中点击绿色 + 按钮以将一个新植被装饰物添加到地形纹理中。这样会添加一个新的空白装饰物。您可以通过选择“选择”按钮来定义它。点击此按钮将启动一个弹出窗口，允许您从项目数据中选择任何模型类型。该过程如下所示。

[![植被装饰物选择](./resources/030_Texture_Sets8.png)](./resources/030_Texture_Sets8.png)
*植被装饰物选择*

选择“夏库拉斯树”模型并点击“确定”。这时，植被生成将支持该地形纹理。每当该纹理位于“允许植被”区域内时，激活地形编辑器中的“生成植被”功能将根据地形调色板中的密度（每单元）设置创建装饰物。

## 翻译 E:\SC2Code\blizzard-tutorials-chinese\docs\New_Tutorials\02_Terrain_Editor\030_Texture_Sets.md.part-1.md

Foliage tends to look best when it is created with some randomness. This mimics a natural environment. There are a few options in this menu to help with this. One option here is the checkbox titled 'Random Rotation.' If you activate this, it will rotate each doodad model to face a random direction on generation. Check the 'Random Rotation' box to enable it and click 'OK' to finish.

![已完成的小配件输入](./resources/030_Texture_Sets9.png)
*已完成的小配件输入*

Another option not addressed in this article is to populate this doodad list with multiple types of possible foliage to ensure a distribution of different models. You can then set the Probability of each doodad, which will change the proportion in which they are generated. For now though, stick to the single model already selected.

## 修改纹理集

现在您已经准备好地形纹理，需要将其添加到地图本身正在使用的纹理集中。记住，您已选择了此地图的“Bel'Shir（丛林）”集。正如前面提到的，这些集合在数据编辑器的数据类型“地形类型”下内部收集。您可以创建全新的地形类型，但目前只需修改当前的地图集，将“演示纹理”替换为其八种默认纹理之一。

通过导航到+ ▶︎ 编辑地形数据 ▶︎ 地形类型来打开地形纹理选项卡，然后在对象列表中找到现有类型“Bel'Shir（丛林）”。将其突出显示以查看其字段，然后通过双击“纹理 - 混合”来替换新纹理，如下所示。

[![修改 Bel'Shir 地形类型](./resources/030_Texture_Sets10.png)](./resources/030_Texture_Sets10.png)
*修改 Bel'Shir 地形类型*

这将启动一个带有“纹理 - 混合”注释的“对象数值”窗口。

[![地形类型定义视图](./resources/030_Texture_Sets11.png)](./resources/030_Texture_Sets11.png)
*地形类型定义视图*

此编辑器列出了所有可用地形纹理库以及当前选定的地形类型的两个并行列表。中间控件允许添加、移除、重新定位和在库和纹理集之间来回交换纹理。此外，“预览”按钮可用于查看“演示纹理”的基础纹理和法线贴图的组合。从“纹理库”中选择“演示纹理”，然后在“纹理集”中突出显示“Bel'Shir 土壤浅色”，并点击“替换”。如下图所示，应该交换了纹理。

[![交换地形纹理](./resources/030_Texture_Sets12.png)](./resources/030_Texture_Sets12.png)
*交换地形纹理*

在这个阶段点击“确定”将完成地形类型更新并完成练习。

## 测试自定义纹理集

返回到地形编辑器，并在地形图标中找到画笔工具。您应该会看到“演示纹理”在纹理集的最左侧位置上有缩略图预览。如下图所示。

![](./resources/030_Texture_Sets13.png)
*地形调色板上的定制纹理集*

现在纹理已经准备好涂抹在地形上，随时可以开始尝试。

[![Bel'Shir 中的火山灰](./resources/030_Texture_Sets14.png)](./resources/030_Texture_Sets14.png)
*Bel'Shir 中的火山灰*

您可以通过铺设一块该新纹理区域，然后用“允许植被”选项涂抹该区域来测试该新纹理的植被功能。如果点击生成植被，应该会得到类似下图截图的效果。

[![生成的 Shakuras 树植被](./resources/030_Texture_Sets15.png)](./resources/030_Texture_Sets15.png)
*生成的 Shakuras 树植被*

## 附件

* [030_Texture_Sets.SC2Map](./maps/030_Texture_Sets.SC2Map)

## 翻译 E:\SC2Code\blizzard-tutorials-chinese\docs\New_Tutorials\02_Terrain_Editor\031_Dynamic_Pathing_Blockers.md

# 动态路径阻挡器

动态路径阻挡器允许您构建可以在游戏过程中开启和关闭的路径区域。这种功能基于它们实际上是单位，这意味着它们可以通过触发动作显示或隐藏。隐藏一个单位会暂停其印记，相应地移除其路径。当再次显示该阻挡器时，其路径将被恢复。

像这样动态调整路径的用途有很多。其中最显著的是，您可以限制对地图某些部分的访问，直到满足条件或任务类型的操作。动态路径阻挡器还会在地形编辑器中显示其印记，使其比其他临时阻塞解决方案更易于处理。

## 创建动态路径阻挡器

您可以在单位面板中搜索术语“Dynamic”找到预制的动态路径阻挡器。

![动态路径阻挡器](./resources/031_Dynamic_Pathing_Blockers1.png)
*Dynamic Pathing Blockers*

每个阻挡器的名称通常注明其印记大小和形状，以及它所阻挡的路径类型。动态路径阻挡器不应与路径层中的动态填充选项混淆。前者是可在游戏过程中改变的路径区域，而后者会在编辑器中填充一个“无路径”区域。

您还可以根据模板 PATHINGBLOCKER，在单位创建过程中从头开始构建动态路径阻挡器，如下图所示。

![Dynamic Pathing Blockers](./resources/031_Dynamic_Pathing_Blockers2.png)
*Dynamic Pathing Blockers*

创建完成后，您需要将路径阻挡器的“印记”字段设置为所需的印记对象。它还需要连接到一个单位角色，以便将其连接到其标准模型上。普通阻挡器的蓝图如下所示。

![Dynamic Pathing Blocker Data Composition](./resources/031_Dynamic_Pathing_Blockers3.png)
*Dynamic Pathing Blocker Data Composition*

## 放置动态路径阻挡器

在放置动态路径阻挡器时，放置网格特别有用。您可以通过导航到“视图”▶︎“显示放置网格”，然后勾选所有选项来启用它。

[![放置网格视图选项](./resources/031_Dynamic_Pathing_Blockers4.png)](./resources/031_Dynamic_Pathing_Blockers4.png)
*放置网格视图选项*

在这个演示地图中，动态放置阻挡器用于模拟一种能量门。地图使用“Protoss Energy Line（蓝色）”小装饰物以及一些悬崖面来为放置阻挡器增加视觉元素。您可以在下图中看到这些元素。

[![能量门位置](./resources/031_Dynamic_Pathing_Blockers5.png)](./resources/031_Dynamic_Pathing_Blockers5.png)
*能量门位置*

由于地图的构造，只有一个八单位宽的区域可以让陆战队通过门。这是使用动态路径阻挡器的理想场景，地图已配备了四个“Dynamic Pathing Blocker 2x2”来填补空隙。

![](./resources/031_Dynamic_Pathing_Blockers6.png)
*带动态路径阻挡器的能量门*

由于动态阻挡器关闭了路径，您可以打开和关闭它们，以提供门或闸的功能。

## 使用动态路径阻挡器

由于动态路径阻挡器是单位，它们只有在地图上激活时才会应用其印记。您可以使用触发动作“显示/隐藏单位”来更改阻挡器的状态，根据需要开启和关闭它们。任何能够以单位为目标的其他动作都可以与动态路径阻挡器一起使用，产生不同效果，其中包括“杀死单位”、“创建单位”和“即时移动单位”。

在此演示中，将动态路径阻挡器添加到了地图初始化时的一个组中。随后添加了以下触发器。

[![Dynamic Pathing Blocker Toggling Trigger](./resources/031_Dynamic_Pathing_Blockers7.png)](./resources/031_Dynamic_Pathing_Blockers7.png)
*Dynamic Pathing Blocker Toggling Trigger*

此触发器每五秒改变一次动态路径阻挡器的状态。当“Line Hidden”变量设置为 False 时，门会使用 SetOpacity 单元消息淡入。同一语句块还会通过“显示单位”动作激活动态路径阻挡器。关闭的门将如下所示。

[![Path Blocked by Closed Gate](./resources/031_Dynamic_Pathing_Blockers8.png)](./resources/031_Dynamic_Pathing_Blockers8.png)
*Path Blocked by Closed Gate*

当变量切换为 True 时，通过 SetOpacity 和“隐藏单位”分别切换不透明度和阻挡器状态。这将消除门和阻挡器，使单位可以通过。

[![Path Revealed by Open Gate](./resources/031_Dynamic_Pathing_Blockers9.png)](./resources/031_Dynamic_Pathing_Blockers9.png)
*Path Revealed by Open Gate*

## 附件

* [031_Dynamic_Pathing_Blockers.SC2Map](./maps/031_Dynamic_Pathing_Blockers.SC2Map)

## 翻译 E:\SC2Code\blizzard-tutorials-chinese\docs\New_Tutorials\03_Trigger_Editor\032_Trigger_Editor_Introduction.md

# 触发器编辑器介绍

触发器编辑器是您构建项目逻辑的地方。触发器是将您的编辑器项目转变为交互式可玩地图的关键。您可以使用此系统构建具有明文元素的游戏，这意味着您不需要使用编程语言。使用编辑器预先构建的这些元素库，使开发人员在制作游戏时能够快速轻松地工作。

作为一种工具，触发器的直观、视觉化编程方法一直是暴雪RTS游戏历史中业余爱好者和专业人士的长青之爱。作为一种工具，触发器可以随着用户的使用而发展，使他们最终可以通过研究Galaxy Script来深入编程，该语言是在系统背后起作用的语言。高级用法通过编辑器的广泛功能集得到支持，包括用于调试和性能优化的分析器。

[![触发器编辑器的使用](./resources/032_Trigger_Editor_Introduction1.png)](./resources/032_Trigger_Editor_Introduction1.png)
*触发器编辑器的使用*

## 元素

触发器编辑器通过构建![图像](./resources/032_Trigger_Editor_Introduction14.png)逻辑块来运作，并在游戏监视的![图像](./resources/032_Trigger_Editor_Introduction14.png)的反应中发生。事件反过来可以与![图像](./resources/032_Trigger_Editor_Introduction14.png)相匹配进行监视。触发器本身本质上是游戏中变化的![图像](./resources/032_Trigger_Editor_Introduction14.png)的容器。条件、事件、触发器和动作的相互作用构成了将项目带入生活的基本游戏循环。

还有![图像](./resources/032_Trigger_Editor_Introduction14.png)当事件发生时。然后通过动作将其处理、修改，然后将其反馈到游戏中。通过自定义![图像](./resources/032_Trigger_Editor_Introduction14.png)动作或函数也可以制作任何基本元素的新变种。

通过![图像](./resources/032_Trigger_Editor_Introduction14.png)复杂的数据类型和数据可以被命名并排序在![图像](./resources/032_Trigger_Editor_Introduction14.png)文档中，以便于映射到具有![图像](./resources/032_Trigger_Editor_Introduction14.png)的地图，驯服一个不断扩大的项目。通过转换为可在地图、朋友或队友之间共享的对象。随着开发者的学习和成长，他们可以开始利用自定义![图像](./resources/032_Trigger_Editor_Introduction14.png)整个引擎的驱动程序的编程语言。

## 翻译 E:\SC2Code\blizzard-tutorials-chinese\docs\New_Tutorials\03_Trigger_Editor\033_Trigger_Editor_Interface.md

# 触发器编辑器界面

触发器编辑器是一个用于触发器、动作、事件以及组成触发器系统逻辑的所有其他元素的施工现场。一旦开始在触发器编辑器中工作，您构建的逻辑将立即在地图中生效，执行规则、构建机制并创建游戏玩法。

## 界面

[![触发器编辑器界面视图](./resources/033_Trigger_Editor_Interface1.png)](./resources/033_Trigger_Editor_Interface1.png)
*触发器编辑器界面视图*

触发器编辑器提供了一个干净、有序的表示项目中所有活动逻辑元素的界面。任何具有编程经验的开发人员都会注意到它与标准文本编辑器的相似之处。此界面的关键是下面显示的触发器面板。

[![触发器面板](./resources/033_Trigger_Editor_Interface2.png)](./resources/033_Trigger_Editor_Interface2.png)
*触发器面板*

在触发器面板中，您会发现项目中所有活动触发器元素的列表。除了提供概述外，这也是您导航项目的主要手段。在此面板中选择一个元素，其信息将显示在屏幕中间，内部是触发器内容面板。

![触发器内容面板](./resources/033_Trigger_Editor_Interface3.png)
*触发器内容面板*

根据您选择的元素类型，此面板可能会采用许多不同的布局。

![](./resources/033_Trigger_Editor_Interface4.png)
*变量内容 - 定义内容 - 触发器内容*

当启用“使用子视图”选项时，此视图还将介绍一个触发器内容面板子视图，显示元素的字段以及可用的工具提示。

[![触发器内容面板子视图](./resources/033_Trigger_Editor_Interface5.png)](./resources/033_Trigger_Editor_Interface5.png)
*触发器内容面板子视图*

随着项目的扩大，您将发现另一个可用的可管理性选项是触发器资源管理器。启用此选项将在触发器面板中追加一个查看器，显示当前选定元素内部组件的详细信息。您可以使用此功能快速扫描较大项目的各个组件。

[![触发器资源管理器](./resources/033_Trigger_Editor_Interface6.png)](./resources/033_Trigger_Editor_Interface6.png)
*触发器资源管理器*

项目可能会扩展到包括库，这些库是在多个地图之间共享的触发器元素集合。所有标准的预制元素也通过库包含在地图中。您可以在“库面板”中找到当前地图中所有库的列表。

![库面板](./resources/033_Trigger_Editor_Interface7.png)
*库面板*

从此模块可用的主工具栏部分是触发器栏。

![触发器栏](./resources/033_Trigger_Editor_Interface8.png)
*触发器栏*

所有触发器编辑器的查看和创建选项都在此处方便地提供。下面是一个表格，详细说明了从触发器栏中可用的选项。

| 操作                    | 效果                                                                                                                                                                |
| ----------------------- | -------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| 后退                    | 通过触发器编辑器历史向后撤销命令。                                                                                                                                    |
| 前进                    | 通过触发器编辑器历史向前撤销命令。                                                                                                                                    |
| 显示原始数据            | 将视图从普通语言更改为原始脚本标识符和Galaxy函数调用。                                                                                                             |
| 显示库                  | 打开或关闭库面板。                                                                                                                                                   |
| 使用子视图              | 打开或关闭触发器内容面板子视图。                                                                                                                                     |
| 新建元素                | 创建与当前选择类型相同的新元素。                                                                                                                                     |
| 新建文件夹              | 在触发器面板中创建一个文件夹。                                                                                                                                      |
| 新建注释                | 在当前光标位置创建一个注释。                                                                                                                                        |
| 新建触发器              | 在触发器面板中创建一个触发器。                                                                                                                                      |
| 新建事件                | 在触发器内容面板中创建一个事件。                                                                                                                                    |
| 新建条件                | 在触发器内容面板中创建一个条件。                                                                                                                                    |
| 新建动作                | 在触发器内容面板中创建一个动作。                                                                                                                                    |
| 新建条件定义            | 在触发器面板中创建一个条件定义。                                                                                                                                    |
| 新建动作定义            | 在触发器面板中创建一个动作定义。                                                                                                                                    |
| 新建函数                | 在触发器面板中创建一个函数。                                                                                                                                        |
| 新建参数                | 在触发器内容面板内的活动定义中创建一个参数。                                                                                                                        |
| 新建预设类型            | 在触发器面板中创建一个预设。                                                                                                                                      |
| 新建预设值              | 在触发器内容面板内的活动预设中创建一个值。                                                                                                                        |
| 新建记录                | 在触发器面板中创建一个记录。                                                                                                                                      |
| 新建子函数类型          | 在触发器内容面板内当前活动函数中创建一个子函数。为此，您必须在“功能选项”中勾选“子函数”标志。                                                                             |
| 新建变量                | 在触发器面板中创建全局变量或在触发器内容面板中的光标位置创建本地变量，具体取决于光标位置。                                                                             |

## 查看选项

使用“显示原始数据”选项将触发器编辑器的普通语言语句转换为Galaxy函数调用，如下图所示。

[![显示原始数据](./resources/033_Trigger_Editor_Interface9.png)](./resources/033_Trigger_Editor_Interface9.png)
*显示原始数据*

如果您希望进行脚本编辑，则此功能非常有用。此外，您可以选择“查看脚本”选项来查看实际游戏脚本。选择此选项将启动下面显示的脚本测试窗口。

[![通过查看脚本浏览的脚本测试窗口](./resources/033_Trigger_Editor_Interface10.png)](./resources/033_Trigger_Editor_Interface10.png)
*通过查看脚本浏览的脚本测试窗口*

## 翻译 E:\SC2Code\blizzard-tutorials-chinese\docs\New_Tutorials\03_Trigger_Editor\034_Actions.md

# 动作

动作是触发器内部的各个命令，用于在游戏中进行更改。激活的触发器通过按照指定顺序运行每个动作来解决。每个动作都提供了一个独特的功能，可以与任意数量的其他动作结合以创建更大的效果。本质上，动作是您用来指导游戏的基本语句。

## 创建动作

首先，通过右键单击“触发器面板”并导航到“新建 ▶️ 新建触发器”来创建一个新的触发器。在新触发器中，通过双击“动作”标题或右键单击主选项卡内部并导航到“新建 ▶️ 新建动作”来启动“动作”窗口。

[![动作窗口](./resources/034_Actions1.png)](./resources/034_Actions1.png)
*动作窗口*

“动作”窗口在其最右侧视图中显示一系列可用动作。在这里您还会看到一些搜索选项，允许您按类别搜索，通过左侧侧边栏浏览，或者从顶部搜索栏搜索。

在搜索框中键入“文本消息”并选择名为“文本消息”的动作。这会显示以下视图。

[![文本消息动作](./resources/034_Actions2.png)](./resources/034_Actions2.png)
*文本消息动作*

## 设置动作条款

在主选项卡的子视图中显示了动作的解剖结构。您会注意到术语“消息”以红色显示。红色文本表示一个动作要有效所需的值。相比之下，动作的另外两个术语的蓝色文本显示它们的默认值。在选项卡视图中，您会看到动作标记为具有独特的红色 X，表示它是无效的。具有无效元素的地图将无法正确运行，因此重要的是您注意它们。

要启用此动作，需要一条消息。单击“消息”一词，将文字“Hello, World\!” 添加到弹出窗口中。单击“确定”并返回主界面以验证您的动作。要测试此动作，必须以某种方式调用其触发器。在这种情况下，您将通过导航到事件 ▶️ 地图初始化 添加一个“地图初始化”事件。这将带您到以下视图。

[![已配置的动作](./resources/034_Actions3.png)](./resources/034_Actions3.png)
*已配置的动作*

运行“测试文档”动作应导致此触发器在地图开始后触发。消息将打印到游戏 UI 上方的默认“字幕”区域。您的测试运行应返回类似下面所示的结果。

[![动作屏幕输出](./resources/034_Actions4.png)](./resources/034_Actions4.png)
*动作屏幕输出*

## 动作效果与类型

事件的条件（地图初始化）已发生，导致动作触发，并将您的消息显示在屏幕上。这是游戏过程产生的基本过程。通过研究基本库中提供的动作，您可以变化能够进行的事务类型。在“动作”窗口中突出显示一个动作将显示列表下方的基本提示。这些相同的提示也可在主选项卡的底部子视图中找到。以下是一些常用动作的简要介绍。

| 动作                        | 效果                                                                                                                                                       |
| -------------------------- | ---------------------------------------------------------------------------------------------------------------------------------------------------------- |
| 设置变量                    | 确定地图可用的任何变量的值。                                                                                                                                |
| 创建对话框                   | 创建一个对话框容器用于“对话框项”，允许自定义 UI 结构。                                                                                                       |
| 创建单位（朝向角度）          | 在地图平面上生成具有特定旋转方向的单位。                                                                                                                   |
| 播放声音                     | 从星际争霸资产库中运行声音文件。                                                                                                                            |
| 显示/隐藏 \_                | 一组改变玩家可见性的操作。例如，显示/隐藏对话框项可以为每个玩家创建独特的 UI 项目。                                                                           |
| 设置 \_                     | 一组值更改操作。例如，“设置联盟”定义玩家或玩家组之间是否相互敌对。                                                                                                   |
| 移除 \_                     | 一组移除操作。这些操作将从游戏中消除许多类型的实体，如移除单位、移除行为或移除物品。                                                                                  |

## 翻译 E:\SC2Code\blizzard-tutorials-chinese\docs\New_Tutorials\03_Trigger_Editor\035_Events.md

# 事件

事件是编辑器中任何典型触发器的起始点。通过选择一个事件，您正在选择游戏将要监视的一组情况。当这组情况发生时，相关的触发器就会被触发。触发器将按照从上到下的顺序进行，从而对游戏进行更改。每个地图的核心都有某种事件识别。即使是近战地图也包含对'地图初始化'事件的单个触发器，如下所示。

[![默认近战触发器](./resources/035_Events1.png)](./resources/035_Events1.png)
*默认近战触发器*

## 设置一个事件

通过在**触发器面板**中右键单击，然后导航到新建 ▶︎ 新建触发器来创建一个触发器。选择此新触发器以填充主选项卡中的触发器详细信息。这些详细信息将在几个标题下进行拆分，双击'事件'标题以打开'配置事件'窗口。

[![配置事件窗口](./resources/035_Events2.png)](./resources/035_Events2.png)
*配置事件窗口*

此窗口显示了您当前项目可用的事件库。最左侧视图允许您按照已标记的任何类型对事件进行排序。它还提供了搜索功能以及一些简要的工具提示来解释所选事件的用法。值得注意的是，每个事件也已被标记了来源。在这种情况下，每个事件将列出'内建'。来源标题描述了事件是否来自星际争霸触发器库或自定义定义。

花点时间浏览事件可能性，然后找到位于“UI”标签下的“按键按下”事件。双击此事件以选择它。

## 事件的组成

与之前看到的'Melee Initialization'事件不同，大多数事件包含需要配置的几个子选项。一旦选定，'按键按下'事件将在主选项卡的子视图中显示其选项，如下所示。如果这些选项看不到，请确保从触发器栏中选择“使用子视图”选项。

[![带子选项的事件视图](./resources/035_Events3.png)](./resources/035_Events3.png)
*带子选项的事件视图*

子选项以两种格式呈现。标有“A”的格式显示成对的子选项。这会给出一个垂直列表，其中每个标题采用“变量类型：变量输入”的形式。或者，“B”格式显示了所列变量的明文解释。蓝色下划线的每个单词代表变量组件。请注意两种情况，因为在某些情况下，这些格式可能不同。最常见的情况是'A'提供了'B'没有呈现的其他选项。

在'A'列表中向下滚动，您可以为此事件设置以下选项。

| 子选项             | 描述                                                                                                                     |
| ----------------- | ---------------------------------------------------------------------------------------------------------------------- |
| 玩家            | 设置要监视按键按下的玩家。                                                                         |
| 按键               | 设置要监视按下的按键。                                                                              |
| 按下              | 设置要监视的按键按下方向。键盘上的每次击键都会产生按下和抬起。  |
| Shift/Control/Alt | 定义按键按下时允许的修改器。 这些是互斥的，因此任何可用的组合都是有效的。   |


## 翻译 E:\SC2Code\blizzard-tutorials-chinese\docs\New_Tutorials\03_Trigger_Editor\036_Conditions.md.part-0.md

# 条件

条件在触发器中使用，用于确定关于游戏的某些内容是否为真或假。这里的模棱两可是有意为之的，因为条件几乎可以应用于游戏中的任何对象和任何事件。

基本上，条件提出了对于游戏的问题。一个例子可能是，“这个玩家是否至少有五个单位？”游戏然后根据其对该属性的了解，玩家的单位计数，以及答案（true或false）进行回应。根据回答，编辑器中的语句可以以不同的方式进行，通常被称为“控制”。

控制允许您打破编辑器的基本线性行为。借助条件，诸如触发器之类的元素可以变得非线性，避免执行某些代码段，多次重复执行某些代码段，或完全停止并跳转到完全不同的位置。条件允许进行选择，这是创建动态、生动和有趣事物的重要方面。

将条件视为问题的想法是您应该谨记的一点。这是一个有用的习惯，可以帮助您弄清楚某种情况下是否适用条件。当您开始学习星际争霸编辑器中表达条件的数学符号时，这也会有所帮助。

## 准备触发器

为展示条件的使用，您需要组装一个触发器。请使用以下步骤准备基本触发器。

  - 创建一个新的自定义地图，并进入触发器编辑器。
  - 转到“Melee Initialization”触发器，并删除其中包含的所有默认动作和事件。
  - 通过转到Events ▶︎ Key Pressed创建一个新的事件。
  - 将事件的“Key”项设置为键“1”。
  - 通过Local Variables ▶︎ New Element创建一个新变量。
  - 将本地变量命名为“Press Count”，并将其类型设置为“整数”。
  - 通过Actions ▶︎ Modify Variable（Integer）创建一个新动作。
  - 将动作的“Variable”项设置为变量“Press Count”。
  - 将动作的“Value”项设置为“1”。

这样，您应该会得到以下内容。

[![Trigger Basis](./resources/036_Conditions1.png)](./resources/036_Conditions1.png)
*触发器基础*

## 控制语句

条件不仅限于触发器中的“Conditions”标题，它们还出现在一种名为控制语句的动作类型中。其中一种动作是“If Then Else”。此动作允许您指定一个条件，根据真假问题的结果之一，将继续执行两种可能的语句块之一，一个用于真，一个用于假。然后该语句块仅运行一次，而另一个块则被跳过。条件在控制语句的“If”标题下指定，而真响应的语句块在“Then”标题下，假响应的语句块在“Else”标题下。

因此，“If Then Else”控制语句可以被视为“如果发生这种情况，则执行此操作，否则执行此操作”的形式。

您可以在触发器中在“Modify Press Count + 1”语句下通过New ▶︎ New Action ▶︎ If Then Else添加“If Then Else”控制语句以进行调查。您将在“Actions”窗口的“-- 一般”类别下找到控制语句。

[![Selecting If Then Else Action](./resources/036_Conditions2.png)](./resources/036_Conditions2.png)
*选择“If Then Else”动作*

## 条件运算符

通过右键单击“If”标题并转到New ▶︎ New Condition，向“If Then Else”动作添加条件。这将打开如下所示的“配置条件”窗口。

[![Operators View](./resources/036_Conditions3.png)](./resources/036_Conditions3.png)
*运算符视图*

配置条件需要两个步骤，即组装条件的术语和选择所谓的运算符。在问题模型中，前者涉及条件所询问的内容，而后者形成条件提出的问题类型。当涉及形成条件时，每个运算符在描述条件方面具有其独特的功能，这些功能在下表中描述。

| 运算符         | 详细信息                                                                                                                                                                                                         |
| ----------------- | ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| 与               | 在两个术语之间创建一个并集。然后同时测试这两个术语。                                                                                                                                                                                                            |
|                   | 如果两个术语同时测试为真，则结果为真。如果两个术语同时测试为假，则结果为假。如果一个术语测试为真，但另一个未测试为真，则结果为假。                                                                                                    |
| 比较      | 评估比较两个术语。实际上是一组运算符，列在接下来的六个条目中。                                                                                                                                                                        |
| \!=               | 如果术语不相等，则返回真。如果相等，则返回假。                                                                                                                                                                                                                    |
| \<                | 如果左侧术语小于右侧术语，则返回真。如果不是，则返回假。相等的术语返回假。                                                                                                                                                             |
| \<=               | 如果左侧术语小于右侧术语，则返回真。如果不是，则返回假。相等的术语返回假。                                                                                                                                                              |
| \==               | 如果术语相等，则返回真。如果不是，则返回假。                                                                                                                                                                                                                       |
| \>                | 如果左侧术语大于右侧术语，则返回真。如果不是，则返回假。相等的术语返回假。                                                                                                                                                               |
| \>=               | 如果左侧术语大于右侧术语，则返回真。如果不是，则返回假。相等的术语返回真。                                                                                                                                                                |
| 非               | 反转术语。测试术语的非版本将提供与正常术语结果相反的结果。                                                                                                                                                           |
| 或                | 在两个术语之间创建一个并集。然后同时测试这两个术语。                                                                                                                                                                                                            |
|                   | 与“与”不同，如果单个术语测试为真，则结果为真。如果两个术语都测试为真，则结果为真。如果两者都测试为假，则结果为假。                                                                                                     |
| 文本已设置 | 如果测试的文本参数不为空，则返回真。                                                                                                                                                                                                                       |
| 在范围内   | 一个复合运算符，用于测试术语是否在两个值之间。如果该值等于任一术语，则也将返回真，因为它使用了两个\<=运算符，形式为Min Value \<= Term \<= Max Value。此运算符仅支持整数、字节和实数值类型。 |

## 配置您的条件

## 翻译 E:\SC2Code\blizzard-tutorials-chinese\docs\New_Tutorials\03_Trigger_Editor\036_Conditions.md.part-1.md

完成设置您的条件，通过导航到“Configure Condition”窗口中的“Comparison”，设置条件。通过点击子视图中的标题来设置条件。 "Value 1" 对应于第一个术语，而 "Value 2" 对应于第二个术语，后跟运算符。通过双击“Value 1”并导航到变量▶︎ Press Count 来设置第一个术语。通过双击“Value 2”并导航到数值来设置第二个术语，并输入10。现在通过双击“Operator”并导航到 == 来设置运算符。

[![设置术语](./resources/036_Conditions4.png)](./resources/036_Conditions4.png)
*设置术语*

点击“确定”返回到触发器编辑器。现在您可以通过以下步骤完成触发器。

  - 在 "Then" 标题下，创建一个 "文本消息" 动作。将消息设置为 "高重置。"
  - 同样在这里，创建一个 “设置变量” 动作。将变量设置为 Press Count，将值设置为 “0。”
  - 在 "Else" 标题下，创建一个 "文本消息" 动作。将消息设置为 "低。"

您现在应该留下类似下面图片的内容。

[![完成触发器](./resources/036_Conditions5.png)](./resources/036_Conditions5.png)
*完成触发器*

您已经组合了一个触发器，每当玩家按键盘上的 1 键时触发。这将每次递增变量。然后，根据条件 Press Count == 10，将运行两个块语句中的一个。一个为真的语句会产生消息 “高重置”，一个为假的语句会产生消息 “低”。因此，每个触发器都会提出问题，“变量是否等于 10？” 它然后根据条件的响应确定应该遵循哪个程序。

在实践中，这应该对前九个触发器而言是假的，然后对第十个触发器而言是真的。 "高重置" 消息将在第十次按键时显示。您可以测试地图以确认其是否正常工作，方式是导航到文件▶︎ 测试文档。如果您已经做对了一切，您应该会得到下面显示的结果。

[![成功输出](./resources/036_Conditions6.png)](./resources/036_Conditions6.png)
*成功输出*

## 附件

 * [036_Conditions.SC2Map](./maps/036_Conditions.SC2Map)

## 翻译 E:\SC2Code\blizzard-tutorials-chinese\docs\New_Tutorials\03_Trigger_Editor\037_Variables.md

# 变量

变量是一个值的符号表示，可以代表数字，点，模型或StarCraft引擎中发现的任何可能类型的数据。通过将数据类型抽象为符号，变量可以充当容器，存储或传递其选择类型的任何值。

变量也可以适用于更大的结构，比如动作或条件，在那里它们将传递其获取和传递数据的能力。一旦获赋予了使用不断变化的值进行操作的能力，一开始静态的语句将变得生动起来，成为游戏开发的动态，中心构成单元。

## 变量作用域

变量有两种不同的分类，局部变量和全局变量。它们都具有上述相同的属性，但可以在触发器编辑器的不同位置使用。您可以从触发器面板中创建全局变量，方法是导航至新建 ▶︎ 新建变量。局部变量可以从几个位置创建，尤其是在触发器内。通过右键单击“局部变量”标题，然后导航到新建 ▶︎ 新建变量，可以在触发器内创建一个局部变量。在一个新的空白项目中创建一个每种类型的变量，您将得到以下结果。

[![本地和全局变量](./resources/037_Variables1.png)](./resources/037_Variables1.png)
*本地和全局变量*

全局变量位于触发器面板中，而局部变量仅在其父触发器中可见。这种分离不仅仅是为了美观，它显示了这两种变量类型之间的特性差异，即作用域。作用域描述了任何组件的可用级别。像全局变量这样的全局作用域中的东西可以在单个项目的触发器中的任何位置访问。每个项目只有一个全局作用域。相比之下，局部作用域是众多的，每个触发器都有自己的作用域。局部变量是一个特定触发器的本地变量。如果没有特殊操作，它不能在该触发器之外访问。

全局变量由于其普遍可访问性而提供了更大的使用便利性，但它们始终保留在内存中，您可以使用触发器调试器来确认。正如您所期望的那样，全局变量的性能成本比其局部等效更高。您还应注意，每次运行触发器时都会重新创建局部变量，并将其实例化为在触发器内设置的初始值。与全局变量的稳定值形成对比。每种分类都提供了不同的组织选项。

## 变量选项

变量具有几个可配置选项，您可以通过启动变量子视图并单击任何变量来设置这些选项。您可以在下面的图像中看到该视图，然后是其选项的详细说明。

[![变量选项](./resources/037_Variables2.png)](./resources/037_Variables2.png)
*变量选项*

| 选项                | 描述                                                                                                                                                                                                                                                                                                                          |
| --------------------- | -------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| 脚本标识符     | 变量 在 Galaxy Code 中的名称。选择基于名称将基于GUI中的名称生成标识符，取消此选项后允许您输入标识符。                                                                                                                                                              |
| 类型                  | 变量的数据类型。突出显示某些类型将启用用于设置记录，链接类型和文件类型等附加选项。                                                                                                                                                                   |
| 常量              | 确定变量的初始值是否可以更改。对于不需要在任何情况下更改的数据片段，常量是一个有用的安全功能。                                                                                                                                                     |
| 数组                 | 选择此项将使变量变成所选类型的变量数组。Size 控制每个维度中元素的数量。Dimension 控制元素层级的数量。具有 Size 值为 5 和 Dimension 为 3 的数组将具有 5*5*5，总共125个元素。常量选项允许您使用预定义常量变量定义数组的大小。 |
| 定义默认值 | 选择此选项将将此变量的初始值定义为所选类型的所有其他变量的默认初始值。                                                                                                                                                                                             |
| 初始值         | 设置变量在其选择数据类型中的初始值。                                                                                                                                                                                                                                                                              |

## 翻译 E:\SC2Code\blizzard-tutorials-chinese\docs\New_Tutorials\03_Trigger_Editor\038_Action_Definitions.md

# 操作定义

操作定义允许您创建定制的操作语句序列。一旦组装好，它们可以在与其组件操作相同的上下文中使用。它们还支持参数，即可以改变定义行为的输入值。通过将操作组织成更大的层次块，您可以使用操作定义将经常重复的程序抽象化为一个强大的工具，根据需要部署。正确使用的话，这样做将为您节省时间，使您的代码更易于理解，甚至优化性能。

## 演示操作定义

打开本文提供的演示地图，并导航到触发器编辑器。该项目包含一个在地图初始化时运行的触发器，用三组不同的树和一片草填充地图，并在生成时对模型进行一些角色修改。

[![树木和草生成操作](./resources/038_Action_Definitions1.png)](./resources/038_Action_Definitions1.png)
*树木和草生成操作*

总体操作相当简单，但由于创建对象的位置不同，它由三个类似的过程组成。多余、臃肿的触发应凸显为可以作为操作语句的潜在位置。在这种情况下，重复的模型创建选项及其各种角色信息可以全部移至操作定义。

要创建一个操作定义，请右键单击触发器面板，然后导航至新建 ▶ 新建操作定义。将定义命名为“创建树木”。现在，按住 Shift 键并选择主要触发器的前五个操作。将这些操作复制到新的操作定义中，以便最终看到以下视图。

[![创建树木操作定义](./resources/038_Action_Definitions2.png)](./resources/038_Action_Definitions2.png)
*创建树木操作定义*

您现在已将冗余操作重构为自定义操作定义。此时，您可以将“创建树木”触发器更改为三次使用操作定义，而不是当前的冗余代码。通过从其“调用”位置，即操作列表中，访问操作定义，将操作定义添加到触发器中。右键单击触发器，选择新建操作，然后找到“创建树木”定义，如下所示。

[![使用新操作定义](./resources/038_Action_Definitions3.png)](./resources/038_Action_Definitions3.png)
*使用新操作定义*

重复此操作三次，以反映要替换的三个操作，并清除所有不必要的代码。这将使您得到以下结果。

[![重新组织的主要触发器](./resources/038_Action_Definitions4.png)](./resources/038_Action_Definitions4.png)
*重新组织的主要触发器*

## 操作定义参数

尽管主要触发器已经大大简化，但仍有一些遗漏。请记住，每棵树和草地组合都是在不同的位置生成的。目前，该定义仅在一个位置（点（20，20））生成树和草地。

您可以使用参数使操作定义具有可变结果。参数值可以向操作定义传递附加信息。在三个不同位置创建对象将需要使用不同的点参数。您可以通过移至“创建树木”操作定义，右键单击“参数”标题，然后导航至新建 ▶ 新建参数来进行安排。将参数命名为“位置”，并将其类型设置为点。对每个使用点（20,20）作为位置字段的操作，将其修改为“位置”变量。您将看到以下结果。

[![带参数的操作定义](./resources/038_Action_Definitions5.png)](./resources/038_Action_Definitions5.png)
*带参数的操作定义*

现在返回主要触发器。您将看到每个操作都需要一个“位置”输入参数。将每个操作的值更改为与树木生成时的原始位置匹配。这将给您一个功能性的最终触发器，如下图所示。

[![图像4](./resources/038_Action_Definitions6.png)](./resources/038_Action_Definitions6.png)

## 附件

* [038_Action_Definitions_Start.SC2Map](./maps/038_Action_Definitions_Start.SC2Map)
* [038_Action_Definitions_Completed.SC2Map](./maps/038_Action_Definitions_Completed.SC2Map)

## 翻译 E:\SC2Code\blizzard-tutorials-chinese\docs\New_Tutorials\03_Trigger_Editor\039_Condition_Definitions.md

# 条件定义

条件定义用于创建自定义定义条件。条件已经在选择术语和应用运算符方面提供了一些定制选项。定义允许您通过定义可以使用编辑器中的任何现有语句的自定义操作来进一步扩展这些功能。通过这些操作，您可以发展对游戏状态的新探究。它们也可以是组织和合并常见条件的有用方法。

[![条件定义视图](./resources/039_Condition_Definitions1.png)](./resources/039_Condition_Definitions1.png)
*条件定义视图*

| 字段              | 详细信息                                                                                                                               |
| ------------------ | -------------------------------------------------------------------------------------------------------------------------------------- |
| 选项              | 这选择定义类型，条件定义在这里特别感兴趣。                                                                                          |
| 返回类型          | 这决定条件的响应值。布尔类型提供标准的 'true' 或 'false'。整数类型允许在二进制之外提供额外响应。                                 |
| 参数              | 传递给条件的值。                                                                                                                       |
| 语法文本          | 设定将条件短语化为自然英语的 GUI 文本。                                                                                                |
| 提示文本          | 设置在选择此条件时在提示子视图中显示的说明性文本。                                                                                     |
| 自定义脚本代码    | 允许以星际脚本而非 GUI 语句对条件进行编码。                                                                                           |
| 本地变量          | 在此条件范围内可用的变量。                                                                                                             |
| 操作              | 构成条件操作的动作语句。                                                                                                                |

## 演示条件定义

打开本文提供的演示地图，查看地形编辑器。在那里，您将找到一组 SCV 和一对掠夺者。这些单位均匀分布在红色玩家一和白色玩家二之间。在本练习中，您将构建一个自定义定义，用于测试单位选择事件。本定义提出问题：'此单位是玩家一拥有的掠夺者吗？'

首先移动到触发器编辑器，然后右键单击触发面板并选择新建 ▶︎ 新条件定义。将新定义命名为 '单位类型由玩家拥有'。这个名称现在可能看起来有点奇怪，但一会儿您就会明白的。该条件定义将需要两段信息来进行评估，即单位类型和玩家编号。为了接收这些信息，定义将使用参数。进入定义内部，右键单击 '参数' 标题，然后导航到 新建 ▶︎ 新参数。重复此过程一次。将第一个参数命名为 '单位类型'，将其类型设置为--游戏链接，将 '链接类型' 设置为单位。将第二个参数命名为 '玩家编号'，将其类型设置为整数。

最后，创建 '若条件为真则执行，否则执行' 操作。在 '若' 标题下创建两个条件，并分别将它们设置为 '单位类型 == 掠夺者' 和 '玩家编号 == 1'。确保将单位类型和玩家编号设置为您创建的参数。

## 返回语句

为了让条件运行，它必须提供某种响应语句。您以前在标准条件中见过这点。通常情况下，它们会以 'true' 或 'false' 的布尔值作为响应。在这里创建这种响应需要您使用一种特殊类型的控制语句，称为 Return。遇到 Return 语句时，它会立即退出当前控制层，即条件定义中。然后将响应值传递到条件的原始调用位置。通过使用另一个控制语句，如 '若条件为真则执行，否则执行'，条件可以使用多个可能的 Return 语句控制其不同可能的响应值。

在 '执行' 标题下添加一个'返回' 操作，并将其值设置为 'true'。在 '否则' 标题下添加一个 '返回' 操作，并将其值设置为 'false'。定义现在已经完成。它接收两个参数并检查它们是否等于所需的值，即掠夺者和 1。如果为真，则条件返回 true。否则返回 false。

## 语法和提示文本

条件定义系统提供了一些选项，用于使自定义定义更易于使用。语法文本允许设置自定义纯语言类型短语，类似于大多数 GUI 触发器。请注意，目前的定义描述为 Unit Type Owned by PlayerID (Unit Type, PlayerID)。将其包含在触发器中可能有点令人难以理解。您可以通过导航到 '语法文本' 并取消选择 '使用默认语法文本' 来更改它。参数必须保持在新的安排中，因此您可以删除其周围的文本并将字段更改为 'Unit Type owned by Player'。这种格式模仿了现有的编辑器条件，并解释了先前的命名方式。

还可以选择的另一个方便选项是 '提示文本'。这提供了在选择定义时在提示子视图中显示的自定义信息。您可以通过选择 '提示文本' 标题并输入 '如果单位是掠夺者且玩家是 1，则返回 true' 来在此处设置它。完成这些步骤后，定义应该显示如下。

![已完成的条件定义](./resources/039_Condition_Definitions2.png)
*已完成的条件定义*

## 使用条件定义

创建一个新触发器并命名为 '单位已选中'。进入触发器中，并创建一个 '单位已选中' 事件。现在通过导航到 '条件'，右键单击并按照 新建 ▶︎ 新条件 的步骤创建一个自定义定义的条件。这将启动 '配置条件' 窗口，其中应包含刚刚定义的条件，如下所示。

![](./resources/039_Condition_Definitions3.png)
*选择自定义条件定义*

突出显示该条件并设置其术语。单位类型应设置为 (触发单位的单位类型)，而玩家编号应设置为 (触发单位的所有者)。点击 '确定' 返回到项目。最后，创建一个类型为 '文本消息' 的动作，并将其 '消息' 设置为 '成功'，应显示如下内容。

[![已完成触发器](./resources/039_Condition_Definitions4.png)](./resources/039_Condition_Definitions4.png)
*已完成的触发器*

如果您进行测试，游戏应该会显示在地形编辑器中看到的单位集合。当选择任何红色掠夺者之外的单位时，不会有响应。如果选择玩家一的红色掠夺者，则自定义条件测试将以为 True 值做出响应，允许触发器运行其主体语句并显示消息。启动游戏并运行测试应该会给您以下视图。

[![成功输出](./resources/039_Condition_Definitions5.png)](./resources/039_Condition_Definitions5.png)
*成功的输出*

## 附件

* [039_Condition_Definitions_Start.SC2Map](./maps/039_Condition_Definitions_Start.SC2Map)
* [039_Condition_Definitions_Completed.SC2Map](./maps/039_Condition_Definitions_Completed.SC2Map)

## 翻译 E:\SC2Code\blizzard-tutorials-chinese\docs\New_Tutorials\03_Trigger_Editor\040_Records.md

# 记录

记录是变量的模板。构建记录就像组装一种计划好的变量布局，您在其中决定类型、名称和数量。一旦组装完成，记录将定义一种新的复合数据类型，可以无限创建。每个记录根据其设计创建一组变量，然后将它们保持为持久性容器。一个典型的记录设计如下所示。

![记录解剖](./resources/040_Records1.png)
*记录解剖*

记录设计揭示了它的主要用途，顶部标题“教程记录”是记录的名称。由于记录本身永远不会用于存储变量，这个名称将成为记录的临时类型。当创建记录的实例时，它们将显示记录类型，即在本例中是“教程记录”。

![记录实例](./resources/040_Records2.png)
*记录实例*

在“变量”标题下是记录中包含的变量，称为“成员”。每个成员都有自己的类型和初始值。当您创建一个“教程记录”的实例时，它将创建每个成员，这意味着该实例将具有五个成员，类型分别为名称、玩家、颜色、种族和起始位置，每个成员都有各自的数据类型。

## 创建记录

记录是在触发面板中创建的，因为它们必须存在于全局范围内。右键单击面板，导航到“新建 ▶ 新建记录”。选择记录将在主视图选项卡中显示其内容。通过右键单击记录中的“变量”标题并导航到“新建 ▶ 新建变量”来创建记录变量。要创建记录的新实例，创建一个变量并将其类型设置为--记录。这将使任何可能的记录类型的列表在“记录”标题下可用。一旦选择了所需的类型，记录中的每个变量将自动创建，虽然在编辑器中不会直接显示。

[![记录实例](./resources/040_Records3.png)](./resources/040_Records3.png)
*记录实例*

请注意，记录作为数据类型出现在触发面板中，表明具有全局范围。但是，由于它们不是实际实例，因此尚无特定范围。记录的各个实例可以存在于全局范围或局部范围。

## 引用记录变量

记录实例内创建的变量不是直接可访问的。它们不能像传统变量那样通过相同的方法进行更改或检查。在使用方面，记录变量必须通过一种称为引用的技术来访问。这允许您通过引用记录实例中的个别变量来调用它们。考虑以下记录。

![带整数成员的记录](./resources/040_Records4.png)
*带整数成员的记录*

已创建了这种记录类型的实例，称为玩家数据。在此实例中有一个起始矿物变量，就像其源记录一样。作为一项练习，尝试在游戏开始时将玩家的矿物设置为起始矿物数量500。这将需要您引用记录实例的属性。幸运的是，编辑器 GUI 在这里做了大部分工作。想象一下您将使用“修改玩家属性”操作，就像以下触发器中所示。

[![需要引用的变量触发器](./resources/040_Records5.png)](./resources/040_Records5.png)
*需要引用的变量触发器*

“值”字段是需要起始矿物变量的地方，但不清楚如何将其传递到那里。双击字段启动“整数”窗口，并导航到如下所示的变量选项卡。

![整数字段窗口](./resources/040_Records6.png)
*整数字段窗口*

记录实例显示在字段查看器中。由于此记录中有一个整数类型变量，因此作为字段的输入可用。选择它并点击“确定”。您会看到对该操作的“值”字段进行了一些更改，如下所示。

[![新的操作字段](./resources/040_Records7.png)](./resources/040_Records7.png)
*新的操作字段*

记录已输入字段，但您还揭示了一个额外的字段，标题为“成员”。如稍早提到的，变量成员指的是其组件变量。“.”分隔记录和成员字段是一种称为引用运算符的特殊运算符类型。通过引用运算符，记录实例的内部成员已变得可用。现在单击“成员”字段将显示如下视图。

[![引用记录成员](./resources/040_Records8.png)](./resources/040_Records8.png)
*引用记录成员*

在这里，起始矿物成员可以被选中，选择它并点击“确定”。结果将如下所示。

[![引用的记录变量](./resources/040_Records9.png)](./resources/040_Records9.png)
*引用的记录变量*

在此设置成员变量已完成引用过程。现在，起始矿物值将设置为“值”字段，通过引用其记录实例玩家数据。当此操作运行时，它将传递给记录实例，然后跟随此引用到内部结构，获取变量值并使用它。

## 记录数组

记录实例还支持数组。在子视图中突出显示一个记录，选择“数组”。这将允许您设置“维度”和“大小”元素，就像任何典型的数组一样。数组的每个成员都具有标准记录设计，其所有成员都设置为标准的初始值。这对于在非常有序的包中处理大量数据非常有用。一个典型的记录数组如下所示。

[![记录数组](./resources/040_Records10.png)](./resources/040_Records10.png)
*记录数组*

从记录数组中引用变量通常与引用标准记录变量相同。不同之处在于需要索引来选择您想要的特定实例。显示了一个典型视图，如下所示。

[![记录数组引用](./resources/040_Records11.png)](./resources/040_Records11.png)
*记录数组引用*

## 翻译 E:\SC2Code\blizzard-tutorials-chinese\docs\New_Tutorials\03_Trigger_Editor\041_Data_Tables.md.part-0.md

# 数据表

随着项目的发展和扩展，你很快会发现它需要超出简单变量和诸如文件夹、标签和触发库等工具的数据组织。为了组织大量数据，编辑器提供了一对更高级的数据结构。

其中之一是数组。这个元素在手册的其他地方有更详细的解释，但值得注意的是，编辑器中的任何变量都可以转换为数组。这将把变量扩展为一个大小适用于某种类型的任意数量的变量的数组，前提是在进行游戏之前在触发编辑器中定义了大小和类型。

数组具有很大的实用性，它们是强类型的并且很容易访问。它们是创建编辑器中事物的重要组成部分。不过，它们的结构是固定的。它们可以快速创建，但必须设计良好，因为你不能在游戏时更改它们的结构。对于需要更灵活的场景，你可以使用另一个更高级别的数据结构，即数据表。

正如它们的名称所暗示的，数据表将数据组织成存储在地图后端的表中。虽然你看不到这个表，但它采取以下抽象形式。

| 名称 | 值 |
| ---- | ----- |
| 名称 | 值 |
| 名称 | 值 |
| 名称 | 值 |
| ...  | ...   |

如上所示，数据表托管了作为名称-值对输入到表中的数据。名称将数据分类到在写入表时设置的唯一字符串下。这个字符串作为查找数据的句柄，无论是检索它以供使用还是从表中删除它。值是表条目的值，就像单个变量具有值或数组组件具有值一样。除此之外，每个条目都有自己的隐含类型；数据的类型是基于用于将数据写入表中的触发器动作来设置的。

## 数据表属性

与数组相比，数据表的结构在游戏时并非事先严格定义的。它们的大小可以增长或缩小，条目可以在游戏过程中追加或删除。此外，数据表本身没有类型，它可以包含任何混合数据类型，其组合可能在持续变化。

数据表具有这些特性，因为它们不会消耗固定的、恒定数量的内存，而是使用一种称为动态内存分配的东西。在动态内存分配下，内存被表声明和使用，然后在不再需要时释放。幸运的是，使用编辑器意味着你实际上不需要了解内存使用的具体细节。你需要从这里带走的是，数据表是动态的，而数组是静态的。

数据表和数组之间的另一个区别在于它们对性能的影响。由于这些结构操作作为容器，你可能已经意识到查找它们的内容会花费引擎一定的时间。这不仅是正确的，而且是一个可以定义的属性。每当从这些结构之一使用一个值时，都会有一个搜索时间，描述了编辑器在这些容器中查找某物需要多长时间，这取决于容器中有多少东西。数组具有线性搜索时间。每添加一个组件，搜索时间将线性增加。使一个数组变大10倍，将使搜索时间增加10倍。由于它们的名称-值配对特性，数据表具有恒定搜索时间。可能听起来很奇怪，使数据表变大10倍不会影响其搜索时间。

如果这个话题让你感到对编辑器后端的一瞥不受欢迎，不要担心。这里重要的是要学会数据表对于“大量”数据的表现要比数组更好。这里“大量”的确切定义取决于手头具体的项目，对于大多数“少量”数据，这两种结构都会提供足够的结果。对于经验不足的人来说，一个经验法则是在性能考虑之前提前考虑数据结构的其他有利属性是最好的。如果你开始看到游戏性能下降，将“大量”数组改为数据表是一种明显的改进方法。

最后要注意的是，动态内存分配存在一种缺陷，即内存泄漏的可能性。当分配了内存但在使用后没有释放时就会发生内存泄漏。正如在船上的漏洞会导致它慢慢进水一样，数据表的泄漏会导致项目消耗越来越多的内存。当没有更多的内存资源可用时，这将导致游戏开始下沉，变慢甚至最终崩溃。请记住，在游戏时，数据表比数组提供更多控制，但在更复杂的项目中，它们可能需要一些整理工作。

## 数据表操作

数据表通过一组触发动作的构建、使用和销毁。这些动作可以在创建操作时通过导航到“数据表”标签找到，如下所示。

[![数据表操作](./resources/041_Data_Tables1.png)](./resources/041_Data_Tables1.png)
*数据表操作*

尽管这个列表很长，但只有三个重要动作。列表之所以长是因为其中一个动作在许多版本中都是可用的。下表将这些动作分解开来。

| 动作                | 效果                                                                                                                                                                                                                                                                                                                                                        |
| ----------------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| 清空数据表        | 清除数据表，删除其中的所有条目。通过指定它所在的范围来选择数据表。                                                                                                                                                                                                                                          |
| 删除数据表值 | 从数据表中删除特定条目。通过名称选择条目，并指定存储在其中的数据表的范围。                                                                                                                                                                                                                         |
| 保存数据表值   | 向数据表添加一个条目。通过指定其名称和值对将条目写入表中，然后选择要写入的数据表的范围。几乎每种编辑器数据类型都有自己的版本，共有46个版本。根据所选版本，数据的类型将隐式设置在表内。 |

## 数据表范围

每个数据表存在于特定范围，可以是全局的或本地的。这些范围用于针对特定数据表读取或写入数据。以下是一个示例操作，将点“Unit Spawn”写入全局数据表。

[![写入数据到全局数据表](./resources/041_Data_Tables2.png)](./resources/041_Data_Tables2.png)
*写入数据到全局数据表*

全局数据表具有全局访问权限，是唯一的，并且始终存在于项目中。相比之下，本地数据表的访问权限与单个触发器相关联。在使用保存数据表值动作在触发器中首次写入数据后，本地数据表就会被创建。然后，该表将在其范围内接收任何继续写入的数据，直到清除为止。类似于本地变量，当主机触发器结束时，本地数据表也会被清除。

## 翻译 E:\SC2Code\blizzard-tutorials-chinese\docs\New_Tutorials\03_Trigger_Editor\041_Data_Tables.md.part-1.md

由于数据表的范围限制，用户在创建和定位数据表时存在伪限制。在项目逻辑的任何位置，只能直接使用全局表或当前触发器的本地表。值可以在触发器之间传递，以访问其他本地范围，这可能是程序设计中的一个重要考虑因素。

范围的主要优点在于防止项目发生内存泄漏。由于本地范围在触发器完成后被消除，因此在本地数据表中自动具有移除或清除数据的故障安全措施。与此相对应的是，全局数据表是内存泄漏的主要罪魁祸首，如果在项目中频繁使用，应该仔细监视它。

数据表函数值获取
-----------------

使用一组带版本的Value From Data Table函数从数据表中检索数据。您可以在任何填充字段时通过导航到“功能”源并按“数据表”标签进行排序来访问这些函数，如下所示。

![](./resources/041_Data_Tables3.png)
*用于Points数据的Value From Data Table函数*

上述示例展示了用于Points的Value From Data Table函数。以下示例演示了此函数的用法。

![](./resources/041_Data_Tables4.png)
*从全局数据表中读取Points数据*

在这里，从全局数据表中检索了一个名为“Unit Spawn”的点。然后将其设置为一个变量以供进一步使用。

## 翻译 E:\SC2Code\blizzard-tutorials-chinese\docs\New_Tutorials\03_Trigger_Editor\042_Control_Statements.md

# 控制语句

控制语句是控制其他动作何时执行的操作。由于触发器编辑器中执行顺序是线性的，这些语句提供了打破线性流程并创建动态系统的独特能力。您可以在动作创建过程中在“一般”标签下找到控制语句，如下图所示。

[![控制语句动作](./resources/042_Control_Statements1.png)](./resources/042_Control_Statements1.png)
*控制语句动作*

## 循环

循环创建一系列语句的重复循环，直到被打破为止。循环的类型通过它们被打破的方式及其执行包含语句的方式来区分。下表描述了循环的类型。

| 循环类型                        | 详细信息                                                                                                                                                                                                      |
| -------------------------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| 重复                             | 包含的动作将重复执行，直到达到计数变量。在执行所有内容后，计数会递增。                                                                                                                                           |
| 永久重复                         | 无限期运行，直到被另一个控制语句打破。                                                                                                                                                                       |
| 挑选每个整数                    | 运行直到其起始值达到终止值。此值在每次循环运行后递增。选定的整数函数标识符用于访问当前迭代的值。                                                                                                          |
| 挑选玩家组中的每个玩家           | 为玩家组中的每个玩家运行一次循环。选定的玩家函数标识符用于访问当前迭代的玩家。                                                                                                                              |
| 挑选单位组中的每个单位           | 为单位组中的每个单位运行一次循环。选定的单位函数标识符用于访问当前迭代的单位。                                                                                                                               |
| 对于每个实数                     | 循环运行直到其起始值达到终止值。每次循环迭代后，起始值都会以实数增量进行更改。                                                                                                                           |
| 对于每个整数                     | 循环运行直到其起始值达到终止值。每次循环迭代后，起始值都会以整数增量进行更改。                                                                                                                           |
| 对于玩家组中的每个玩家           | 为玩家组中的每个玩家运行一次循环。                                                                                                                                                                            |
| 对于每个UI框架                   | 为指定的UI变量中的每个框架运行一次循环。                                                                                                                                                                     |
| 对于单位组中的每个单位           | 为单位组中的每个单位运行一次循环。                                                                                                                                                                            |
| 当条件为真时                     | 运行直到提供的条件不再为真。                                                                                                                                                                               |

有两个辅助控制语句用于操作循环的行为。第一个是 Break，在遇到它时会终止包含的循环。第二个是 Continue，在遇到它时会跳过其下的每个动作，并返回到循环的起始点。这些语句通常与类似 If Then Else 的检查一起使用，以在特定条件下控制循环。这就是 Repeat Forever 无限循环中使用的策略，最终退出循环。

## 等待

等待授予暂停控制的能力。这种暂停可能是无限期的，直到事件发生，或者直到满足某种特定条件。等待类型在以下表格中进行了详细解释。

| 等待类型                                        | 详细信息                                                                                                                                                                                                |
| ----------------------------------------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------ |
| 等待                                           | 暂停控制，直到经过一定时间。在设置等待持续时间时，还可以接受特定的时间类型。                                                                                                                          |
| 等待计时器                                     | 暂停，直到某个计时器计时达到经过的时间或剩余的时间。                                                                                                                                                   |
| 等待条件                                       | 暂停，直到某个条件满足。将根据时间间隔检查条件。                                                                                                                                                      |
| 具有最大持续时间的等待条件                     | 暂停，直到某个条件满足。将根据时间间隔检查条件。此外，还有一个安全的最大持续时间可以经过，然后控制才会恢复。                                                                                        |

## 使用控制语句

通过提供一种打破项目逻辑中标准线性流程的方式，控制语句成为打开使用编辑器制作更多种类项目的关键动作。看一下下面的触发器示例。

[![使用控制语句的触发器示例](./resources/042_Control_Statements2.png)](./resources/042_Control_Statements2.png)
*使用控制语句的触发器示例*

这个触发器中使用了几个控制语句。包含一个在单位组中每个单位上进行拾取的 While 循环，用于从整个地图的单位内容中填充一个单位组。演示地图包含一组六个陆战队员，填充单位组使得在 While 循环中的内部 Pick Each 循环通过打破其条件退出了 While 循环。一旦该循环结束，会启动一个对于每个整数的循环。在这个循环中会等待 1.0 秒，还会输出该循环计数值的文本。这些动作将导致触发器在玩家的屏幕上创建一个从 1 到 10 的计数，每隔 1 秒发生一次。现在将注意力转向另一个触发器。

[![计数结果触发器](./resources/042_Control_Statements3.png)](./resources/042_Control_Statements3.png)
*计数结果触发器*

该触发器展示了从上一个触发器计数循环中的整数计数的另一个用法。当第一个触发器的计数结束时，该触发器将摧毁地图上的每个陆战队员。结果如下所示。

[![文本标签样式并附加到单位](./resources/042_Control_Statements4.png)](./resources/042_Control_Statements4.png)
*文本标签样式并附加到单位*

这个演示展示了通过控制语句在定时基础上触发器之间进行通信，而不是在标准线性基础上实现的一些简单动态结构。 

## 附件

- [042_Control_Statements.SC2Map](./maps/042_Control_Statements.SC2Map)

## 翻译 E:\SC2Code\blizzard-tutorials-chinese\docs\New_Tutorials\03_Trigger_Editor\043_Dialogs.md.part-0.md

# 对话框

对话框是星际争霸 II 引擎中的一个总称，指的是可以出现在屏幕空间中的大量元素，包括文本、图片、动画和界面。对话框本身是一种容器，可以在玩家屏幕上显示上述元素的任意组合。这些元素中的每一个都被称为对话框项目（Dialog Item），并且是在选定的对话框内创建的。使用对话框系统可以产生多种类型的内容，包括简报、肖像对话序列、按钮、滑块等。

# 创建对话框

对话框通常通过两步过程创建，首先实例化对话框，然后显示在玩家组的屏幕上。此过程如下所示。

[![对话框创建](./resources/043_Dialogs1.png)](./resources/043_Dialogs1.png)
*对话框创建*

对话框创建的主要部分发生在“创建对话框”和“显示/隐藏对话框”选项下，这些选项允许对话框的大小进行设置，然后在屏幕上定位并显示。显示对话框是必需的，因为默认情况下对话框是隐藏状态。通常在此步骤之后，将对话框捕获到一个变量中，使用“设置变量”动作。这为对话框提供了一个常数句柄，用于引用它、移动它、进一步改变其可见性，或在其中构建项目。设置对话框为一个变量时，函数标识符“最后创建的对话框”是标准的。

# 对话框操作

编辑器具有大量的对话框操作，便于创建和维护对话框及其项目。下面显示了这些操作的视图。

[![对话框操作](./resources/043_Dialogs2.png)](./resources/043_Dialogs2.png)
*对话框操作*

以下表格详细介绍了常见类型的对话框操作并描述了它们。这个列表通常适用于对话框和对话框项目，稍后会进行讨论。

| 函数         | 描述                                                                                                                    |
| ------------ | ----------------------------------------------------------------------------------------------------------------------- |
| 附加对话框   | 将元素移动到特定锚点。                                                                                                 |
| 创建对话框   | 创建一个新元素，允许设置其大小、锚点、偏移和文本。                                                                      |
| 销毁对话框   | 销毁一个元素及其包含的项目。                                                                                            |
| 显示屏幕项目 | 直接在屏幕空间中创建一个元素，不需要包含对话框。                                                                       |
| 移动对话框   | 相对于特定锚点移动元素。                                                                                                |
| 设定对话框   | 设置特定元素的属性。属性包括大小、光照、文本、颜色、动画、字体样式等等。                                              |
| 显示/隐藏对话框 | 在目标玩家或组的屏幕中显示或移除一个元素。                                                                             |

## 对话框项目

对话框由对话框项目填充。没有任何项目，对话框只是一个矩形容器，其主题背景取决于玩家的阵营。对话框项目各不相同，各种选项与每种类型相关，但总体上遵循与对话框相同的一套原则。就像对话框本身一样，您可以使用“创建对话框项目”动作创建对话框项目，然后使用“显示对话框项目”动作显示它们。之后，通常会在变量中保存一个句柄，使用“设置变量”动作。同样，用于执行此操作的一个有用的标识符是“最后创建的对话框项目”。

作为练习，您将使用上述介绍的一般流程创建一个对话框项目。组装触发器如下所示。

[![对话框和对话框项目组装](./resources/043_Dialogs3.png)](./resources/043_Dialogs3.png)
*对话框和对话框项目组装*

创建对话框项目（按钮）可让您创建一个按钮对话框项目，这是一种接受玩家输入的特殊项目。将鼠标悬停在按钮上将更改其视觉状态，指示可以点击它。在项目创建期间设置了几个字段。

宽度和高度定义了按钮的区域，既显示项目的纹理又确定接受玩家输入的屏幕空间区域。锚点设置了项目将附加到的父对话框的哪一侧，而偏移 X 和偏移 Y 设置了距离锚点的距离，按钮将在该位置创建。对于按钮文本，输入了“演示文本”。此文本将在按钮中心创建。如果此文本太长无法适应按钮区域，它将被截断为“...”，直到纠正为止。测试此对话框将如下所示。

[![游戏视图中的按钮对话框项目](./resources/043_Dialogs4.png)](./resources/043_Dialogs4.png)
*游戏视图中的按钮对话框项目*

## 对话框事件 -- 使用对话框项目

目前，点击上一次演示中创建的按钮不会产生任何效果。对于设计用于接受用户输入的对话框项目，有一个特定的对话框事件称为“使用对话框项目”，需要接收并响应玩家输入。您可以通过在事件创建时按标签“对话框”进行排序找到此事件，如下所示。

[![使用对话框项目事件](./resources/043_Dialogs5.png)](./resources/043_Dialogs5.png)
*使用对话框项目事件*

此事件响应一系列可能的与对话框交互，这些在下图中显示。

[![对话框项目交互类型](./resources/043_Dialogs6.png)](./resources/043_Dialogs6.png)
*对话框项目交互类型*

在此示例中，事件类型“点击”是适当的。为识别特定对话框项目，可以使用一个条件，比较运算符位于标识符“使用的对话框项目”和对话框项目的变量句柄之间。为之前的演示创建一个交互触发器可能如下图所示。

[![按钮点击触发器](./resources/043_Dialogs7.png)](./resources/043_Dialogs7.png)
*按钮点击触发器*

现在测试该演示将产生以下输出。

[![按钮响应点击](./resources/043_Dialogs8.png)](./resources/043_Dialogs8.png)
*按钮响应点击*

在此进行一个按钮试点击，已显示对话框事件的响应通过提供文本消息输出。

## 对话框格式化

对话框是固定结构，这意味着无论特定玩家屏幕的输出尺寸是多少，它们看起来都是一样的。这与基本近战游戏界面中使用的系统类似。这个系统确保了一定程度的可靠性，但在创建自定义内容时，这是您应该了解的一点。举个例子。在 16:9 分辨率下创建的居中对话框将如下所示。

[![16:9 分辨率下的自定义对话框](./resources/043_Dialogs9.png)](./resources/043_Dialogs9.png)
*16:9 分辨率下的自定义对话框*

在 4:3 分辨率下创建相同对话框将如下所示。

[![4:3 分辨率下的自定义对话框](./resources/043_Dialogs10.png)](./resources/043_Dialogs10.png)
*4:3 分辨率下的自定义对话框*

## 翻译 E:\SC2Code\blizzard-tutorials-chinese\docs\New_Tutorials\03_Trigger_Editor\043_Dialogs.md.part-1.md

尽管分辨率有所不同，但对话框本身具有相同的尺寸。该系统通过星际争霸 II 客户端提供的内部分辨率来运作。内部分辨率针对每种屏幕比例具有以下数值。

> 4:3 比例 - 1600x1200
> 
> 16:9 比例 - 2133x1200
> 
> 16:10 比例 - 1920x1200

高度始终将被计算为固定的 1200，然后宽度将根据屏幕比例测量。虽然此系统将确保您的对话框在各种设备上保持相同水平的可见性，但值得注意的是，如果不小心处理，较大的对话框和对话框项目可能会被切断或裁剪。如果您在没有办法在各种系统上进行测试的情况下开发项目，那么在设计对话框或其他屏幕空间元素时，考虑到可用性的范围是很重要的。考虑另一个例子，标准的一组对话框在宽屏格式的计算机上可能会显示如下。

[![宽屏对话框](./resources/043_Dialogs11.png)](./resources/043_Dialogs11.png)
*宽屏对话框*

在不同的非宽屏显示器上测试此项目会显示如下内容。

![](./resources/043_Dialogs12.png)
*非宽屏显示器上的重叠对话框*

标准显示器的受限宽度导致两个对话框重叠，可能会遮挡重要信息。避免此类问题的一种方法可能是为不同类型的显示器提供临时选项。这将利用“显示/隐藏对话框”功能，并创建两个平行的对话框结构。或者，设计对话框系统的宽度不超过 1600 px，大多数情况下可以避免此类错误发生。

## 翻译 E:\SC2Code\blizzard-tutorials-chinese\docs\New_Tutorials\03_Trigger_Editor\044_Dialog_Panels.md

# 对话框面板

对话框面板是对话项的分组选项。通过创建面板并将对话项托管在其中，可以通过对面板应用更改来一起控制各个项。您所做的任何更改都将传播到属于面板的每个项。因此，这些面板在对话框和其他类型的对话项之间提供了一种层次结构。这最终类似于一个单位组或玩家组的操作。在功能上等同于对话框组。

## 创建对话框面板

例如，您可以在对话框内托管一个面板，就像托管其他对话项一样。

[![创建主机对话框](./resources/044_Dialog_Panels1.png)](./resources/044_Dialog_Panels1.png)
*创建主机对话框*

接下来，通过选择“创建对话项”操作创建一个面板，如下所示。

[![创建面板对话项](./resources/044_Dialog_Panels2.png)](./resources/044_Dialog_Panels2.png)
*创建面板对话项*

在创建对话项时，将Type字段设置为“面板”。

[![选择用于创建的面板类型](./resources/044_Dialog_Panels3.png)](./resources/044_Dialog_Panels3.png)
*选择用于创建的面板类型*

您可以通过“将对话项大小设置为父级对话框”操作将面板的属性设置为其父级对话框的宽度、高度和位置。

[![设置面板大小](./resources/044_Dialog_Panels4.png)](./resources/044_Dialog_Panels4.png)
*设置面板大小*

现在，应该将该面板保存为一个变量，以提供一个一致的处理方式用于将来的操作。通过这些操作，实际上已经得到了一个完成的面板。它应该看起来如下图所示。

[![已创建面板](./resources/044_Dialog_Panels5.png)](./resources/044_Dialog_Panels5.png)
*已创建面板*

## 在对话框面板中创建项

设置对话框面板后，您可以通过在其中创建一些对话项来测试其功能性。在下面的触发器更新中，已经在面板内创建了一对按钮，并调整了它们的大小和方向。

[![在面板内创建的对话项](./resources/044_Dialog_Panels6.png)](./resources/044_Dialog_Panels6.png)
*在面板内创建的对话项*

这里的重要区别在于，这些项不是在对话框内创建的，而是在面板内创建的。这是对话项在面板内“分组”并接受对其进行的任何更改的方式。您还应该注意，这里面板的变量句柄很重要，因为它确保可以为在面板内创建的每个对话项重复引用面板。有时，对话项是没有句柄的，因为它们可以完全由它们所托管的对话框或面板控制，但是面板本身通常需要一个句柄。

## 更改对话框面板及其包含项

现在，一切准备就绪，您可以快速演示对话框面板的实用性。在下面显示的触发器更新中，使用“设置对话框项颜色”来操作目标面板。

[![更改面板属性](./resources/044_Dialog_Panels7.png)](./resources/044_Dialog_Panels7.png)
*更改面板属性*

像这样更改面板将使得每个对话项，例如这里的两个按钮，分别被发送“设置对话框项颜色”的操作。通过使用“测试文档”功能查看地图，将看到每个按钮都被设为黄色。您可以在下图中看到结果。

![](./resources/044_Dialog_Panels8.png)
*已传播到其中的项的面板更改*

这应该让您对使用对话框面板可以为自己节省多少工作量有所了解。它们可以用于快速组合和管理大量的对话项。

## 附件

* [044_Dialog_Panels.SC2Map](./maps/044_Dialog_Panels.SC2Map)  

## 翻译 E:\SC2Code\blizzard-tutorials-chinese\docs\New_Tutorials\03_Trigger_Editor\045_Math_Functions.md.part-0.md

# 数学函数

编辑器带有标准的数学函数集，可用于触发器编辑器内的任何工作。您可以通过导航到“功能”来源并按“数学”标题排序来在填写数字字段时访问这些功能，如下所示。

[![数学函数选择](./resources/045_Math_Functions4.png)](./resources/045_Math_Functions4.png)
*数学函数选择*

## 类型转换

如上图所示，大多数数学函数都提供了实数版本和整数版本。这些版本引用了最终输出的类型，这些函数的输入类型可能会有所不同。下面提供了一个这样的示例的详细介绍。

![函数版本](./resources/045_Math_Functions5.png)
*函数版本*

在这个例子中，算术数学函数列出了一个输出整数的版本，算术(整数)，以及一个输出实数的版本，算术(实数)。请注意，正在设置一个实数字段，但列出了整数和实数函数。这是因为所有整数函数都包含了隐式类型转换为实数的功能，使它们可以在这种情况下被选中。类型转换只是将从函数得到的整数结果附加一个等于零的小数部分。因此，例如算术(整数)函数 1 + 1 的结果将是整数 2，它会隐式转换为实数 2.0。

算术函数的两个版本，整数和实数，每个都接受与其输出相同类型的输入。但是有些带版本的数学函数只接受实数输入，但输出对应的整数或实数类型。Log2函数就是这样一个例子，它只接受实数以确保其计算精度足够高。Log2实数和Log2整数版本，仍然分别输出对应的类型。

对于这类需要整数输入的情况，有明确的类型转换可用。您可以在填写实数字段时通过导航到“功能”来源，然后选择“转换”标签来找到这一功能，如下所示。

[![整数转换为实数函数](./resources/045_Math_Functions6.png)](./resources/045_Math_Functions6.png)
*整数转换为实数函数*

显式整数转换的工作方式与隐式转换相同，即向数值附加一个零小数部分。该函数还可用于将整数值输入到仅具备实数版本的数学函数中，稍后在本文中将对此进行探讨。对于需要相反方向的任何转换，填写整数字段时将提供一个明确的实数到整数转换功能。

[![实数转换为整数函数](./resources/045_Math_Functions7.png)](./resources/045_Math_Functions7.png)
*实数转换为整数函数*

“转换实数为整数”会将实数四舍五入为最接近的整数。所有以 .5 结尾的实数都将向下舍入。

## 共享数学函数

在可用的数学函数中，有 16 个是共享操作，具有输出实数和整数类型的版本，这些在下表中列出。尽管本文未对涉及的数学进行全面讨论，但一些操作已配有示例。每个函数将采用其对应的实数或整数输入，除非另有说明。

## 翻译 E:\SC2Code\blizzard-tutorials-chinese\docs\New_Tutorials\03_Trigger_Editor\045_Math_Functions.md.part-1.md

| 功能           | 描述                                                                                                                                                                                                                     |
| -------------- | -------------------------------------------------------------------------------------------------------------------------------------------------------- |
| 绝对值         | 返回一个数字的绝对值。这个值等于该数字的无符号大小。                                                                                                          |
|               | 绝对值（-2.0）= 2.0                                                                                                                                        |
|               | 绝对值（4）= 4                                                                                                                                             |
| 算术           | 创建一个包含四个基本运算符之一的两项方程：加法、减法、除法或乘法。该方程的结果设置为字段。这是一个非常常用的函数，可以通过选择另一个算术函数用于其中一个项或使用算术倍数函数，将其扩展到更多项。          |
| 算术倍数       | 对任意数量的项执行单个基本运算。与算术类似，可用的运算有加法、减法、除法和乘法。算术函数的使用在下述表格之下更详细地介绍。                                                     |
| 向上取整       | 将数字向上舍入到下一个整数。仅接受实数输入。                                                                                                            |
|               | 向上取整实数（2.1）= 3.0 实数                                                                                                                             |
|               | 向上取整实数（-3.2）= -3.0 实数                                                                                                                           |
|               | 向上取整整数（5.1）= 6 整数                                                                                                                               |
| 夹值           | 调整一个值以适应定义的上限和下限。超过上限的值将被设置为上限，同样地，低于下限的值将被设置为下限。                                                         |
|               | 将40.0夹值在1.0和10.0之间= 10.0                                                                                                                          |
|               | 将-5夹值在1和10之间= 1                                                                                                                                   |
| 向下取整       | 将数字向下舍入到其前面的整数。仅接受实数输入。                                                                                                            |
|               | 向下取整实数（2.1）= 2.0 实数                                                                                                                             |
|               | 向下取整实数（-3.2）= -4.0 实数                                                                                                                           |
|               | 向下取整整数（5.1）= 5 整数                                                                                                                               |
| 对数（以2为底） | 返回一个数字的二进制对数。本质上是将2设置为的幂以收到该数字的值。仅接受实数输入。                                                                       |
|               | 对数实数（40.0）= 5.3 实数                                                                                                                                |
|               | 对数整数（40.0）= 5 整数                                                                                                                                  |
| 最大值         | 返回两个数字中的较大者。                                                                                                                                 |
| 最小值         | 返回两个数字中的较小者。                                                                                                                                 |
| 取模          | 接受被除数和除数。返回除法被除数除以除数的余数。                                                                                                         |
|               | 10.0 取模 4.0 = 2.0                                                                                                                                       |
|               | 9.0 取模 4.0 = 1.0                                                                                                                                        |
|               | 25 取模 5 = 0                                                                                                                                              |
| 2的次方       | 返回2的次方结果。仅接受实数输入。                                                                                                                         |
|               | 实数 2^4.3 = 19.7 实数                                                                                                                                    |
|               | 整数 2^4.3 = 20 整数                                                                                                                                      |
| 幂            | 返回将值提升到幂的结果。仅接受实数输入。                                                                                                                    |
|               | 实数 4.0^3.1 = 73.5 实数                                                                                                                                 |
|               | 整数 4.0^3.1 = 73 整数                                                                                                                                   |
| 随机实数      | 返回所选类型的随机数，在指定范围内。                                                                                                                     |
| 随机整数      | 0到100.0之间的随机实数 = 42.5                                                                                                                            |
|               | 25到50之间的随机整数 = 26                                                                                                                                |
| 四舍五入        | 将数字舍入到最近的整数。所有以.5结尾的数字均向下舍入。仅接受实数输入。                                                                                          |
|               | 四舍五入实数（3.2）= 3.0 实数                                                                                                                             |
|               | 四舍五入整数（2.5）= 2 整数                                                                                                                             |
| 平方根         | 返回值的平方根。仅接受实数输入。                                                                                                                           |
|               | 平方根实数（43.0）= 6.6 实数                                                                                                                              |
|               | 平方根整数（43.0）= 7 整数                                                                                                                               |
| 截断          | 移除一个数的小数部分。仅接受实数输入。                                                                                                                    |
|               | 截断实数（3.5）= 3.0 实数                                                                                                                                |
|               | 截断实数（2.6）= 2.0 实数                                                                                                                                |
|               | 截断整数（2.6）= 2 整数                                                                                                                                  |

## 实数数学函数

还有九个仅输出为实数类型的数学函数可用。这些函数主要侧重于三角函数，因此对于 less precise 整数版本的使用将很少。尽管如此，通过使用“将实数转换为整数”函数可以生成整数输出。请注意，其中一些函数将它们的输入视为其他数字类型，比如角度或百分比。这主要是一种建模手段，实际上它们的输入和输出类型始终是实数。以下表格详细列出了实数数学函数。

| 功能                | 描述                                                                        |
| ------------------- | --------------------------------------------------------------------------- |
| 反余弦              | 返回数字的余弦函数的反函数。                                                |
| 反正弦              | 返回数字的正弦函数的反函数。                                                |
| 从差值反正切        | 接受 X 和 Y 差值。返回这些数的比率的反正切函数。                           |
| 从值反正切        | 返回提供的值的反切函数。                                                    |
| 余弦                | 返回将作为角度处理的所提供数字的余弦。                                      |
| 正弦                | 返回将作为角度处理的所提供数字的正弦。                                      |
| 正切                | 返回将作为角度处理的所提供数字的正切。                                      |
| 随机角度            | 返回范围在 0 到 360.0 之间的随机实数。                                    |
| 随机百分比          | 返回范围在 0 到 100.0 之间的随机实数。                                    |

## 翻译 E:\SC2Code\blizzard-tutorials-chinese\docs\New_Tutorials\03_Trigger_Editor\045_Math_Functions.md.part-2.md

您可以在使用数字字段的任何操作、事件或条件中使用数学函数。话虽如此，它们在支持非常有用的变量操作方面得到了广泛的应用。这三种操作负责修改和初始化变量。您可以在操作创建过程中通过导航到“变量”标签来访问它们，如下所示。

[![变量操作](./resources/045_Math_Functions8.png)](./resources/045_Math_Functions8.png)
*变量操作*

这里的核心是设置变量操作，它创建一个方程，可以将任何类型的变量设置为一个值，如下图所示。

[![设置变量操作](./resources/045_Math_Functions9.png)](./resources/045_Math_Functions9.png)
*设置变量操作*

变量设置的值可以直接指定，可以从另一个变量中设置，可以从预设中设置，也可以从函数中设置。最后一种情况支持数学函数，这些元素结合在一起可以强大地用于修改游戏变量。下面的示例使用设置变量操作来使用一系列数学函数设置数字实字段。

[![使用数学函数设置变量](./resources/045_Math_Functions10.png)](./resources/045_Math_Functions10.png)
*使用数学函数设置变量*

修改变量（整数）和修改变量（实数）操作是设置变量操作的同类，但目的更为具体。它们允许使用基本上是内置算术函数的方法修改数值变量。每种数字类型都有一个版本。通过拥有这种表单，这些操作不如它们的设置变量表亲稳健，但可以快速应用于模拟或简单变量更改。下面显示了这些操作的示例。

[![修改变量操作](./resources/045_Math_Functions11.png)](./resources/045_Math_Functions11.png)
*修改变量操作*

与任何共享的数学函数一样，修改变量（整数）操作在必要时使用隐式实数转换。

## 示范数学函数

此时，请将注意力转向本文附带的演示地图，以演示数学函数的实际操作。打开它将显示以下内容。

[![演示地图课程](./resources/045_Math_Functions12.png)](./resources/045_Math_Functions12.png)
*演示地图课程*

此处的海军士兵面临一些有趣的选择。每个信标都连接到一个触发操作，该操作将应用一个数学函数到一个游戏变量上，该变量就是这名海军士兵的生命值。查看区域图层，您会发现每个信标都已连接到适当大小的圆形区域内。进入触发器编辑器以进一步调查。

[![触发器编辑器视图](./resources/045_Math_Functions13.png)](./resources/045_Math_Functions13.png)
*触发器编辑器视图*

在逻辑方面，这个地图已经设置了一个初始化触发器，设置了地图的一些摄像机和文本标签功能，然后将海军士兵连接到一个单位变量以供其他地方使用。此后，一对单独的触发器会响应“单位进入区域”事件。如上所示的触发器中，HP增加区域入口将运行一个使用数学函数的操作。您可以在下面更仔细地查看。

进入该区域时，海军士兵的最大生命值将使用算术数学函数增加 5 点。测试该地图将产生如下结果。

[![海军士兵的生命值增加了5点](./resources/045_Math_Functions15.png)](./resources/045_Math_Functions15.png)
*海军士兵的生命值增加了5点*

数学函数直接对游戏变量进行了更改。如果需要的话，继续将海军士兵移动到信标中以重复效果。如果您继续查看“单位减少生命区域”触发器，您将看到以下内容。

[![单位减少生命触发器](./resources/045_Math_Functions16.png)](./resources/045_Math_Functions16.png)
*单位减少生命触发器*

该触发器也应用了算术函数，但在这个实例中，它执行了减法操作以减少海军士兵的 HP。为了解决这个问题，还有一个附加的数学函数，最大值（实数）已被排序以确保海军士兵的 HP 不会归零。这些函数的效果可以从下面的快速测试中看出。

![海军士兵的生命值减少到5](./resources/045_Math_Functions17.png)
*海军士兵的生命值减少到5*

反复进入该区域将导致触发器最终触发最大函数，将其内部算术运算的输出固定为 5。

## 附件

 * [045_Math_Functions.SC2Map](./maps/045_Math_Functions.SC2Map)

## 翻译 E:\SC2Code\blizzard-tutorials-chinese\docs\New_Tutorials\03_Trigger_Editor\046_Camera_Actions.md.part-0.md

# 摄像机操作

编辑器的摄像机系统提供了一个强大的工具包，用于控制玩家在游戏中看到的方式。真正将这作为创意力量释放的是添加摄像机操作。通过这些操作，您可以为摄像机添加动画效果，在它们之间切换，并应用一系列效果和滤镜。这种动态摄像机使用方式使您能够在项目的叙事或游戏中加入电影元素。

![](./resources/046_Camera_Actions1.png)
*joecab的《Optical Illusion Piece》中的创意摄像机角度*

## 摄像机操作列表

在创建操作时，您可以通过导航到“摄像机”标签来访问摄像机操作。这将带您到以下视图。

[![摄像机操作](./resources/046_Camera_Actions2.png)](./resources/046_Camera_Actions2.png)
*摄像机操作*

下表包含一些摄像机操作的详细信息。

| 操作                                        | 效果                                                                                                                                                                                                                                                                                                                                                                                                |
| ---------------------------------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| 应用摄像机对象                               | 将摄像机设置为玩家的主摄像机，在一段时间内，使用初始速度和减速设置进行过渡。                                                                                                                                                                                                                                                                                                                              |
| 应用摄像机属性                               | 在一段时间内，将属性应用于摄像机，使用初始速度和减速设置进行过渡。这不会改变该玩家的摄像机对象。                                                                                                                                                                                                                                                                                                            |
| 使用摄像机跟随单位组                        | 切换玩家对其当前选择的单位组进行跟随/不跟随的状态。跟随状态的摄像机将平稳地、持续地移动到其目标上。                                                                                                                                                                                                                                                                                                      |
| 锁定摄像机输入                             | 切换玩家的锁定状态。这将阻止玩家对摄像机进行任何修改。这经常用于过场动画。                                                                                                                                                                                                                                                                                                                           |
| 打开/关闭相对鼠标模式锁定摄像机                  | 切换玩家的相对鼠标模式为打开/关闭状态。这种模式将让玩家的鼠标移动变为实际上的拖动滚动行为，类似于按住鼠标中键。它还会隐藏鼠标指针。通常与打开/关闭鼠标旋转一起使用，以创建通常在第一人称游戏中找到的移动类型。                                                                                    |
| 使摄像机对准                               | 调整摄像机，使其对准区域内的目标点供玩家查看。该功能将在XY平面上本质地跟踪摄像机的目标，而不会破坏任何其他功能。过渡期间发生，使用初始速度和减速设置进行过渡。                                                                                                                                                                                                                                   |
| 使摄像机对准并跟随演员                          | 类似于使摄像机对准和使用摄像机跟随单位组的组合。它通过接受一个演员输入，与该组合有所区别。                                                                                                                                                                                                                                                                                                           |
| 使摄像机对准并跟随单位                          | 类似于使摄像机对准和使用摄像机跟随单位组的组合。它通过接受一个单位输入，与该组合有所区别。                                                                                                                                                                                                                                                                                                           |
| 移动摄像机                                 | 调整摄像机，使其对准区域内的目标点供玩家查看。该功能将在等距平面上本质地跟踪移动，而不会破坏任何其他功能。过渡期间发生，使用初始速度和减速设置进行过渡。如果启用了智能移动，摄像机不会在已经对准目标点的情况下移动。                                                                                                       |
| 恢复摄像机                                 | 将摄像机恢复为玩家先前保存的配置。过渡期间发生，使用初始速度和减速设置进行过渡。                                                                                                                                                                                                                                                                                                                        |
| 保存摄像机                                 | 保存玩家当前的摄像机配置。                                                                                                                                                                                                                                                                                                                                                                             |
| 设置摄像机范围                               | 将一组玩家的摄像机范围设置为一个区域。这将限制摄像机的移动范围在这些边界内。选择小地图参数Do将调整其大小以适配摄像机范围。在战役中，这是一个常见选择，用于将地图分成可独立探索的较小区域。                                                                                                                                                                                                              |
| 设置摄像机鼠标旋转速度                        | 设置玩家摄像机的偏航或俯仰灵敏度。当打开摄像机鼠标旋转时启用。                                                                                                                                                                                                                                                                                                                                        |
| 设置摄像机对象属性                           | 将摄像机的属性设置为一个值。属性包括距离、旋转和滚动。                                                                                                                                                                                                                                                                                                                                               |
| 设置摄像机对象目标                           | 将摄像机对象的目标设置为区域内的一个目标。                                                                                                                                                                                                                                                                                                                                                               |
| 抖动摄像机                                 | 为玩家抖动摄像机。抖动沿着方向由基础频率控制，在持续时间内被一个随机值打乱。如果持续时间参数设置为0，摄像机将一直抖动，直到使用停止摇晃摄像机动作。                                                                                                                                                                                                                                                |
| 使用预设抖动摄像机                            | 通过从预设列表中选择设置幅度和频率来为玩家抖动摄像机。该抖动支持其持续时间内的混合进和混合出。                                                                                                                                                                                                                                                                                                       |
| 停止抖动摄像机                              | 停止为玩家抖动摄像机。                                                                                                                                                                                                                                                                                                                                                                                |
| 打开/关闭摄像机高度位移                        | 切换玩家的摄像机高度位移为打开/关闭状态。此功能为当前正在被跟随的任何飞行单位提供高度调整，以确保它们在摄像机缩放期间可见。                                                                                                                                                                                                                                                                             |
| 打开/关闭摄像机高度平滑                        | 切换玩家的摄像机高度平滑为打开/关闭状态。此功能在摄像机在地形高度之间移动时提供平滑过渡。                                                                                                                                                                                                                                                                                                               |
| 打开/关闭摄像机鼠标旋转                        | 切换玩家的摄像机鼠标旋转为打开/关闭状态。当打开时，将使玩家的拖动滚动相机移动以自由查看方式旋转摄像机，而不是拖动摄像机。这可以与打开/关闭相对鼠标模式一起使用，以创建一种通常在第一人称游戏中看到的摄像机类型。                                                                                                           |
| 打开/关闭垂直视野旋转                        | 将垂直视野旋转切换为打开/关闭状态。默认情况下，横向屏幕空间在宽高比之间保持不变，而纵向空间会根据需要进行裁剪或扩展。当打开垂直视野时，纵向屏幕空间将在宽高比之间保持不变，而横向空间会根据需要进行裁剪或扩展。                                                                                                                                                                  |
| 缩放摄像机                                 | 将摄像机缩放到玩家的某个位置。缩放从DistanceFrom到DistanceTo逐步进行，在持续时间内进行。                                                                                                                                                                                                                                                                                                                 |

## 使用摄像机操作

查看以下摄像机操作序列。

[![摄像机操作序列](./resources/046_Camera_Actions3.png)](./resources/046_Camera_Actions3.png)
*摄像机操作序列*

## 翻译 E:\SC2Code\blizzard-tutorials-chinese\docs\New_Tutorials\03_Trigger_Editor\046_Camera_Actions.md.part-1.md

这个序列首先通过移除游戏UI并添加一组海军。之后，使用一系列摄像头动作。Pan Camera动作将摄像头放置在海军配对的中心位置。通过使用极小的持续时间值和无减速度，实现了这个转换的几乎瞬间完成。然后使用Apply Camera Object动作通过设置一个小的距离值来放大摄像头。另一个Apply Camera Object动作改变了摄像头的轴通过设置旋转角度使其位于两个海军之间。这些属性与之前动作的持续时间相同，几乎瞬间完成。这个动作序列的结果如下图所示。

[![使用动作的自定义摄像头设置](./resources/046_Camera_Actions4.png)](./resources/046_Camera_Actions4.png)
*使用动作的自定义摄像头设置*

## 附件

* [046_Camera_Actions.SC2Map](./maps/046_Camera_Actions.SC2Map)

## 翻译 E:\SC2Code\blizzard-tutorials-chinese\docs\New_Tutorials\03_Trigger_Editor\047_Text_Tags.md

# 文本标签

文本标签在游戏空间中显示文本，而不是像任何界面或对话框选项一样在屏幕空间中显示。它们被设计为具有一种视觉属性，将它们悬挂在目标单位的上方，并对摄像机移动做出反应。这确保它们位于环境中。因此，它们通常用于介于界面元素和游戏元素之间的文本元素。文本标签的典型应用包括玩家名字、地点名称和伤害数字。在下面的图像中，您可以看到文本标签显示在一座孵化场和一个萃取器上方，提供了关于每个资源上的工人数量的相关信息。

[![图像](./resources/047_Text_Tags1.png)](./resources/047_Text_Tags1.png) 显示工人数量的文本标签

## 文本标签操作

您可以在创建操作时通过导航到“文本标签”标签来访问文本标签操作。这将呈现给您以下视图。

[![文本标签操作](./resources/047_Text_Tags2.png)](./resources/047_Text_Tags2.png)
*文本标签操作*

这些操作在以下表格中进行了分解。

| 操作                            | 效果                                                                                                                                                                     |
| ----------------------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------ |
| 将文本标签附加到单位           | 将文本标签附加到单位，带有高度偏移。                                                                                                                                           |
| 将文本标签附加到单位附着点      | 将文本标签附加到单位的附着点，带有X和Y的偏移量。请注意，单位包含特定的附着位置在其模型数据中，包括状态栏。                                                                           |
| 创建文本标签                  | 使用玩家的字体大小在位置和高度偏移处创建一个带有文本的标签。                                                                                                                    |
| 销毁文本标签                 | 移除文本标签。                                                                                                                                                                |
| 暂停/恢复文本标签             | 暂停或恢复发送到文本的任何操作。                                                                                                                                                   |
| 设置文本标签的对齐方式           | 设置文本标签的水平对齐和垂直对齐。                                                                                                                                                 |
| 设置文本标签的背景边框         | 将文本标签的背景边框设置为水平和垂直值。                                                                                                                                             |
| 设置文本标签的背景图像          | 使用特定平铺类型设置文本标签的背景图像。                                                                                                                                            |
| 设置文本标签的背景偏移         | 将文本标签的背景偏移设置为水平和垂直值，以屏幕尺寸百分比为单位。                                                                                                                    |
| 设置文本标签的颜色             | 设置文本标签的颜色。                                                                                                                                                             |
| 设置文本标签的边缘图像          | 使用X和Y偏移设置文本标签特定边缘的图像。                                                                                                                                             |
| 设置文本标签的雾效            | 设置文本标签的雾效使用状态。                                                                                                                                                          |
| 设置文本标签的渐隐透明度       | 设置文本标签的渐隐透明度类型。                                                                                                                                                       |
| 设置文本标签的字体大小          | 设置文本标签中使用的字体大小。                                                                                                                                                    |
| 设置文本标签的最大大小         | 文本标签根据摄像机距离调整其大小。此操作允许您设置文本标签的最大尺寸，以宽度和高度为单位。                                                                                                 |
| 设置文本标签的位置             | 设置文本标签在带有高度偏移的位置。                                                                                                                                                  |
| 设置文本标签的文本对齐方式       | 设置文本标签在水平和垂直坐标轴上的对齐。                                                                                                                                             |
| 设置文本标签的文本内容         | 设置文本标签的文本内容。                                                                                                                                                           |
| 设置文本标签的时间             | 将文本标签的持续时间设置为时间。设置这样的时间会导致标签在持续时间后到期。                                                                                                         |
| 设置文本标签的可见类型          | 设置文本标签的可见类型。                                                                                                                                                            |
| 显示/隐藏文本标签的背景       | 显示或隐藏文本标签的背景图像。                                                                                                                                                       |
| 显示/隐藏文本标签的阴影       | 显示或隐藏文本标签的阴影。                                                                                                                                                           |
| 显示/隐藏文本标签            | 为玩家显示或隐藏文本标签。                                                                                                                                                           |

## 使用文本标签

与对话框一样，文本标签经常在创建后重新定位、移动和调整大小。为了支持这一点，您应该给每个标签一个持久的句柄，使用“设定变量”操作和文本标签函数标识“最后创建的文本标签”。

查看下面的文本标签操作序列。

[![文本标签操作序列](./resources/047_Text_Tags3.png)](./resources/047_Text_Tags3.png)
*文本标签操作序列*

在此序列中，使用“创建文本标签”操作创建了一个文本标签。该操作确定了标签的文本和字体大小，然后将标签设置为海军兵在高度偏移处的位置。随后，使用“将文本标签附加到单位”操作将标签植入到海军兵中，目标单位的高度偏移处。这一对操作在使用文本标签时是标准的。还应注意，附件已覆盖了标签位置，并且将导致文本标签随着其主机单位移动。

[![文本标签样式化并附加到单位](./resources/047_Text_Tags4.png)](./resources/047_Text_Tags4.png)
*文本标签样式化并附加到单位*

## 附件

* [047_Text_Tags.SC2Map](./maps/047_Text_Tags.SC2Map)

## 翻译 E:\SC2Code\blizzard-tutorials-chinese\docs\New_Tutorials\03_Trigger_Editor\048_Unit_Selection_Events.md.part-0.md

# 单位选择事件

在添加与单位交互方式时，“单位选择”事件类别可以非常有用。这些事件是由玩家的鼠标操作引起的单位状态变化触发的。有三种类型的变化，如下表所示。

| 事件              | 详情                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        |
| ----------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------ |
| 单位被选中       | 当玩家第一次点击单位时触发该事件，这将选择该单位。该单位现在进入已选中状态。一旦单位处于此状态，直到玩家取消选择并恢复到基本状态之前，它将无法再次选中。当玩家选择任何其他游戏实体时，也可以取消选择单位。玩家可以通过使用鼠标的框选或按住CTRL键单击单位来用一次动作选择许多单位。         |
| 单位被点击       | 每次由玩家用鼠标单击单位时触发。可以无限次发生。对一个取消选择的单位的第一次点击符合单元单击事件和单位选中事件的标准。每次玩家只能点击一个单位。                                                                                                                                                                                                                                                     |
| 单位被高亮/取消高亮 | 高亮和取消高亮事件触发取决于玩家鼠标进入或离开单位区域的位置。当鼠标指针首次穿过单位的区域时，单位触发其单位高亮事件并变为高亮状态。当鼠标指针离开高亮单位的区域时，单位触发其取消高亮事件，并返回到基本状态。玩家一次只能突出显示一个单位。                                                                                                                                                 |
| 单被高亮           |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          |

## 选择状态

StarCraft 的用户界面可以帮助识别选择状态，如下图所示。图片下方的标题解释了每个状态。

[![图片](./resources/048_Unit_Selection_Events1.png)](./resources/048_Unit_Selection_Events1.png)

单位基本状态 -- 单位高亮 -- 已选择的单位和高亮 -- 已选择的单位

这里最左边的图片显示单位处于其基本状态，既未被选择也未被高亮显示，并且模型没有任何特殊的改变。从左起第二幅图中，鼠标进入了该单位的区域，使该单位处于高亮状态。此时，会触发一个单位高亮事件。将光标悬停在高亮状态的单位上会导致一对说明性的用户界面变化；鼠标指针变为目标标记，单位被标记为一个虚线圆。圆圈的颜色取决于单位的所有者，对于属于玩家的单位为绿色，对于盟友或中立单位为黄色，对于敌对单位为红色。

在最左边的第三张图片中，该单位已被点击选中。这种变化会导致触发单位选中和单位被单击事件。已选择单位的模型在用户界面中用一个完整的圆圈标记。这个圆圈的着色与高亮光标相同。在这种情况下，光标仍停留在单位上方，使单位既被高亮也被选中。因此，两套用户界面功能会叠加在一起。单位同时具有选择圈和高亮圈，并且光标仍然是高亮标记。

在最右边的图片中，鼠标已从单位区域移开，导致单位取消高亮事件。该单位仍处于选择状态，并仍由完整的选择圈标记。光标已恢复到基本指针，因为单位不再被高亮显示。

## 选择标志

尽管 StarCraft 引擎中的每个单位都可以被点击和高亮显示，但触发事件的数据消息默认情况下是未启用的。你需要编辑一些游戏数据以启用这些行为。转到数据编辑器，然后到+ ▶︎ 编辑游戏数据 ▶︎ 单位。找到要监控选择事件的单位类型。在此单位中，导航到“单位：标志”字段，并双击以启动“对象值”窗口。有关示例，请参阅下图中对猎魔者所做更改。

[![修改猎魔者的“单位：标志”字段](./resources/048_Unit_Selection_Events2.png)](./resources/048_Unit_Selection_Events2.png)
*修改猎魔者的“单位：标志”字段*

滚动浏览单位标志，直到找到“不可点击”和“不可高亮”。这些标志分别控制发送“单位被单击”和“单位高亮/取消高亮”事件。一旦取消选中这些标志，该单位类型将将其相应类型的任何事件传递到触发编辑器，并且应如下图所示。

![](./resources/048_Unit_Selection_Events3.png)
*为单位启用单位被单击和高亮/取消高亮事件*

## 检查单位选择事件

打开本文提供的演示地图，该地图提供了一个课程，您可以通过它来尝试选择事件。这将有助于建立对玩家行为中选择事件如何发生的直观感受。该课程应如下所示。

[![演示地图课程](./resources/048_Unit_Selection_Events4.png)](./resources/048_Unit_Selection_Events4.png)
*演示地图课程*

您会发现地图包含几种已通过数据编辑器配置为接受单击和高亮显示的单位类型。请注意，这些单位还分为玩家、盟友玩家、敌人玩家和中立单位。切换到触发编辑器，查看单位选择事件在该示例中的使用方式。

![](./resources/048_Unit_Selection_Events5.png)
*对单位选择事件的响应输出*

地图设置了一些实用的显示器、联盟控制和无敌触发器在“地图初始化”触发器中。除此之外，每个主要单位选择事件都有一个触发器：高亮、取消高亮、选择和点击。像上面所示的“单位高亮”示例触发器一样，这些触发器通过向屏幕空间发送调试消息来响应其事件。使用这个设置，地图可以为玩家的每一个可能的选择动作提供直接的反馈。您可以通过在编辑器中点击“测试文档”按钮来探索它。

下面显示了一些单位选择事件的示例。

![](./resources/048_Unit_Selection_Events6.png)
*海盗被突出显示，然后被单击和选中*

## 翻译 E:\SC2Code\blizzard-tutorials-chinese\docs\New_Tutorials\03_Trigger_Editor\048_Unit_Selection_Events.md.part-1.md

这里敌对掠夺者已经被鼠标悬停然后点击。这样做产生了一个依次出现的Unit Highlighted、Unit Clicked和Unit Selected事件。请注意，在编辑器中最后两个事件同时发生，但点击事件将始终首先出现在任何列表中。您还可以看到掠夺者的UI更改各自显示为红色，表明其为敌人的状态。

[![框选所有受控单元](./resources/048_Unit_Selection_Events7.png)](./resources/048_Unit_Selection_Events7.png)
*框选所有受控单位*

在下一个情况中，围绕单位进行了框选。尽管单位被框选覆盖，但这本身不会触发任何事件。

![](./resources/048_Unit_Selection_Events8.png)
*幽灵、狂热者和暗影神殿战士同时被选中*

释放框选将导致属于该玩家的所有单位同时被选中。每个单位都会触发一个Unit Selected事件，然后转入到已选择状态。

[![重复点击Lyote](./resources/048_Unit_Selection_Events9.png)](./resources/048_Unit_Selection_Events9.png)
*重复点击Lyote*

在这个例子中，一个中立的Lyote动物已经被重复点击。这表明一种单位可以接受无限数量的玩家点击，每次都会触发一个Unit Clicked事件。

## 附件

* [048_Unit_Selection_Events.SC2Map](./maps/048_Unit_Selection_Events.SC2Map)

## 翻译 E:\SC2Code\blizzard-tutorials-chinese\docs\New_Tutorials\03_Trigger_Editor\049_UI_Events.md.part-0.md

# Ui 事件

StarCraft 对玩家输入的具体机制有时会感觉晦涩难懂且难以访问。尽管编辑器提供了极大的控制能力，但依然存在许多未知因素，这些因素源于硬件、操作系统和后端引擎的混合考虑。为了应对这种封闭的感觉，有许多方式可以在玩家输入和游戏反应之间进行沟通。在触发方面，重点是一组响应玩家输入的事件，合称为 UI 事件。您可以按照下面展示的方式按 'UI' 标签排序，在事件创建过程中看到这些事件。

[![UI 事件列表](./resources/049_UI_Events1.png)](./resources/049_UI_Events1.png)
*UI 事件列表*

以下表格提供了这些事件的细分。

| 事件                   | 详情                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   |
| ----------------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| 中止任务               | 当玩家从游戏菜单中点击“中止任务”按钮时触发。                                                                                                                                                                                                                                                                                                                                                                                                                                              |
| 按钮按下               | 当玩家从指令卡中点击按钮时触发。可以使用按钮按下功能标识该按钮。这是一个性能密集型事件。                                                                                                                                                                                                                                                                                                                                                      |
| 自定义对话框关闭       | 当玩家通过特定结果关闭对话框（如“是”、“否”或“任何”）时触发。结果可以使用自定义对话框结果功能标识，玩家可以使用触发玩家功能标识。                                                                                                                                                                                                                                                                                                            |
| 游戏结束演职员表演完成 | 当游戏结束演职员表演完成时触发。                                                                                                                                                                                                                                                                                                                                                                                                                                                           |
| 游戏菜单项选择         | 当玩家选择游戏菜单项时触发。示例包括“保存”按钮、“退出”按钮、“中止任务”或“成就”按钮。此处可用的标识符是游戏菜单已选择和触发玩家功能。                                                                                                                                                                                                                                                                                             |
| 热键按下               | 当玩家按下热键使其处于某种状态（按下或释放）时触发。热键是各种实用控制的集合，每个都绑定到单个按键，例如“选择部队”、“闲置工人”和“传送”。可用标识符是热键按下功能用于热键，触发玩家功能用于玩家。请注意，如果已编写处理热键按下的代码，则热键将不再触发此事件。这是一个性能密集型事件。 |
| 按键按下               | 当玩家按下按键使其处于某种状态（按下或释放），并激活多个修改键（Shift、Control 和 Alt）时触发。每次按键按下都可以使用按键按下、Shift 键按下、Control 键按下和 Alt 键按下函数标识。这是一个性能密集型事件。                                                                                                                                                                                                      |
| 鼠标点击               | 当玩家按下鼠标按钮使其处于某种状态（按下或释放）时触发。可用的鼠标按钮包括左、右和中。可以使用鼠标点击按钮功能标识点击本身，然后通过鼠标点击 UI 位置 X 或 Y 函数以及鼠标点击世界位置 X、Y 和 Z 函数在屏幕空间或游戏空间中识别坐标。这是一个性能密集型事件。                                                                                        |
| 鼠标移动               | 当玩家移动鼠标时触发。可以使用鼠标点击 UI 位置 X 或 Y 函数以及鼠标点击世界位置 X、Y 和 Z 函数在屏幕空间或游戏空间中识别坐标。这是一个性能密集型事件。                                                                                                                                                                                                                                                                              |
| 鼠标滚轮               | 当玩家滚动鼠标滚轮时触发。鼠标滚动移动函数提供了移动的幅度。这是一个性能密集型事件。                                                                                                                                                                                                                                                                                                                                                               |
| 请求资源               | 当玩家使用团队资源菜单请求资源时触发。                                                                                                                                                                                                                                                                                                                                                                                                                                                  |
| 交易资源               | 当玩家使用团队资源菜单将资源交易给接收玩家时触发。                                                                                                                                                                                                                                                                                                                                                                                                                              |
| 目标模式更新           | 当玩家将能力命令的目标模式更改为特定状态（开启、关闭或任何）时触发。                                                                                                                                                                                                                                                                                                                                                                                                         |

## 性能考虑

监控玩家输入可能导致某些 UI 事件触发大量次数。主要是按钮按下、热键按下、按键按下、鼠标点击、鼠标移动和鼠标滚轮事件会引起这种情况。因此，您应谨慎使用这些事件，仅在必要时使用。如果需要使用这些事件，避免性能下降的一种技术是将监控触发器与一个条件配对，一旦不再需要则关闭事件。下面展示了一个示例。

![输入事件节流](./resources/049_UI_Events2.png)
*输入事件节流*

## 检查 Ui 事件

每个 UI 事件响应特定玩家输入，通常提供一些标识符函数来帮助描述输入的用途。这对鼠标事件特别适用，鼠标事件是 UI 事件的子集，提供大量的标识函数来描述玩家可用的鼠标移动次数和鼠标按钮按下次数。您可以通过在事件创建屏幕上搜索“Mouse”来查看这些事件，如下所示。

[![鼠标 UI 事件](./resources/049_UI_Events3.png)](./resources/049_UI_Events3.png)
*鼠标 UI 事件*

在本教程提供的演示地图中，您将找到一些示例触发器，展示了如何通常使用 UI 事件。打开地图并转到触发器编辑器，您将看到以下视图。

[![地图触发器编辑器视图](./resources/049_UI_Events4.png)](./resources/049_UI_Events4.png)
*地图触发器编辑器视图*

地图中包含一个单独的海军单位，该单位在初始化时已经被识别并设置为变量。其余的触发器将使用玩家输入来创建一个直接将海军单位的控制与鼠标连接起来的控制方案。当然，这与 StarCraft 传统的 RTS 控制设置有明显的不同，后者允许选择和控制大量单位。为了支持这种控制方案，这里禁用了鼠标拖选或“方框选择”。如果查看“mouseMove”、“mouseDown”和“mouseUP”触发器，您将看到以下内容。

[![鼠标 UI 触发器](./resources/049_UI_Events5.png)](./resources/049_UI_Events5.png)
*鼠标 UI 触发器*

通过使用两个鼠标点击事件（“mouseDOWN”和“mouseUP”）和一个鼠标移动事件（“mouseMove”）的组合构建了一个直接控制单位的系统。这通过不断监控鼠标位置并使用两个标识函数 Mouse Moved World Pos X 和 Mouse Moved World Pos Y 记录该位置实现。当玩家点击鼠标时，“mouseDown”事件触发，进入一个 While 循环，为该单位创建一个持续的移动命令，使其移动到鼠标的上次存档位置。

## 翻译 E:\SC2Code\blizzard-tutorials-chinese\docs\New_Tutorials\03_Trigger_Editor\049_UI_Events.md.part-1.md

这个过程会一直持续，只要玩家按住鼠标按钮不放，单位就会根据这两个触发器共同作用而持续移动。当鼠标按钮未被按下，或者“松开点击”时，“mouseDown”中的While循环被打破，移动停止。测试地图应该会给你呈现类似下方图片所示的画面。

[![直接操控海军](./resources/049_UI_Events6.png)](./resources/049_UI_Events6.png)
*直接操控海军*

这展示了为什么你可能想要介入玩家输入并利用UI事件的原因之一。这里已经被用来给玩家一种新的控制游戏的方式，这可以是很有趣的。不过，为了保持移动的平滑性，需要很多事件。如果你打开触发器调试器，你会对这个过程有一些了解。

[![直接操控海军](./resources/049_UI_Events7.png)](./resources/049_UI_Events7.png)
*直接操控海军*

在这里，你可以看到不断监控鼠标导致在短短几秒钟内触发了250多个事件。这应该让你对这样的操作如何在性能方面变得非常昂贵有所了解。

## 附件

* [049_UI_Events.SC2Map](./maps/049_UI_Events.SC2Map)

## 翻译 E:\SC2Code\blizzard-tutorials-chinese\docs\New_Tutorials\03_Trigger_Editor\050_Custom_Values.md

# 自定义数值

自定义数值是指以单位为中心的存储数组。一旦将一个数字设置为单位的自定义数值，该数组就变为活动状态，可以再次设置任何值，读取、修改并以任何方式使用。这些数字是实数类型，并限定为每个单位64个数值的数组。实质上，自定义数值相当于存储在特殊单位范围内的一个Real\[63\]。

自定义数值代表一种与数组或记录不同的组织数据类型。通过在单位内预先组织数据，您无需声明或管理数组。结合这些数据与其源的接近性，这为像英雄单位这样的复杂实体提供了支持快速计算和数据跟踪的简单方法。

## 设置自定义数值

使用动作“设置单位自定义值”来设置自定义数值。您可以在动作创建过程中在“单位”标签下找到它，如下所示。

[![自定义值操作](./resources/050_Custom_Values1.png)](./resources/050_Custom_Values1.png)
*自定义值操作*

## 获取自定义数值

使用函数“单位自定义值”来提取自定义数值。您可以在“功能”来源下的填写实数字段时找到它。

[![自定义值函数](./resources/050_Custom_Values2.png)](./resources/050_Custom_Values2.png)
*自定义值函数*

## 演示自定义数值

打开本文提供的演示地图。您会看到Zerg英雄Dehaka在森林中排列一些敌人的画面。

[![演示地图路径](./resources/050_Custom_Values3.png)](./resources/050_Custom_Values3.png)
*演示地图路径*

在触发器编辑器中，您会找到一组触发器，用于监视并更新Dehaka的自定义数值，记录他所造成的伤害。随后，这些触发器将把这个自定义数值更新到文本标记。

如果您检查全局变量范围，您会发现一个关于自定义数值使用的重要提示。为任何自定义数值创建一个索引整数常量是创建特定自定义数值的一种有用习惯。然后，在处理该值的每个时机上，可以插入索引以避免处理硬编码的自定义值数组索引。下面您可以看到处理自定义值文本标记的触发器。

[![文本标记构造触发器](./resources/050_Custom_Values4.png)](./resources/050_Custom_Values4.png)
*文本标记构造触发器*

在这里，一个文本标记被整洁地构建并附加到Dehaka上，作为显示他自定义值的读数。然而，这个练习的关键部分在于“自定义值读数更新器”触发器中，您可以在下面看到。

[![自定义值读数触发器](./resources/050_Custom_Values5.png)](./resources/050_Custom_Values5.png)
*自定义值读数触发器*

该触发器在每次造成伤害后更新，然后使用“设置自定义值”动作更新自定义值。请注意这里的整数索引c\_TotalDamageDealt；它充当一个快速的句柄。每次更新自定义值后，文本标记读数也会重置。所有这些行动共同造就了通过文本标记可视化内部自定义值的效果。像这样将自定义数值理解为单位为中心的数据对于起草如何使用它们的方式是有帮助的。如果您自己测试这个地图，应该会得到如下所示的结果。

[![自定义值伤害追踪](./resources/050_Custom_Values6.png)](./resources/050_Custom_Values6.png)
*自定义值伤害追踪*

最后，自定义数值在触发调试器中不算作变量。这意味着，当您调试诸如此类演示或其他以自定义数值为中心的设计系统时，通常会值得开发一个自定义的调试界面。

## 附件

* [050_Custom_Values.SC2Map](./maps/050_Custom_Values.SC2Map)

## 翻译 E:\SC2Code\blizzard-tutorials-chinese\docs\New_Tutorials\03_Trigger_Editor\051_Banks.md

# 银行

银行是编辑者用来存储信息并在项目之间使用的方法。以下是一个示例银行文件。

[![自定义游戏银行文件](./resources/051_Banks1.png)](./resources/051_Banks1.png)
*自定义游戏银行文件*

该银行存储了玩家在一种自定义游戏中的个人统计数据。请注意这里的结构。银行首先按部分分层，然后按键值对分层。当值存储在银行中时，它们按照与其相关键相对应的目标部分写入银行文件，但除此之外没有特定顺序。

## 银行操作

银行处理的控件可以在操作创建期间找到，在标签'银行'下显示如下，后面跟着一个详细介绍这些控件的表格。

[![银行操作](./resources/051_Banks2.png)](./resources/051_Banks2.png)
*银行操作*

| 操作               | 效果                                                                                                                                                                                                                     |
| ------------------- | -------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| 预加载银行          | 预加载并同步特定玩家的银行。                                                                                                                                                                                              |
| 创建银行部分       | 创建一个银行部分，然后接受键值对。                                                                                                                                                                                      |
| 保存银行           | 保存银行，确保游戏后文件的所有更改都得以保留。                                                                                                                                                                           |
| 存储数据           | 将值存储为银行的某个部分的键。有几种类型可供存储：Boolean，Integer，Real，Point，String，Text和Unit。                                                                                                                  |
| 重新加载银行       | 重新加载银行，还原可能发生在保存之间的任何更改。                                                                                                                                                                          |
| 打开银行           | 打开银行以供使用和修改。                                                                                                                                                                                                  |
| 恢复单位           | 通过Store Unit操作存储的以前存储的单元。该单元通过从银行的部分中的一个键进行恢复。这导致该单元在某一点为玩家创建，并面朝某个角度。                                                                            |
| 等待银行           | 这是一个等待控制语句，暂停直到特定银行重新加载的条件为True。                                                                                                                                                               |
| 设置银行选项       | 将银行的签名选项设置为启用或禁用。签名为银行提供了一种加密选项，使得玩家无法更改它们。                                                                                                                                   |
| 删除银行键         | 从银行的部分中删除一个键及其相关值。                                                                                                                                                                                      |
| 删除银行部分       | 从银行中删除一个部分以及其中包含的所有键值对。                                                                                                                                                                            |

## 查找本地银行存储

您可以在以下描述的Windows位置找到本地银行存储。

  - 资源库
      - 文档
          - 星际争霸 II
              - 星际玩家.ID@\#
                  - 银行
                      - ID代码
                          - 银行文件

以下图片序列显示了该过程。

[![访问本地银行存储](./resources/051_Banks3.png)](./resources/051_Banks3.png)
*访问本地银行存储*

## 翻译 E:\SC2Code\blizzard-tutorials-chinese\docs\New_Tutorials\03_Trigger_Editor\052_Trigger_Organization.md.part-0.md

# 触发器组织

随着您的项目不断增长并纳入越来越多的元素，它可能会倾向于某种程度的混乱。这可能相当危险。在编程中，工作质量通常取决于开发人员能够轻松理解整个系统如何协同工作。一团乱糟糟的元素直接违反了这种清晰理解的方式，因此开发一个组织项目的系统是必须的。为此，触发器编辑器中有几种工具可帮助您整理。组织项目可能会产生相当显著的影响，如下图所示。

![](./resources/052_Trigger_Organization1.png)
*无组织的触发器-- 触发器带有组织措施*

## 文件夹

文件夹是计算机工作组织的基本元素，因此它们可能不需要太多解释。它们在编辑器中的运作基本如您所期望的那样。触发器编辑器文件夹能够将项目项分组到一个容器对象中，通过其左侧的 + 或 - 控件来展开或折叠。

通过在触发器面板内右键单击并导航至新建 ▶︎ 新建文件夹，或使用在触发器栏中找到的新建文件夹按钮来创建文件夹。下面展示了这些步骤。

![](./resources/052_Trigger_Organization2.png)
*从触发器面板创建文件夹-- 从触发器栏创建*

移动或创建文件夹到另一个文件夹内会创建一个子文件夹。您可以重复此过程来为您的项目创建一个层次结构。虽然您应该避免过度使用这一点，但几层层次结构可能是组织的一个强大的第一步。下图显示了正式的星际争霸战役地图的组织方式，首先按其一般类型（MAIN，GAMEPLAY，OBJECTIVES 和 CINEMATIC）分成文件夹，然后按其具体目的，例如 'Global Variables'，'AI' 或 'Victory Cinematic' 进一步分类。

[![战役地图中的文件夹组织](./resources/052_Trigger_Organization3.png)](./resources/052_Trigger_Organization3.png)
*战役地图中的文件夹组织*

## 注释

注释是项目文档的工具。它们添加了直接写入编辑器的文本元素。这些元素对游戏过程没有影响，而是留在编辑器内部，为描述项目部分运作方式提供了有用的沟通工具。您可以为个人使用或其他可能看到您地图的用户创建注释，无论是队友还是社区的成员。扩展的注释节还可用于许多实用目的，包括手册、发布历史、调试代码列表和待办事项列表。一些典型的注释如下所示，以它们的绿色文本和 [![图像](./resources/052_Trigger_Organization9.png)](./resources/052_Trigger_Organization9.png) 标记。

[![已注释触发器](./resources/052_Trigger_Organization5.png)](./resources/052_Trigger_Organization5.png)
*已注释触发器*

您可以在触发器面板或触发器内容面板中创建注释。通过在任一位置右键单击，然后导航至新建 ▶︎ 新建注释来执行此操作。或者，您也可以使用触发器栏中的新建注释按钮执行此操作，在光标当前位置创建一个注释。

![](./resources/052_Trigger_Organization6.png)
*从触发器内容面板创建注释-- 从触发器栏创建*

在触发器面板中添加注释被认为不太有用，因为这往往会很混乱。但是，该选项适用于描述诸如文件夹内容之类的小注释。

## 库

库允许您将触发器编辑器的元素组织到集合中，并可通过其导入和导出功能在项目之间共享。您可以在库面板中看到项目中处于活动状态的库，通常包括内置，自由，虫群，虚空等。这些是标准依赖项的触发器库，它们是编辑器中所有预制动作、条件、函数和事件的来源。下面展示了项目库的标准视图，以它们的 [![图像](./resources/052_Trigger_Organization9.png)](./resources/052_Trigger_Organization9.png) 标记。

[![项目库](./resources/052_Trigger_Organization8.png)](./resources/052_Trigger_Organization8.png)
*项目库*

## 标签

除了每个触发器编辑器元素外，都有一个称为"标签"的小说明性图标。每个标签通过图标对其元素进行分类，并且还可以将元素的描述更改为与标签关联的颜色。每当您在触发器内容面板中从标准库创建一个元素时，它将被分配一个预定的标签。例如，任何“相机”类别的动作将被设置在 [![图像](./resources/052_Trigger_Organization9.png)](./resources/052_Trigger_Organization9.png) 标准标签以及其描述颜色旁边，如下图所示。

![元素标签](./resources/052_Trigger_Organization10.png)
*元素标签*

这些标签预设是通过标准依赖库提供的，可以重新用于任何项目。通过选择元素，右键单击，然后导航至标签，可以设置元素的标签，如下所示。

![设置元素的标签](./resources/052_Trigger_Organization11.png)
*设置元素的标签*

为定义设置一个标签将把所选标签和所选择元素的标签添加到该定义的所有元素中。如果为触发器、变量或记录等仅在触发器面板中存在的元素选择标签，则该标签仅会更改元素的颜色。在使用触发器编辑器的“查找”功能搜索元素时，标签也很有用。

如果您发现需要更多的自定义，请考虑添加自定义标签。通过导航至数据 ▶︎ 修改标签 可以创建自定义标签。这将启动下面显示的“触发标签”窗口。

[![创建自定义标签](./resources/052_Trigger_Organization12.png)](./resources/052_Trigger_Organization12.png)
*创建自定义标签*

在这里，您可以设置颜色和标签。您可以通过存档浏览器将任何大小为 16 x 16 像素的图像设置为标签图标。

## 记录

记录呈现变量的布局，通常对模板对象很有用，因此它们也是一种自然的组织工具。下面的图片显示了使用记录来组织变量的标准用法。

[![记录作为变量组织者](./resources/052_Trigger_Organization13.png)](./resources/052_Trigger_Organization13.png)
*记录作为变量组织者*

## 组

主要的触发器内容面板实际上是由称为触发器组的组织者组成的。每个组允许您在主内容面板的一个部分中浏览触发器编辑器的不同元素。编辑器支持在给定项目中最多三个组。打开一个额外组将分割面板空间，如下所示。

![触发器内容分为两个组](./resources/052_Trigger_Organization14.png)
*触发器内容分为两个组*

## 翻译 E:\SC2Code\blizzard-tutorials-chinese\docs\New_Tutorials\03_Trigger_Editor\052_Trigger_Organization.md.part-1.md

查看上面的图像，以并排的方式查看事物可能是比较项目不同部分的有效方式。总体而言，它提供了用户可以配置编辑器的灵活性。您可以通过转到View ▶︎ Show Groups来在Trigger Editor视图中启用额外的分组。在那里，您会找到四个配置选项。

- 智能 -- 触发器分组将根据当前需求持续添加或删除。
- 1 -- 允许一个触发器分组。这是默认设置。
- 2 -- 允许两个触发器分组。
- 3 -- 允许三个触发器分组。

## 标签

标签是存在于某个触发器分组中的子面板。标签允许您查看任意数量的元素，并通过顶部的标签标题快速在它们之间导航到触发器内容面板。在下面的图片中展示了标签式浏览触发元素的操作。

![触发组内的标签浏览](./resources/052_Trigger_Organization15.png)
*触发组内的标签浏览*

您可以通过在触发器面板中选择多个元素，然后按Enter键来为当前活动分组打开标签。一旦打开，您可以通过右键单击标签标题并导航到关闭标签（CTRL+Shift+A）或关闭所有标签（CTRL+Alt+A）来关闭标签。标签和分组的组合提供了对如何组织触发编辑器的大量自定义选项。下面您可以看到这些功能的示例。

![](./resources/052_Trigger_Organization16.png)
*在触发编辑器中同时使用分组和标签*

## 附件

- [052_Trigger_Organization.SC2Map](./maps/052_Trigger_Organization.SC2Map)

## 翻译 E:\SC2Code\blizzard-tutorials-chinese\docs\New_Tutorials\03_Trigger_Editor\053_Trigger_Debugger.md.part-0.md

# 触发器调试器

对于高级用户，编辑器提供了一个触发器调试器。这使您可以以精细的方式进行性能分析。

## 启动调试器

在运行时，您可以启动调试器来监视地图脚本在地图测试期间被调用的情况。它作为一个有用的辅助工具，能够对各种效率低下和错误进行分类。有三种主要方法可以访问调试器。

- 通过文件 ▶︎ 首选项 ▶︎ 测试文档 中激活编辑器设置 '显示触发器调试窗口'。
- 在测试地图时，在聊天框中使用作弊命令 'trigdebug'。
- 在触发器编辑器中，使用本机操作 '调试 -- 打开或关闭调试窗口'。

最后一种技术是最强大的，因为它的包含在触发器中允许动态使用、停止和在一个会话中重复使用。重要的是，这是唯一支持在线多人游戏测试的方法。

要以任何方式使用调试器，您的游戏客户端必须设置为 '窗口化' 模式。如果您使用上面列出的第一种方法，您需要在编辑器显示调试窗口之前将选项测试文档 ▶︎ 游戏显示模式 设置为 '窗口化'。下图中突出显示了此设置。

[![image0](./resources/053_Trigger_Debugger1.png)](./resources/053_Trigger_Debugger1.png)­­

通过设置激活调试器

## 配置调试器

在启动新项目时，您会希望修改默认的调试器设置以最好准备它供使用。启动调试器，右键单击底部的子视图。您将看到几个配置选项。取消选中所有以 '显示' 为前缀的选项，除了显示错误和显示用户输出之外。接下来，导航到 '变量' 选项卡，在顶部视图内右键单击并取消选中 '显示常量'。在其默认设置下，调试器可以输出大量的诊断数据。具有讽刺意味的是，这可能会导致性能明显下降。这里描述的选项将最小化调试器对性能的影响。

## 调试器的组成部分

'触发器调试' 窗口呈现了待检查项目的九个单独的按选项卡排序的视图。在不同时间点，这些信息可能更或较少有用，从而导致以下各部分的一般应用的分解。

| 调试部分     | 分析部分         |
| ------------ | ---------------- |
| 变量         | 变量             |
| 线程         | 线程             |
| 脚本代码     | 触发器分析       |
| 触发器       | 函数分析         |
|              | 触发器           |
|              | 活动量           |

在功能上，每个选项卡包含一个以列分隔的数据表。如果单击表头，数据将按该字段排序。您还可以再次单击表头，以在升序或降序排序之间切换。您还应注意，在每个选项卡底部的状态栏。在这里，您将找到一些高级项目属性；'游戏时间'，自测试开始以来经过的时间；'人工智能时间'，AI 代码在测试中运行的经过的时间；以及 '内存 -- 代码，全局'，编辑器项目可用内存的百分比值的硬编码最大值。

## 变量选项卡

![Variables Tab](./resources/053_Trigger_Debugger2.png)
*变量选项卡*

变量选项卡显示当前正在使用的每个全局变量的列表。全局变量以它们的大内存分配而臭名昭着，所以通过按 '总内存大小' 对此列表进行排序可能非常有用，以查找哪些部分的项目需要最多的内存。您还会在此选项卡中找到自定义类型，包括记录和数组。在游戏的任何时间点查看变量值的整体情况是调试的一个有用的初始方法。在下面，您将找到此选项卡中的每个可用字段的描述。

| 字段                | 详情                                                                                                                                                                                                                                          |
| ------------------- | --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| 变量                | 变量的 Galaxy 脚本名称。                                                                                                                                                                                                                      |
| 类型                | 变量的 Galaxy 类型，标准类型包括 int、bool、string、struct 和 array。                                                                                                                                                                         |
| 总内存大小          | 以字节表示的元素内存大小。复杂的数据类型显示它们的整个内存分配；数组内存大小是元素数量乘以基本元素大小，而结构内存大小是每个基本元素大小的总和。                                                                                          |
| 值                  | 变量的当前值。复杂的数据类型给出 '双击展开' 选项。单击将显示包含在其中的每个变量的列表。                                                                                                                                                   |

## 触发器选项卡

触发器选项卡显示游戏中发生的每个触发器的列表，以及它们使用的详细信息。这些详细信息可以让您了解触发器被激活的次数以及它们的条件经常通过的频率，同时还提供了运行时间的指标。从这个视图中可以获取一些独特而有用的功能。通过右键单击一个元素，您可以选择 '运行触发器' 来执行触发器的调试运行。在需要在触发器主体中使用外部事件参数的情况下，此操作将失败，但您可以通过使用默认值来计划此操作。

[![触发器选项卡](./resources/053_Trigger_Debugger3.png)](./resources/053_Trigger_Debugger3.png)
*触发器选项卡*

| 字段                   | 详情                                                                                                                                                                    |
| ---------------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| 触发器                | 触发器函数的 Galaxy 脚本名称。                                                                                                                                          |
| 事件                  | 触发器触发的次数。                                                                                                                                                      |
| 条件失败次数          | 触发器条件失败的次数，随后不运行触发器的主体语句。                                                                                                                     |
| 运行次数              | 触发器运行其主体语句的次数。通常等于 (事件 -- 条件失败次数)，但使用 '运行触发器' 选项可能会扭曲此结果。                                                               |
| 平均失败时间          | 触发器条件失败所需的平均时间（毫秒）。                                                                                                                                  |
| 平均运行时间          | 触发器执行所需的平均时间（毫秒）。                                                                                                                                      |
| 总时间                | 触发器使用的总时间（毫秒）。此值可以通过以下方式粗略估计：(平均失败时间 \* 条件失败次数) + (平均运行时间 \* 运行次数)。                                               |

## 线程选项卡

在线程选项卡下，您将找到每个活动触发器线程的列表。这包括任何使用等待控制语句的事物，例如触发器或多线程范例内的任何动作定义。由于这些通常是复杂和性能密集的程序，因此此选项卡在正确构建这些系统方面非常重要。在此处，右键单击一行并选择 '查看脚本' 将引导您到脚本代码选项卡，自动滚动到所选函数的第一行。

[![线程选项卡](./resources/053_Trigger_Debugger4.png)](./resources/053_Trigger_Debugger4.png)
*线程选项卡*

## 翻译 E:\SC2Code\blizzard-tutorials-chinese\docs\New_Tutorials\03_Trigger_Editor\053_Trigger_Debugger.md.part-1.md

| 领域         | 详细信息                                                                                                                                                                                                                                                                                                      |
| ----------- | ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| 线程        | 对于触发器，此处将显示触发函数的脚本名称。当使用动作定义多线程时，这将接收隐式生成的触发器函数的函数名称。这些可以通过它们的前缀 auto 和显示线程 ID 的数字后缀轻松识别。 |
| 时间        | 线程已活动的总时间（毫秒）。                                                                                                                                                                                                                    |
| 等待中      | 显示线程当前正在执行的“等待”时间类型和数量（以秒为单位）。有两种类型，Real 和 Game，分别表示真实时间和游戏时间。在发现哪个触发器内的“等待”语句当前控制时，此区分可能很重要。            |

## 队列标签

[![队列标签](./resources/053_Trigger_Debugger5.png)](./resources/053_Trigger_Debugger5.png)
*队列标签*

队列标签列出当前正在使用动作队列的每个触发器。使用队列的动作包括特殊的 Galaxy 脚本函数 TriggerQueueEnter() 和 TriggerQueueExit()。只有等待其队列动作被处理的触发器才会显示在这里。由于此标签非常具体，因此往往很少使用，这解释了其缺乏附加字段。

## 触发器分析标签

[![触发器分析标签](./resources/053_Trigger_Debugger6.png)](./resources/053_Trigger_Debugger6.png)
*触发器分析标签*

在触发器分析标签中，您将找到触发器标签的一个更有针对性的版本，专注于分析和性能监控。这里的列表仅包含用于多线程使用的触发器和动作定义。与显示运行时不同的是，此标签通过“仅自身时间”和“自身+子项时间”进行分析。这些术语在下文中有详细定义。

| 术语               | 定义                                                                                                                                                                                                                                                                                                                                                              |
| ------------------ | ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| 仅自身时间     | 原生 Galaxy 语言特性的执行时间。这测量运行原始操作所需的时间，比如修改变量、运行控制结构或复制参数。它不包括子函数的调用时间，即使是原生 Galaxy 函数的调用也是如此。但它包括函数调用本身的开销。 |
| 自身+子项时间 | 触发器的总执行时间，包括所有子函数和调用。请注意，“子项时间”指的是每个关联的“自身时间”中的子函数调用。这一术语是通过将其添加到“仅自身时间”中提供的。                                                                                                                |

与触发器标签一样，您可以右键单击一行并选择“查看脚本”，将选定的触发器传送到脚本代码标签，它将滚动到函数的第一行代码。您还会在此看到一些有用的选项。通过右键单击主窗口，您可以选择“显示本机函数”，这将允许视图为从基本函数调用的每个本机函数创建子项。您还可以选择“显示子调用”，这将在分析器视图中显示完整的调用堆栈。

以下是触发器分析标签中每个字段的描述。您应该记住，这些字段中的几个是根据先前描述的不同时间系统引用的。

| 领域                       | 详细信息                                                                 |
| --------------------------- | ----------------------------------------------------------------------- |
| 脚本调用标识符      | 基本函数的 Galaxy 脚本名称。如果启用了“显示本机函数”，这还将显示特定本机函数的名称。 |
| 运行                         | 触发器运行其主体语句的次数计数。与触发器标签中找到的领域相同。                   |
| 平均仅自身时间       | 触发器的平均执行时间（毫秒）。                                         |
| &                           |                                                                                                     |
| 平均自身+子项时间 |                                                                                                     |
| 最长自身时间           | 触发器的单个最长执行时间（毫秒）。用于发现延迟峰值的可能原因。                    |
| &                           |                                                                                                     |
| 最长自身+子项时间   |                                                                                                     |
| 总仅自身时间         | 触发器的总执行时间（毫秒）。                                            |
| &                           |                                                                                                     |
| 总自身+子项时间     |                                                                                                     |

## 函数分析标签

[![函数分析标签](./resources/053_Trigger_Debugger7.png)](./resources/053_Trigger_Debugger7.png)
*函数分析标签*

函数分析标签是触发器分析标签的功能对应。它提供了有关当前测试会话中函数性能的额外洞察。部分“运行时间”部分中的时间以函数规模表示，并且等于前面部分描述的“仅自身”时间。这种区分可能有些令人困惑，但在评估不同元素的整体性能时非常有用。

| 领域               | 详细信息                                                                                                                                                          |
| -----------------   | ------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| 功能名称           | 函数的 Galaxy 脚本名称。                                                                                                                                         |
| 运行                 | 函数被调用的次数计数。                                                                                                                                           |
| 平均运行时间     | 函数的平均执行时间（毫秒），单个最长执行时间（毫秒）和总执行时间（毫秒）。请注意，这些数字是以函数规模的运行时间而计算的。它们等于“仅自身”时间形式。 |
| &                    |                                                                                                                                                                   |
| 最长运行时间     |                                                                                                                                                                   |
| &                    |                                                                                                                                                                   |
| 总运行时间       |                                                                                                                                                                   |

## 活动标签

[![活动标签](./resources/053_Trigger_Debugger8.png)](./resources/053_Trigger_Debugger8.png)
*活动标签*

在活动标签中，您会找到表示当前会话期间游戏活动的数据可视化。 “活动”是一个术语，描述了下列三个属性的组合。

| 描述属性         | 标记颜色  |
| ---------------- | ------------ |
| 触发事件         | 绿色         |
| 检查条件         | 黄色         |
| 执行触发器       | 红色         |

图表将每个属性绘制在执行次数 vs 时间（毫秒）的图中，执行次数在 y 轴上，时间在 x 轴上。您应该注意，由于执行触发器需要检查条件，所以红线将是黄线的子集，始终适合其中的区域。总体上，这个标签本身对性能要求较轻。您可以通过观察绿线的突然大幅移动来看到这里的延迟峰值。您也可以粗略地估计任何给定时间的总活动或引擎负载，以更直接地了解哪些代码部分可能需要进一步调查。

## 翻译 E:\SC2Code\blizzard-tutorials-chinese\docs\New_Tutorials\03_Trigger_Editor\053_Trigger_Debugger.md.part-2.md

## 脚本代码标签

本质上，脚本代码标签显示加载项目的脚本代码。然而，其主要优势在于其能够作为一个完整的脚本调试器，具有设置断点、检查本地变量和逐行执行代码的能力。因此，在触发调试器中，此部分拥有最有用的调试功能核心。您可以在此找到错误发生的位置和时间，而不是使用输出和直觉来尝试追踪问题。这两种方法各有优势，但修复错误的最细致工作应该在这里进行。

[![脚本代码标签](./resources/053_Trigger_Debugger9.png)](./resources/053_Trigger_Debugger9.png)
*脚本代码标签*

## 设置断点

要在运行时调试脚本，您必须首先设置断点。断点充当调试器开始分析您的代码的入口点。一旦代码执行流程达到断点，游戏将暂停，并且调试器将开始显示数据。您可以通过右键单击窗口并选择“添加/删除断点”来向脚本代码添加断点。您可以通过选择已经标记了断点的代码部分，然后重复相同的过程来删除断点。

## 进一步的调试考虑

重要的是要注意这种技术是如何随着项目代码规模的增长而扩展的。一旦您的项目达到一定规模，找到正在寻找的特定代码行将变得乏味。您可以通过切换到 Triggers 标签或 Trigger Profiling 标签，按名称对条目进行排序，并找到要调试的函数来解决此问题。然后，右键单击该行并使用“查看脚本”。正如前面提到的，这将使您回到脚本代码标签，滚动到所选函数的第一行代码。

另外，您还可以在星系地图脚本中使用关键词 Breakpoint 在所需位置设置断点。当执行流程遇到此关键字时，触发调试器将打开并跳转到断点位置。目前不支持 GUI，因此您必须使用宏或自定义脚本元素。

您还应该注意，脚本代码标签一次只能显示单个库的内容。这意味着，在处理使用多个库的项目时，您需要根据需要在库之间切换显示。您可以通过对要切换的库中的触发器使用“查看脚本”命令来实现这一点。

## 分析数据

在游戏执行流程中设置并遇到断点后，游戏将暂停并将调试器置于焦点。此时，它将在主视图的脚本代码标签中显示额外的信息，如下图所示。

![](./resources/053_Trigger_Debugger10.png)
*脚本代码标签中达到的断点*

您可以使用每个子视图顶部的下拉菜单来更改显示的数据，以便解析当前系统状态。您可以在下表中找到可用选项的详细信息。

| 选项         | 详细信息                                                                                       |
| ----------- | ------------------------------------------------------------------------------------------------- |
| 无         | 隐藏选定的视图窗格。                                                                           |
| 全局变量     | 所有全局变量的列表，类似于“变量”标签。                                                          |
| 本地变量      | 关于每个本地变量的信息，包括事件参数。                                                           |
| 观察          | 包含已标记为有用的“添加观察项”选项的变量构成的列表。                                        |
| 调用栈       | 当前调用栈或从下到上显示的函数调用层次结构。                                                     |
| 断点          | 所有当前设置的断点的列表。                                                                     |

在实际应用中，本地变量选项在实用性方面远远超过其他选项。它允许您展开当前执行函数中的每个值以便轻松查看。通过研究这些本地变量和参数，您可以跟踪特定函数的控制，并确认其值是否在预期范围内。

## 翻译 E:\SC2Code\blizzard-tutorials-chinese\docs\New_Tutorials\03_Trigger_Editor\054_Loggers.md

# 日志记录器

日志记录器是一种诊断工具，允许开发人员随着时间输出正在运行的程序的数据，然后对其进行归档。这允许对程序（在本例中是您的游戏）的运行方式进行后期描述。日志记录器通常支持一种标记类型，其中具有特定属性的事件会被标记和单独监视。然后，标记的事件要么输出到单独的文件中，要么设置为使用某种查看客户端来解析数据。这种分类的运行时信息可以详细揭示游戏的表现。

## 日志记录器的使用

举例来说，可以设计一个日志记录器来监视玩测试过程中的非关键错误。这些错误可以被标记为不同的严重性或其他游戏状态信息。通过在游戏后检查记录的输出，开发人员可以获得关于整个会话中错误数量和分布的重要信息。这提供了与更典型的诊断方法不同的视角，后者是观察单个错误然后立即修复它。下面展示了数据日志记录的另一个例子。

！[APM在重新播放中可视化显示](./resources/054_Loggers1.png)
*APM在重新播放中可视化显示，使用Scelight*

这张图表是星际争霸玩家在多人比赛中的每分钟动作次数（APM）的可视化。 APM每隔几秒记录一次，然后绘制出一张数据在游戏会话中的平滑图像。数据来自《星际争霸》的重播。重播本身是一个记录比赛中每个玩家动作的日志记录器的输出。

看起来可能有点牵强把这视为与正在讨论的文章相关。毕竟，重播旨在重建游戏过程中已经完成的比赛，而日志记录器通常监视程序的运行情况。尽管如此，尽管它看起来有些繁琐，但这对于星际争霸用户应该是一个熟悉的例子。毕竟，重播是为游戏的任何在线测试记录的，并且可以提供对测试期间发生的情况的有用画面。重播分析器，例如这种情况下的Scelight，提供了解析标记输出数据的客户端的例子。

## 在编辑器中创建一个日志记录器

在星际争霸引擎中直接组装一个日志记录器是可能的，也可能对您的项目开发有用。要做到这一点，需要满足一些规范。首先，必须有一种方法在代码的任何位置输出调试信息。然后需要能够将这些信息传递到编辑器之外并存储到文件结构中，根据日志记录标签将其分开到多个文件中。还建议有全局控制用于快速启用和停用日志记录。有了这个设计思路，您可以从编辑器中现有的功能中塑造出一个日志记录器。在输出选项方面，“调试”操作是个不错的起点。下面列出了这些操作的列表。

[！[调试操作](./resources/054_Loggers2.png)](./resources/054_Loggers2.png)
*调试操作*

这里的第一个关键点是“调试消息”操作。这允许将文本打印到文件、游戏窗口或触发器调试器中。选择此操作并进入触发器编辑器。在那里，您会注意到其参数非常适合于日志记录器设计。您可以在下面的图像中看到这些参数。

[！[调试消息参数](./resources/054_Loggers3.png)](./resources/054_Loggers3.png)
*调试消息参数*

初始参数设置输出文本，而第二个参数允许您指定调试消息类型。这是一个带有16个潜在值的预设，从“类型01”到“类型16”，可以作为输出的标记。一旦标记，您可以配置每个输出类型以打印到不同的文件，并在输出和展示这些输出的方式方面展示不同的行为。对于此演示，您将使用三个标记，每个标记均被建模为不同的错误严重级别。为了跟踪这些标记，它们每个都被设置为一个常量变量。具体映射如下所示。

logger_info = Type 01 \<Debug Message Type(Constant)\>

logger_warning = Type 02 \<Debug Message Type(Constant)\>

logger_error = Type 03 \<Debug Message Type(Constant)\>

设置完这些后，可以使用以下计划开发日志记录器触发器。

[！[调试触发器](./resources/054_Loggers4.png)](./resources/054_Loggers4.png)
*调试触发器*

通过使用“设置调试消息名称”操作，您可以为指定的每个调试消息类型分配一个自定义名称。该名称将出现在触发器调试器中可用的“显示用户输入”选项中，这样更容易处理不同的输出通道。这由“设置调试消息颜色”操作支持，它将使您更容易在触发器窗口中查看时进行区分。您可以在下面的图像中看到这一点。

[！[调试触发器](./resources/054_Loggers5.png)](./resources/054_Loggers5.png)
*调试触发器*

然后，最重要的是，“设置调试消息文件”允许为每个调试消息类型分配文件名。建议为每个记录级别分配一个唯一文件。这样可以使得此触发器作为一个完整的记录器，可以将错误类型分割为不同的文件以供测试后检查。对于单人游戏，在Windows上用于日志记录器文件的输出文件夹将是 C:\\Users\\\<username\>\\Documents\\StarCraft II\\UserLogs\\\<mapname\>。

[！[日志记录器输出文件](./resources/054_Loggers6.png)](./resources/054_Loggers6.png)
*日志记录器输出文件*

## 添加过滤器

到目前为止，日志记录器已经可以操作，并可以将潜在有用的诊断数据输出到单独的文件中。它满足了设计标准。然而，您可能希望进一步将调试消息进行一级别的过滤。这里有一些其他函数可以帮助。启用/禁用调试消息类型允许您在触发器调试器中切换每个特定的调试消息类型。但此过滤仅用于查看，对游戏中的输出或输出文件没有影响。如果您希望对游戏中的输出或输出文件进行过滤，则可以使用“过滤调试消息类型”操作。

不幸的是，在触发器调试器中没有办法仅禁用消息。一个变通方法是使用“调试消息”操作的第三个参数来禁用这些输出。如果您正在实现自己的日志记录器，将“调试消息”封装在一个动作定义中是一个好主意，以便自己永久构建此功能。

最后，当您为公众创建项目的发布版本时，这些调试过滤器可用于快速禁用所有调试输出，从而最大限度地提高您发布版本的性能。

## 翻译 E:\SC2Code\blizzard-tutorials-chinese\docs\New_Tutorials\03_Trigger_Editor\055_Debug_Cheats.md.part-0.md

# 调试秘籍

秘籍最初是作为开发人员的测试元素而设计的。当游戏在发行时仍包含这些代码时，它们成为玩家喜欢尝试和用作绕过烦人障碍的快捷方式。尽管像 GreedIsGood 和 Black Sheep Wall 这样的玩家端秘籍在星际争霸 II 中仍然存在，但还有许多其他秘籍可供启用，以便简化您项目的开发和测试。下面是这些调试秘籍的列表，以便轻松参考。

## 测试文档秘籍

在编辑器中测试文档时，可以使用测试文档秘籍。这些是特殊的聊天命令，允许执行类似于创建单位和修改资源的游戏时间操作。它们可以使开发人员免于手动设计常见测试任务的特殊触发器。以下表格详细说明了这些秘籍。

## 翻译 E:\SC2Code\blizzard-tutorials-chinese\docs\New_Tutorials\03_Trigger_Editor\055_Debug_Cheats.md.part-1.md

| 作弊指令         | 效果                                                                                                                                                                                                                                        |
| ----------------- | --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| 盟友              | 改变选定玩家之间的所有盟友状态。默认情况下，如果您只键入“盟友”，所有玩家将与您共享所有盟友状态。                                                                                           |
| 盟友失败          | 改变选定玩家之间的失败盟友状态。默认情况下，如果您只键入“盟友失败”，所有玩家将与您共享失败状态。                                                                                |
| 盟友控制          | 改变选定玩家之间的控制盟友状态。默认情况下，如果您只键入“盟友控制”，则所有玩家将与您共享控制状态。                                                                             |
| 盟友提供帮助      | 改变选定玩家之间的提供帮助盟友状态。默认情况下，如果您只键入“盟友提供帮助”，所有玩家将响应您单位的求助。                                                                     |
| 盟友被动          | 改变选定玩家之间的被动盟友状态。与您不是被动盟友的玩家将被视为对进攻有敌意的对象。                                                                                              |
| 盟友可推动        | 改变选定玩家之间的可推动盟友状态。这控制着玩家单位是否会穿过其他玩家单位，将其推开。                                                                                             |
| 寻求帮助盟友      | 改变选定玩家之间的寻求帮助盟友状态。控制玩家单位是否向指定目标玩家求助。目标玩家可以根据其提供帮助盟友设置选择是否响应。                                                        |
| 盟友消耗          | 改变选定玩家之间的消耗盟友状态。您正在共享资源的玩家被允许花费您的金钱购买物品。                                                                                                      |
| 盟友交易          | 改变选定玩家之间的交易盟友状态。您正在进行交易的玩家可以发送资源。                                                                                                             |
| 盟友视野          | 改变选定玩家之间的视野盟友状态。                                                                                                                                               |
| 行为添加          | 向选定单位添加所请求的行为。                                                                                                                                                   |
| 行为持续时间      | 设置所请求行为的持续时间。                                                                                                                                                     |
| 移除行为          | 从选定单位中移除所请求的行为。                                                                                                                                                 |
| 法术充能          | 切换法术充能验证。                                                                                                                                                           |
| 冷却时间          | 切换法术冷却验证。                                                                                                                                                           |
| 刷怪              | 在光标位置添加指定半径内的刷怪单位。                                                                                                                                           |
| 造成伤害          | 将玩家单位造成的伤害乘以指定值。默认情况下，这将使您行动的玩家单位造成10倍的伤害。                                                                                                 |
| 承受伤害          | 将玩家单位受到的伤害乘以指定值。默认情况下，这将使行动玩家承受的所有伤害降至0。                                                                                                    |
| 全体死亡          | 杀死地图上的所有单位。                                                                                                                                                       |
| 除选定单位外全部死亡 | 杀死地图上的所有单位，除了选定单位。                                                                                                                                           |
| 死亡一方          | 杀死选定玩家所有拥有的单位。                                                                                                                                                 |
| 单位死亡          | 杀死选定单位。可以指定死亡类型作为参数。                                                                                                                                        |
| 失败              | 对选定玩家以失败结束游戏。                                                                                                                                                   |
| 销毁持久效果      | 销毁光标指定半径范围内的所有持久效果。                                                                                                                                         |
| 效果执行          | 对选定单位执行请求的效果。                                                                                                                                                   |
| 快速建造          | 切换快速建造、研究和训练时间。                                                                                                                                                  |
| 快速治疗          | 切换快速治疗时间。                                                                                                                                                             |
| 发呆              | 强制选定单位执行指定的发呆动作。                                                                                                                                               |
| 食物              | 切换食物使用验证。                                                                                                                                                           |
| 自由              | 切换资源成本验证和支出。                                                                                                                                                       |
| 上帝模式          | 为选定玩家开启上帝模式。处于上帝模式的玩家拥有的单位将造成加倍伤害，并且不受损害。                                                                                                    |
| 战利品掉落        | 为指定玩家掉落一种类型的战利品。                                                                                                                                               |
| 制造单位          | 为指定玩家创建N单位。单位将被创建在光标位置周围，或者如果光标位置无效，则在地图中心创建。                                                                                              |
| 矿物              | 为选定玩家添加指定数量的矿物。                                                                                                                                                |
| 移动              | 将选定单位移动到光标位置。                                                                                                                                                   |
| 无失败条件        | 禁用失败条件。                                                                                                                                                                |
| 无胜利条件        | 禁用胜利条件。                                                                                                                                                               |
| 指令              | 命令选定单位使用某项能力。                                                                                                                                                   |
| 所有权            | 将选定单位的所有权更改为选定玩家。                                                                                                                                             |
| 自定义资源        | 为选定玩家添加指定数量的自定义资源。                                                                                                                                          |
| 设置所有          | 将选定单位的生命、护盾和能量设置为指定值。默认情况下，这将将这些值设定为最大值。                                                                                                            |
| 设置生命          | 将选定单位的生命设置为指定值。                                                                                                                                               |
| 设置能量          | 将选定单位的能量设置为指定值。                                                                                                                                               |
| 设置护盾          | 将选定单位的护盾设置为指定值。                                                                                                                                               |
| 设置资源          | 将选定单位包含的可收获资源设置为指定值。                                                                                                                                       |
| 显示地图          | 切换战争迷雾显示和验证。                                                                                                                                                     |
| 科技树            | 切换科技树依赖验证。                                                                                                                                                         |
| 特拉辛气         | 为选定玩家添加指定数量的特拉辛气。                                                                                                                                            |
| 平局              | 将所有未决定的玩家标记为平局结果。                                                                                                                                             |
| 白天时间          | 将白天时间设置为指定时间。                                                                                                                                                   |
| 白天时间速率      | 设置白天时间更改速率为指定值。触发调试窗口。                                                                                                                                   |
| 运行触发器        | 运行指定触发器。                                                                                                                                                             |
| 移除刷怪          | 在光标位置删除指定半径内的刷怪单位。                                                                                                                                       |
| 未决定            | 将选定玩家的结果标记为未决定。                                                                                                                                             |
| 升级              | 将选定升级应用到选定玩家。                                                                                                                                                 |
| 维斯珀因          | 为选定玩家添加指定数量的维斯珀因。                                                                                                                                           |
| 胜利              | 对所有不与选定玩家分享失败盟友状态的玩家以失败结束游戏。                                                                                                                          |
| 经验值            | 为选定单位添加相对数量的经验值。可用于更改经验等级。                                                                                                                             |

下面是部分测试文档作弊指令的示例试用。

[![测试文档作弊指令](./resources/055_Debug_Cheats1.png)](./resources/055_Debug_Cheats1.png)
*测试文档作弊指令*

## 翻译 E:\SC2Code\blizzard-tutorials-chinese\docs\New_Tutorials\03_Trigger_Editor\055_Debug_Cheats.md.part-2.md

请注意，无法为多人游戏测试启用这些作弊功能。如果您需要类似的功能，您将需要设计一种自定义解决方案。如果需要进行私人和公共测试的混合，建议仅限开发者和信任的用户访问作弊功能。这可以通过保密完成，但更好的方法是使用玩家句柄，并在进入游戏时或每个作弊触发条件内检查它们。这样做将确保只有硬编码玩家列表有权访问您在多人游戏试验中的测试文档作弊功能的等价物。下面是一个类似这种系统的示例。

[![Multiplayer Test Document Cheats](./resources/055_Debug_Cheats2.png)](./resources/055_Debug_Cheats2.png)
*多人游戏测试文档作弊*

## 角色作弊

在从编辑器中测试文档时，也可以使用角色作弊。这些作弊提供了许多创建和控制角色的方式，而无需创建自定义测试准备。需注意，**角色作弊是调试角色的唯一方法，因为触发器调试器不包含有关它们的任何信息，这是由于它们的异步性质**。角色作弊类似于测试文档作弊，因为它们是通过在游戏内聊天中输入文本来激活的。

一个特别有用的角色作弊命令是`actorinfodisplay`。此命令将显示一个游戏内叠加，显示当前活动的角色和角色作用域数量，以及其他有用信息。以下图像显示了在压力测试试验前后的角色状态。

![](./resources/055_Debug_Cheats3.png)
*压力测试前的角色状态 -- 压力测试后的角色状态*

## 翻译 E:\SC2Code\blizzard-tutorials-chinese\docs\New_Tutorials\03_Trigger_Editor\056_Optimizing_Code.md.part-0.md

# 代码优化

确保游戏运行顺畅对于观众的体验至关重要。尽管StarCraft及其引擎在其封闭的后端中高度优化，但一旦用户开始使用编辑器添加自定义内容，他们就存在着创建显著性能问题的风险。在这里工作在代码层面的开发人员面临更大的风险。也就是说，编辑器中有一些优化选项可以帮助减轻任何关键问题。

性能问题可以分为两大类，即延迟波动和密集的后台任务。延迟波动是许多玩家熟悉的问题。它们导致帧率突然严重中断，随后游戏状态会突然跳到未来。相比之下，密集的后台任务会导致帧率长时间下降，可能影响整个游戏的性能。因此，它们可能影响观众的享受，但从未被识别为技术错误。

无论您遇到的性能问题属于哪个类别，解决方法都是优化。

## 定位性能问题

任何优化过程的第一步是调查减速的原因。虽然本文侧重于代码优化，您最好先封锁所有其他可能的性能优化领域。在这个级别更改代码可能会大大降低代码的可读性和可维护性，不应轻率对待。

触发器调试器是编辑器中用于查找优化目标的主要工具。在调试器中，有一个特别重要的触发器标签页，用来识别性能问题。该标签页展示了地图中的所有触发器列表，按照“平均执行时间”字段进行排序。这里执行时间较长的触发器是延迟波动的主要候选者。查看另一个字段“总时间”的领导者，将帮助您找到导致密集后台任务类型延迟的触发器。调试器中的高级标签，如触发器剖析标签和函数剖析标签，可以提供证据来支持您的首次观察。

## 实践中的优化

以下是一个练习，可以帮助您理解查找和解决性能问题的原则。

创建一个具有默认设置的新街机地图。现在在用户玩家1和敌对玩家15之间放置大量的海军陆战队员。您可以从“玩家属性”中确认这些控制设置。您应该添加足够多的海军陆战队员，使地图看起来像下面的图片一样。

[![海军陆战队覆盖](./resources/056_Optimizing_Code1.png)](./resources/056_Optimizing_Code1.png)
*海军陆战队覆盖*

这些海军陆战队员将定期被命令移动到地图上的随机点。每个海军陆战队员还将具有伤害区域效应，对半径为10个单位内的任何敌方单位造成伤害。转到触发器编辑器，创建负责第一个行为的触发器，使用下面显示的计划。

[![随机移动触发器](./resources/056_Optimizing_Code2.png)](./resources/056_Optimizing_Code2.png)
*随机移动触发器*

每两秒，此触发器循环遍历地图上的每个单位，并命令它们进行随机移动。您可以按照下面的计划构建第二个触发器。

[![AOE区域效应触发器](./resources/056_Optimizing_Code3.png)](./resources/056_Optimizing_Code3.png)
*AOE区域效应触发器*

该触发器使用两个嵌套循环来对每个海军陆战队员周围的单位应用伤害。外部循环遍历地图上的每个单位，寻找伤害区域效应的潜在目标。然后内部循环使用此列表，在半秒内找到任何位于10个单位半径内的单位。每半秒，通过这一过程找到的敌对单位会受到伤害区域效应的影响。阅读完每个行为的描述后，您可能已经猜测哪个会更有问题。即便如此，在启用触发器调试器的情况下运行地图进行调查。这将产生一个类似下图所示的视图。

[![触发器调试试验](./resources/056_Optimizing_Code4.png)](./resources/056_Optimizing_Code4.png)
*触发器调试试验*

触发器标签页中的“总时间”字段确定了“伤害区域”触发器是迄今为止最为耗时的。它需要总执行时间为10069毫秒，平均运行时间为117毫秒。这几乎比“随机移动”触发器的35毫秒长300倍。优化潜力方面的显著差异可能非常大。显然，将优化工作集中在“随机移动”触发器上将是一个大错误。要继续调查您的目标，转到触发器剖析标签，并启用其“显示本机”和“显示子调用”功能。

[![触发器剖析标签](./resources/056_Optimizing_Code5.png)](./resources/056_Optimizing_Code5.png)
*触发器剖析标签*

在这一详细级别，您可以看到“伤害区域”触发器中UnitDamage和PlayerIsEnemy调用是问题的主要原因。这两个函数都在内部循环中，该位置的运行次数通常比代码的其他位置更多。

## 解决性能问题

找到目标后，现在是时候了解关于性能解决的一些令人沮丧的真相。由于这些问题各不相同，可用的通用解决方案非常有限。每个问题都需要关注和理解才能解决。

在一般范例方面，有一些有用的方向。首先，质疑算法本身，并考虑效率。确保您避免了不必要的操作，以实现目标。经过彻底检查后，您可以进行微优化。在微优化中，您将手动微调代码，挤出更好的性能，但付出自己的努力。

“伤害区域”示例过于简单，没有潜在的算法问题。然而，您可以考虑使用数据编辑器解决方案。对于编辑器中的每个触发操作，通常都存在一些纯数据或两种学科的组合。数据通常可以以稍微更高的效率代价提供一些优越性。一般来说，如果您发现自己为了在数据中工作而做出大量安排，那么您很可能已经跨越了性能节省的门槛。

## 微优化

微优化通常是一种为代码挤出微小改进的非平凡方式，但在某些情况下，它们可能会带来惊人的结果。其中一部分原因是Galaxy脚本编译器应用的本机优化较少。此外，还有几个为了易用性而设计的GUI结构，无法顺畅地转化为Galaxy代码。尽管工作量很大，微优化相对于复杂的算法更简单。它们也可以应用于大量代码，并产生累积节省。

为了演示，创建一个“伤害区域”触发器的副本。保留原始内容以供稍后比较。此时，需要进行一些代码阅读，以找到微优化的目标。下表详细列出了显着问题及其优化。请注意，其中一些要求通过在编辑器中优化代码的实践获得的一定程度的知识。

## 翻译 E:\SC2Code\blizzard-tutorials-chinese\docs\New_Tutorials\03_Trigger_Editor\056_Optimizing_Code.md.part-1.md

| 问题                                                                                                                | 优化                                                    |
| ------------------------------------------------------------------------------------------------------------------- | ------------------------------------------------------- |
| 触发器当前在每次执行时通过循环遍历地图上的每个单位来构建新的海军单位组。 | 仅将海军添加到单位组中一次。                               |
| 每个海军在每次检查时创建一个新的光环区域。                                                                      | 创建一次区域并重复使用。                                  |
| '-targets'单位组使用'空单位组'初始化，创建不必要的空组。                                                       | 用'无单位组'进行初始化，这是一个成本更低的空值。            |
| 内部循环中关键的玩家联盟检查有一个更低成本的替代方案。                                                        | 使用效率更高的单位组构建本机函数替代。                      |
| 对于在循环过程中未被操纵的单位组，GUI循环对其效率不高。                                                        | 使用定制的循环替代。                                       |

以下是解决上述前两个问题的优化。

![](./resources/056_Optimizing_Code6.png)
*通过触发器重新组织进行微调优化*

光环区域和海军单位组的构建任务已移至“地图初始化”触发器，结果是它们的昂贵操作仅需执行一次。下面解决了表中的第三、第四和第五个问题。

[![手工编码的微调优化](./resources/056_Optimizing_Code7.png)](./resources/056_Optimizing_Code7.png)
*手工编码的微调优化*

在这里，“伤害光环”触发器已经进行了之前提到的手工编码优化。具体细节超出了本文的范围，但值得考虑的是，尽管其外观更为复杂，但在某个时候所有的GUI代码将变成Galaxy脚本，那时的情况可能会有所不同。下面您将看到触发器的旧版本和新版本的原始代码。

![](./resources/056_Optimizing_Code8.png)
*Galaxy脚本比较*

当以Galaxy代码呈现时，微调优化版本变得简单得多。这种截断主要是由于使用定制的While循环，而不是GUI中的循环，对于每个单位。这个GUI循环设计得易于使用和实用，但对于这个任务来说并不适用。使用自定义解决方案已经节省了许多操作，考虑到“伤害光环”触发器在迭代过程中没有对单位组进行修改。

通过使用Galaxy函数UnitGroupAlliance而不是GUI的UnitGroup，多余的玩家联盟检查也已经被移除。GUI的设计是为了所有用户的外观和使用的简易性。有了经验，您可能选择在适当的时候中止它。您还应注意，较短的代码不一定是更快的代码，因此您应该通过返回触发器调试器来确认新代码的效率。

[![优化节省](./resources/056_Optimizing_Code10.png)](./resources/056_Optimizing_Code10.png)
*优化节省*

正如您所看到的，“伤害光环”触发器通过对代码进行微调优化，加速了大约40％，这是一个令人印象深刻的结果。

## 翻译 E:\SC2Code\blizzard-tutorials-chinese\docs\New_Tutorials\03_Trigger_Editor\057_Multithreading_with_Action_Definitions.md.part-0.md

# 使用动作定义进行多线程

多线程是计算机科学术语，指的是处理单元执行多个动作的能力。传统上，计算机程序的标准行为是按顺序执行所有动作，一个接一个地执行。通过打破这种行为，多线程允许处理器并行执行动作，同时处理许多任务，每个任务在所谓的线程中运行。看下面这个关于线性操作系统的示例。

> 任务1开始
> 
> ...
> 
> 任务1完成
> 
> 任务2开始
> 
> ...
> 
> 任务2完成
> 
> 任务3开始
> 
> ...
> 
> ...
> 
> ...

每个任务都需要一些时间来完成，并且系统一次只能处理一个任务。采用多线程的系统执行相同的任务可能看起来更像以下设置。

> 任务1开始 任务2开始
> 
> ... ...
> 
> 任务1完成 任务2完成
> 
> 任务3开始 任务4开始
> 
> ... ...
> 
> ... 任务4完成
> 
> ... 任务5开始

在这种情况下，多线程允许将各种较短的任务组织到一个单独的线程中。这样一来，系统不会因为较长的任务3而变得不顺畅，可以在相同的时间框架内考虑到全新的任务4和任务5。能够进行多线程处理的系统有许多优点。首先，它们可以通过将大型任务分解为可以同时处理的较小块来高效工作。在游戏环境中，多线程对于其性能优势非常重要，同时也因为它能够打开不同的编程方式，从而导致全新的机制和游戏玩法。

## 编辑器中的处理

现在您可能对触发器编辑器中逻辑的执行方式相当熟悉了。一个触发器被调用，然后它的内部、动作和控制语句按顺序运行。然后触发器关闭，继续到下一个。如果从源触发器调用了一个单独的触发器或动作定义，那么线性控制被传递，但最终会返回到其原始源处，顺序运行直到耗尽。

因此，编辑器中的触发器操作作为一个标准的线性处理系统。虽然这可能不准确地反映代码背后的情况，因为优化后可以利用多核系统，但最终，本文涉及的是编辑器的前端工具。毕竟，编辑器的前端旨在成为一个直观的工具，使您能够专注于设计和构建项目，而不是它的精确编程细节。

## 动作定义线程

然而，编辑器是一个包容性系统，正如它为广泛用户群体提供直观的前端一样，它还支持多线程，让高级用户有机会利用非线性处理。通过使用特殊标记的动作定义来访问多线程。标志选项如下所示。

![](./resources/057_Multithreading_with_Action_Definitions1.png)
*动作定义中的多线程选项*

在动作定义中设置“创建线程”标志将导致该定义移至单独的线程，并在被调用时并行处理，与其余代码一起。这些动作定义线程本身的操作可以通过触发器调试器进行跟踪和检查。

## 使用多线程

打开本文提供的演示地图，并进入触发器编辑器。打开“生成爆炸式海军”动作定义将呈现如下内容。

[![演示地图视图](./resources/057_Multithreading_with_Action_Definitions2.png)](./resources/057_Multithreading_with_Action_Definitions2.png)
*演示地图视图*

此定义在地图中心创建一个海军，向其发出移动命令，在五秒钟内缩放它，最后在五秒后引爆它。注意触发器调用此定义的示例，如下图所示。

[![控制循环触发器](./resources/057_Multithreading_with_Action_Definitions3.png)](./resources/057_Multithreading_with_Action_Definitions3.png)
*控制循环触发器*

该触发器在打开地图时立即启动，并开始每秒调用一次“生成爆炸式海军”动作定义。逻辑上，这应该导致地图上有大约五个正在活动的海军，经历移动、缩放和爆炸行为。对地图的测试将得到如下图所示的结果。

[![运动中的单一海军](./resources/057_Multithreading_with_Action_Definitions4.png)](./resources/057_Multithreading_with_Action_Definitions4.png)
*运动中的单一海军*

测试这种实现时，您将看到每次生成一个海军，每次生成之间大约间隔六秒。这是因为主线程，即循环触发器，将线性控制传递给其调用的动作定义。从那里开始，动作定义会阻止运行其他触发器，直到完成。这种行为清楚展示了触发器系统的标准线性处理行为。要更改此行为，请移至动作定义并启用多线程，如下所示。

[![多线程动作定义](./resources/057_Multithreading_with_Action_Definitions5.png)](./resources/057_Multithreading_with_Action_Definitions5.png)
*多线程动作定义*

如果测试新的多线程动作定义，您应该得到以下类似的结果。

![](./resources/057_Multithreading_with_Action_Definitions6.png)
*通过多线程执行许多海军生成动作*

现在每次调用动作定义时都会打开一个新的线程。由于每个线程大约需要五秒钟才能运行，循环会管理大约五个活动线程，每个线程之间间隔大约一秒。知道海军的大小会随着它们的线程打开时间变长而变大，这意味着它们确实是一个很好的可视化，显示了系统如何同时管理多个线程。

## 翻译 E:\SC2Code\blizzard-tutorials-chinese\docs\New_Tutorials\03_Trigger_Editor\057_Multithreading_with_Action_Definitions.md.part-1.md

事实上，编辑器对于多线程的实现有点类似于概念的伪装或不纯净版本。真正的多线程实现将能够同时处理多个任务，而编辑器则通过一种称为时间分片的方法来处理这些任务。

在编辑器版本的时间分片中，启用线程的动作定义将在调用时按预期运行。控制会线性传递给它，其语句将按顺序运行，然后控制会再次传递给原始父调用者。不同之处在于当它达到等待控制语句时会发生什么。如果是这种情况，控制将被中断，然后传回到父线程，直到等待得以解决，此时控制将返回到线程化的定义处。

这与非线程定义有所不同，非线程定义将等到等待得以解决之前一直占用控制权。因此，编辑器通过非常快速地切换线性控制来“伪装”多线程。这使得它能够避免等待语句在代码中创建完全停顿，结果在处理时给出了非线性处理的印象。

然而，赋予用户绕过等待语句的能力意味着，编辑器的伪多线程具有了已被吹捧的概念所具备的许多效用。它仍然可以提供独特或更直观的编程特效方式，并且可以作为一种有价值的组织工具。然而，存在一个重要的缺点：性能。

由于编辑器的多线程没有真正的并行执行，因此对性能没有明显的积极影响。事实上，由于此选项的额外内部工作，编辑器中的多线程通常会对性能产生负面影响。这一点很重要要记住，因为它与概念的大部分常规定义相悖。

## 通过Galaxy脚本触发器实现多线程

Galaxy通过`TriggerExecute`原生函数提供了一些独特的多线程支持。通过使用此函数直接执行触发器时，可以指定一个参数，将目标触发器设置为在自己的线程中运行。这里的缺点在于触发器没有参数输入，使它们在大多数情况下比动作定义的使用性更低。

## 多线程机制

如果你是一名高级用户，可以通过检查Galaxy脚本实现来深入了解多线程。将注意力转回演示地图，并通过突出显示它们、右键单击并取消选中“Enabled”来禁用“Spawn Exploding Marine”触发器和动作定义。现在，看一下“Print Number”触发器及其相关的动作定义。该触发器调用了下面图片中展示的动作定义。

[![Print Number动作定义](./resources/057_Multithreading_with_Action_Definitions7.png)](./resources/057_Multithreading_with_Action_Definitions7.png)
*Print Number动作定义*

该动作定义向屏幕发送一个简单的调试消息。请注意，它目前尚未设置为多线程。您可以使用该触发器和定义作为检查多线程实现的最简单试验。为此，请以窗口模式运行地图，然后启动触发器调试器。进入调试器后，转至“Triggers”选项卡，右键单击`gt_PrintNumber_Func`触发器，然后选择“View Script”。这将显示以下标准的动作定义脚本。

[![标准“Print Number”脚本](./resources/057_Multithreading_with_Action_Definitions8.png)](./resources/057_Multithreading_with_Action_Definitions8.png)
*标准“Print Number”脚本*

这里的脚本很简单。它生成一个无返回的函数，其格式与GUI中的动作定义相匹配。然后由“Print Number”触发器调用该函数。现在返回到触发器编辑器，并通过选择“Create Thread”标记在“Print Number”动作定义中启用多线程。重复相同的调试过程将得到以下结果。

[![多线程“Print Number”脚本](./resources/057_Multithreading_with_Action_Definitions9.png)](./resources/057_Multithreading_with_Action_Definitions9.png)
*多线程“Print Number”脚本*

在这种情况下，脚本变得更加复杂，包括许多自动生成的组件。下面展示了这些组件的分解。

1.  动作定义的每个参数都有一个全局变量，与其原始类型匹配。

    > int auto_gf_PrintNumber_lp_number

2.  具有初始值为“Null”的全局触发器变量。

    trigger auto_gf_PrintNumber_Trigger = null

3.  具有两个布尔参数的布尔触发器函数；这包含了GUI中定义的每个动作，以及每个线程动作定义参数的一个隐含生成的本地变量。

    > bool auto_gf_PrintNumber_TriggerFunc (bool testConds, bool runActions) {
    > 
    > int lp_number = auto_gf_PrintNumber_lp_number;

4.  接受动作定义参数的包装函数。

    > gf_PrintNumber(123)

了解了这些部分后，机制的操作如下。

  -  第4步中的包装函数首先将其参数值复制到第1步中的全局参数变量中。
  -  然后包装函数检查第2步中的全局触发器变量是否为null。如果是，它将基于第3步创建一个新的触发器，并将其分配给第2步。
  -  此时第2步的函数将在其自己的线程中执行，从第1步获取参数并制作本地副本。

请注意，步骤1中的全局变量用作临时存储，因此可以从触发器中访问。目前，创建本地版本使得该线程可以并行操作，并与变量更改的情况隔离。

通过上述内容，您无疑可以看出此处展示的多线程版本的复杂性增加了。由于代码大小的增加，多线程动作定义的性能显著不及其非线程化版本。

## 附件

 * [057_Multithreading_with_Action_Definitions.SC2Map](./maps/057_Multithreading_with_Action_Definitions.SC2Map)

## 翻译 E:\SC2Code\blizzard-tutorials-chinese\docs\New_Tutorials\03_Trigger_Editor\058_GalaxyScript.md.part-0.md

# GalaxyScript

GalaxyScript是SC2编辑器的编程语言。虽然大部分内容被隐藏在触发器编辑器的GUI层后面，但所有的触发器工作最终都会归结为GalaxyScript，由编辑器在你的MapScript.galaxy中自动生成。

虽然许多人认为由于触发器编辑器的存在，不应该与GalaxyScript进行交互，但是有理由在GalaxyScript中编写项目的部分内容。在本指南中，您将学习何时以及如何将GalaxyScript整合到您的项目中。

本教程假设您对传统编程或触发器编辑器有很好的基础。它还假设您已将地图保存为 .SC2Components 格式（尽管没有真正的理由不这样做），并且正在使用Talv的VSCode扩展。

[![例如，此GUI将编译为下面的代码](./resources/058_GalaxyScript1.png)](./resources/058_GalaxyScript1.png)
*例如，此GUI将编译为下面的代码*

```c
void gf_SayHello () {
    // 自动变量声明
    playergroup auto50B0D547_g;
    int auto50B0D547_var;

    // 实现
    auto50B0D547_g = PlayerGroupAll();
    auto50B0D547_var = -1;
    while (true) {
        auto50B0D547_var = PlayerGroupNextPlayer(auto50B0D547_g, auto50B0D547_var);
        if (auto50B0D547_var < 0) { break; }
        UIDisplayMessage(PlayerGroupSingle(auto50B0D547_var), c_messageAreaSubtitle, (StringExternal("Param/Value/E3C00EB1") + PlayerName(auto50B0D547_var)));
    }
}
```

# 为什么选择GalaxyScript？

*"但我们可以在GUI中做GalaxyScript能做的一切，对吧？那么为什么要使用它呢？"*

不是的。有一些事情只能在GalaxyScript中完成（或者在GUI中很费力）。此外，还有一些其他原因，我在下面列出了其中一些。

### 1. 你可以复制/粘贴

我们在使用编辑器时都遇到过这样的时刻：你意识到你将不得不做很多复制/粘贴，或者说你想要将 `Int` 转换为 `Real`。在尝试在GUI编辑器中进行更改时，它会覆盖语句中的所有内容。复制/粘贴也比较慢，尤其是如果您想在每次迭代中仅更改1/2个字母。您将不得不回到 *所有* 的语句中并浏览各种窗口迷宫 - 这并不理想！使用Galaxy可以解决所有这些问题，因为它使您可以像编辑任何其他内容一样编辑代码。这还意味着在更改诸如变量类型之类的小事情时，代码不会被覆盖。

### 2. 编辑器的类型安全性太强了。

编辑器中很多东西最终归结为 `字符串` 或 `整数`。例如，`Dialogs` 和 `Dialog Items` 只是 `整数`。`单位类型`（或实际上90% 的数据引用）只是 `字符串`。当编辑器强制您在这些内置类型之间进行转换时，有很多时候会出现问题。当处理游戏链接时，这可能特别令人恼火，因为它们往往会使游戏变慢或卡死。在我的情况下，通过模板创建对话框项目时，当我尝试选择项目时编辑器有50％ 的几率崩溃，尽管我刚刚在布局中定义了它们，并且只想使用一个字符串。

摆脱编辑器的类型限制是非常解放的，但是伴随着强大的功能也意味着有责任。然而，在编写Galaxy时，调试功能也更容易阅读，因为它实际上会提供脚本中函数的名称，这使得查找和修复错误变得更加容易。

### 3. 有些事情只能在GalaxyScript中做，而在GUI中无法完成。

像动态触发器创建（请参见页面底部的例子）这样的事情只能通过脚本完成，无法通过触发器编辑器实现。

---

然而，类型安全性和其他功能也可能非常有益。Galaxy，和布局/UI一样，是一个工具，通过使用你会学会何时使用Galaxy是个好主意，何时不是。我通常发现你会在触发器中写大约75% 的代码，而在Galaxy中写大约25%。根据你对代码的熟悉程度，这可能会因人而异；你最终会找到一个适合你的平衡点。

# 入门指南

让我们从一些基本示例开始，使您熟悉使用Galaxy的工作流程。一旦您学会了这一点，其他一切都会自然而然地上手。
您应该首先做的事情是[收藏这个网站](https://mapster.talv.space/galaxy/reference)，因为在您继续学习时，它将非常有帮助。

## 步骤1：创建您的第一个脚本

在文件资源管理器中打开您的地图，并创建一个名为 `scripts` 的文件夹。这将是我们放置所有Galaxy文件的地方。

创建一个名为 `UI.galaxy` 的文件。正如我之前提到的，"Create Dialog Item From Template" 函数很容易使我的编辑器崩溃。让我们编写一个包装函数，这样我们就可以根据一个字符串创建对话框项目。

在文件中，复制/粘贴（或编写）以下代码段。

```cpp
int CreateDialogItemFromTemplate(int dialog, int type, string template)
{
    return DialogControlCreateFromTemplate(dialog, type, template);
}
```

接下来，我们需要将其导入编辑器，以便我们可以使用它。首先创建一个 `Custom Script Object（Ctrl+Alt+T）`。将其命名为 `imports`。这是您在编辑器中唯一会编写的自定义脚本。然后，向其中添加以下行：

```c
include "scripts/UI"
```

[![它应该看起来像这样](./resources/058_GalaxyScript2.png)](./resources/058_GalaxyScript2.png)
*它应该看起来像这样*

自定义脚本只是在生成MapScript.galaxy时将脚本附加到顶部的方法（如果您以前在C/C++中进行过任何编程工作，这就像 `#include <stdio.h>`）。这使我们可以在 'main' 脚本中和在其后的所有其他脚本中使用该文件中的功能。

现在，让我们创建一个 `native function`，这样我们才能实际使用我们编写的脚本。创建一个新函数（Ctrl+F），并将其命名为与脚本中的函数相同：`CreateDialogItemFromTemplate`。打开函数选项，然后选中“原生函数”复选框。因为它返回一个对话框项目，将返回值设置为 `Dialog Item`。然后，我们将创建参数。

## 翻译 E:\SC2Code\blizzard-tutorials-chinese\docs\New_Tutorials\03_Trigger_Editor\058_GalaxyScript.md.part-1.md

- **Dialog（对话框）** 是一个整数，但你应该记住，对话框只不过是整数。所以它的类型是 Dialog（对话框）。
- **Type（类型）** 是一个预设值：对话框项的类型。
- **Template（模板）** 是一个字符串。

[![它应该看起来像这样](./resources/058_GalaxyScript3.png)](./resources/058_GalaxyScript3.png)
*这应该是你的最终结果。*

然后，让我们进行测试。我创建了一个对话框项，并使用我们的函数在其中创建了一个按钮。

[![它应该看起来像这样](./resources/058_GalaxyScript4.png)](./resources/058_GalaxyScript4.png)
*这是不良实践。不要像这样编写触发器。*

让我们启动测试地图，然后 -

[![它应该看起来像这样](./resources/058_GalaxyScript5.png)](./resources/058_GalaxyScript5.png)
*大功告成。*

我们完成了！你已经用 Galaxy 编写了你的第一个脚本。现在，如果你想编写更多的函数或操作，你知道该怎么做了。

坦率地说，我们上面所做的在 GUI 中也可以轻松完成，但它更多是为了演示而非展示 Galaxy 的强大之处。在决定何时编写脚本与使用 GUI 时，我有一些经验法则。

- 只编写自包含函数。引用全局变量*是*可行的（只需在它们的名称前添加 `gv_` 前缀），但通常最好不要这样做。唯一的例外是常量，但那是明显的。
- 在 Galaxy 中进行任何与目录相关的工作。GUI 函数很麻烦，而使用字符串比使用游戏链接要容易得多。
- 繁琐的类型转换或频繁重复的操作（循环无法完成）应该在 Galaxy 中完成。
- 触发器的创建应始终在 GUI 中完成。

正如我上面提到的，每个人都有自己编写代码的风格，也许这些提示对你有用，也许没有。你只需要尝试学习。

# 提示

Galaxy 有一些设计上的奇怪之处。

- 所有变量必须在函数开头声明。你不能调用另一个函数然后再声明一个变量。
- `var++` 不起作用。你应该使用 `var+=1` 代替。
- 只要它们包含在 MapScript 中，你就可以引用另一个 Galaxy 文件中的函数，而不必在*那个*文件中也包含一条 include 语句。
- For 循环可以有空值。
- 如果需要创建一个异步/单独线程函数，为它创建一个触发器。

# 示例

以下是我搜集的一些常用的通用实用程序/示例动作，以展示 Galaxy 中各种任务的示例。所有变量名都应该是不言自明的。任何以 `c_` 开头的内容都是预设值。

## 遍历玩家组

```c
void DisplayMessageToPlayerGroup(string message, playergroup group)
{
    int player;

    for(player = 1; player <= CONST_MAX_PLAYERS; player+=1)
    {
        if(!PlayerGroupHasPlayer(group, player)){ continue; }
        UIDisplayMessage(PlayerGroupSingle(player), c_messageAreaChat, StringToText(message));
    }
}
```

## 动态函数注册

```c
void CreateButtonAndRegisterToTrigger()
{
    // 创建对话框项
    int dialogitem = libNtve_gf_CreateDialogItemButton(
        CONST_DIALOG,
        300,
        75,
        c_anchorCenter,
        0,
        0,
        StringToText(""),
        StringToText("点击我！"),
        ""
    );

    // 将其添加到全局触发器 TRIGGER_VARIABLE
    TriggerAddEventDialogControl(
        TRIGGER_VARIABLE,
        c_playerAny,
        dialogitem,
        c_triggerControlEventTypeClick
    );
}
```

## 创建触发器/创建异步（在单独线程中运行）函数

```c
trigger MyGlobalTrigger;

// 你可以根据需要命名这些变量；testConds/runActions 只是标准。
bool MyTrigger(bool testConds, bool runActions)
{
    // 将聊天消息回显给玩家
    UIDisplayMessage(PlayerGroupSingle(EventPlayer()), c_messageAreaChat, StringToText(EventChatMessage()));

    return true;
}

void MyTrigger_Init()
{
    // 作为参数使用你想执行的函数的名称
    MyGlobalTrigger = TriggerCreate("MyTrigger");
    TriggerAddEventChatMessage(MyGlobalTrigger, c_playerAny, "echo", false);
}
```

## 作用域

```c
// 此函数无法在此文件之外访问
static bool ThisIsTrue()
{
    return true;
}


// 此函数可以访问
bool TrueIsTrue()
{
    if(!ThisIsTrue())
    {
        return false;
    }
    else
    {
        return true;
    }
} 
```

## 翻译 E:\SC2Code\blizzard-tutorials-chinese\docs\New_Tutorials\04_Data_Editor\058_Data_Editor_Introduction.md.part-0.md

# 数据编辑器介绍

数据编辑器中存放着编辑器中的所有数据资产。项目的每一个数据部分都是使用这里找到的基本类型构建的。这是一个深入而强大的系统，为用户提供了极大的控制权，是暴雪编辑套件中有史以来提供的最多的控制选项。

[![数据编辑器的使用](./resources/058_Data_Editor_Introduction1.png)](./resources/058_Data_Editor_Introduction1.png)
*数据编辑器的使用*

在数据编辑器内，您将找到一个强大的功能集，支持其编辑功能。您应该注意，在工作时数据将会动态更新，使得变更能够快速传播到整个项目中。还有一些可视化选项，提供对任何数据结构的概述。这些对于建立引擎运作方式的触觉感觉非常重要。也许最重要的是，所有星际争霄战的资产都是可用的，可以通过数据编辑器查看。在这里，您可以仔细审查它们并从中学习，或重新利用它们用于自己的修改中。

## 数据目录

编辑器中的数据被组织成目录，每个目录包含项目中当前活动的特定数据类型的每个实例的列表。您必须导航到特定数据类型的目录才能创建或管理该特定类型的任何数据。每个目录提供其关联类型的所有数据字段的视图，以及一些上下文适当的选项。数据编辑器中共有 87 个目录，尽管大多数用户会发现他们的工作集中在其中的少数几个目录中。其中大部分的 87 个目录是由高度特定类型的数据组成的，其中很多您可能很少使用。

一些目录的示例包括熟悉的游戏类型如能力和单位，以及艺术资产如模型和声音。上述一些更具体的类型包括物理材料、光标和成就。您将在本段落下方找到引擎的所有目录的完整列表。值得注意的是，这些目录被组织成广泛的类别，比如游戏数据或角色数据，以反映不同数据类型的不同目的。

- 游戏数据 \[13\]

<!-- -->

  - 能力 --- 行为 --- 效果
  - 足迹 --- 物品 --- 战利品
  - 移动器 --- 要求 --- 炮塔
  - 单位 --- 升级 --- 验证器
  - 武器

<!-- -->

- 活动数据 \[13\]

<!-- -->

  - 军队类型 --- 军队单位 --- 军队升级
  - 银行条件 --- 战役 --- 角色
  - 指挥官 --- 对话 --- 对话状态
  - 地点 --- 地图 --- 目标
  - 预加载

<!-- -->

- 角色数据 \[3\]

    \--- 角色 --- 附加方法 --- 攻击方式

- 艺术和声音数据 \[12\]

    \--- 按钮 --- 数字音效 --- 镜头耀斑集合
    
    \--- 灯光 --- 模型 --- 混响效果
    
    \--- 形状 --- 声音 --- 声音独占性
    
    \--- 声音混音快照 --- 声音轨道 --- 纹理

- 地形数据 \[9\]

    \--- 地形悬崖 --- 地形悬崖网格 --- 迷雾数据
    
    \--- 物理材料 --- 地形类型 --- 地形物体
    
    \--- 地形纹理 --- 地形道路 --- 水

- 英雄数据 \[11\]

    \--- 神器 --- 神器插槽 --- 配置
    
    \--- 英雄 --- 英雄能力 --- 英雄统计
    
    \--- 坐骑 --- 皮肤 --- 天赋
    
    \--- 天赋配置 --- 配音

- 界面数据 \[6\]

    > \--- 警报 --- 捆绑 --- 摄像机

    \--- 光标 --- 游戏 UI 数据 --- 标记

- 高级数据 \[20\]

    \--- 成就 --- 成就条款 --- 加速
    
    \--- 游戏数据 --- 牧群 --- 牧群节点
    
    \--- 物品类别 --- 物品容器 --- 动力学
    
    \--- 种族 --- 要求节点 --- 奖励
    
    \--- 得分结果 --- 得分值 --- 战术 AI 冷却时间
    
    \--- 战术 AI 数据 --- 目标查找 --- 目标排序
    
    \--- 奖杯 --- 用户类型

## 界面

[![数据编辑器界面视图](./resources/058_Data_Editor_Introduction2.png)](./resources/058_Data_Editor_Introduction2.png)
*数据编辑器界面视图*

您可以使用目录选项卡导航到数据编辑器的目录，如下所示。

[![目录选项卡](./resources/058_Data_Editor_Introduction3.png)](./resources/058_Data_Editor_Introduction3.png)
*目录选项卡*

每个目录都有一个关联的选项卡，可访问它们的数据列表。您可以使用绿色的加号形状的目录打开器将选项卡添加到项目中。选择了一个选项卡后，将会在对象列表中显示该目录的数据，如下所示。

[![对象列表](./resources/058_Data_Editor_Introduction4.png)](./resources/058_Data_Editor_Introduction4.png)
*对象列表*

该列表根据多个上下文敏感属性组织整个数据目录，如来源、ID＃、对象系列和种族。正如您在下图中所看到的，数据结构的完整层次结构将显示为对象资源管理器中所选实例。

[![对象资源管理器](./resources/058_Data_Editor_Introduction5.png)](./resources/058_Data_Editor_Introduction5.png)
*对象资源管理器*

对于像单位这样的高级结构，此资源管理器提供了一个重要的自上而下的查看数据的视角。对象资源管理器或对象列表中的任何数据将在下图所示的字段列表中显示其数据字段。

[![字段列表](./resources/058_Data_Editor_Introduction6.png)](./resources/058_Data_Editor_Introduction6.png)
*字段列表*

字段列表是数据编辑器的数据输入部分。在此处，用户可以直接通过输入更改数据。由于可供编辑的目录和字段类型的多样性很大，因此有一系列查看选项可使列表尽可能易于访问。您可以在数据栏中找到这些选项。

[![数据栏](./resources/058_Data_Editor_Introduction7.png)](./resources/058_Data_Editor_Introduction7.png)
*数据栏*

## 翻译 E:\SC2Code\blizzard-tutorials-chinese\docs\New_Tutorials\04_Data_Editor\058_Data_Editor_Introduction.md.part-1.md

以下是各种查看选项的详细信息。

| 操作                       | 效果                                                                                                             |
| -------------------------- | ----------------------------------------------------------------------------------------------------------------- |
| 查看原始数据             | 将所有数据更改为其在后端代码中使用的原始 ID 值，而不是更易用的名称值。                                       |
| 将对象列表显示为树形     | 将对象列表显示为一组结构化的文件夹。                                                                          |
| 显示所有对象源           | 显示原始、未更改的源数据以及任何当前版本的数据。                                                              |
| 显示对象浏览器           | 切换对象浏览器的可用性。                                                                                         |
| 在数据导航器中查看     | 在数据导航器中将当前选择的数据实例可视化。                                                                  |
| 表格视图                 | 将字段列表显示为其所有单独字段的表格列表。                                                                    |
| 详细视图                 | 将字段列表显示为其条目窗口或子编辑器的组合。                                                                   |
| XML 视图                  | 将字段列表显示为其原始 XML 文件。                                                                            |
| 按源排序字段             | 按照每个字段的数据源组织列表。                                                                                |
| 显示基本字段标签       | 在来自该源的任何数据字段上显示（基本）标签。                                                                  |
| 显示字段类别             | 显示每个数据片段的任何类别标题。                                                                               |
| 合并结构值               | 将任何相关字段组合成一个字段。                                                                                 |
| 显示字段差异             | 显示数据字段中的任何差异。                                                                                      |
| XML 语法高亮显示        | 为 XML 视图启用基于颜色和类型的高亮显示。                                                                    |
| 提交 XML 更改            | 保存任何当前未保存的 XML 文件更改。                                                                           |

这些选项包括结构化字段列表视图：表格视图、详细视图和 XML 视图。以下是具体展示。

[![表格视图 - 详细视图 -- XML 视图](./resources/058_Data_Editor_Introduction8.png)](./resources/058_Data_Editor_Introduction8.png)
*表格视图 - 详细视图 -- XML 视图*

这些查看选项也可以从数据编辑器的“查看”选项卡中访问。

![查看选项卡](./resources/058_Data_Editor_Introduction9.png)
*查看选项卡*

每个层次中都有不同的选项可用。您可以从主地形视图最左侧的大面板中访问这些选项。这称为 UI 面板。

**UI 面板**根据当前层次而变化；每个层次都有一个调色板，该调色板提供了该层次的大多数主要控件。这些调色板专门针对当前层次的使用。您还应注意顶部的文件选项卡提供了许多选项。这些选项分解为子选项卡，在下面的各节中进行描述。

## 子编辑器

在某些情况下，您将发现在字段编辑期间有更专业化的嵌套编辑器可用。这些子编辑器包括 Actor 事件编辑器、足迹编辑器和声音编辑器。如下图所示。

![](./resources/058_Data_Editor_Introduction10.png)
*Actor 事件编辑器 -- 足迹编辑器 -- 声音编辑器*

## 数据可视化

随着项目内部结构的增长和交织，有一些可视化选项可能会对您有所帮助，以便更好地查看项目正在进行的工作。数据编辑器为此提供了一些选项，其中最明显的是下面所示的数据导航器。

[![数据导航器](./resources/058_Data_Editor_Introduction11.png)](./resources/058_Data_Editor_Introduction11.png)
*数据导航器*

导航器绘制了每个数据片段之间的连接，以可读的方式呈现整个实例的数据层次结构。另一个有用的功能是可用于对象浏览器的“显示解释链接”选项。这将在输出面板中显示数据连接的简化版本，如下图所示。

![显示解释链接](./resources/058_Data_Editor_Introduction12.png)
*显示解释链接*

## 翻译 E:\SC2Code\blizzard-tutorials-chinese\docs\New_Tutorials\04_Data_Editor\059_Units.md

# 单位

一个单位是一个交互式游戏对象。尽管这个术语在许多情况下被随意使用，但在Data Editor中，“单位”这个术语非常明确地指代一个数据类型，直接放置在游戏中供玩家操作。在Data Editor中选择一个单位将给您提供下面所示的分解。

![单位数据对象](./resources/059_Units1.png)
*单位数据对象*

以上显示的单位是Archon，显示在其相当庞大的数据层次结构的顶部。这里所显示的列表长度应该给您一个印象，即单位数据类型的主要目的是作为各种其他类型的游戏数据、美术和声音数据以及演员的容器。您可以通过在Data Editor中导航到+ ▶︎ 编辑游戏数据 ▶︎ 单位来研究单位，如下所示。

[![导航到Data中的单位](./resources/059_Units2.png)](./resources/059_Units2.png)
*导航到Data中的单位*

单位数据类型与其他数据类型的区别在于，它可以放置到游戏中并接收输入，比如玩家命令、与其他单位的交互以及来自AI的命令。将这些交互传达给其连接的数据类型使单位成为数据转化为游戏玩法的主要方式之一。单位的数据组成如下图所示。

[![单位组成](./resources/059_Units3.png)](./resources/059_Units3.png)
*单位组成*

正如您所看到的，编辑器中的许多数据最终都导致了一个单位。直接的贡献者包括能力、演员、行为、移动器和武器。这些类别与单位类型之间的关系如下所述。

## 能力

一个单位有多达32个能力的空间。这些能力决定了其功能的大部分。单位中常见的能力包括攻击、移动、停止、保持位置和巡逻。这些能力通常通过下面显示的“能力”字段添加到单位中。

![单位组成](./resources/059_Units4.png)
*单位组成*

添加后，这些能力通过“命令卡”字段与游戏玩法联系起来。在单位用户界面的命令卡部分添加一个按钮，允许玩家输入触发能力。您可以在下面的图像中看到这个过程的使用情况。

[![自定义命令和效果](./resources/059_Units5.png)](./resources/059_Units5.png)
*自定义命令和效果*

## 演员

演员主要将美术和声音资源添加到单位中。更具体地说，每个单位都有一个与其名称相同的演员。这些演员连接到单位的3D模型、肖像、死亡动画和操作声音。许多单位还有一个处理其武器视觉和音频组件的攻击演员。这些演员通过其演员消息与单位连接。在下面的图像中，您将看到其中一个演员将美术和声音连接到一个单位。

[![演员到单位数据连接](./resources/059_Units6.png)](./resources/059_Units6.png)
*演员到单位数据连接*

## 行为

行为可以存在于单位的范围内，赋予它像光环或有时限生命这样的被动能力。行为通过使用下面显示的“行为”字段添加到单位中。

![Mothership行为视图](./resources/059_Units7.png)
*Mothership行为视图*

## 移动器

单位将具有一个指导其基本移动的移动器。没有移动器的单位无法使用移动命令。单位的常见移动器包括地面、飞行、埋藏和悬崖跳跃。弹道也包含移动器，通常是模拟动态移动的更复杂移动器。您可以在单位的“移动器”字段内进一步定制单位的移动，允许您设置诸如速度、转向率和加速度之类的设置。移动器在单位的“移动器”字段内设置。

![导弹移动器](./resources/059_Units8.png)
*导弹移动器*

## 武器和炮塔

武器赋予单位攻击的能力。没有武器，攻击命令将不可用。它们的操作方式相对简单。它开始于一个单位被玩家或AI选定为目标。武器然后将在目标处创建一个效果。如果目标单位在射程内，并且武器的冷却时间已过，武器将发射，播放动画，施加其效果，并在适当时发射导弹。武器也可以堆叠，使单位具有多个攻击，每个攻击都有自己的效果、射程、冷却时间等。

每个武器也可以配置一个炮塔。炮塔是一种特殊的数据类型，负责瞄准它们的攻击目标。这种瞄准在开火前会创建一个定时旋转的炮塔，提供了视觉和游戏元素。武器和炮塔通过它们各自的字段“武器”和“炮塔”添加到一个单位。

## 翻译 E:\SC2Code\blizzard-tutorials-chinese\docs\New_Tutorials\04_Data_Editor\060_Actors.md.part-0.md

# 演员

演员是**数据编辑器**的中流砥柱。它们既是不可或缺的，也具有广泛的应用范围，因此很难准确定义。演员的目的更容易地通过其作用来定义。简单地说，演员在数据内部实现了某些功能。

演员有自己的逻辑系统，这个系统负责连接数据之间的许多链接和操作。一些演员将引擎中可观察的组件（如模型、小玩意和声音）连接起来，将它们融入游戏中。其他演员通过配置攻击和能力来影响游戏玩法。甚至还有一系列用于演员的高级构造，其中包括**演员列表**，用于跟踪和组织演员，**演员区域**，根据地图区域与其他演员互动，以及**事件宏**，将常见的演员逻辑汇集到一种可重复使用的工具中。演员也是 **StarCraft** 引擎的异步组件，使它们能够向不同的玩家推送不同的数据。

您可以通过移动到**数据编辑器**，然后导航到 + ▶︎ **编辑演员数据** ▶︎ **演员** 来找到**演员**部分，如下所示。

![导航到数据中的演员](./resources/060_Actors4.png)
*导航到数据中的演员*

这将带您到**数据编辑器**的**演员**选项卡，为您展示以下视图。

![演员选项卡视图](./resources/060_Actors5.png)
*演员选项卡视图*

演员部分中的字段在下一部分中有描述。

## 演员详情

由于演员有许多不同类型，对每个演员属性进行单独处理将变得太过繁琐，无法使用。然而，演员有一长串的共同属性，这些属性在下表中进行了拆分说明。

| 字段                       | 详情                                                                                                                                                                                                                                                                                                                                                                                                                            |
| --------------------------- | ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| 别名                     | 演员的备用引用名称。这提供了一种快捷方式，让演员可以向彼此发送消息。例如，单位演员有一个通用的 \_Unit 别名。当另一个演员想要访问单位演员时，可以使用此别名。这比查找实际演员名称更好，因为实际名称每次都会有所不同。                                                                                    |
| 复制源                 | 将另一个演员设置为代理父级。这意味着当前演员的子演员将从复制源演员那里获得其属性。要传递的属性必须在复制源演员的 **接受的属性传递** 字段以及子演员的 **继承的属性** 字段中设置。                                                                                                                     |
| 过滤器                      | 将演员的可见性设置为演员所有者的盟友、敌人、中立或自身组。                                                                                                                                                                                                                                                                                                                                     |
| 过滤播放器               | 根据玩家进行演员的可见性设置。                                                                                                                                                                                                                                                                                                                                                                                |
| 标志              | 标志包含演员的许多附加选项。                                                                                                                                                                                                                                                                                                                                                                       |
| 添加到外部查找器      | 将演员移动到全局范围，使其可以被游戏中的所有其他演员使用。                                                                                                                                                                                                                                                                                                                                               |
| 不保存备份                   | 将演员标记为在游戏保存期间不保存或加载，从而减少这些操作的时间。                                                                                                                                                                                                                                                                                                                                     |
| 对单位玩家的响应     | 设置演员在其单位演员更改所有者时自动更新其玩家ID。                                                                                                                                                                                                                                                                                                                                            |
| 抑制创建错误    | 关闭演员的创建错误消息。如果演员在某些情况下设计为在创建事件失败时失败，则这将很有用。                                                                                                                                                                                                                                                                                       |
| 迷雾可见性              | 设置演员在战争迷雾下的外观。行为选项如下：变暗会使其看起来变暗，隐藏会完全隐藏演员，快照会显示演员在离开视野之前的最后可见状态，可见会使演员在迷雾下保持可见。                                                                                                                                                                                                                      |
| 共享                     | 设置共享演员的行为，如果多个功能请求它。选项包括：始终共享、从不共享和每个效果独立共享。每个效果允许您基于效果来配置共享。                                                                                                                                                                                                                 |
| 事件                      | 允许设置演员事件和消息，这些事件和消息是演员的内部逻辑语言。                                                                                                                                                                                                                                                                                                                                 |
| 宏                      | 可以在这里添加事件宏。事件宏是许多演员中可重复使用的常见事件集合。                                                                                                                                                                                                                                                                                                                        |
| 删除                      | 指定删除从父级演员继承的不需要的事件。                                                                                                                                                                                                                                                                                                                                                            |
| 条款                    | 设置必须通过的条件，才能创建演员。与**事件**中的创建事件的条件相同，如果在此处输入，将覆盖该消息。这在数据组织中有应用。                                                                                                                                                                                                          |
| 主机支持者              | 主机支持者用于指定支持者演员。当支持者死亡时，将发送 SupporterDesctruction 消息给托管它的演员。通常用于销毁该托管演员，但也可用于播放动画或传播消息。                                                                                                                                                                |
| 接受的属性传递 | 确定哪些属性将传递给子演员。通过一组标志进行控制。此处的众多选项包括模型比例、不透明度、比例、队伍颜色、可见性和贴花。在继续字段中还有更多传输属性，接受的传输中的选项包括动画属性、战争迷雾颜色、位置、旋转和纹理。 |
| 继承类型               | 设置演员是通过 **Once** 从其主机继承其属性，从不通过 **None** 继承，还是通过 **Continuous** 动态更新方式继承。                                                                                                                                                                                                                                                                                 |
| 继承的属性       | 确定该演员从其父级演员继承的属性集。要正确继承属性，必须在**继承的属性**和**接受的属性传递**字段中都进行选择。                                                                                                                                                                                                                 |

## 演员事件

**演员事件**是演员之间的通信系统。它允许演员相互交流，创建可能影响游戏的任何方面的上下文敏感变化。该系统由下面描述的三个基本元素组成。

[![Image](./resources/060_Actors3.png)](./resources/060_Actors3.png) 游戏内可能发生的具体发展。

[![Image](./resources/060_Actors3.png)](./resources/060_Actors3.png) 游戏状态的可确认属性集。

[![Image](./resources/060_Actors3.png)](./resources/060_Actors3.png) 可以传达到游戏元素的命令。

这些元素在一个序列中共同工作，创建一个**演员事件**。该序列展开如下。设置演员的事件使演员监视特定事件的发生。如果发生，那么检查条款。如果发现为真，则向目标游戏元素发送消息。

## 翻译 E:\SC2Code\blizzard-tutorials-chinese\docs\New_Tutorials\04_Data_Editor\060_Actors.md.part-1.md

您可能已经注意到，这跟编辑器的另一个主要通信系统——触发器是相似的。角色事件系统中的事件、术语和消息与触发器系统中的事件、条件和动作是平行的。虽然触发器系统可以应用于许多游戏元素，但角色事件系统主要处理数据。触发器通常是针对地图中单位、对象和事件的特定实例的选项。角色事件适用于对象的一般类型。角色事件设计一个单位及其互动，而触发器可以在游戏过程中调整和更改该单位。

您可以通过导航到任何角色类型的“事件”字段来找到角色事件系统。下面展示了典型事件字段的视图。

[![Actor Events Field](./resources/060_Actors6.png)](./resources/060_Actors6.png)
*角色事件字段*

双击该字段将启动角色事件子编辑器。

[![Actor Events Subeditor](./resources/060_Actors7.png)](./resources/060_Actors7.png)
*角色事件子编辑器*

该子编辑器展示了角色“事件”字段中的事件、术语和消息的组织视图。您应该注意，元素按其数据源进行了颜色标记。灰色元素表示从游戏核心数据中继承，蓝色元素来自暴雪依赖，绿色元素来自当前项目。

## 使用角色事件

通过在子编辑器视图中突出显示一个元素，然后选择其类型，可以设置角色事件，通过右侧面板的“消息类型”或“术语类型”下拉菜单。请注意，事件和消息都使用术语“消息”进行引用。这是因为它们是可以互换的，消息可以用作事件触发器，反之亦然。

额外选项，如参数或源，通常控制消息传达的内容。任何没有目标的消息将由角色发送到自身。消息也可以通过别名更精细地定位。尽管角色可以通过直接名称如“Marine”进行引用，但它们通常具有类型别名如\_Unit，并具有系统引用例如::Creator。

角色事件非常灵活多样。它们可以执行角色数据中的基本处理，例如创建、销毁和链接角色。然而，角色事件还具有许多更加微妙的功能，例如播放动画、改变艺术和声音资产的物理属性、应用物理效果以及控制照明。关于角色事件功能的示例，请参考下文。

[![示例角色事件](./resources/060_Actors8.png)](./resources/060_Actors8.png)
*示例角色事件*

在这里，一个事件已经设置为响应狂热者的冲锋行为。作为对冲锋开始的响应，狂热者将向其自己的单位角色发送一个消息，导致其模型变为红色。在测试中，游戏效果如下图所示。

![](./resources/060_Actors9.png)
*狂热者在冲锋期间变成愤怒的红色*

## 角色事件与触发器

如前所述，尽管角色事件和触发器系统处理游戏的不同部分，但它们之间存在许多相似之处。尽管在思维上将这两者分开可能是有益的，但事实上，这两个系统经常相互通信，功能重叠，并且可以用几种不同方式来实现相同的目标。

一个重要的例子是，角色消息可以通过触发器编辑器的“发送角色消息”动作发送给特定的角色。您可以在下文中看到这一点。

!['发送角色消息' 动作](./resources/060_Actors10.png)
*'发送角色消息' 动作*

上面，触发器中的一个动作语句已经向一个飞龙的单位角色发送了一个“设置着色”消息。该单位角色还收到了一个改变其队伍颜色的消息。通过从触发器直接向角色发送消息，这些消息一起让单位的模型变成了蓝色。

[![上色的飞龙](./resources/060_Actors11.png)](./resources/060_Actors11.png)
*上色的飞龙*

## 翻译 E:\SC2Code\blizzard-tutorials-chinese\docs\New_Tutorials\04_Data_Editor\061_Actor_Messages_Rundown.md.part-0.md

# 演员消息概述

对于几乎每种数据类型，都有一些相关的演员消息提供其逻辑后台。这确保了演员消息的稳定性既多样又众多。在本文中，您将找到许多类型消息的详细说明，以及一些关于它们使用的建议。

在开始之前，您应该注意，您既可以直接查看演员的消息，通过可展开的“事件”字段，也可以在演员事件的子编辑器中结构化查看。本文中的每个条目还将包括一个消息类型在子编辑器中的视图，但基本字段视图有时也很重要。您可以在下面的图片中查看这个视图。

[![演员事件字段](./resources/061_Actor_Messages_Rundown1.png)](./resources/061_Actor_Messages_Rundown1.png)
*演员事件字段*

在这里，您可以查看演员消息的直接ID，例如UnitBirth或ActorCreation，而不是它们在子编辑器的“Unit Birth”或“Actor Creation”选择面板中的结构形式。在使用演员消息时，这些ID可能很重要，无论是在触发器编辑器还是脚本中。因此，它们已经在以下每个条目的开头提供了。

虽然本文可以作为一个参考，但您应该意识到，研究演员消息库的最佳方式是单独进行，通过在子编辑器视图中创建和检查消息。您可以通过移动到演员的“事件”字段，双击以启动子编辑器，然后右键单击白色框内并选择“添加事件”来创建一个事件和消息对。

[![演员事件创建](./resources/061_Actor_Messages_Rundown2.png)](./resources/061_Actor_Messages_Rundown2.png)
*演员事件创建*

下面是许多类型的演员消息的概述。

## 播放动画

[![播放动画消息](./resources/061_Actor_Messages_Rundown3.png)](./resources/061_Actor_Messages_Rundown3.png)
*播放动画消息*

AnimPlay

播放指定的动画。这是动画控制的基本消息，其选项主要控制动画的物理属性。

| 字段                  | 详情                                                                                                                                                   |
| -------------------- | --------------------------------------------------------------------------------------------------------------------------------------------------------- |
| 名称                 | 为消息设置一个参考标签。                                                                                                                   |
| 动画属性 | 从下拉列表中选择动画类型。所有动画都与一个预设状态列表相关联。您可以在“剧情编辑器”中找到并检查它们。 |
| 标志                |                                                                                                                                                           |
| 基于资产循环 | 类似于永久播放，但在动画中设置了更明确的循环行为。                                                                   |
| 完全匹配           | 将动画的连续播放彼此匹配，而没有任何断续。                                                                       |
| 非循环播放         | 一次播放当前动画。                                                                                                                 |
| 永久播放         | 持续循环播放动画。                                                                                                                          |
| 随机起始偏移  | 从一个随机帧开始播放动画。                                                                                                                   |

混入混合动态地在两组不同的动画之间进行插值。此设置了从当前动画混入此动画的时间。 淡出 设置从此动画淡出到新动画的时间。 时间变体 设置用于设置时间变体的时间刻度类型。 时间类型 设置用于设置时间变体的时间刻度类型。 混入起始偏移 设置开始混合过程的偏移时间。 优先级覆盖 设置混合的优先级与其他动画的优先级进行比较。

## 动画分段开始

[![动画分段开始消息](./resources/061_Actor_Messages_Rundown4.png)](./resources/061_Actor_Messages_Rundown4.png)
*动画分段开始消息*

AnimBracketStart

动画分段充当三阶段动画序列的容器。这些阶段是开场、内容和收场。

| 字段               | 详情                                                                |
| ------------------- | ---------------------------------------------------------------------- |
| 名称                | 为消息设置一个参考标签。                                |
| 开场             | 设置第一个阶段的动画。                                        |
| 内容             | 设置第二个阶段的动画，其在开场后播放。     |
| 收场             | 设置在内容之后播放的最终动画阶段。          |
| 标志               |                                                                        |
| 完全收场        | 确认收场动画在任何情况下完成。 |
| 瞬间             | 跳过开场动画并从内容开始。              |
| 非循环播放         | 使内容动画只播放一次。            |
| 永久播放        | 重播开场动画，直到手动停止。          |
| 随机起始偏移 | 对动画开始时间应用随机偏移。|

时间变体 设置用于设置时间变体的时间刻度类型。 时间类型 设置用于设置时间变体的时间刻度类型。

## 销毁

[![销毁消息选项](./resources/061_Actor_Messages_Rundown5.png)](./resources/061_Actor_Messages_Rundown5.png)
*销毁消息选项*

Destroy

销毁演员，从任何进一步更新中消除它并移除任何视觉组件。有两种可用类型，即立即和正常。立即将立即销毁演员及其所有替代物。对于单位而言，它们的死亡动画不会播放。正常移除演员及其替代物，但允许死亡动画播放并使粒子自然消失。

## 开始发光

[![发光开始消息](./resources/061_Actor_Messages_Rundown6.png)](./resources/061_Actor_Messages_Rundown6.png)
*发光开始消息*

GlowStart

将脉冲状的辉光效果应用于演员的模型。可以通过“Glow Stop”消息停止此效果。此消息没有子选项。

## 设置光环颜色

[![设置光环颜色消息](./resources/061_Actor_Messages_Rundown7.png)](./resources/061_Actor_Messages_Rundown7.png)
*设置光环颜色消息*

HaloSetColor

光环可在模型周围添加发光轮廓。它们通常用于为单位提供对比或突出显示以供特定参考。此消息设置光环的颜色，而“Halo Start”和“Halo Stop”控制其添加和移除。

## 模型替换

[![模型替换消息](./resources/061_Actor_Messages_Rundown8.png)](./resources/061_Actor_Messages_Rundown8.png)
*模型替换消息*

ModelSwap

将演员的模型设置为选择的模型值。这将替换当前选择的任何模型。还支持选择模型的特定变体。

## 设置不透明度

[![设置不透明度消息](./resources/061_Actor_Messages_Rundown9.png)](./resources/061_Actor_Messages_Rundown9.png)
*设置不透明度消息*

SetOpacity

改变演员的不透明度，并将该变化传播到任何连接的视觉资产，如模型。

## 翻译 E:\SC2Code\blizzard-tutorials-chinese\docs\New_Tutorials\04_Data_Editor\061_Actor_Messages_Rundown.md.part-1.md

| 字段               | 详细信息                                                                                                          |
| ----------------- | ---------------------------------------------------------------------------------------------------------- |
 | 不透明度          | 设置应用的不透明度级别，0.0为默认状态，1.0为完全透明。 |
 | 混合持续时间       | 设置应用不透明度的时间段。默认情况下，应用是即时的。       |
| 标签              | 为消息设置一个参考标签。                                                                        |

## 设置着色

[![设置着色消息](./resources/061_Actor_Messages_Rundown10.png)](./resources/061_Actor_Messages_Rundown10.png)
*设置着色消息*

SetTintColor

为演员应用一种着色，将颜色变化传播到任何连接的视觉资产，比如一个模型。

| 字段                | 详细信息                                                                                                                                   |
| ----------------- | ------------------------------------------------------------------------------------------------------------------------------------------ |
 | 颜色              | 设置作为着色应用的颜色。单击颜色框将启动一个颜色选择器窗口。                                                                             |
 | HDR增益          | 通过HDR光照设置亮度增益。                                                                                                               |
 | 混合持续时间      | 设置应用颜色的时间段。默认情况下，应用是即时的。                                                                                         |
 | 混合类型        | 从不同的混合方法中选择。One Shot将一次性应用混合到颜色中，Bounce将混合进颜色然后再混合出来，Cycle将重复混合进和混合出颜色。  |
 | 标签            | 为消息设置一个参考标签。                                                                                                                   |
 | 优先级          | 设置此着色在类似消息上的优先级。                                                                                                           |

## 翻译 E:\SC2Code\blizzard-tutorials-chinese\docs\New_Tutorials\04_Data_Editor\062_Range_Actors.md.part-0.md

# 范围演员

范围演员用于在地图上绘制范围指示器。范围演员是一种视觉演员，其用途狭窄，在星际争霸的近战游戏中经常使用。在这种能力中，范围指示器标记了许多与游戏玩法相关的距离，包括幽灵狙击的施法范围、侦查者检测的视野范围，也许最著名的是围攻坦克的射程。

[![围攻坦克范围演员](./resources/062_Range_Actors3.png)](./resources/062_Range_Actors3.png)
*围攻坦克范围演员*

实际上，范围演员并不绘制范围指示器。相反，它们在地图上绘制一种环形图案的纹理，然后该纹理作为范围指示器进行操作。在这里作出区分是为了让您了解范围演员可以以其他方式使用。了解演员实际操作的内容是非常重要的，这样您就可以进行配置和使用。

您可以在地形编辑器中通过导航到“视图”▶︎“显示地形”▶︎“显示范围”来设置范围演员的可见性。您可以在数据中找到范围演员，在演员选项卡下，类型为“Range”，如下所示。

[![范围演员列表](./resources/062_Range_Actors4.png)](./resources/062_Range_Actors4.png)
*范围演员列表*

## 范围演员详细信息

范围演员有大量字段，由于它们是从演员继承而来的。但实际上，您只会使用其中最有用的字段。范围演员最有用的字段在以下表格中进行了拆分。

| 字段             | 详情                                                                                                                                                                                                                                                  |
| ----------------- | -------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| 能力           | 将演员链接到一个能力，并从中接收一个范围值。                                                                                                                                                                                        |
| 弧度               | 设置圆形图案的一部分，或弧度，在其中纹理将被绘制。值在0和360之间。默认情况下，指示器绘制一个完整的圆或360。弧度直接从单位的正前方开始，并向两个方向均匀扩大。 |
| 行为          | 将演员链接到一种行为，并从中接收一个范围值。                                                                                                                                                                                        |
| 悬崖高度标志 | 设置范围演员如何将其纹理投射到其他悬崖层级上。检查“较低”、“较高”或“相等”将在这些层级上显示纹理。                                                                                                    |
| 视野             | 将演员链接到一个单位，并从其“视野半径”字段接收一个范围值。                                                                                                                                                                        |
| 武器            | 将演员链接到一种武器，并从中接收一个范围值。                                                                                                                                                                                          |
| 图标              | 设置要在地图上绘制的纹理。请注意，所有默认范围演员均使用“RadarIcon1”纹理。                                                                                                                                            |
| 图标着色         | 对图标纹理应用着色。                                                                                                                                                                                                                      |
| 图标弧长   | 设置按照该间距在图标上进行图案化的间隔。间距值是单位之间的弧度测量。                                                                                                                        |
| 范围标志       | 包含两个标志，游戏世界和范围旗帜小地图。前者设置演员是否在主游戏中显示，后者设置演员在小地图上是否显示缩放版本。                                                 |
| 事件            | 设置演员事件。范围演员使用事件创建和移除自己，以及控制可见性行为。                                                                                                                                  |
| 范围             | 直接设置纹理绘制的半径。不要将其与“能力”、“行为”、“视野”或“武器”字段一起使用。                                                                                                        |

如上所述，有几个字段允许您自定义范围演员的外观。这些属性在默认数据依赖中大多被忽略。这是因为传统的星际争霸通常将范围演员用作沟通工具。结果，它们的外观在所有单位上保持一致，以避免玩家混淆。但是，这些字段仍可能为开发人员提供创造性选项。

## 范围演员消息

下表包含与范围演员相关的事件和消息的详细信息。

| 消息                     | 描述                                                                                                                                                            |
| --------------------------- | ---------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| 创建                      | 创建范围演员，在地图上显示指示器。                                                                                                             |
| 销毁                     | 销毁范围演员，从地图上移除指示器。                                                                                                         |
| RangeUpdat e                | 命令演员重新检查其源头的范围值。由于范围值在演员创建时设置，如果主机的属性发生了变化，则这可能是有用的。 |
| 能力                     | 用于在能力在主动目标时应用演员。                                                                                                      |
| TargetOn                    |                                                                                                                                                                        |
| 能力                     | 用于在目标结束后移除演员。                                                                                                                 |
| TargetOff                   |                                                                                                                                                                        |
| SelectionL ocalUpdate Start | 用于在选中单位时应用演员。                                                                                                                      |
| SelectionL ocalUpdate Stop  | 用于在取消选中单位时移除演员。                                                                                                                    |

## 范围演员类型

有四种基本类型的范围演员用于继承，Range Abil、Range Behavior、Range Sight和Range Weapon。

Range Abil是为设计提供面向目标能力的指示器的范围演员的基础。它支持一个“能力”令牌，将其链接至该令牌将设置演员的范围字段为该令牌的值。此令牌还提供演员事件模板，将范围演员的创建和移除消息链接到能力令牌的目标输入。此模板如下所示。

![](./resources/062_Range_Actors5.png)
*![图片](./resources/062_Range_Actors6.png)*

![](./resources/062_Range_Actors5.png)
*![图片](./resources/062_Range_Actors6.png)*

Range Behavior是为设计提供雷达范围或侦测半径行为的指示器的范围演员基础。它支持一个“行为”令牌，将其链接至该令牌将设置演员的范围字段为该令牌的值。此令牌还具有演员事件模板，将根据行为令牌的开启或关闭状态创建和移除演员。此模板如下所示。

![](./resources/062_Range_Actors5.png)
*![图片](./resources/062_Range_Actors6.png)*

![](./resources/062_Range_Actors5.png)
*![图片](./resources/062_Range_Actors6.png)*

## 翻译 E:\SC2Code\blizzard-tutorials-chinese\docs\New_Tutorials\04_Data_Editor\062_Range_Actors.md.part-1.md

Range Sight是为射程角色设计的基础，旨在为视野半径提供射程指示器。它支持一个单位令牌，连接到该令牌将会将角色的射程字段设置为该令牌的射程。Range Weapon同样接受一个武器令牌，将角色的射程设置为该令牌的射程。需要注意的是，这两种基本类型不包含角色事件，需要在它们被视为可操作之前，为射程角色的创建和销毁事件设置好。

## 展示射程角色

现在，打开本文提供的演示地图。该地图上有一个盘旋在悬崖上方的监视者，如下图所示。

[![Demo Map Course](./resources/062_Range_Actors7.png)](./resources/062_Range_Actors7.png)
*演示地图*

监视者是星际争霸中以其侦察能力闻名的单位。它可以在监视者周围的圆形半径内以一定距离显示隐形单位。在这张地图上，没有任何关于这一范围的指示，无论是被动地还是在选择监视者时。你可以应用一些射程角色来改变这一情况，让玩家一目了然地了解监视者的实用性。

要实现这一点，进入数据编辑器，然后进入角色选项卡。如果该选项卡尚不可用，通过导航到 + ▶︎ 编辑角色数据 ▶︎ 角色 来打开它。在那里，通过在主视图中右键点击并选择添加角色来创建一个新角色，如下图所示。

[![创建角色](./resources/062_Range_Actors8.png)](./resources/062_Range_Actors8.png)
*创建角色*

这将弹出一个窗口，您可以在其中设置要创建的角色的详细信息。将新角色命名为“监视者视野范围”，然后点击“建议”以生成一个ID。使用“角色类型”下拉菜单将该类型设置为Range，然后将“父级”设置为Range Sight。这声明了该角色为所需的射程角色，同时给予它一个基本类型，这将在稍后的工作中有所帮助。创建窗口现在应该显示如下图所示。

![图片](./resources/062_Range_Actors9.png) 准备创建的射程角色

点击“确定”以创建射程角色。这将带您回到主数据编辑器视图。在那里，选中“监视者视野范围”角色以打开其字段。由于其父权，您将看到该角色在字段列表底部有一个令牌。在该令牌中输入一个单位类型将允许新的射程角色从现有单位中提取部分属性。选择令牌字段，如下图所示。

[![射程角色令牌字段](./resources/062_Range_Actors10.png)](./resources/062_Range_Actors10.png)
*射程角色令牌字段*

打开该令牌字段将允许您设置一个单位，该单位将使其视野值被提取以用作射程角色的射程。双击令牌字段将呈现给您以下视图。

![令牌选择](./resources/062_Range_Actors11.png)
*令牌选择*

在令牌弹出窗口中选择一个单位，将该单位的视野设置为指示器将绘制的距离。由于此射程角色被设计为显示监视者的视野范围，请在此处选择“监视者”。值得指出的是，任何其他具有相同视野范围的单位仍然能够正常工作，并准确描绘监视者的视野。然而，输入实际的监视者本身，可以使这个射程角色在任何原因导致视野值改变时进行更新。这是一个很好的设计。在令牌弹出窗口中点击“确定”将更新该角色。现在，“视野”字段应如下图所示。

![令牌选择](./resources/062_Range_Actors12.png)
*令牌选择*

视野字段已自动填充。您可能也已经注意到，范围值不会显示在角色内。这些值直接与单位关联，这意味着“范围”字段现在是一个手动覆盖。一般来说，您不应该将其与令牌一起使用。

现在，导航至“事件”字段，双击以启动角色事件子编辑器。应该只有一个“ActorOrphan”事件，负责在编辑器中清理范围角色。右键单击白色框内部并选择“添加事件”。

[![角色事件创建](./resources/062_Range_Actors13.png)](./resources/062_Range_Actors13.png)
*角色事件创建*

将新事件的“消息类型”设置为“单位出生”，将其“来源名称”设置为“监视者”。然后将其消息设置为“创建”。此过程如下图所示。

[![设置创建事件](./resources/062_Range_Actors14.png)](./resources/062_Range_Actors14.png)
*设置创建事件*

这种事件和消息的组合将在监视者创建时创建射程角色。这意味着射程指示器将始终与监视者一起显示。接下来，创建另一个事件，将其“消息类型”设置为“单位死亡”。同时，将其“来源名称”设置为“监视者”，消息设置为“销毁”。这将在监视者死亡时销毁并移除射程指示器。完成的角色事件应如下图所示。

[![完成的角色事件](./resources/062_Range_Actors15.png)](./resources/062_Range_Actors15.png)
*完成的角色事件*

点击“确定”保存角色事件，然后返回到主数据编辑器视图。此时，射程指示器应该已经正常运作，但您可以进行一些微小的改动来提高可见性。选择“图标弧长”字段，将其值设置为1.125。这将使基础值减半，导致圆圈中显示的射程指示器数量增加一倍。

如果您现在测试射程角色，应该能够获得成功的结果。然而，为了更好地说明这些角色的效果，下一个步骤是构建第二个射程指示器并将其附加到监视者上。您可以通过选择“监视者视野范围”角色，右键点击并选择“复制角色”来快速完成此操作。这将呈现给您以下视图。

[![复制射程角色](./resources/062_Range_Actors16.png)](./resources/062_Range_Actors16.png)
*复制射程角色*

这将启动一个“复制角色”窗口，其中有一个“监视者视野范围”的值。

![复制窗口](./resources/062_Range_Actors17.png)
*复制窗口*

复制角色可能会变得非常混乱，因为它们也会克隆许多连接的角色。在这种情况下，射程角色是一个独立的、单一用途的角色，因此您可以放心地进行复制。确保在窗口中选中了“监视者视野范围”的值，然后点击“确定”。

## 翻译 E:\SC2Code\blizzard-tutorials-chinese\docs\New_Tutorials\04_Data_Editor\062_Range_Actors.md.part-2.md

这将在编辑器中将演员复制为“Overseer Sight Range Copy”。突出显示这个新的演员，双击它以更改其属性。在此启动的“Actor Properties”窗口中，将演员的名称设置为“Overseer Sight Facing”，然后点击“Suggest”生成一个ID。确认窗口的数值如下图所示，然后点击“Ok”。

![复制窗口](./resources/062_Range_Actors18.png)
*复制窗口*

突出显示“Overseer Sight Facing”演员，选择其“Arc”字段，并将值更改为90。这个演员现在将只在Overseer前面投射一个四分之一的圆圈，突出显示单位的朝向。突出显示“Sight”字段，右键单击它，导航到Reset to Parent Value ▶︎ \[Core.SCMod\] CActorRange。您可以在下图中看到这个过程的执行。

[![重置Actor Sight字段](./resources/062_Range_Actors19.png)](./resources/062_Range_Actors19.png)
*重置Actor Sight字段*

这已经将此朝向演员的范围与监工标记取消链接。现在，通过选择“Range”字段并将其值设置为8来创建一个新值。这将使您能够区分它和“Overseer Sight Range”指示器。否则，这两个指示器将在相同的范围上绘制并重叠。

最后一步，选择“Icon Tint”字段并双击它以打开一个“Object Values”窗口。点击彩色方框打开颜色选择器。将颜色设置为黄色，或R255 G255 B0，然后点击“Ok”。将Alpha值保持为255，然后点击“Ok”以完成图标色调。

[![选择图标色调](./resources/062_Range_Actors20.png)](./resources/062_Range_Actors20.png)
*选择图标色调*

此时，确认下面构造的演员中的字段。左边显示了“Overseer Sight Range”演员，而右边显示了“Overseer Sight Facing”演员。

![](./resources/062_Range_Actors21.png)
*监工视距范围字段--监工视向字段*

地图现在已完成。正如您所见，监工已经设定了两个单独的范围演员，一个以白色在其视距处绘制指示器，另一个以黄色显示其朝向。测试地图应该显示这些演员在操作中。使用“Test Document”功能启动测试应该可以得到如下图所示的结果。

[![自定义监工范围指示器](./resources/062_Range_Actors22.png)](./resources/062_Range_Actors22.png)
*自定义监工范围指示器*

## 附件

 * [062_Range_Actors_Completed.SC2Map](./maps/062_Range_Actors_Completed.SC2Map)
 * [062_Range_Actors_Start.SC2Map](./maps/062_Range_Actors_Start.SC2Map)

## 翻译 E:\SC2Code\blizzard-tutorials-chinese\docs\New_Tutorials\04_Data_Editor\063_Sound_Actors.md.part-0.md

# 音效演员

音效演员用于传递大部分游戏单位的声音。这包括指令确认、武器开火、死亡哭声、法术效果和建造噪音等内容。游戏中还有其他声音，如音乐和剧情对话，但音效演员处理与游戏玩法相关的系统声音。作为一种演员类型，音效演员可以在下面显示的演员选项卡中找到。

[![Sound Actors Listing](./resources/063_Sound_Actors1.png)](./resources/063_Sound_Actors1.png)  
*音效演员列表*

音效演员实际上并不包含其声音资产，声音资产单独存储在声音数据类型中。因此，您可以将音效演员视为一种声音协调者。它们根据与单位的连接对游戏输入作出反应，然后根据其“事件”字段的指示开始和停止声音。它们有限的能力用于配置其声音。对声音属性（如音调、音量或3D设置）的任何更改通常发生在声音数据中。

有两种基本类型的音效演员用于音效演员层级关系，即SoundOneShot和SoundContinuous。前者用于仅播放一次的声音，而后者用于持续播放的声音。例如，Zerg挖洞的噪音是一种一次播放的声音，而Medivac治疗循环是一种持续播放的声音。

## 音效演员字段

音效演员的字段在下表中详细说明了音效演员本身、一个单位和一个声音资产之间的联系。

| 字段                | 详情                                                                                                                                                                                                                                                                                                                                                                                      |
| -------------------- | ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| 事件               | 设置演员事件。音效演员使用事件来创建自己及其与单位的链接。音效对象的控制也通过事件处理。                                                                                                                                                                                                                                                                                                    |
| 声音                | 设置创建演员时播放的声音。包括声音中存在的任何基本行为，如循环、变化和音量控制。                                                                                                                                                                                                                                                                                                           |
| 声音标志          | 包含一个单个“更新可见性”标志。此标志利用了演员的异步能力。当激活时，声音将对于玩家的可见性状态作出响应。例如，如果一个声音正在播放，当一个单位从玩家视野消失进入战争迷雾时，声音的音量将会逐渐减弱。此标志通常在单位死亡声音上禁用，以便玩家即使单位消失在战争迷雾中，也能听到单位的完整死亡声音。 |
| 主机                 | 确定从主机继承的属性。像位置和高度这样的属性对于任何配置为3D的声音非常重要。                                                                                                                                                                                                                                                                                                                    |
| 主机站点操作 | 站点操作可用于改变声音在3D空间中的位置。                                                                                                                                                                                                                                                                                              |

## 音效演员事件

与音效演员操作相关的事件和消息在下表中详细说明。

| 消息                   | 描述                                                                                                                                               |
| ------------------------- | -------------------------------------------------------------------------------------------------------------------------------------------------------- |
| 创建                    | 创建演员，播放带有指定属性的声音。                                                                                      |
| 销毁                   | 销毁演员，结束声音输出。                                                                                                                 |
| 定时器设置                 | 有时用于在演员创建后播放声音。                                                                                               |
| 声音完成                | 作为一个事件运行，一旦声音播放完成就会触发。通常用于销毁演员。循环声音不会触发这个事件。 |
| 声音添加数字效果 | 使用数字信号处理修改声音。有一些预配置的DSP效果，如ReverbUnderwater和ReverbStoneRoom。           |
| 设置静音           | 静音或取消静音声音。静音的声音会继续播放，但基本上音量为零。                                                               |
| 设置偏移          | 创建偏移，或在声音开始播放之前暂停。                                                                                             |
| 设置暂停          | 暂停或取消暂停声音。暂停的声音输出会停止直到重新开始。                                                                             |
| 设置音调           | 随时间改变声音的音调，使其更高或更低。                                                                                        |
| 设置音量          | 随时间设置声音的音量。                                                                                                                    |

## 演示音效演员

打开本文提供的示例地图。其中显示了一个被几个海军武装士兵围困的蟑螂。应该看起来如下图所示。

[![Sound Actors Listing](./resources/063_Sound_Actors2.png)](./resources/063_Sound_Actors2.png)  
*被围困的蟑螂演示地图*

默认情况下，蟑螂在受到攻击时不会发出任何噪音。测试地图现在将证明这一点。然而，您可以构建一个新的音效演员来更改此行为，使用一些预建资产。转到数据编辑器并打开声音选项卡。找到现有的声音“Roach\_Damaged”，并打开其“声音资产”字段。这将呈现以下视图。

[![Sound Actors Listing](./resources/063_Sound_Actors3.png)](./resources/063_Sound_Actors3.png)  
*声音资产视图*

这里设置了一个自定义声音，以复制一系列zergling死亡声音。列表设置为随机选择并播放作为蟑螂受伤噪音的替代。为了设置该功能，转到演员选项卡，右键单击主视图，然后选择“添加演员”。

[![Creating an Actor](./resources/063_Sound_Actors4.png)](./resources/063_Sound_Actors4.png)  
*创建一个演员*

命名新演员为“Roach Damaged”，然后单击“建议”以生成一个ID。使用“演员类型”下拉菜单选择创建音效演员，如下所示。

![Selecting Sound Actor Creation](./resources/063_Sound_Actors5.png)  
*选择音效演员创建*

将“父级”选为SoundOneShot，因为您希望的行为是音效在受到攻击时只播放一次，然后停止。最终的演员创建窗口将看起来类似于这样。

![Sound Actor Creation Window](./resources/063_Sound_Actors6.png)  
*音效演员创建窗口*

现在突出显示刚刚创建的演员，并找到它的“事件”字段。选择此字段并双击以打开演员事件子编辑器。您将会看到一个预先存在的“SoundDone”事件和一个“Destroy”消息。这是从SoundOneShot基础中继承的，并将导致声音在播放一次后停止或被销毁。在该元素下方右键单击并选择“添加事件”，如下所示。

[![Adding an Event](./resources/063_Sound_Actors7.png)](./resources/063_Sound_Actors7.png)  
*添加事件*

创建后，突出显示新的“ActionDamage”事件并使用下拉菜单将事件的消息类型设置为“Unit Damage”。

[![Selecting Event Type](./resources/063_Sound_Actors8.png)](./resources/063_Sound_Actors8.png)  
*选择事件类型*

## 翻译 E:\SC2Code\blizzard-tutorials-chinese\docs\New_Tutorials\04_Data_Editor\063_Sound_Actors.md.part-1.md

设定“Unit Damage”事件的源名称为“Roach”。然后将消息设置为“Create”。这将与蟑螂建立链接，导致演员在每次蟑螂受伤时被创建和播放。完成的演员事件应该如下图所示。

[![已完成的演员事件](./resources/063_Sound_Actors9.png)](./resources/063_Sound_Actors9.png)
*已完成的演员事件*

点击“确定”保存演员事件，然后返回到主要的数据编辑器视图。声音演员仍然需要与一个声音资产建立连接，因此通过导航到“声音”字段并双击打开它来创建链接。

这将启动一个“对象数值”窗口，您可以在其中设置声音。这时您应该看到以下内容。

[![设置声音资产](./resources/063_Sound_Actors10.png)](./resources/063_Sound_Actors10.png)
*设置声音资产*

选择地图中提供的“Roach Damaged”声音，然后点击“确定”。现在转到“条款”字段并双击打开它。该字段提供一些额外的条款，与演员事件中发现的相同。在这种情况下，这些条款必须在演员创建之前传递。点击+按钮添加一个新条款，然后使用下拉菜单选择“Cap”，如下所示。

[![设置条款](./resources/063_Sound_Actors11.png)](./resources/063_Sound_Actors11.png)
*设置条款*

选择后，将此条款的Cap值设置为2。这将显示如下。

[![已完成的条款](./resources/063_Sound_Actors12.png)](./resources/063_Sound_Actors12.png)
*已完成的条款*

此条款在相同范围内存在的演员数目达到上限前，下一个演员可以被创建。这里的范围是单位资源，即蟑螂。这套设置意味着蟑螂在任何给定时间内最多可以产生两个受伤声音。通过点击“确定”确认这些设置。

地图现在已经完成。声音演员使您能够引入一个新声音到蟑螂的数据中。您可以在下方看到单位数据结构的变化。

![](./resources/063_Sound_Actors13.png)
*旧蟑螂数据结构 - 新蟑螂数据结构*

声音演员通过其事件，特别是“Unit Create”事件，将声音“Roach Damaged”链接到单位数据中，当蟑螂受到伤害时将触发该事件。测试这种行为应在指挥任何海军陆战队员攻击蟑螂时播放这个新声音。请记住，此声音是一段食脑虫之死的哀鸣。使用“测试文档”来看它在游戏中的效果。

[![对蟑螂的新发现同情](./resources/063_Sound_Actors14.png)](./resources/063_Sound_Actors14.png)
*对蟑螂的新发现同情*

## 附件

 * [063_Sound_Actors_Completed.SC2Map](./maps/063_Sound_Actors_Completed.SC2Map)
 * [063_Sound_Actors_Start.SC2Map](./maps/063_Sound_Actors_Start.SC2Map)

## 翻译 E:\SC2Code\blizzard-tutorials-chinese\docs\New_Tutorials\04_Data_Editor\064_Doodad_Actors.md.part-0.md

# Doodad 演员

大多数用户将 doodads 理解为地形编辑器中可用于地图装饰、样式或建造目的的元素集合。在这里，如果您对其有一个更正式、数据导向的定义将会有所帮助。Doodads 是简单的可视对象，您可以直接添加到游戏中。您可以通过称为 Doodad 演员的演员子类型来实现这一点。您可以在下面的图像中看到一些 doodads 的使用情况。

[![Doodads Shaping a Cliff face](./resources/064_Doodad_Actors1.png)](./resources/064_Doodad_Actors1.png)
*Doodads 塑造悬崖*

Doodads 主要是视觉元素。作为游戏对象，它们与单位相区分，因为它们不会参与移动、战斗、技能等方面的任何计算。这种类型旨在提供一种轻量级的方法，只需提供一些次要属性即可向游戏发送模型类型。将演员创建为 doodad 子类型意味着它将直接列在游戏中，在地形编辑器的 Doodads 调色板中找到，准备放置。您可以在下面的图像中看到这一点。

![](./resources/064_Doodad_Actors2.png)
*在地形编辑器中展示 Doodad 演员*

## Doodad 类型

Doodad 演员还被赋予一个子类型，列在它们的“Doodad 类型”字段下。这主要是一个组织工具，可以在创建演员后更改。除了组织，子类型使在 Doodads 调色板上启用了一组筛选器。使用“演员类型” Doodad 和特定“Doodad 类型”进行搜索可以极大地加快在地形编辑器中处理 doodads 的速度。

[![图像](./resources/064_Doodad_Actors3.png)](./resources/064_Doodad_Actors3.png)
*在地形编辑器中的 Doodad 类型筛选器--使用数据编辑器为 Doodad 演员打标签*

右侧视图显示了通过它们的“Doodad 类型”在演员选项卡中组织 doodads。左侧视图显示了这些类型如何作为搜索过滤器在 Doodads 调色板中使用。

## Doodad 演员详细信息

有少量字段允许对 doodad 演员进行修改。鉴于 doodads 的性质，这些主要是视觉修饰符，并在下表中进行了描述。

| 字段               | 详情                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| ------------------ | ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| 艺术模型          | 设置将成为 doodad 的模型。                                                                                                                                                                                                                                                                                                                                                                                                                             |
| 艺术规模          | 允许在 X、Y 和 Z 轴上缩放模型类型。                                                                                                                                                                                                                                                                                                                                                                                                                |
| 随机缩放范围 | 在个体基础上应用一个随机缩放因子到放置的 doodads 上。缩放应用于所有三个轴，并从一个定义的范围中选择。                                                                                                                                                                                                                                                                                                           |
| 雾能见度     | 设置 doodad 在被战争迷雾覆盖时进入的状态。如果您关注性能，这是一个重要的考虑因素。按性能递增的顺序，可能的状态如下。 Visible 会在战争迷雾下保持 doodad 完全活跃。Dimmed 会略微变暗 doodad 并维持所有其他动画。Snapshot 冻结动画但保持可见性。Hidden 完全在战争迷雾下移除 doodad。 |
| 脚印          | 选择 doodad 的路径脚印。doodad 的路径是其主要的逻辑组件。这确定了 doodad 的视觉组件（艺术模型）、在地图上其他游戏对象的行为（如单位移动或放置）之间的交互。                                                                                                                                                                                                       |
| 事件             | 设置 doodad 的演员事件。这处理了 doodad 的基本创建和移除，但也包括声音发射器和动画等等。                                                                                                                                                                                                                                                                                                                            |

## 创建一个 Doodad 演员

通过进入数据编辑器中的演员选项卡来组装一个新的 doodad。如果选项卡尚未打开，您可以通过导航到 + ▶︎ 编辑演员数据 ▶︎ 演员 来打开它。进入后，通过右键单击主视图中的位置并选择“添加演员”来创建一个新演员，如下所示。

[![创建新演员](./resources/064_Doodad_Actors4.png)](./resources/064_Doodad_Actors4.png)
*创建新演员*

这将启动“演员属性”窗口。在此视图中，设置一个名称，然后点击建议以生成一个ID。将“演员类型”设置为 Doodad。在此示例中，演员名称为 Demo Doodad。

![创建 Doodad 演员](./resources/064_Doodad_Actors5.png)
*创建 Doodad 演员*

使用“Doodad 类型”下拉菜单选择 doodad 的组织类型。在演示目的上，您应选择 Prop 类型。这是一种通常用于对人造、非结构物体进行分类的子类型。您可以在下面的图像中看到选择子类型的外观。

![选择 Doodad 类型](./resources/064_Doodad_Actors6.png)
*选择 Doodad 类型*

完成后，您可以点击“确定”以完成创建 doodad 演员。

## 设置 Doodad 演员的字段

Doodad 演员的关键部分是“模型”，所以您现在应该设置它。突出显示新演员以在数据编辑器中查看其字段。移至“模型”字段并双击它以打开编辑窗口，如下所示。

[![Doodad 演员模型选择](./resources/064_Doodad_Actors7.png)](./resources/064_Doodad_Actors7.png)
*Doodad 演员模型选择*

此窗口显示了项目数据中的所有模型资产，以及一些搜索选项。在此处选择所需模型，然后点击“确定”保存选择。在此示例中，您应选择 Colonist Supply Crate。

接下来，移至“事件”字段以设置演员事件。选择此字段并双击以打开演员事件子编辑器，如下所示。

[![Doodad 演员事件默认](./resources/064_Doodad_Actors8.png)](./resources/064_Doodad_Actors8.png)
*Doodad 演员事件默认*

Doodad 演员默认包含声音发射器和动画支持。 “AnimPlay” 消息设置了在 doodad 创建时播放的动画，选择了开始播放的随机动画帧，并将其设置为无限循环。声音发射器开始其播放行为，如其各自声音类型中所设定的那样。如果不需要这些扩展功能，如演示箱子的情况，则可以删除它们。选择每个条目，右键单击，然后选择“删除选择”来执行这一操作。

## 翻译 E:\SC2Code\blizzard-tutorials-chinese\docs\New_Tutorials\04_Data_Editor\064_Doodad_Actors.md.part-1.md

最后，您将需要设置“足迹”字段。该字段允许您从可用或自定义的足迹列表中进行选择，并将其应用于小玩意。然后，在游戏中在小玩意的顶部设置路径，使其具有“足迹”类型中定义的逻辑规则。通过突出显示“足迹”字段并双击以启动下面显示的编辑器窗口来添加足迹。

![设置小玩意足迹](./resources/064_Doodad_Actors9.png)
*设置小玩意足迹*

对于此练习，您应选择尺寸为2x2的足迹。小玩意现在已准备就绪并可用，但仍有一些属性需要考虑设置，包括艺术规模、随机规模范围和雾能见度。已完成的演示小玩意字段如下所示。

[![演示小玩意字段](./resources/064_Doodad_Actors10.png)](./resources/064_Doodad_Actors10.png)
*演示小玩意字段*

## 放置小玩意

要放置您的自定义小玩意，请导航到地形编辑器，然后转到小玩意图层。已完成的小玩意将已添加到小玩意面板，您可以手动查找或使用搜索过滤器，如“小玩意类型”来找到它。您可以按照下面显示的方式使用面板。

![小玩意面板搜索过滤器使用](./resources/064_Doodad_Actors11.png)
*小玩意面板搜索过滤器使用*

在编辑器视图中放置小玩意应会显示其模型和足迹在地图上。请注意，任何比例变化和随机比例变化将在放置模型时发生，并不会反映在面板的预览器中。您可以在下方的图像中看到练习中的自定义小玩意。

[![游戏中的自定义小玩意](./resources/064_Doodad_Actors12.png)](./resources/064_Doodad_Actors12.png)
*游戏中的自定义小玩意*

## 翻译 E:\SC2Code\blizzard-tutorials-chinese\docs\New_Tutorials\04_Data_Editor\065_Event_Macros.md.part-0.md

# 事件宏

与任何逻辑系统一样，角色事件涉及许多常见的流程。在触发器编辑器中，通过将这些重复任务提取到定义中，然后在需要的地方通用地应用这些定义来解决这个问题。这可以节省您大量的时间和精力。事件宏是重用角色事件的相似选项。

宏是一种携带一组事件的角色。然后，通过将其链接到这些角色的“宏”字段中，您可以将宏插入到任意数量的角色中。以这种方式托管宏的效果是将宏的事件合并到主机角色的事件中。共享宏允许其成为一组常见事件的源，作为可重复使用的定义。下面您将看到一个事件宏的典型视图。

[![事件宏列表](./resources/065_Event_Macros1.png)](./resources/065_Event_Macros1.png)
*事件宏列表*

事件宏使处理角色事件更加可管理。将频繁发生的事件分开可以帮助保持项目的组织。事件宏还通过允许您更新单个定义而不是循环浏览一组角色进行更改，从而防止错误混入您的项目。

## 事件宏详细信息

事件宏没有很多可配置元素。尽管它们似乎有许多字段，但其中大多数是它们由于是角色而继承的默认值。当前感兴趣的字段标签为“事件”。调查宏的“事件”字段将启动下面展示的角色事件子编辑器。

[![事件宏列表](./resources/065_Event_Macros2.png)](./resources/065_Event_Macros2.png)
*事件宏事件*

在宏的“事件”字段中定义的元素形成其主要定义。一旦托管，此定义将转移所有事件、术语和消息到主机角色的事件中。值得注意的是，这些事件实际上在主机的“事件”字段中并不可见。

## 演示事件宏

打开本文提供的演示地图。该课程呈现了一组建筑物和火山口中的一些幽灵，如下图所示。

[![演示地图课程](./resources/065_Event_Macros3.png)](./resources/065_Event_Macros3.png)
*演示地图课程*

在这个练习中，您将更改地图以在受到攻击的对象上应用特殊的伤害动画。场景中的每个单位都将获得这个新动画。通过使用事件宏将新行为推送到四种单位类型的情况下，您可以快速实现这一点而无需创建多个定义。

首先转到数据编辑器中的角色选项卡。如果看不到选项卡，请通过导航到 + ▶︎ 编辑角色数据 ▶︎ 角色 来打开。在此处通过右键单击主视图中的位置然后选择“添加角色”来创建一个新角色。这将打开下面显示的窗口。

![创建事件宏](./resources/065_Event_Macros4.png)
*创建事件宏*

将角色的名称设置为“伤害响应宏”，然后点击“建议”生成一个ID。将角色类型设置为事件宏，然后点击“确定”。您将看到以下视图。

[![创建事件宏](./resources/065_Event_Macros5.png)](./resources/065_Event_Macros5.png)
*创建事件宏*

在角色选项卡中突出显示新的宏，然后转到其“事件”字段，然后双击以打开。这将启动角色事件子编辑器。在白色框里右键单击然后选择“添加事件”，如下所示。

[![添加一个角色事件](./resources/065_Event_Macros6.png)](./resources/065_Event_Macros6.png)
*添加一个角色事件*

这将创建一个事件，由旗帜图标表示，以及一个角色消息，由快门图标表示。您可以通过突出显示某个元素然后从最右侧视图中选择其“消息类型”来更改此视图中的任何元素。现在通过突出显示“ActionDamage”事件并使用“消息类型”下拉菜单将其设置为“单位受损”事件。

[![配置角色事件](./resources/065_Event_Macros7.png)](./resources/065_Event_Macros7.png)
*配置角色事件*

突出显示“ActorDamagePhysics”消息并使用下拉菜单将其更改为“设置色调颜色”。这将显示多种子选项，使您可以自定义色调效果。将颜色设置为黄色，或R255 G255 B128，将HDR倍增器设置为4.0，将混合持续时间设置为0.04。这个事件和消息将组合在一起，使角色在被攻击时快速变成明亮的黄色。最后，将消息的标签设置为“DamageResponseColor”，以便您可以轻松地参考。您的事件列表应如下图所示。

[![完成色调事件](./resources/065_Event_Macros8.png)](./resources/065_Event_Macros8.png)
*完成色调事件*

添加另一个类型为“单位受损事件”的事件，并将其消息设置为“定时器设置”。将定时器的持续基值设置为0.12，并将其名称设置为“Damage Response Timer”。

[![完成定时器事件](./resources/065_Event_Macros9.png)](./resources/065_Event_Macros9.png)
*完成定时器事件*

向列表中再添加一个最终事件，并将其设置为“定时器到期”类型。突出显示事件，右键单击它，然后选择“添加条款”。使用下拉菜单将条款设置为“定时器名称”。将名称字段设置为“DamageResponseTimer”，然后将此事件的消息设置为“清除色调颜色”。将消息的属性“淡出持续时间”设置为0.08，标签设置为“DamageResponseColor”。完成的列表应如下所示。

[![完成角色事件](./resources/065_Event_Macros10.png)](./resources/065_Event_Macros10.png)
*完成角色事件*

现在，该宏应产生以下行为。受损时，角色会变成黄色并启动一个定时器。当此定时器到期时，另一个事件将被触发，并由事件术语确认。这将使角色在每次攻击时快速切换颜色，创建一种闪烁效果。闪烁的持续时间大约等于定时器的长度。您现在可以将该宏安装到任何角色中以赋予其这些效果。点击“确定”保存事件并返回到主数据编辑器视图。

## 翻译 E:\SC2Code\blizzard-tutorials-chinese\docs\New_Tutorials\04_Data_Editor\065_Event_Macros.md.part-1.md

找到演员选项卡中的“Bunker”角色，并突出显示其“宏”字段。双击它以启动“对象值”窗口。这将显示演员中已经存在的宏列表。单击绿色的+以添加到列表。这将启动“对象值（数组）”窗口，您可以在其中选择要添加的宏。单击“选择”以获取当前项目中所有“事件宏”演员的列表。选择“伤害响应宏”，然后依次确认这三个窗口。这将显示如下。

[![向演员添加宏](./resources/065_Event_Macros11.png)](./resources/065_Event_Macros11.png)
*向演员添加宏*

现在为“Pylon”，“Forge”和“Ghost”演员重复此过程，以完成该练习。游戏已将事件宏附加到每个单位，因此在演示课程中，每个单位都会在攻击时闪光。您现在可以测试地图，并命令幽灵攻击任何单位，以查看效果。

[![宏照亮伤害](./resources/065_Event_Macros12.png)](./resources/065_Event_Macros12.png)
*宏照亮伤害*

## 附件

* [065_Event_Macros_Start.SC2Map](./maps/065_Event_Macros_Start.SC2Map)
* [065_Event_Macros_Completed.SC2Map](./maps/065_Event_Macros_Completed.SC2Map)

## 翻译 E:\SC2Code\blizzard-tutorials-chinese\docs\New_Tutorials\04_Data_Editor\066_Site_Operations.md


# 站点操作

站点操作是一组修改主角色物理属性的动作。由于这些修改将传播到连接到角色的任何可视化元素，因此站点操作可用于在游戏时修改模型的外观和位置。

站点操作包括基本的平移和旋转，但也延伸到更复杂的控制。您可以使用操作来将对象组合在一起，甚至动态更新对象的属性，模拟独立运动或效果的随机变化。值得注意的是，操作不是互斥的，它们可以以多种方式堆叠和组合。下面的图像显示了站点操作的一些用途。

[![Image](./resources/066_Site_Operations1.png)](./resources/066_Site_Operations1.png)

Terratron 由附件操作构建 -- Thor's Barrage Effect上的随机变化操作

## 创建站点操作

作为一种角色类型，您可以在“数据编辑器”中的角色选项卡下找到站点操作。通过导航至 + ▶ ︎编辑角色数据 ▶ ︎ 角色 来打开此选项卡。

[![导航至数据中的角色](./resources/066_Site_Operations2.png)](./resources/066_Site_Operations2.png)
*导航至数据中的角色*

您可以在角色选项卡中创建站点操作角色，方式与创建任何其他角色一样，右键单击对象列表，然后导航至“添加角色”。

[![创建站点操作角色](./resources/066_Site_Operations3.png)](./resources/066_Site_Operations3.png)
*创建站点操作角色*

这将启动“角色属性”窗口。使用“角色类型”下拉菜单并向下滚动列表以查找站点操作。它们以前缀“站点操作”开头，并通过括号中的子类型进行区分。这种命名约定的一个示例是“站点操作 (2D旋转)”角色类型，表示负责XY平面旋转的2D旋转站点操作。您可以看到下面所示的选择站点操作角色的过程。

![站点操作角色列表](./resources/066_Site_Operations4.png)
*站点操作角色列表*

然后，选择任何站点操作并单击“确定”完成创建角色。

## 应用站点操作

您可以通过适用于任何适用角色的“主站点操作”字段应用站点操作，下面显示了一个例子。

[![站点操作托管字段](./resources/066_Site_Operations5.png)](./resources/066_Site_Operations5.png)
*站点操作托管字段*

双击此字段将打开“对象值”窗口，其中列出了当前托管的站点操作，如下所示。

[![站点操作查看](./resources/066_Site_Operations6.png)](./resources/066_Site_Operations6.png)
*站点操作查看*

在此案例中，“SOpShadow”和“Terran Building Facing”站点操作已安装在此角色上。它们分别代表阴影站点操作和显式旋转站点操作的实例。通过选择“选择”字段，可以添加新的站点操作，这将打开下面的窗口。

[![选择要添加的站点操作](./resources/066_Site_Operations7.png)](./resources/066_Site_Operations7.png)
*选择要添加的站点操作*

此窗口允许您选择站点操作。一旦确定，点击“确定”返回主站点操作查看。在此练习中，请选择“SOpHigherBy5”操作。这将呈现给您以下视图。

[![准备添加的站点操作](./resources/066_Site_Operations8.png)](./resources/066_Site_Operations8.png)
*准备添加的站点操作*

现在，通过点击窗口右侧的绿色“+”按钮将站点操作添加到角色，如下所示。

[![添加到角色的站点操作](./resources/066_Site_Operations9.png)](./resources/066_Site_Operations9.png)
*添加到角色的站点操作*

然后，点击“确定”保存添加并返回到主数据编辑器视图。

## 操作顺序

值得注意的是，站点操作受顺序影响。以不同顺序应用站点操作可能会产生截然不同的影响，或根本没有明显差异。为了帮助您管理这一点，编辑器提供了一个“主站点操作”子编辑器，允许您更改应用操作的顺序。

![站点操作排序控件](./resources/066_Site_Operations10.png)
*站点操作排序控件*

您可以在此窗口的右侧找到用于更改应用站点操作顺序的控件。要使用它们，从列表中选择一个站点操作，然后单击向上或向下箭头按钮将其移动到操作列表中。站点操作将按照此窗口中列出的顺序从上到下依次应用。

为了理解应用站点操作的顺序对结果的影响，可以考虑“局部偏移”和“旋转器”。前者将使一个角色在3D空间中移动一定距离，而后者将使一个角色绕一个点旋转。在这个例子中，这两者将以不同顺序应用于一个“游戏球”角色。以下图片展示了先应用局部偏移的情况。

![先局部偏移，然后旋转器站点操作](./resources/066_Site_Operations11.png)
*先局部偏移，然后旋转器站点操作*

接下来的图片展示了先应用旋转器，然后局部偏移的情况。

![先旋转器，然后局部偏移站点操作](./resources/066_Site_Operations12.png)
*先旋转器，然后局部偏移站点操作*

这里最重要的一点是，尽管应用了相同的操作，但结果却并不相同。以下是这些情况中发生的情况的概述。

  - 请注意，局部偏移向下，相当于球的高度的大约25%。旋转器大约等于90度，或者是四分之一的转向。
  - 先应用局部偏移使球向下偏移，但也偏移了旋转器的轴。这将使旋转轴外移球中心。结果，旋转实际上导致球的位置变化，使其向前跌入地面。球在X轴和Z轴上改变了其旋转和位置。
  - 相反，先应用旋转器使球原地旋转。然后将其向下偏移至地面。这意味着旋转轴仍位于球的中心。在此情况下，球只会看到旋转并改变其Z轴位置。

如上所示，站点操作对其应用顺序的敏感性有时会导致不可预测的结果。应对这种潜在的不可预测性的最好方法要么是仔细规划，要么是尝试组合操作时的反应方式。

## 翻译 E:\SC2Code\blizzard-tutorials-chinese\docs\New_Tutorials\04_Data_Editor\067_Site_Operations_Rundown.md.part-0.md

# 站点运营概述

站点运营代表了您可以对演员应用的大量修改。在您完全掌握它们之前，可能需要一些时间和经验。这是一个关于使用最常用操作的简要指南，以帮助您一路前行。

您会注意到，这份指南与之前的 Editor 元素概述有些不同。这是因为站点运营与编辑器的其他元素不同，它们的应用顺序很重要。重新排列相同一组站点运营可能会产生截然不同的结果。这意味着站点运营在真实环境中可能有些难以定义。本文没有提供每个操作字段和细节的详细说明，而是定义每个操作并展示如何在教程练习中应用它们。这将帮助您了解主演是如何随着覆盖更多站点运营而发生变化的。

打开本文提供的演示地图以开始教程。在里面，您将找到一名站在木板路上的海军陆战队员，如下图所示。

[![演示地图课程](./resources/067_Site_Operations_Rundown1.png)](./resources/067_Site_Operations_Rundown1.png)
*演示地图课程*

移动到数据编辑器，然后转到演员选项卡，开始执行练习的第一步。

## 站点运营（附件）

附件站点运营可以将演员附加到一个单位或另一个演员。通常用于使演员的模型看起来像是相互连接或嫁接在一起。您可以堆叠这种嫁接以创建奇怪的、嵌合体般的单位，这或许是站点运营最具标志性的用途。通过这种方法构建的一个著名示例是暴雪的愚人节恶作剧——Terratron。

![](./resources/067_Site_Operations_Rundown2.png)
*Terratron：由多个星际争霸模型组合而成的机器人*

在尝试理解此操作的操作原理之前，了解一些术语将有所帮助。被附加的演员（承载站点运营的演员）被称为主机。将主机附加到的演员被称为基础。

在创建附件站点运营时，最重要的字段是附件查询。您可以使用此字段设置所使用的附加点类型。下表中会对此进行更详细的描述。将附件站点运营应用于主机将告诉它向任何连接的基础发送附件查询。这会导致主机通过其附件查询设置的附加点类型的实例附加到基础上。然后，该操作将主机的位置和方向设定为基础的附件点位置。

值得注意的是，由于附件点类型数目有限，您会在数据编辑器中找到一组有用的预设附件站点运营。这些通常以 SOpAttach 为前缀命名，并用附件点类型的后缀进行描述。示例包括 SOpAttachHead、SopAttachWeapon 和 SOpAttachCenter。

下表显示了附件站点运营字段的详细说明。

| 字段               | 详情                                                                                                                                                                                                                                                                                                                                                                                                      |
| ------------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------ |
| 附件查询          | 设置附件方法，指定要将主机附加到的附件点。这通过选择“过滤器类型”来设置。此处的选项为“直接”，在此选项中，可以从下拉菜单中指定附件点的引用名称；以及“方法”，在此选项中，可以从“附加方法”数据类型中指定点。您还可以提供后备查询，以防指定方法失败。 |
| 保持位置          | 此标志设置附件的位置保持在其初始计算值不变。                                                                                                                                                                                                                                                                                                                                                         |
| 保持旋转          | 此标志设置附件的旋转保持在其初始计算值不变。                                                                                                                                                                                                                                                                                                                                                         |

## 使用附件操作

本文提供的地图可用于演示附件操作，您可以在单独的海军陆战队员上进行练习。他不会介意。您首先需要为主机演员创建一个模型。您可以通过转到数据编辑器中的模型选项卡，在对象列表中右键单击，然后选择“添加模型”来创建模型。这将启动下图所示的窗口。

![模型创建窗口](./resources/067_Site_Operations_Rundown3.png)
*模型创建窗口*

将模型的“名称”设置为“光模型”，然后点击“建议”以自动生成一个ID。将“模型类型”设置为“通用”，然后点击“确定”。这将创建一个模型对象。移动到其“模型”字段，双击它以启动“对象值”选择窗口。在此窗口中点击“浏览”将启动存档浏览器，如下所示。

[![使用存档浏览器进行模型选择](./resources/067_Site_Operations_Rundown4.png)](./resources/067_Site_Operations_Rundown4.png)
*使用存档浏览器进行模型选择*

使用浏览器的搜索功能查找 Streetlight_01.m3，选择它，然后点击“确定”。再次在选择窗口中点击“确定”，回到主数据编辑器视图。现在，模型资产已链接到模型类型，准备在演员中使用。首先移动到演员选项卡准备演员。在那里，右键单击对象列表，选择“添加演员”。

[![添加演员](./resources/067_Site_Operations_Rundown5.png)](./resources/067_Site_Operations_Rundown5.png)
*添加演员*

选择“添加演员”将启动一个“演员属性”创建窗口。在此窗口中，将“名称”设置为“海军光”，然后点击“建议”以自动生成一个ID。您还应该将“演员类型”设置为“模型”，将“父级”设置为“ModelAddition”。点击“确定”以创建演员。这应该与下图所示的窗口一致。

![模型演员创建窗口](./resources/067_Site_Operations_Rundown6.png)
*模型演员创建窗口*

创建与模型演员同名的模型将自动为您填写“模型”字段，建立链接。现在是时候将附件站点运营添加到这个演员了。方法是移至“主机站点运营”字段，双击它以启动站点运营子编辑器。

[![主机站点操作子编辑器](./resources/067_Site_Operations_Rundown7.png)](./resources/067_Site_Operations_Rundown7.png)
*主机站点操作子编辑器*

点击“选择”按钮将启动下图所示的站点运营选择。

[![选择附件站点运营](./resources/067_Site_Operations_Rundown8.png)](./resources/067_Site_Operations_Rundown8.png)
*选择附件站点运营*

## 翻译 E:\SC2Code\blizzard-tutorials-chinese\docs\New_Tutorials\04_Data_Editor\067_Site_Operations_Rundown.md.part-1.md

在这种情况下，您可以使用预先制作的附件操作之一。以每个附着点类别为目标的 Attachment Query 为前缀的一系列站点操作都包含了一个对单位的特定附着点进行操作的操作。选择 SOPAttachHead 操作，该操作会定位模型头部的附着点。然后点击“确定”返回前一个视图。

![Selected Site Operation](./resources/067_Site_Operations_Rundown9.png)
*选定的站点操作*

站点操作已添加到演员列表中。点击“确定”完成。模型演员现在包含一个自定义的路灯模型，将被嫁接到其基本单位的头部。您现在只需将演员连接到其主机即可。您可以通过演员事件字段来完成此操作。转到“Marine Light”模型演员内的“事件”，双击该字段以打开演员事件子编辑器视图，如下所示。

[![Actor Events View](./resources/067_Site_Operations_Rundown10.png)](./resources/067_Site_Operations_Rundown10.png)
*演员事件视图*

右键单击白色框内，然后选择“添加事件”。使用下拉菜单，将事件的“消息类型”设置为“单位出生”。然后将消息的“消息类型”设置为“创建”，将其“源名称”设置为“Marine”。这样您将会看到以下。

[![Linking Model Actor to Unit](./resources/067_Site_Operations_Rundown11.png)](./resources/067_Site_Operations_Rundown11.png)
*将模型演员链接到单位*

创建此演员事件将使“Marine Light”模型演员链接到“Marine”单位演员在单位创建时。正如之前所述，这将导致“Marine”演员作为基础，“Marine Light”作为主机，SOpAttachHead 作为附着站点操作。现在，“Marine Unit”演员的模型将会被嫁接到“Marine Light”演员的模型在 SOpAttachHead 的 Attachment Query 点。此操作的结果显示在下图中。

![](./resources/067_Site_Operations_Rundown12.png)
*使用附件操作将模型嫁接在一起*

## 站点操作（显式旋转）

显式旋转站点操作可以在主机演员的 x、y 和 z 任意组合上创建旋转。使用两个矢量，Forward 和 Up，来实现这一目标。每个矢量都为旋转提供了不同的基轴，用于在三个基本方向上进行旋转。此操作的细节在下表中列出。

| 字段            | 详情                                                                                                                                                                                                                                                             |
| -------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| Forward       | 为旋转操作提供一个基础旋转轴，可通过 X、Y 和 Z 输入进行选择。您可以将 Forward 矢量想象为从演员向外突出，平行于地面。输入旋转由以下方案控制。   |
|                | \-X: 向右 +X: 向左                                                                                                                                                                                                                                                 |
|                | \-Y: 向前 +Y: 向后                                                                                                                                                                                                                                          |
|                | \-Z: 向下 +Z: 向上                                                                                                                                                                                                                                                    |
|                | 这是一个单位矢量，所有输入都在 1/-1 的比例上进行归一化。这个矢量比另一个选项更常用。                                                                                                                                         |
| Up             | 为旋转操作提供一个基础旋转轴，可通过 X、Y 和 Z 输入进行选择。您可以将 Up 矢量想象为从演员向上突出，就像从地面上升起一样。输入旋转由以下方案控制。 |
|                | \-X: 向右 +X: 向左                                                                                                                                                                                                                                                 |
|                | \-Y: 向下 +Y: 向上                                                                                                                                                                                                                                                    |
|                | \-Z: 向前 +Z: 向后                                                                                                                                                                                                                                          |
|                | 这是一个单位矢量，所有输入都在 1/-1 的比例上进行归一化。通常，此矢量只在横向的模型中使用，并在运动范围内移动。在这种情况下，使用 Forward 矢量的事物可能会倒置。       |
| Hold Position | 此标志设置操作的位置保持在其最初计算的值。                                                                                                                                                                 |
| Hold Rotation | 此标志设置操作的旋转保持在其最初计算的值。                                                                                                                                                                 |

这两个矢量选项通常不会同时使用。混合两个选项将创建一个结果旋转等于从 Up 减去 Forward 的旋转，从根本上说就是在它们的旋转中间找到平衡。

## 使用显式旋转操作

您现在将使用显式旋转操作来重新定位灯光模型。返回到演员标签页，并创建一个“显式旋转”类型的新演员，并命名为“Light Offset”。如下图所示。

![创建显式旋转演员](./resources/067_Site_Operations_Rundown13.png)
*创建显式旋转演员*

通过选择要基于其旋转的矢量类型，然后设置其 x、y 和 z 字段，可以设置精确的旋转角度。可能的矢量字段 Forward 和 Up 如下所示。

[![旋转演员字段](./resources/067_Site_Operations_Rundown14.png)](./resources/067_Site_Operations_Rundown14.png)
*旋转演员字段*

双击 Forward 字段将打开以下视图。

![设置旋转站点操作](./resources/067_Site_Operations_Rundown15.png)
*设置旋转站点操作*

这里所需的旋转是将灯光向左和向后各完整一个单位。您可以通过将 X 和 Y 字段设置为 1 来实现此目标。您现在的操作已经完成，准备添加到模型演员的站点操作列表中。您可以通过转到“Marine Light”中的“主机站点操作”字段，双击打开它来执行此操作。从这里，再次选择“选择”，导航至弹出窗口中的新“Light Offset”操作。选择它，然后点击“确定”。

![](./resources/067_Site_Operations_Rundown16.png)
*添加您的自定义显式旋转站点操作*

这将在站点操作列表中显示，如上所示。然后，点击“确定”完成添加。操作现在已完成，可以进行调查，但还有一个更改您应该进行。转到“缩放最大”字段并打开它。将每个 X、Y 和 Z 值设置为 0.25。对“缩小最小值”字段重复此过程。

[![调整灯柱尺寸](./resources/067_Site_Operations_Rundown17.png)](./resources/067_Site_Operations_Rundown17.png)
*调整灯柱尺寸*

## 翻译 E:\SC2Code\blizzard-tutorials-chinese\docs\New_Tutorials\04_Data_Editor\067_Site_Operations_Rundown.md.part-2.md

在创建时，模型被设置在规模最大值和规模最小值之间。使这两个字段相等将为模型提供恒定的、非随机的缩放。这些数字将规模设置为先前所见的大约四分之一。您可以通过返回到地形编辑器来检查您的进展，那里您应该看到类似下面图片所示的东西。

[![缩放和旋转模型附件](./resources/067_Site_Operations_Rundown18.png)](./resources/067_Site_Operations_Rundown18.png)
*缩放和旋转模型附件*

请注意，现在灯柱的主轴已与模型的头部对齐。

## 现场操作（本地偏移）

本地偏移站点操作允许您更改模型在所有三个基本方向（x、y和z）上的位置。

| 字段            | 详细信息                                                                                                                                                         |
| ----------------- | ----------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| 本地偏移          | 应用一个偏移矢量，以在三个方向上移动角色，X、Y和Z。这个矢量遵循编辑器的基本方向性，如下所示。                                                                 |
|                  | \-X: 右 +X: 左                                                                                                                                                   |
|                  | \-Y: 前进 +Y: 后退                                                                                                                                             |
|                  | \-Z: 向下 +Z: 向上                                                                                                                                               |
| 保持位置           | 此标志设置偏移的位置保持在其最初计算的值上。                                                                                                                       |
| 保持旋转           | 此标志设置偏移的旋转保持在其最初计算的值上。                                                                                                                       |

## 使用本地偏移操作

现在您将使用一个偏移操作对灯具附件的位置进行一些微调。创建一个名为“Light Down”的新角色，类型为“站点操作（本地偏移）”。

![创建本地偏移角色](./resources/067_Site_Operations_Rundown19.png)
*创建本地偏移角色*

移动到您的新角色的本地偏移字段。通过沿着负Z轴偏移它，模型将沿着向下移动到单位内。双击字段进行编辑，并将Z值设置为-0.3。

[![设置偏移角色的字段](./resources/067_Site_Operations_Rundown20.png)](./resources/067_Site_Operations_Rundown20.png)
*设置偏移角色的字段*

与其他操作一样，此站点操作必须添加到基础模型的角色事件中。转到“Marine Light”中的“Host Site Operations”字段，并双击以打开子编辑器视图。然后，点击“选择”并将“Local Down”偏移添加到操作列表中。现在，包含三个不同站点操作的列表应如下图所示。

![添加偏移操作到列表](./resources/067_Site_Operations_Rundown21.png)
*添加偏移操作到列表*

现在是一个好时机来记住操作的顺序很重要，改变它通常会导致不可预测的结果。确认操作顺序是否符合您计划的设计，如上图所示。在这一点上，项目已经完成。一个外部模型已经移植到海洋上，重新定位，缩放和偏移。返回到地形编辑器，并花一点时间欣赏您的设计。

[![物有所值](./resources/067_Site_Operations_Rundown22.png)](./resources/067_Site_Operations_Rundown22.png)
*物有所值*

## 附件

* [067_Site_Operations_Rundown_Completed.SC2Map](./maps/067_Site_Operations_Rundown_Completed.SC2Map)
* [067_Site_Operations_Rundown_Start.SC2Map](./maps/067_Site_Operations_Rundown_Start.SC2Map)

## 翻译 E:\SC2Code\blizzard-tutorials-chinese\docs\New_Tutorials\04_Data_Editor\068_Model_Data_Viewer.md

# 模型数据查看器

数据编辑器中的一些流程需要使用“模型数据”，这些数据是在构建模型资产时设置的结构属性。您可以始终通过检查创建它们的资产来检索这些属性，它们在暴雪艺术工具的发布套件中显示。在许多情况下，这可能有些过多。一个快捷方法是使用剧情编辑器作为检查器。在那里，你会找到一个特殊的模型数据查看器，专门用于此目的。查看器如下图所示。

[![模型数据查看器](./resources/068_Model_Data_Viewer1.png)](./resources/068_Model_Data_Viewer1.png)

*模型数据查看器*

## 启动查看器

您可以通过打开剧情编辑器并导航到对象 ▶︎ 模型数据来找到模型数据查看器，如下所示。

[![打开模型数据查看器](./resources/068_Model_Data_Viewer2.png)](./resources/068_Model_Data_Viewer2.png)

*打开模型数据查看器*

您还可以通过右键单击角色时间轴树中的模型，或者列出当前场景组件的左下角窗格，在弹出菜单中选择“显示模型数据”来打开查看器。

![](./resources/068_Model_Data_Viewer3.png)

*从角色时间轴树打开模型数据查看器*

## 理解查看器

一旦启动，模型数据查看器将填充当前选择的模型类型的数据。

[![剧情编辑器中的模型数据查看器](./resources/068_Model_Data_Viewer4.png)](./resources/068_Model_Data_Viewer4.png)

*剧情编辑器中的模型数据查看器*

在查看器中，您会看到模型数据被拆分并组织成文件夹。每个文件夹包含模型结构类型的详细分解或整个模型数据的概述。这些文件夹遵循下面概述的布局。

  - 单位类型
      - 基本信息
      - 动画序列
      - 几何
      - 材质
      - 附着点
      - 骨骼
      - 灯光
      - 摄像机
      - 物理体
      - 效果
          - 粒子效果
          - 带状物

您会在下表中找到每个文件夹中的信息。

| 字段               | 详细信息                                                                                                                                                                                                                                                 |
| ------------------- | -------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| 基本信息           | 提供模型文件结构和碰撞尺寸的概述。                                                                                                                                                                                                                       |
| 动画序列           | 将每个模型动画分解为列在动画引用名称下的文件夹，包括长度和起始帧。进入每个动画文件夹会显示它们的循环设置、单独的包围球尺寸以及其他几个标志。                                                        |
| 几何               | 包含模型内骨骼、定点、分区和蒙皮骨骼的数量。                                                                                                                                                                                                           |
| 材质               | 分解模型中的每个材质，列出它们的纹理和贴图组合，以及照明信息和任何设置的显示属性标志。还包含每个材质的文件夹，显示任何视差高度或动感模糊数据。                                                                |
| 附着点           | 显示模型上所有可用附着点的列表。每个点都列在其引用名称和附着到的骨骼号下。                                                                                                                                                                            |
| 骨骼               | 通过标识号码和引用名称分解模型中的每个骨骼。每个骨骼也有一个子文件夹，包含关于广告牌、动画和反向运动学的信息。                                                                             |

## 模型数据应用

模型数据查看器中找到的信息的应用因项目而异。

如果项目使用自定义资产，则查看器可以是您确认所有内容加载到引擎中的首选位置。在这里，模型数据与暴雪艺术工具中找到的信息进行比较，检查是否存在任何差异。任何差异可能表明某些组件未正确导出。

在其他情况下，查看器可用于查找引用名称。这些名称在触发器和数据中经常用作标识符。动画序列的引用名称在角色事件中使用，作为“动画属性”，或在动画触发操作中使用，作为“标识符”。附着点的引用名称用于附着点操作和“将角色附着到…” 触发器操作。

## 定位附着点

模型数据查看器在使用剧情编辑器定位附着点时具有特殊用途。您可以通过导航到渲染 ▶︎ 显示几何 ▶︎ 附着点，启用附着点的可见性来执行此操作。

[![显示附着点](./resources/068_Model_Data_Viewer5.png)](./resources/068_Model_Data_Viewer5.png)

*显示附着点*

一旦启用，每个附着点都由叠加在模型上的三角形固体表示。每个三角形表示附着点被发现的位置，并指示附着点面向的方向。下图显示了劫掠者的附着点。

[![附着点基本可视化](./resources/068_Model_Data_Viewer6.png)](./resources/068_Model_Data_Viewer6.png)

*附着点基本可视化*

此可视化展示了附着点的分布和方向，但不提供任何有关查找每个点的引用名称的帮助，以便您可以在编辑器的其他地方使用它们。一些附着点具有有用的名称，但其他一些可能难以解码。

如果打开查看器并导航到附着点文件夹，您可以通过选择正在搜索的点的列表来找到每个单独的附着点。在模型数据查看器中突出显示附着点后，剧情编辑器的主视图中的附着点将变得明亮绿色并开始闪烁。如下图所示。

![](./resources/068_Model_Data_Viewer7.png)

*使用模型数据查看器突出显示的附着点*

这种效果在运动中更加显著，但上图仍然显示，所选的附着点更亮且更大。在这种情况下，该方法已识别出 Ref\_Hardpoint，单单通过引用名称难以定位的附着点。

## 翻译 E:\SC2Code\blizzard-tutorials-chinese\docs\New_Tutorials\04_Data_Editor\070_Click_Response_Behavior.md.part-0.md

# 点击响应行为

点击响应行为是应用于玩家点击其托管单位时产生效果的一种行为。这是一种在星际争霸的数据依赖中只使用一次的神秘行为，位于每个地图瓦片组的本地野生生物，也就是小动物。如果您还不知道，在星际争霸和类似的Craft游戏中，小动物在被重复点击后会展现一些自发行为。如果您还没有体验过这种乐趣，那么现在测试这种行为绝对是值得投入时间的一种方式。

[![点击一个小动物30次](./resources/070_Click_Response_Behavior1.png)](./resources/070_Click_Response_Behavior1.png)
*点击一个小动物30次*

尽管它缺乏传统用途，但点击响应行为显示了玩家输入和数据效果之间有趣的直接关系。值得深入研究。

## 演示点击响应行为

打开本文提供的演示地图。在那里，你会发现一个小型的异虫基地，外面漂浮着一群毒刺。如下所示。

[![演示地图示例](./resources/070_Click_Response_Behavior2.png)](./resources/070_Click_Response_Behavior2.png)
*演示地图示例*

这个地图已经配置好，允许玩家从孵化场免费并加速产生毒刺。您将利用这一点添加一个自定义的点击响应行为，经过一系列的点击后摧毁毒刺。

开始组装这种行为，通过转到数据编辑器并导航到行为选项卡。如果选项卡还未打开，您可以通过导航到 + ▶︎ 编辑游戏数据 ▶︎ 行为 来打开它。右键单击主行为窗口内部，然后选择“添加行为”。如下图所示。

[![创建一个行为](./resources/070_Click_Response_Behavior3.png)](./resources/070_Click_Response_Behavior3.png)
*创建一个行为*

在行为创建窗口中，将名称设置为“毒刺销毁”，然后单击“建议”以生成一个ID。现在将“行为类型”设置为“点击响应”。完成后的创建窗口应该如下图所示。

![点击响应行为创建](./resources/070_Click_Response_Behavior4.png)
*点击响应行为创建*

单击“确定”以完成创建，并返回主数据编辑器屏幕。

## 设置行为字段

创建了行为后，选择它以编辑其字段。首先，移动到“计数”字段，您将在那里设置应用该行为所需的点击次数。双击该字段以启动“对象值”窗口，并将“计数”值设置为5，如下所示。

[![设置行为点击计数](./resources/070_Click_Response_Behavior5.png)](./resources/070_Click_Response_Behavior5.png)
*设置行为点击计数*

接下来，移动到“计数延迟”字段。双击该字段以启动另一个“对象值”窗口，并将其值设置为0.5。这将设置在点击之间运行的计时器。如果超过此值，点击计数将被重置。如果行为需要在正常使用过程中防止意外触发，这可能很有用。

[![设置行为计数延迟](./resources/070_Click_Response_Behavior6.png)](./resources/070_Click_Response_Behavior6.png)
*设置行为计数延迟*

现在移动到“计数效果”字段，选中它，并双击以启动编辑窗口。此字段将设置响应点击触发的效果。这是一个不错的位置，以便以后可以回来进行实验，但现在请选择“自杀”。这将使单位在重复点击后被移除。

[![设置点击响应效果](./resources/070_Click_Response_Behavior7.png)](./resources/070_Click_Response_Behavior7.png)
*设置点击响应效果*

现在选择“确定”以完成行为的构建。完成的字段应如下图所示。

![完成的行为字段](./resources/070_Click_Response_Behavior8.png)
*完成的行为字段*

## 应用点击响应行为

行为现在已经完全准备就绪，可以与游戏玩法相连接。这种行为类型的一个很好的特性是，您可以直接将其插入到一个单位中，这样设置就非常容易。这是明智的，因为这种行为授予了直接响应玩家输入的效果，所以行为最自然的位置是在单位本身内部。通过导航到单位选项卡或通过 + ▶︎ 编辑游戏数据 ▶︎ 单位 打开它。从这里，选择“毒刺”，并移动到它的“行为”字段。

[![毒刺行为字段](./resources/070_Click_Response_Behavior9.png)](./resources/070_Click_Response_Behavior9.png)
*毒刺行为字段*

双击“行为”字段以打开“对象值”窗口。右键单击“行为”框内部，然后选择“添加数值”。这将向单位添加一个空白行为，如下所示。

[![添加毒刺行为](./resources/070_Click_Response_Behavior10.png)](./resources/070_Click_Response_Behavior10.png)
*添加毒刺行为*

创建后，突出显示新值，并使用窗口的搜索功能或滚动条找到“毒刺销毁”行为。

[![设定毒刺销毁行为](./resources/070_Click_Response_Behavior11.png)](./resources/070_Click_Response_Behavior11.png)
*设定毒刺销毁行为*

单击“确定”以选择行为。此时，您还需要对单位进行最后更改。默认情况下，单位不会对玩家点击做出数据事件响应。它们可能可以被点击并在游戏视图中使用，但在数据方面不会产生事件信号。为了纠正这一点，突出显示“毒刺”，并导航到其“标志”字段。双击该字段以打开它，然后移动到“无法被点击”标志并取消选择它。

[![允许点击毒刺](./resources/070_Click_Response_Behavior12.png)](./resources/070_Click_Response_Behavior12.png)
*允许点击毒刺*

单击“确定”以返回主数据编辑器视图。现在地图已经完成，您可以运行“测试文档”功能。如果检查地图中的一个毒刺，您将发现它们现在带有一个行为状态标记，如下所示。

[![带有毒刺销毁行为的毒刺](./resources/070_Click_Response_Behavior13.png)](./resources/070_Click_Response_Behavior13.png)
*带有毒刺销毁行为的毒刺*

点击这个毒刺五次将展示这种行为的设计。

## 翻译 E:\SC2Code\blizzard-tutorials-chinese\docs\New_Tutorials\04_Data_Editor\070_Click_Response_Behavior.md.part-1.md

[![Mutalisk Click Response Effect](./resources/070_Click_Response_Behavior14.png)](./resources/070_Click_Response_Behavior14.png)
*Mutalisk 点击响应效果*

## 附件

 * [070_Click_Response_Behavior_Start.SC2Map](./maps/070_Click_Response_Behavior_Start.SC2Map)
 * [070_Click_Response_Behavior_Completed.SC2Map](./maps/070_Click_Response_Behavior_Completed.SC2Map)

## 翻译 E:\SC2Code\blizzard-tutorials-chinese\docs\New_Tutorials\04_Data_Editor\071_Validators.md

# 验证器

验证器进行测试。虽然它们本身是一种数据类型，但它们的目的是连接到其他数据类型并执行测试，检查语句的真假。根据结果，托管数据类型将做出选择，并相应地采取某些操作。因此，验证器以一种类似条件控制触发器的方式控制数据。然而，验证器的应用非常独特，它们有广泛的用途，从构建游戏对象到控制人工智能。

## 验证器详情

您如何应用验证器取决于验证器的类型以及验证器将要使用的托管类型。有许多类型的验证器可用，它们可以在效果、行为、能力和角色中使用，每次承担略微不同的角色。要了解这些多样化配置的感觉，最好从查看现有数据库中它们的许多用例开始。您可以通过导航到 + ▶︎ 编辑游戏数据 ▶︎ 验证器，在数据编辑器中找到验证器，如下所示。

[![导航到数据中的验证器](./resources/071_Validators1.png)](./resources/071_Validators1.png)
*导航到数据中的验证器*

这将启动验证器选项卡。

[![验证器选项卡清单](./resources/071_Validators2.png)](./resources/071_Validators2.png)
*验证器选项卡清单*

在此视图中，所有验证器按其验证器名称、来源、\# 和验证器类型进行组织。您会看到验证器通常具有类似句子片段的名称。示例包括“威胁蝙蝠人”，“是凤凰”和“可以冲锋”。这反映了验证器插入其他内容并进行测试的事实。当用其托管方的术语来表述时，这些名称更有意义，如“这个斩杀者可以冲锋吗？”或“这个单位是凤凰吗？”因此，验证器的名称可以给出有关其最终用途的线索。在创建自定义验证器时，这是一种很好的模仿风格。

从验证器选项卡中，在主编辑器视图中突出显示“施法者未攻击”验证器，以显示其字段，如下所示。

[![验证器字段视图](./resources/071_Validators3.png)](./resources/071_Validators3.png)
*验证器字段视图*

这个“施法者未攻击”验证器是一个单位命令队列验证器。该类型测试玩家是否已命令单位使用某个能力。选择了验证器后，右侧视图将显示启用和支持此测试的字段。大多数验证器字段是特定类型的，但检查典型验证器的构成将帮助您了解如何拆分它们。单位命令队列验证器有三个主要字段，如下表所示。

| 字段         | 详情                                                                                                |
| ------------ | ---------------------------------------------------------------------------------------------------- |
| 能力         | 设置要测试的能力。                                                                                   |
| 查找         | 检查能力的状态。启用表示正在发生，禁用表示未发生。                                                  |
| 单位 - 值    | 设置验证器要测试的单位。                                                                             |

对于您正在检查的验证器，被测试的能力是攻击，查找状态为禁用，单位 - 值为施法者或使用该能力的用户。这些将一起检查单位当前是否未使用攻击能力，这由其名称“施法者未攻击”清晰覆盖。

## 验证器应用

验证器在效果、行为和能力中起作用。要将验证器应用于这些数据类型之一，您可以导航到其字段“验证器”，并双击启动“对象值”窗口。在那里，单击绿色 + 以添加新验证器。这将触发一个新的“对象值（数组）”窗口，在那里选择验证器。此过程应该如下图所示。

[![应用验证器](./resources/071_Validators4.png)](./resources/071_Validators4.png)
*应用验证器*

对于效果，验证器用于测试是否应用效果。此测试将在每种效果类型的常规应用时间发生。如果验证器返回false，则效果不会生效。如果返回true，则效果将继续进行。下面是一个效果验证器的示例。

[![效果验证器](./resources/071_Validators5.png)](./resources/071_Validators5.png)
*效果验证器*

在这里，“MULE -- 修理”效果具有一组五个验证器。例如，如果一个单位正在进行瞬间传送，那么第一个验证器将失败，导致效果不会应用。在这种情况下，每个验证器必须被发现为真，才能使效果生效。

在行为中，验证器允许您基于测试的响应而禁用或完全移除行为。下面是一个示例。

[![行为验证器](./resources/071_Validators6.png)](./resources/071_Validators6.png)
*行为验证器*

验证器被分为验证器（禁用）和验证器（移除）。每种情况将在验证器失败时对行为应用其特定的操作。对于验证器（禁用），验证器测试的错误结果将导致行为被禁用，但仍保留在单位中以供进一步测试。对于验证器（移除），错误的测试将导致行为永久从单位中去除。在这个示例中，当单位耗尽能量时，“Ghost -- Cloak”将被移除。对于下一个隐形状态，该行为将需要通过另一个“添加行为”效果重新应用。

## 翻译 E:\SC2Code\blizzard-tutorials-chinese\docs\New_Tutorials\04_Data_Editor\072_Validators_Rundown.md.part-0.md

# 验证器概述

本文介绍了一些不同类型的验证器的分类情况。每个部分描述了它的验证器的各个字段，同时提供了一些关于其用途和应用的详细信息。

## 合并

合并验证器将一组验证器连接在一起。虽然“验证器”字段通常支持多个验证器，但像这样将它们组合在一起可以成为组织和清晰的有用工具。合并验证器可以通过反复将合并验证器插入自身来无限序列化。

| 字段           | 详细信息                                                                                                                                                                                                                         |
| -------------- | ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| 类型           | 选择术语的AND或OR组合。AND组合要求每个验证器都为真才能使组合验证器为真。相比之下，只要其中一个验证器为真，OR组合就为真。                                                                             |
| 合并           | 设置要合并的验证器。这些验证器可以包含另一个合并验证器。                                                                                                                                                                        |
| 反转           | 反转测试结果，任何真结果都会显示为假，反之亦然。这也被称为NOT运算符。                                                                                                                                                           |
| 结果 - 失败    | 在失败时设置要分发的错误消息。                                                                                                                                                                                                    |

您可以在下面看到一个合并验证器的示例。

[![合并验证器示例](./resources/072_Validators_Rundown1.png)](./resources/072_Validators_Rundown1.png)
*合并验证器示例*

在这里，三个单独的验证器被合并，包括Caster Not Dead、Energy Not Full Caster和Not Dead。您可以使用对象浏览器和数据导航器详细查看此链接，如下图所示。

[![合并验证器链接视图](./resources/072_Validators_Rundown2.png)](./resources/072_Validators_Rundown2.png)
*合并验证器链接视图*

需要注意的是，这些可视化效果只会显示单个层级的组合。如果合并验证器被序列化，您必须选择任何额外级别的合并验证器才能看到其组成验证器。

## 枚举区域

枚举区域验证器通过计算区域中的对象数量，然后将其数量与测试值进行比较来执行测试。根据此测试的结果，验证器将得出真或假。它可以计算一般对象的数量，也可以仅计算测试为某个验证器的对象的数量。

| 字段           | 详细信息                                                                                                                                                                                                                               |
| -------------- | ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| 区域           | 定义要搜索的区域列表。您还可以为每个区域定义一个验证器，该验证器将导致搜索仅计算具有该验证器的对象。如果在任何区域中未设置任何验证器，结果将是简单的单位计数。                                                                   |
| 比较           | 定义用于将位于区域中的对象数量与计数进行比较的运算符。                                                                                                                                                                                  |
| 计数           | 设置要将位于区域中的对象与之进行比较的测试值。                                                                                                                                                                                            |
| 位置           | 检查能力的状态。已启用表示发生中，已禁用表示未发生。                                                                                                                                                                                     |
| 搜索过滤器     | 设置在哪个地图上创建和搜索区域。                                                                                                                                                                                                         |
| 搜索标志       | 设置一些选项标志。通过单位半径扩展将按单位半径值扩展该区域。相同悬崖级别将仅搜索与验证器宿主共享相同悬崖级别的单位。                                                                                                                     |

激活后，枚举区域验证器会在位置创建其区域。然后，它会计算有多少对象符合其区域内的条件，无论是简单地存在还是具有已定义的验证器。然后，将该值与比较定义的运算符以Count为基准进行比较。如果比较成功，则返回true，否则返回false。您可以在下面看到一个正在构建枚举区域区域字段的示例。

[![枚举区域搜索区域](./resources/072_Validators_Rundown3.png)](./resources/072_Validators_Rundown3.png)
*枚举区域搜索区域*

## 函数

函数验证器允许您构建受控的验证器序列。序列的每个步骤都会测试一个验证器，然后返回结果或继续进行下一个测试。函数验证器中可以包含无限数量的术语，每个测试都可以返回几种不同的唯一结果类型。这使其与其他条件验证器Combine有所区别，后者必须序列化才能超过两个术语，并且每个测试只能返回简单的true或false结果。函数验证器通常用于构建广泛的AI程序。

函数验证器在子编辑器视图中构建，您可以通过Line字段访问该视图。函数验证器按照行索引的顺序逐行进行测试，从上到下移动。每个测试都会检查其行中设置的验证器是否为true。然后，根据验证器所属的五个字段中的任何一个，将采取一种操作。下面显示了一个函数验证器的示例。

[![函数验证器构成](./resources/072_Validators_Rundown4.png)](./resources/072_Validators_Rundown4.png)
*函数验证器构成*

在这种情况下，首先对Caster Force Unburrow进行测试。如果该验证器为真，则函数验证器返回失败并结束。如果验证器为假，则执行下一行。接下来，Index为1的行测试Tactical Burrow Hostile Search Empty是否为真。这恰好是一个枚举区域验证器。从中获得的真结果将导致验证器返回Ignored。这将结束函数验证器。如果结果为假，将执行下一行。此过程将一直持续到索引用尽。显然，该验证器可以提供非常强大的结果概要。下表显示了各个字段的详细分解。

| 字段           | 详细信息                                                                                                                                                                                                             |
| -------------- | ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| Line           | 按行进行验证器测试。有五种可能的返回结果：失败、已忽略、返回、成功和测试。下面所描述的Break提供了另一个控制选项。                                                              |
| Break          | 一旦达到，停止验证器。                                                                                                                                                                                                 |
| 失败           | 如果所选验证器为真，则对整体函数验证器返回失败并退出测试。这还会显示已设置的任何错误消息。                                                                         |
| 已忽略         | 如果所选验证器为真，则对整体函数验证器返回失败并退出测试。这不会显示任何错误消息。                                                                                |
| 返回           | 返回与所选验证器相同的True或False结果。                                                                                                                                                                                  |
| 成功           | 如果所选验证器为真，则对整体函数验证器返回True并退出测试。                                                                                                      |
| 测试           | 如果所选验证器返回为真，则将跳过该行中的其他验证器。这可以与额外的失败、已忽略、返回或成功验证器一起使用，以进行对象的前期测试。                        |
| 结果 - 失败    | 选择要在失败时显示的错误消息。                                                                                                                                                                                            |

## 位置范围

位置范围验证两个对象之间的距离。根据该范围是否满足测试值，会返回一个真或假值。下面显示了一个位置范围验证器的示例。

## 翻译 E:\SC2Code\blizzard-tutorials-chinese\docs\New_Tutorials\04_Data_Editor\072_Validators_Rundown.md.part-1.md

这是一个Markdown文件，将其翻译为中文，不要修改任何现有的Markdown命令：

[![位置范围验证器](./resources/072_Validators_Rundown5.png)](./resources/072_Validators_Rundown5.png)
*位置范围验证器*

| 字段              | 详细信息                                                                    |
| ----------------- | ------------------------------------------------------------------------ |
| 范围             | 使用比较运算符设置要测试的距离。               |
| 比较           | 定义用于比较一个对象到另一个对象的范围的运算符。 |
| 位置          | 设置测量的起始点。                                 |
| 值 - 值     | 设置测量的结束点。                                      |
| 结果 -- 失败 | 设置失败时显示的错误消息。                       |

## 玩家要求

玩家要求验证器测试玩家某一特定要求的状态。

[![玩家要求验证器](./resources/072_Validators_Rundown6.png)](./resources/072_Validators_Rundown6.png)
*玩家要求验证器*

| 字段               | 详细信息                                                                                                                                                                                                                                                                                                           |
| ------------------- | ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| 值               | 设置要测试的要求。                                                                                                                                                                                                                                                                                |
| 查找                | 选择如何对单位进行测试。启用表示识别为所选单位类型的单位将返回为True，而未被识别的将返回为False。禁用表示识别为所选单位类型的单位将返回为False，未被识别的将返回为True。 |
| 玩家 - 值      | 指定验证器将定位的玩家。                                                                                                                                                                                                                                                              |
| 结果 -- 无玩家 | 选择如果未设置或未找到玩家则要分发的错误消息。                                                                                                                                                                                                                                      |

## 单位类型

单位类型验证器测试单位是否为指定类型。您可以在以下看到单位类型验证器的一个示例。

[![单位类型验证器](./resources/072_Validators_Rundown7.png)](./resources/072_Validators_Rundown7.png)
*单位类型验证器*

| 字段            | 详细信息                                                                                                                                                                                                                                                                                                                  |
| ---------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------ |
| 单位 - 值     | 设置要测试的单位。                                                                                                                                                                                                                                                                                              |
| 值            | 设置要将单位 - 值测试为的单位类型。                                                                                                                                                                                                                                                       |
| 查找             | 选择如何对单位进行测试。启用表示识别为所选单位类型的单位将返回为True，而未被识别的将返回为False。禁用表示识别为所选单位类型的单位将返回为False，未被识别的将返回为True。 |
| 结果 - 失败 | 选择失败时要分发的错误消息。                                                                                                                                                                                                                                                                  |

## 单位过滤器

单位过滤器验证器检查单位是否包含指定的过滤器。

[![单位过滤器验证器](./resources/072_Validators_Rundown8.png)](./resources/072_Validators_Rundown8.png)
*单位过滤器验证器*

| 字段            | 详细信息                                                     |
| ---------------- | ----------------------------------------------------------- |
| 过滤器          | 设置要测试的过滤器。                          |
| 单位 - 值     | 设置将要检查其过滤器状态的单位。 |
| 结果 - 失败 | 设置失败时显示的错误消息。          |

过滤器选择可以针对单位的状态和联盟状态，如下所示。

![过滤器选择视图](./resources/072_Validators_Rundown9.png)
*过滤器选择视图*

## 单位比较行为计数

单位比较行为计数验证器将单位的行为堆栈计数与测试值进行比较。根据比较结果，将返回True或False值。

[![单位比较行为计数验证器](./resources/072_Validators_Rundown10.png)](./resources/072_Validators_Rundown10.png)
*单位比较行为计数验证器*

| 字段            | 详细信息                                                                        |
| ---------------- | ------------------------------------------------------------------------------ |
| 行为         | 设置要测试的行为。                                            |
| 比较          | 定义与测试值比较行为堆栈计数的运算符。 |
| 值            | 设置要将行为堆栈计数与之比较的测试值。              |
| 单位 - 值     | 设置进行行为测试的单位。                                   |
| 结果 - 失败 | 设置失败时显示的错误消息。                             |

您应注意，通常认为单位在堆栈计数为1时具有行为。因此，此验证器通常用于测试单位是否可以应用某个行为，或者该单位是否已经拥有该行为。在这种情况下，测试检查行为堆栈是否等于测试值0。如果返回True，则表示单位当前未拥有该行为，可以应用。如果返回False，则表示单位已经具有该行为，并且不应接收额外的堆栈，因为设计不支持这种情况。

## 翻译 E:\SC2Code\blizzard-tutorials-chinese\docs\New_Tutorials\04_Data_Editor\073_Footprints.md

# 足迹

足迹将路径应用于其他对象。以雕像小玩意为例。为了在编辑器中运行，它必须防止单位通过它并固定模型。通过将足迹附加到小玩意上，可以防止这种情况发生，从而在雕像区域周围创建一种路径阻塞器。您可以在下面的图片中看到这一点。

[![Doodad足迹](./resources/073_Footprints1.png)](./resources/073_Footprints1.png)
*Doodad足迹*

小玩意将一个网格区域划分开，单位路径和建筑均无法在此发生。根据足迹在单位网格上所占据的路径面积确定其类型。此足迹为3×3，每个轴向均为三个单位。您可以移动到数据编辑器并导航到+ ▶︎ 编辑游戏数据 ▶︎ 足迹来查看和编辑足迹，如下所示。

[![在数据中导航到足迹](./resources/073_Footprints2.png)](./resources/073_Footprints2.png)
*在数据中导航到足迹*

## 足迹详情

在编辑器中选择一个足迹将显示其字段在右侧子视图中以及其连接的对象在对象资源管理器中。通过“足迹”字段将足迹连接到一个演员，并通过“路径足迹”字段将其连接到一个单位。需要注意的是，当涉及单位时，许多建筑都有自己的足迹，但实际上可移动的地面单位则通过其自己的系统处理路径。下面是足迹选项卡的图像和其关键字段的细分。

[![足迹数据字段](./resources/073_Footprints3.png)](./resources/073_Footprints3.png)
*足迹数据字段*

| 字段            | 详情                                                                                                                                                                                                                          |
| --------------- | --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| 足迹组         | 在编辑器内设置索引类别。大多数足迹位于默认的Generic或空白分组下。一些用于可破坏物体和不常见形状的足迹位于SpecificDoodads分组下。 |
| 层级           | 确定应用于足迹的路径组成。这可以通过足迹编辑器进行修改。                                                                                                      |
| 形状           | 确定足迹的可见形状。这可以使用足迹编辑器进行修改。                                                                                                          |

## 翻译 E:\SC2Code\blizzard-tutorials-chinese\docs\New_Tutorials\04_Data_Editor\074_Custom_Footprints.md.part-0.md

# 自定义足迹

编辑器提供了一系列经常被重新利用以创建新对象、演员和单位的足迹。尽管如此，了解如何创建自定义足迹仍然是有用的。这将允许您创建具有自定义形状和路径的足迹设计，用于非常具体的应用场景。

## 路径格网

足迹对地图的路径逻辑应用于地图单位。很难将StarCraft引擎的单位可视化，但幸运的是编辑器提供了一些实用工具来帮助您。首先，通过转到“视图 ▶︎ 显示路径”并选中每个类别来启用所有路径层可见性选项，如下所示。然后转到“视图 ▶︎ 显示放置格网”并启用所有选项。

[![打开可见性选项](./resources/074_Custom_Footprints1.png)](./resources/074_Custom_Footprints1.png)
*打开可见性选项*

现在您应该能够在编辑器中看到完整的路径格网。绿色表示可通行区域，而红色显示不可通行区域。格网中的方块每个代表一个1x1单位区域，与创建地图时使用的单位比例相同。这意味着96x96地图等同于96平方单位的单位格网比例。足迹必须遵守单位格网。这使得它非常有用于确定放置和理解特定自定义足迹的要求。您可以在下面的图像中看到这个格网。

[![足迹格网可见性](./resources/074_Custom_Footprints2.png)](./resources/074_Custom_Footprints2.png)
*足迹格网可见性*

## 创建足迹

要创建一个足迹，首先切换到数据编辑器。如果“足迹”选项卡尚未打开，请通过转到+ ▶︎ 编辑游戏数据 ▶︎ 足迹来添加它。右键单击主数据视图，并选择“添加足迹”。这将呈现以下视图。

[![在数据中添加足迹](./resources/074_Custom_Footprints3.png)](./resources/074_Custom_Footprints3.png)
*在数据中添加足迹*

这将启动“足迹属性”窗口。在这个练习中，您将创建一个八角形的自定义足迹。在弹出窗口的“名称”字段中输入“八角形3x3”，点击“建议”生成ID，然后点击“确定”。

![足迹属性窗口](./resources/074_Custom_Footprints4.png)
*足迹属性窗口*

一旦回到主数据编辑器视图，转到新创建的足迹的“层”字段，并双击以启动足迹编辑器。

[![启动足迹编辑器](./resources/074_Custom_Footprints5.png)](./resources/074_Custom_Footprints5.png)
*启动足迹编辑器*

## 足迹编辑器

[![编辑器视图](./resources/074_Custom_Footprints6.png)](./resources/074_Custom_Footprints6.png)
*编辑器视图*

足迹编辑器提供了一个专用工具，用于创建足迹并控制它们的路径和放置逻辑。它有点偏门，但您可以从“足迹”数据类型的两个字段“层”和“形状”中访问它。选中这两个字段中的任何一个将启动相同的编辑器。这是因为足迹编辑器将单个足迹对象的数据从层和形状字段填充到自身。请注意，手动编辑足迹数据并避免使用此子编辑器仍然是一个选择。但是，由于足迹的可视化本质，使用足迹编辑器通常更直观。子编辑器的属性在下表中有详细说明。

| 属性       | 效果                                                                                                                                                                                                                                                                                                                                                           |
| ---------- | ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| 大小       | 设置足迹的单位格网大小。                                                                                                                                                                                                                                                                                                                        |
| 值         | 选择要应用的路径类型。选项包括无、无建筑、不可通行地形、地面和悬崖。“无”设置是地图上所有单位的默认值。                                                                                                                                                                                  |
| 刷子大小   | 设置单元中的路径应用区域。设置包括三角形：1单元，子单元：4单元和单元：16单元。                                                                                                                                                                                                                                            |
| 分辨率     | 设置单个单位内可以通过的单元数。设置包括大型（每单元4个单元）、中等（每单元16个单元）、小型（每单元64个单元）和微小（每单元256个单元）。                                                                                                                                                              |
| 层         | 设置正在更改的逻辑层。选项包括路径、放置应用和放置检查。将在本文后面详细介绍这些内容。                                                                                                                                                                                                   |
| 单元       | 选择要测试足迹大小的预览模型。模型会列出单位路径，而“朝向”和“比例”允许您更改模型的属性。                                                                                                                                                                                                                 |
| 复杂度     | 足迹的性能成本的估计。增加分辨率、使用多种路径类型和创建不同几何图形是主要考虑因素。                                                                                                                                                                                                   |
| 类型       | 从标准、覆盖或持久性中选择足迹的主要行为。标准覆盖是最常见的，会改变相同高度的悬崖上的路径。覆盖足迹会改变非地面路径，很少使用。持久性足迹在游戏过程中无法移除，只能修改。它们通常与桥梁对象一起使用。 |

在子编辑器中，路径是分为三个单独的层：路径、放置应用和放置检查。路径允许确定路径的大小、形状和类型。这是地形编辑器的网格视图中可见的图层。值得一提的是，单元内支持多种路径类型。这并不是显而易见的，因为子编辑器只会显示第一个涂色。设计了一个路径足迹后，您可能会发现需要关闭编辑器并重新加载地图，才能在地形编辑器中显示任何更新后的足迹。

放置层“放置应用”和“放置检查”影响特定放置标志的应用。这两者都允许您设置四个不同层次的选项。放置应用会将这些选项应用到其足迹内的地图区域。放置检查要求选项存在于设置的区域中，否则拥有该足迹的对象将无法创建。请注意，为了将选项层绘制在足迹上，必须首先使用“定义集”进行设置。单击此按钮将启动“足迹集定义”窗口。请注意，确保使用窗口顶部的下拉菜单来选择正确的设置层。下面显示了这个层的典型视图。

![](./resources/074_Custom_Footprints7.png)
*放置应用层和定义弹出窗口*

## 翻译 E:\SC2Code\blizzard-tutorials-chinese\docs\New_Tutorials\04_Data_Editor\074_Custom_Footprints.md.part-1.md

现在，返回到“八角形 3x3”的地形版图，并使用路径设置“禁止建筑物”和“无法通行的地形”来绘制一个八角形的地形版图。作为提示，您应该使用小分辨率并使三角形的切口基准长度为六个单元。结果应如下图片所示。

[![Hexagon 3x3 Pathing](./resources/074_Custom_Footprints8.png)](./resources/074_Custom_Footprints8.png)
*六角形 3x3 地形版图*

## 将地形版图链接到对象

现在您已经创建了自定义地形版图，您将其放置在一个装饰物中进行测试。在数据编辑器中导航到角色选项卡，选择“冰世界大岩石”装饰物。突出显示“地形版图”字段，双击以打开“对象数值”窗口。找到您的“八角形 3x3”地形版图，选择它，然后点击“确定”。这应该让您获得以下结果。

[![Adding Footprint in Data](./resources/074_Custom_Footprints9.png)](./resources/074_Custom_Footprints9.png)
*在数据中添加地形版图*

在地形编辑器中测试装饰物应该会得到一个更新的地形版图，与装饰物的默认方形 3x3 不同。在装饰物层中找到该装饰物，选择它，并将其放置在地图中进行调查。如果地形版图尚未更新或仍然为空白，请尝试关闭编辑器并重新启动。地形版图在其之前和之后的状态应如下所示。

[![Default and Custom Footprint](./resources/074_Custom_Footprints10.png)](./resources/074_Custom_Footprints10.png)
*默认地形版图和自定义地形版图*

## 翻译 E:\SC2Code\blizzard-tutorials-chinese\docs\New_Tutorials\04_Data_Editor\075_Buttons.md.part-0.md

# 按钮

术语“按钮”在星际争霸中被广泛使用，用来指代任何可交互的界面元素，无论是菜单按钮、对话框还是可点击的任何内容。相反，在数据编辑器的背景下，该术语非常具体地指代一种艺术数据类型。这些按钮是指挥牌中能力的视觉元素，是玩家可以直接与之交互的用户界面部分。下面展示了一个充满按钮的圣堂指挥牌的典型视图。

[![带按钮的神圣圣堂指挥牌](./resources/075_Buttons1.png)](./resources/075_Buttons1.png)
*带按钮的神圣圣堂指挥牌*

这里有八个按钮在圣堂指挥牌上，包括“精神风暴”、“反馈”以及基本的控制元素，比如“移动”、“攻击”和“停止”。每个按钮都通过其指挥牌字段与单位相关联。这不仅决定了按钮的外观，还为界面内的使用设置了一些补充属性。

## 按钮数据字段

与引擎中多用途的各种按钮相比，按钮数据类型相当简单。下表列出了此类中包含的属性。

| 字段           | 详细信息                                                                                                                                                                                  |
| ------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------ |
| 图标            | 设置按钮将被制作的纹理。通常使用编辑器中包含的一组特殊样式的 76x76 纹理集成员，其前缀为 btn- 来标识。                                                                               |
| 快捷键         | 设置一个键盘键，当按下时将自动触发按钮。在星际争霸中，快捷键几乎被普遍用于加快玩家输入速度。                                                                                            |
| 工具提示        | 设置鼠标悬停在按钮上时显示的文本。                                                                                                                                                    |
| 名称           | 设置鼠标悬停在按钮上时显示的名称。                                                                                                                                                    |
| 按种族着色     | 根据种族选择对按钮覆盖色彩。各种族的彩色如下：异虫 - 橘色、人类 - 绿色、智慧种族 - 蓝色。                                                                                                     |
| 通用           | 将按钮及其快捷键添加到每个单位。通常仅用于基本单位动作，如“移动”、“攻击”、“停止”、“取消”等。                                                                                           |
| 警报图标        | 警报面板可以使用按钮类型向玩家推送警告或教学信息。这会设置由此按钮能力发送的图标。                                                                                                      |
| 警报工具提示     | 类似于“警报图标”，但提供警报的鼠标提示。                                                                                                                                             |
| 警报名称        | 类似于“警报图标”，但为警报设置名称。                                                                                                                                                 |
| 种族           | 设置按钮的种族属性，以便组织目的。                                                                                                                                                    |

将鼠标闲置在按钮上将显示一个对话框，其中包含其工具提示和名称，以及与连接能力相关的时间。下面展示了这个对话框。

[![按钮鼠标悬停工具提示和名称](./resources/075_Buttons2.png)](./resources/075_Buttons2.png)
*按钮鼠标悬停工具提示和名称*

## 创建一个按钮

打开数据编辑器，切换到按钮选项卡。如果尚未打开，可以通过 + ▶︎ 编辑艺术与声音数据 ▶︎ 按钮 导航到那里，如下所示。

[![导航至数据中的按钮](./resources/075_Buttons3.png)](./resources/075_Buttons3.png)
*导航至数据中的按钮*

通过在主窗口中右键单击并选择“添加按钮”来创建一个新按钮。

[![创建一个新按钮](./resources/075_Buttons4.png)](./resources/075_Buttons4.png)
*创建一个新按钮*

这将启动“按钮属性”窗口。在那里，您可以设置新按钮的“名称”，然后单击“建议”以生成一个ID。请注意，通常按钮的命名是根据其代表的能力而不是作为按钮本身来命名的。因此，选择像“攻击”或“瘟疫”这样的名称，而不是“攻击按钮”或“瘟疫按钮”。下面展示了典型的创建屏幕，填写了名称“Demo”。

![完成的按钮创建屏幕](./resources/075_Buttons5.png)
*完成的按钮创建屏幕*

## 设置按钮图标

您需要设置的主要按钮字段是图标字段。这将确定要转换为按钮的纹理。突出显示“图标”字段，双击以启动“对象值”窗口。在这里点击“浏览”将启动归档浏览器。在浏览器内，您可以选择任何纹理用作按钮，但标准的是 76x76 大小并带有文件类型 .dds。您可以通过使用前缀 btn- 进行搜索，找到许多这些纹理的集合，如下所示。

[![使用归档浏览器选择图标](./resources/075_Buttons6.png)](./resources/075_Buttons6.png)
*使用归档浏览器选择图标*

在此演示中，已选择了纹理 btn-tips-hotkeys.dds。请注意，这些纹理缺乏游戏内按钮通常具有的彩色边框。这是因为引擎通过覆盖边框并使用“按种族着色”字段对其进行着色。您可以通过搜索前缀 btn-border 查看纹理内的各种边框类型。

## 设置按钮工具提示

为了向玩家提供有用信息，按钮通常配有一个工具提示，在鼠标悬停在按钮上时游戏将显示该文本。为创建该文本，请转到“工具提示”字段，双击以打开“对象值”编辑窗口。

![图片](./resources/075_Buttons7.png)

在本演示中，已输入了包含消息“这是为教程演示而构建的按钮”的样本文本。此时，通常还会使用相同步骤为警报工具提示字段设置相同内容。

## 设置按钮快捷键

对许多玩家来说，按钮很少以所谓的“标准”方式单击。它们通常通过它们的快捷键进行交互。快捷键设置了对应于玩家键盘按键直接按下而自动“按下”目标按钮的安排。这是为了速度而构建的安排，但一些玩家更喜欢它以简单的便利性。

尽管这些快捷键可以由玩家通过游戏的“快捷键”部分决定，但基础快捷键是通过数据设置的。要这样做，请转到数据编辑器中的“快捷键”字段并双击。这将启动一个“对象值”窗口，呈现下列视图。

[![未分配快捷键](./resources/075_Buttons8.png)](./resources/075_Buttons8.png)
*未分配快捷键*

从这里，您可以通过单击“快捷键”框内部，在当前未知值的地方，来设置快捷键。这将使当前快捷键值变为红色，并允许键盘输入。此时按键将把它设置为快捷键。在本说明中，按下了 D 键，得到了以下结果。

![已分配快捷键](./resources/075_Buttons9.png)
*已分配快捷键*

## 翻译 E:\SC2Code\blizzard-tutorials-chinese\docs\New_Tutorials\04_Data_Editor\075_Buttons.md.part-1.md

点击此处的“确定”将保存热键并返回到主编辑器视图。

## 为单位添加按钮

按钮专门设计用于插入到单位的命令卡中。在此练习中，您将把演示按钮插入到预先存在的单位中。为此，请通过+ ▶︎ 编辑游戏数据 ▶︎ 单位 转到单位选项卡。任何单位都可以在此处使用，但在此示例中请选择“陆战队员”单位。然后按下面所示选择其“命令卡”字段。

[![命令卡字段](./resources/075_Buttons10.png)](./resources/075_Buttons10.png)
*命令卡字段*

双击字段将打开一个用于配置单位命令卡的子编辑器视图。您可以通过导航到命令卡中的一个未占用槽并单击绿色+ 来添加一个新按钮。这将打开一个名为“选择按钮”的窗口。在该窗口中，选择要添加到命令卡的“演示”按钮。此过程如下所示。

[![将按钮添加到命令卡](./resources/075_Buttons11.png)](./resources/075_Buttons11.png)
*将按钮添加到命令卡*

点击“确定”以将按钮添加到命令卡。现在您需要将一个能力链接到按钮，以便它能够正常运行并在游戏中显示。在命令卡子编辑器中选择新按钮，将其“命令类型”设置为“能力命令”，将其“能力”设置为“移动”，然后将其“能力命令”设置为“移动”。这将给您以下视图。

![已链接的完成按钮](./resources/075_Buttons12.png)
*已链接的完成按钮*

从这里，您可以点击“确定”完成按钮。在此演示中，“移动”能力被用作单位上通常至少是非传统技能，甚至是完全自定义能力的替代品。就本演示的目的而言，能力本身并不是最重要的。您的按钮现在应该在命令卡中可见。您可以通过使用“测试文档”启动地图并检查来确认此情况。

这样做应给您一个如下所示的结果。

[![游戏中的自定义按钮](./resources/075_Buttons13.png)](./resources/075_Buttons13.png)
*游戏中的自定义按钮*

## 附件

- [075_Buttons.SC2Map](./maps/075_Buttons.SC2Map)

## 翻译 E:\SC2Code\blizzard-tutorials-chinese\docs\New_Tutorials\04_Data_Editor\076_Sounds.md.part-0.md

# 声音

声音是编辑器的主要音频数据类型。它可以代表单个文件或音频文件集合，并且几乎每种听得到的声音类型都源自它。例如音乐、音效、单位配音和叙事对话等内容在游戏中都被存储为声音类型。这种类型是一个基本资产单元，它从数据或导入中获取原始文件并对其进行配置，准备好播放。然后这些声音资产通过声音执行器或直接通过触发器操作被合并到游戏中。您可以在下面的数据编辑器中看到声音被操纵的典型视图。

[![声音数据视图](./resources/076_Sounds1.png)](./resources/076_Sounds1.png)
*声音数据视图*

## 在数据编辑器中查找声音

作为数据类型，声音通过数据编辑器处理。一旦进入此模块，您可以通过选择绿色的 + 并导航到编辑艺术和声音数据 ▶︎ 声音来打开声音选项卡，如下所示。

[![导航到声音数据](./resources/076_Sounds2.png)](./resources/076_Sounds2.png)
*导航到声音数据*

您应该注意，声音与数据类型“音轨”不同。音轨类型主要设计用于游戏中的环境音乐和电影配乐。打开声音数据选项卡将呈现以下视图。

[![声音数据列表](./resources/076_Sounds3.png)](./resources/076_Sounds3.png)
*声音数据列表*

## 声音类别

声音选项卡的组织方式与数据编辑器中的任何其他数据类型选项卡相同。它被分为两部分，左侧是当前数据范围中的每个声音的列表，右侧提供当前所选声音的详细视图，显示了所有可供查看的字段。声音列表如下所示。

[![声音类别视图](./resources/076_Sounds4.png)](./resources/076_Sounds4.png)
*声音类别视图*

声音选项卡按照五个类别进行组织，如下表所述。

| 字段       | 详细信息                                                    |
| ---------- | ----------------------------------------------------------- |
| 声音名称   | 声音对象的名称。                                            |
| 来源       | 声音对象所在的数据来源。                                    |
| \#         | 声音对象在当前范围中的索引。                                |
| 种族       | 与声音对象相关联的一个种族。                                |
| 父级       | 声音对象的模板基础。                                        |

声音名称通常以前缀和后缀的形式Unit\_SoundType。这使得列表可以进一步根据单位和每个单位所需的声音类型进行细分。上面列出的一些示例是Refinery\_Explode、Refinery\_Ready和Refinery\_What。这三种声音分别与炼油厂单位关联，并且用于触发声音的三种状态。

## 声音详细视图

编辑器中声音字段的基本视图如下。

[![声音字段](./resources/076_Sounds5.png)](./resources/076_Sounds5.png)
*声音字段*

在这里，类型被分解为各种属性字段和“声音资产”字段，其中包含基本声音文件链接。这些声音资产以.ogg和.wav两种格式带入编辑器。.ogg格式占大部分声音。进入编辑器后，这些资产必须通过“声音资产”字段制作为声音，然后才能在游戏中使用。

除了说明这一点，声音字段的基本视图并没有提供太多信息。由于每种声音类型可以打包多个文件，因此为该数据编辑器选项卡设计了一个更加详细的视图。您可以通过使用数据栏将数据编辑器切换为“详细视图”来访问它。该按钮如下所示。

![详细视图按钮](./resources/076_Sounds6.png)
*详细视图按钮*

设置详细视图后，突出显示声音选项卡中的一个声音应该呈现如下视图，后文将称之为声音编辑器。

[![声音编辑器视图](./resources/076_Sounds7.png)](./resources/076_Sounds7.png)
*声音编辑器视图*

## 声音编辑器

增强的声音编辑器视图为您提供了对声音数据类型更加有用的查看。请注意编辑器顶部的“声音资产”框，如下图所示。

[![声音资产特写](./resources/076_Sounds8.png)](./resources/076_Sounds8.png)
*声音资产特写*

这里最顶部的框显示了声音的“声音资产”字段的内容。如前所述，这可以包含一个或多个原始声音文件，本例中为.ogg。您还会在此视图中找到每个资产的单独Pitch、Volume和Weight值。下方是设置这些值的各项控件，以及一些支持选项。以下是这些信息的具体说明。

| 字段            | 详细信息                                                                                                                                                                                                                                             |
| -------------- | --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| 选择方法      | 选择播放声音资产预览的顺序或随机播放方式。多数游戏中的声音使用随机播放以产生各种回应噪音。一个显着的例外是每个单位的\_Pissed系列声音，其使用顺序播放。 |
| 模式              | 选择播放模式为2D或3D声音。                                                                                                                                                                                                   |
| 音调               | 使用滑块设置原始声音的音调变化。                                                                                                                                                                                    |
| 音量            | 使用滑块设置原始声音的音量变化。                                                                                                                                                                                   |
| Weight          | 设置一个从0到100的值，确定播放机会。                                                                                                                                                                                 |
| 播放机会     | 该声音资产的权重除以该声音内所有声音资产的总权重。这将得出每次使用对象时播放该声音的百分比机会。                                                                                             |

阅读以上属性时，您可能已经猜到，由多个声音资产组成的声音将在每次在游戏中使用时随机播放其中的一个组件声音文件。随机机会取决于每个资产的Weight，并恰好被表达为播放机会。

在编辑器此部分的底部，您将找到可在任何声音内配置的八个标志。这些标志提供了对声音的组织属性的额外修改，包括其文件处理、流状态和暂停能力。

## 播放控制

声音编辑器最重要的特性之一是其用于音频预览和编辑的一组预览控制。如下所示。

![播放控制界面](./resources/076_Sounds9.png)
*播放控制界面*

## 翻译 E:\SC2Code\blizzard-tutorials-chinese\docs\New_Tutorials\04_Data_Editor\076_Sounds.md.part-1.md

这些控件允许您通过“Asset Preview”按钮听取原始声音，同时还可以通过“In-game Preview”按钮测试修改后的声音。在使用导入的声音资产时，同时拥有这两个功能非常重要。如果没有这样的功能，要为制作自定义资产的正确音量平衡或效果控件而努力寻找，将会非常繁琐。

## 声音组音量控制

声音编辑器的另一部分让您可以设置组音量控制的功能。这些控件如下所示。

[![声音组音量控制](./resources/076_Sounds10.png)](./resources/076_Sounds10.png)
*声音组音量控制*

声音组通过允许您将单独的声音资产添加到特定频道，为声音属性提供了额外级别的控制。然后，可以通过与预览控件实验来最好地演示和理解所提供的广泛声音选项。下面您可以看到一个表格，显示了可供使用的许多频道。

| 警报    | 对话       | 场景构建          | 战斗       |
| -------- | ----------- | -------------- | ---------- |
| 死亡    | 对话    | 点缀          | 火焰     |
| 植被  | 收集      | 主要效果 | 任务   |
| 运动 | 电影       | 音乐          | 其他      |
| 准备    | 设定环境音 | 设置发射器   | 设置片段 |

这里值得注意的是声音频道可能会受到玩家个人设置的影响。例如，如果玩家已关闭音乐，他们将听不到任何在音乐频道中的声音。

在声音编辑器中找到的广泛控件的一个后果是组声音控件和单独声音选项之间的普遍混淆。下面的图像应帮助您避免这种混淆。

[![单独和组音量控制](./resources/076_Sounds11.png)](./resources/076_Sounds11.png)
*单独和组音量控制*

用于设置每个声音资产音量的单独音量控制位于上方突出显示的框中。下方突出显示的框允许您为每个频道设置声音修改。

## 声音属性

从“声音资产”框中选择任何单个文件并双击它，将会打开一个名为“声音属性”的新窗口，如下所示。

[![声音属性视图](./resources/076_Sounds12.png)](./resources/076_Sounds12.png)
*声音属性视图*

在这里您将找到许多重要的第二级别控件，涉及声音资产何时以及如何播放。循环次数控制在游戏中使用时特定资产将播放多少次。通常，大多数声音不需要连续播放多次，但也有例外情况。

值得注意的是，在游戏过程中，音乐文件通常设置为循环播放。为了获得这种特定行为，将循环次数设置为-1。通过设置循环时间，可以为循环播放设置一个随机的最小和最大长度。偏移将在其最小和最大之间应用随机偏移以播放声音文件。扬声器和动画控件针对叙事对话进行了配置。它们允许您为一段预先录制的音频标记信息和细节，这些信息在设置故事型活动或电影时可能会有用。

## 声音编辑器数据视图

如果您查看声音编辑器的顶部选项卡，您将在数据选项卡下找到另一组有用选项。这些选项如下所示。

[![声音编辑器数据选项卡](./resources/076_Sounds13.png)](./resources/076_Sounds13.png)
*声音编辑器数据选项卡*

这些控件允许您设置每个声音的扬声器中心化音量属性。由于选项众多，您了解如何使用此面板的最佳方式是通过实验使用播放控件。

## 翻译 E:\SC2Code\blizzard-tutorials-chinese\docs\New_Tutorials\04_Data_Editor\data-spaces.md

---
title: 数据空间
authors:
    - duckies
---

# 数据空间

将相关数据聚合到一个单一文件中，以便可以以有组织且耗时最少的方式将其复制到其他地图中。

本教程假设您从未见过 .xml 文件，并只想在提到任何复杂内容时翻转桌子。

## 步骤 1. 将地图保存为组件

文件->另存为->选择另存为 .SC2Components，而不是通常的 .SC2map 文件。

![](./data-spaces/7a7c2e19fe350e07246ebce2a2c5dedc1aed007f.png)

然后找到新创建的地图文件夹，进入 `Base.SC2Data` -> `GameData`文件夹

![](./data-spaces/d24fac19396186c19b2f8ad4bcc82d76f5dcfcf9.png)

将地图保存为组件可以让您了解地图由什么组成。在 `Base.SC2Data` -> `GameData` 文件夹中，您可以查看所做的数据编辑。

![](./data-spaces/ce9096c22e61b820b7dc61f3c591c5834f791d27.png)

您可以通过将两个地图都保存为组件，然后复制粘贴这些 xml 文件来轻松地从一个地图复制粘贴所有数据到另一个地图。

## 步骤 2. 创建一个数据空间

在这里，我们将通过它们的类别分开的数据编辑 - 单位、演员、效果、行为等。

我们将创建一个单一的 .xml 文件，其中将存储所有相关数据（而不是分散在多个不同的文件中）。

您可以创建新的，或者只是复制粘贴任何 xml 文件，将其重命名为您希望称呼数据空间的名称，打开它，擦除里面的所有内容，并复制粘贴

```xml
<?xml version="1.0" encoding="us-ascii"?>
<Catalog>
</Catalog>
```

![](./data-spaces/0bef7176c983a4cdf417abecd0644374b927c1e8.png)


## 步骤 3. 让编辑器看到数据空间

我们需要在 `Base.SC2Data` 文件夹中创建一个名为 `GameData` 的新 xml 文件（以与我们在步骤 2 中创建先前的 xml 文件相同的方式创建它）。复制粘贴以下内容，除了在目录路径中指定我们数据空间文件的名称。

```xml
<?xml version="1.0" encoding="utf-8"?>
<Includes>
    <Catalog path="GameData/AbilHeroChainStrike.xml"/>
</Includes>
```

![](./data-spaces/b666aef6f73b61cb64b79e542e37e57d5e918321.png)

## 步骤 4. 将数据转移到数据空间

现在一切都已经准备就绪。加载地图后，我们可以看到数据空间菜单现在有了我们制作的数据空间。

![](./data-spaces/d1c42025870c4bbd280c23d03083545f8b0b71da.png)

选择要移动到数据空间的数据条目，右键单击它们，然后选择“移动...”。

![](./data-spaces/10db63dea886ac1099c752e12ebbc47dfa4c85aa.png)

!!! 信息

    如果您正在使用数据集合功能，移动数据集合也将移动其包含的所有元素。

![](./data-spaces/cf0678e56d9cb6f5d63c4ffad849a215ac6a1eef.png)

移动完所有内容后，保存地图并检查数据空间。您会发现您在编辑器中移动的所有信息现在方便地驻留在那一个文件中。它现在可以轻松共享。

要将其导入到新地图或模组中，我们需要将该地图/模组另存为组件，将我们的数据空间文件移动到 `\Base.SC2Data\GameData` 文件夹中，并像在步骤 3 中所做的那样创建/添加目录路径到 GameData.xml 文件。

## 步骤 5. 一切都为“(未知)”和“(未命名)”

原来文本是分开存储的。如果将数据空间添加到不同的地图或模组中，我们会发现所有描述和数据字段名称都消失/混乱了。因为除了英语之外，还有许多其他语言的游戏客户端，所有显示给用户的文本都是单独存储的。在地图的组件文件夹中，您可以找到本地化文件夹，在我的情况下是 `enUS.SC2Data`。它存储了包含数据条目文本的文本文件。我们将不得不手动添加/合并我们导入数据空间的地图的本地化文件的相关数据。

![](./data-spaces/4465131cbdddc78685fd15dfe02108fe0097d014.png)

## 示例地图

* [BounceTestMap.SC2Map](./data-spaces/BounceTestMap.SC2Map)

**附加链接**

- Mapster 的 Github 教程链接： <https://sc2mapster.github.io/mkdocs/data/>


## 翻译 E:\SC2Code\blizzard-tutorials-chinese\docs\New_Tutorials\05_Text_Editor\077_Text_Editor_Introduction.md

# 文本编辑器介绍

文本编辑器是控制整个项目中所有文本输入的中心枢纽。在这里，您将找到地图中的每个包含文本的实体的自顶向下概述。这些实体可能包括任务屏幕和汇报、游戏时间传输和书面对话，甚至包括变量和参数名称。文本编辑器提供了一种集中处理所有文本的方式，主要用于全局编辑的节省时间和将大量文本输入游戏以供以后使用的入口点。

[![文本样式变为游戏资产](./resources/077_Text_Editor_Introduction1.png)](./resources/077_Text_Editor_Introduction1.png)
*文本样式变为游戏资产*

## 翻译 E:\SC2Code\blizzard-tutorials-chinese\docs\New_Tutorials\05_Text_Editor\078_Font_Styles.md

# 字体样式

字体样式允许您更改文本的基本展示方式。字体样式不需要特别复杂或奇特。它们代表了与游戏默认文本有所区别的任何字体调整。

## 创建字体样式

创建字体样式使您可以使用标准依赖项之外的字体资源。您可以使用任何现有或导入的字体来设置样式，但在本练习中，您将使用OpenSans的免费字体样本。首先，使用导入器导入字体。您可以通过模块▶︎导入进入。在那里，右键单击白色框内，选择“导入文件”，然后定位字体文件，可以是.ttf或.otf，然后点击“确定”。导入后保存项目应该会显示如下内容。

![导入的字体](./resources/078_Font_Styles1.png)
*导入的字体*

字体样式本身是通过文本编辑器创建的。要构建字体样式，请通过模块▶︎文本导航到那里。移至‘字体样式’标题处，在主列表中右键单击。选择‘添加样式’开始，如下所示。

[![添加字体样式](./resources/078_Font_Styles2.png)](./resources/078_Font_Styles2.png)
*添加字体样式*

在‘样式属性’弹出中，将‘名称’设置为‘OpenSans18’。这表示字体类型及其打算大小。

![样式命名](./resources/078_Font_Styles3.png)
*样式命名*

创建完字体样式后，您可以使用文本编辑器右侧的面板对其进行配置。在这种情况下，将字体高度设置为18，水平对齐到左侧，垂直对齐到中间。将文本颜色设置为白色。设置栏位应如下所示。

[![配置的OpenSans18样式](./resources/078_Font_Styles4.png)](./resources/078_Font_Styles4.png)
*配置的OpenSans18样式*

转向“文本预览”以了解样式的效果。正确设置上述选项后，应如下图所示。

![OpenSans18样式预览](./resources/078_Font_Styles5.png)
*OpenSans18样式预览*

## 从模板创建字体样式

从这里，您可以使用‘OpenSans18’样式作为模板创建更多字体样式。这将把子样式的所有字段设置为其父样式的字段。这个选项是一个有用的时间节省器，您可以使用它来构建一系列具有一定一致性的样式。

通过导航到文本编辑器中的‘添加字体样式’来从模板创建新的字体样式。将样式命名为‘OpenSans48’，然后设置其‘模板’为‘OpenSans18’，如下所示。

![从模板创建样式](./resources/078_Font_Styles6.png)
*从模板创建样式*

将此样式的字体高度设置为48，然后选中阴影标志并设置阴影偏移为2。添加4的轮廓宽度，然后将两个颜色选项设置为(R175，G237，B230)和(R133，G220，B139)。或者，您可以选择尝试一下现在字体的外观。这将使您得到如下所示的样式面板。

[![已配置的OpenSans48样式](./resources/078_Font_Styles7.png)](./resources/078_Font_Styles7.png)
*已配置的OpenSans48样式*

预览现在将显示一个更加醒目的字体，如下图所示。

![OpenSans48样式预览](./resources/078_Font_Styles8.png)
*OpenSans48样式预览*

## 应用字体样式

创建后，您可以在编辑器中任何可以编辑文本的地方应用字体样式。文本编辑器是更改项目中任何文本的内容或字体样式的自上而下解决方案。导航到‘文本’选项卡将显示所有项目文本的列表。如下图所示。

[![文本编辑器主视图](./resources/078_Font_Styles9.png)](./resources/078_Font_Styles9.png)
*文本编辑器主视图*

突出显示文本实例将会将其详细信息推送到屏幕右侧，其中包含三个子面板，文本输入、文本控件和文本预览。

![](./resources/078_Font_Styles10.png)
*文本输入 -- 文本控件 -- 文本预览*

您可以通过从‘应用样式’下拉菜单中选择样式来将样式应用到突出显示的文本片段。

[![选择应用样式](./resources/078_Font_Styles11.png)](./resources/078_Font_Styles11.png)
*选择应用样式*

单击‘应用样式’按钮将通过在文本输入周围附加样式标签来完成该操作。样式标签将在原始文本之前带有\<s值='样式名称"\>，在其后跟随\</s\>。这些元素指示游戏在运行时更改包含的文本的样式。现在，您可以从文本预览面板预览文本输出。

[![应用字体样式的文本](./resources/078_Font_Styles12.png)](./resources/078_Font_Styles12.png)
*应用字体样式的文本*

或者，您可以在填充触发器编辑器中的任何文本字段时样式文本。选择文本字段并导航到‘值’源，将会弹出另一个类似文本编辑器的编辑器。

[![样式化文本字段](./resources/078_Font_Styles13.png)](./resources/078_Font_Styles13.png)
*样式化文本字段*

与前述相同，突出显示任何已输入的文本以解锁文本控件。使用‘应用样式’下拉菜单选择样式，然后单击按钮本身来为文本添加样式。此过程的结果如下图所示。

[![触发器编辑器中的样式文本](./resources/078_Font_Styles14.png)](./resources/078_Font_Styles14.png)
*触发器编辑器中的样式文本*

在这种情况下，您可以通过启动地图来测试更新后的文本。下图显示了游戏视图中样式文本的标准示例。

[![游戏视图中的样式文本](./resources/078_Font_Styles15.png)](./resources/078_Font_Styles15.png)
*游戏视图中的样式文本*

## 附件

 * [078_Font_Styles.SC2Map](./maps/078_Font_Styles.SC2Map)

## 翻译 E:\SC2Code\blizzard-tutorials-chinese\docs\New_Tutorials\06_Cutscene_Editor\079_Cutscene_Editor_Introduction.md

# 剧情编辑器介绍

剧情编辑器是一组工具，允许您使用编辑器提供的任何资产组装，导演和制作剧情。它作为一个工作室，您可以将许多元素编织在一起，包括音频，视觉，动画，效果，配音和照明。您可以安排一些可以在项目中扮演多种角色的布景，无论是在游戏中进行故事叙述剪辑，为战役制作叙述电影，菜单界面，甚至是独立电影。

![](./resources/079_Cutscene_Editor_Introduction1.png)
*将影视剪辑构建为游戏资产*

## 翻译 E:\SC2Code\blizzard-tutorials-chinese\docs\New_Tutorials\07_Lessons\081_Display_a_Variable_to_the_Screen.md

# 将变量显示在屏幕上

直接从触发器编辑器输出变量到屏幕空间可能非常有用。您可以将其用作快速诊断点检技术，用于测试新功能，或直接作为简单用户界面的一部分传达信息。

这个练习将向您展示如何构建一个基本的倒计时器，一种类型的变量，它将显示在屏幕上。

## 创建对话框

使用这种方法，倒计时器将使用对话框显示在屏幕上。您将首先组装这个对话框和要显示在其中的变量。创建一个新文档，然后在任何地形类型上开始创建一个近战地图。移动到触发模块，选择“近战初始化”触发器。删除此触发器中的默认动作。创建一个类型为计时器的全局变量，然后命名为“教程计时器”。接下来，添加以下动作，并按照下面的描述进行配置。

  - “创建对话框”，保留默认设置。
  - “显示/隐藏对话框背景”，将“可见”项设置为“隐藏”。
  - “显示/隐藏对话框”，将“可见”项设置为“显示”。

您的触发器应该如下所示。

[![创建基础对话框和计时器变量](./resources/081_Display_a_Variable_to_the_Screen1.png)](./resources/081_Display_a_Variable_to_the_Screen1.png)
*创建基础对话框和计时器变量*

## 创建标签

接下来，创建一个新的类型为“创建对话框项（标签）”的动作，并将术语“横向偏移”，“纵向偏移”和“文本”更改为零。将“锚点”设置为“中心”，并配置“写出持续时间”为0.0。最后将对话框尺寸设置为（200，50）。

这一过程已经创建了标签，但仍然需要一个引用，以便稍后可以轻松调用它。导航到局部变量▶︎新建▶︎新变量，为此目的创建一个局部变量，将其命名为“计时器标签”。接下来，将变量类型设置为“对话框项”，以便它可以正确容纳标签。

回到触发器主体，创建一个“设置变量”动作，并将值项配置为“最后创建的对话框项”。现在是一个很好的时机确保“设置变量”动作位于“创建对话框项”动作之下。这种顺序确保了在“设置变量”动作时标签是最后创建的对话框项。这意味着标签将被设置为新创建的局部变量，完成您的引用。触发器的进展如下所示。

[![连接对话框标签](./resources/081_Display_a_Variable_to_the_Screen2.png)](./resources/081_Display_a_Variable_to_the_Screen2.png)
*连接对话框标签*

## 计时器

现在您可以继续创建将显示在屏幕空间中的计时器。在触发器主体中继续创建一个类型为“启动计时器”的动作。将动作的“计时器”项设置为“教程计时器”变量。现在配置计时器的其他项。将“重复”标志设置为“重复”，将“持续时间”设置为60.0，将“时间类型”设置为“实时”。这将配置计时器在60个真实世界秒的间隔后持续重置。它也将绑定到“教程计时器”变量以供功能引用。

## 显示变量

您需要做一些准备工作来不断更新对话框标签中的计时器值。这是控制语句的常见用法，在这种情况下，您会发现一个循环是合适的。通过创建动作“永久重复”来组装一个循环。在循环的body语句中，创建动作“设置对话框项文本”。

请注意，由于函数输入的原因，准备好的标签必须以“文本”类型输出到屏幕。由于我们的计时器以“实时”类型计数，因此需要进行转换。点击“设置对话框项文本”动作的“文本”术语。这将启动一个窗口显示潜在的功能输入。在左侧子视图中导航到“转换”以查看可能的转换函数列表。

[![文本转换选项](./resources/081_Display_a_Variable_to_the_Screen3.png)](./resources/081_Display_a_Variable_to_the_Screen3.png)
*文本转换选项*

这里适用“将实时转换为文本”的选项。选择它，然后点击“确定”返回到触发器视图。这个函数仍然需要一个输入，因此选择“值”项并将其设置为“计时器的剩余时间”以赋予其这个属性。完成后，将计时器设置为变量“教程计时器”。您的触发器现在应该完成了，将您的结果与下面的图像进行比较。

[![已完成触发器](./resources/081_Display_a_Variable_to_the_Screen4.png)](./resources/081_Display_a_Variable_to_the_Screen4.png)
*已完成触发器*

您现在可以启动“测试文档”并查看您的结果。您应该看到计时器变量显示在屏幕空间中，如下所示。

![屏幕上显示的计时器变量](./resources/081_Display_a_Variable_to_the_Screen5.png)
*屏幕上显示的计时器变量*

## 附件

 * [081_Display_a_Variable_to_the_Screen.SC2Map](./maps/081_Display_a_Variable_to_the_Screen.SC2Map)

## 翻译 E:\SC2Code\blizzard-tutorials-chinese\docs\New_Tutorials\07_Lessons\082_Test_a_Mod_Offline.md

# 测试一个离线模组

测试是开发的主要组成部分之一。一个优秀的开发者希望为测试者尽可能地提供轻松、专注和高效的游玩体验。在共享测试之前准备您的项目对于确保最大限度地利用志愿者的时间是至关重要的。

对于地图，编辑器有一个明显且直接的测试方法，即直接转到编辑器导航栏中嵌入的“测试地图”功能。然而，对于模组来说，有一些额外的步骤。这可能导致初学者开发者采取最为显而易见的方法，即将他们的模组和地图同时上传到战网进行测试。

这种方法可能会导致一些显著的减速，因为发布系统有一个额外的保护层，这是为发布版本而设计的。相比之下，有几种灵活的测试模组的方法，你应该熟悉一下。不足之处在于这些方法是离线方法，因此只适用于单人测试实践。

## 使用目标地图测试一个模组

您应该注意，当尝试使用编辑器的直接“测试地图”功能时，您将被要求为活动模组设置一个地图目标。这是有道理的，因为模组文件不包含地形数据，也没有设定包含的资产和数据。为测试设置一个目标“默认地图”可以直接、简单地离线测试模组系统。

您可以通过转到“文件” ▶︎ “首选项” ▶︎ “测试文档”来设置一个直接的模组测试。在这里，您会注意到“默认地图”标题。

[![设置测试目标地图](./resources/082_Test_a_Mod_Offline1.png)](./resources/082_Test_a_Mod_Offline1.png)
*设置测试目标地图*

通过选择“浏览”按钮，然后导航到本地地图文件，将“默认地图”设置为您要测试的模组的目标。单击“确定”返回到主编辑器。从现在开始，使用“测试地图”功能将导致当前活动的模组文件被临时依赖于“默认地图”。然后包含模组的地图将启动一个测试。设置的“默认地图”将在项目之间保持不变。如果您同时在几个不同的模组中使用这个功能，您将需要每次进行更改。

这个系统可能会让你想起“扩展模组”系统的本地版本，其中地图和模组在运行时被合并，但在游戏后保持分离。

## 使用依赖进行测试

或者，您可以通过将模组添加为活动地图的依赖项来测试模组。打开您要测试的地图，导航到“文件” ▶︎ “依赖项”。这将呈现当前文档依赖项的列表。默认视图可能类似于下面显示的视图。

[![设置测试目标地图](./resources/082_Test_a_Mod_Offline2.png)](./resources/082_Test_a_Mod_Offline2.png)
*设置测试目标地图*

在这里，选择“添加其他”。这将呈现下面显示的视图。

[![设置测试依赖](./resources/082_Test_a_Mod_Offline3.png)](./resources/082_Test_a_Mod_Offline3.png)
*设置测试依赖*

选择您感兴趣进行测试的自定义模组，然后点击“确定”。一旦您返回到依赖性视图，再次点击“确定”回到您的活动地图。在那里，您可以使用“测试文档”功能来测试具有新依赖关系的地图。

如果您正在开发地图并对其中一个或多个现有模组的一些交互感到好奇，那么这种方法可能是比较合适的。您可以通过添加或删除模组，快速更改当前地图的依赖关系，而不是转移到战网，然后对每种配置进行试验。

## 翻译 E:\SC2Code\blizzard-tutorials-chinese\docs\New_Tutorials\07_Lessons\083_Export_Game_Assets.md

# 导出游戏资源

就像自定义资源可以通过导入器引入编辑器一样，标准资源也可以导出到基本文件类型中。每种类型的资源都需要您使用稍有不同的方法从项目中提取出来。这些方法在本文中有所描述。

从编辑器中导出通常用于更仔细地查看标准资源。它们可以从编辑器中取出，插入到不同的程序中，进行修改和重组，然后再次导入以供使用。如果您曾经丢失项目之源部分，了解如何导出也是非常有价值的。那么您可以通过从基本项目中导出文件作为恢复方法。对于每种资源类型，有一些常见的文件格式是您应当了解的。下面提供了一个列表。

| 类型               | 文件格式                |
| ------------------ | ----------------------- |
| 纹理               | .dds                    |
| 模型               | .m3                     |
| 声音               | .wav                    |
| UI 布局            | .SC2Layout, .xml        |
| 触发器库           | .SC2Lib                 |
| 灯光               | .SC2Lighting            |
| 部件文件夹         | .SC2Components, Various |

## 打开存档浏览器

您可能已经熟悉了存档浏览器，因为它用于查找各种数据和触发器操作的文件。它还可以作为从项目中导出事物的主要中心。要将其用于此目的，您需要直接访问浏览器，而不是作为编辑提示的一部分。您可以通过从编辑器的任何位置导航到“窗口” ▶︎ “控制台” 来实现这一点，如下所示。

[![打开控制台](./resources/083_Export_Game_Assets1.png)](./resources/083_Export_Game_Assets1.png)
*打开控制台*

启动控制台后，输入命令 “browse” 然后选择 “Enter” 按钮，如下所示。

![启动资源浏览器的命令](./resources/083_Export_Game_Assets2.png)
*启动资源浏览器的命令*

这将启动存档浏览器。它将显示项目中当前所有资源的结构化文件夹布局。

[![存档浏览器视图](./resources/083_Export_Game_Assets3.png)](./resources/083_Export_Game_Assets3.png)
*存档浏览器视图*

## 从存档浏览器中导出

可以通过右键单击存档浏览器中的资源并选择“导出文件”来导出资源。

[![存档浏览器视图](./resources/083_Export_Game_Assets4.png)](./resources/083_Export_Game_Assets4.png)
*存档浏览器视图*

## 导出 UI 布局

您也可以使用存档浏览器导出 UI 布局。只需在 UI 文件夹中找到它们，将其高亮显示，然后选择“导出文件”。

[![存档浏览器视图](./resources/083_Export_Game_Assets5.png)](./resources/083_Export_Game_Assets5.png)
*存档浏览器视图*

或者，您可以直接从 UI 编辑器中提取它们。导航到“.SC2Layout”文件，然后突出显示 XML 数据并按Ctrl+C进行复制。然后可以将数据粘贴到文本编辑器或纯文本文件中供以后使用。

[![突出显示用于导出的 XML](./resources/083_Export_Game_Assets6.png)](./resources/083_Export_Game_Assets6.png)
*突出显示用于导出的 XML*

## 导出触发器库

您可以通过触发器编辑器中的“库”面板从“库”中导出触发器库，方法是选择库，右键单击，并选择“导出库”。

[![导出触发器库](./resources/083_Export_Game_Assets7.png)](./resources/083_Export_Game_Assets7.png)
*导出触发器库*

## 导出灯光

您可以从灯光窗口导出灯光文件。选择要导出的灯光排列方式，然后右键单击并选择“导出灯光”。

[![导出灯光](./resources/083_Export_Game_Assets8.png)](./resources/083_Export_Game_Assets8.png)
*导出灯光*

## 导出部件文件夹

通过导出过程，地图项目可以拆分为其部件文件夹。这种格式是一种包含脚本、组件列表、图像文件和原始数据的集合，可用于您可以在编辑器外进行的诊断和分析程序。要导出，请打开要保存为部件文件夹的地图，并导航到“文件” ▶︎ “另存为”。将“保存类型”字段更改为“.SC2Components”，然后选择“保存”。

[![保存为星际争霸 II 部件文件夹](./resources/083_Export_Game_Assets9.png)](./resources/083_Export_Game_Assets9.png)
*保存为星际争霸 II 部件文件夹*

此过程将生成一个带有指定文件名的文件夹，附加了后缀“.SC2Map”。该文件夹将包含一套数据组件和资源文件，看起来类似于下面显示的内容。

[![星际争霸 II 部件文件夹](./resources/083_Export_Game_Assets10.png)](./resources/083_Export_Game_Assets10.png)
*星际争霸 II 部件文件夹*

## 翻译 E:\SC2Code\blizzard-tutorials-chinese\docs\New_Tutorials\07_Lessons\084_Marketing.md

# 市场营销

最终，释放项目进入世界的时机将会到来。花一些精力来思考如何做这件事可以对对其感兴趣的人数产生巨大影响。市场营销你的游戏并制造期待是增加游戏成功机会的好方法。虽然总有可能仅靠口口相传就足以，但你不能低估积极主动行动的价值。即使你的游戏尚未完工或仍在积极开发中，开始市场营销工作也许会带来额外反馈、乐意测试者以及其他机遇。尽管如此，好的市场营销始于好的项目。重要的是要不要过早着急。首先专注在重要的事情上，即游戏设计的实践。

# 推广材料

你会想要有一些材料可以展示你的游戏在各个地方。虽然Battle.net和Arcade有许多预览功能，但你不能依靠人们通过游戏本身接触到你的项目。那里已经发生了很多事情，你必须努力争取关注度来开始建立自己的市场。促销物品例如截图、视频、网站、精心撰写的文案和插图可以在许多方面使用，推动你的项目走向更广泛的受众。

在这里最好要有一些关于目标受众的想法。如果项目是吸引竞技星际玩家的近战地图，展示他们会喜欢的事物，比如游戏中的新进展或旨在促进高级平衡的功能。如果游戏吸引某一流派的粉丝，看看该领域的其他事物已经做过的，尝试击中一些相同的要点同时提供你自己的创新。

预告片或简短的推广影片可能特别有效。在制作这些内容时，你会想要以最佳分辨率和游戏设置进行拍摄，同时保持内容简洁。在你的预告片的最早部分，试着包含一些突出你项目独特特点的内容，引起人们的注意并激励他们实际尝试项目。展示你项目的显著要点，以适当的节奏介绍新想法，不要在可能对未尝试过的人无趣的事物上停留太久。

# 宣传

拥有你的推广材料后，是时候开始宣传了。一定要搜索你认为合适的社区站点和聚集地，以及官方的暴雪论坛。制定一个想要进行市场推广的位置清单并准备一份包含你材料的一般模板。不要简单粗糙地在各处贴广告。花时间在每种情况下基于你的模板进行工作，根据每个场所量身定制你的方法和交流。一些发布的一般想法可能包括：

- 在星际社区论坛发布。
- 在社交媒体上发送一些信息。
- 将你的项目链接给游戏网站的编辑或博主们。
- 联系可能感兴趣的社区人物。
- 向可能对尝试的星际直播玩家展示你的项目。

在专门推出某物的营销时，尝试将你的工作集中在一个短时间窗口，这将通过让你的项目同时在多个地方被谈论来提高效果。尽管如此，如果你最初的营销推动效果不佳，也不要放弃。有时候需要慢慢积累兴趣；保持你的材料公开和更新，并尝试随时间投入较小的持续发布努力。但不要让持续的营销阻止你的开发，一个项目可能随着额外工作取得突破，甚至可能引领你到新的东西。毕竟，总有下一个项目。

# 维护社区

市场营销未必在发布后终结。你可能希望努力建立一个持续增长和发展项目的社区。如果这是一个为反复游玩而制作的多人游戏，你将考虑任何可以团结玩家群体并让他们互相联络的材料。一个简单的网站可以很有效，并可以附带一个自己的讨论论坛。Battle.net系统允许你为每个项目公布一个网站。您可以通过导航到编辑器中的Battle.net信息 ▶︎ 通用 ▶︎ 网站来添加此网站，如下所示。

[![Battle.net 网站链接](./resources/084_Marketing1.png)](./resources/084_Marketing1.png)
*Battle.net 网站链接*

使用“测试”按钮确保链接正常连接。StarCraft II还支持一个名为“团体”的功能。团体是一个在Battle.net上聚集玩家的好方法。你甚至可以在团体内创建“事件”，设定在StarCraft II主屏幕上显示的计划游玩会话或会议，让团体成员看到。另外，值得你参考一下'暴雪游乐夜'团体，他们举办专门为开发者推广和测试项目的活动。

[![暴雪游乐夜团体](./resources/084_Marketing2.png)](./resources/084_Marketing2.png)
*暴雪游乐夜团体*

## 翻译 E:\SC2Code\blizzard-tutorials-chinese\docs\New_Tutorials\07_Lessons\085_Finding_Testers.md.part-0.md

# 寻找测试人员

游戏开发需要大量的测试以产生良好的结果。许多最优秀的开发人员承认，密切观察和对游戏进行实验很可能是最重要的设计实践。游戏是不断变化的系统，这往往使它们变得难以理解。有很多意想不到的行为最好通过频繁测试来发现、纠正，甚至利用。对游戏的适当观察是一个关乎时间、技术和视角的问题。通过让新鲜的视角参与进来，通常以游戏测试人员的形式，可以更好地实现正确的视角。

术语“测试人员”指的是一个志愿者，将玩一个实验性的街机游戏、在新的近战地图上进行战斗、使用自定义界面进行观察，或以任何方式使用创作者的项目，然后回馈他们的体验。尽管公众对使用编辑器进行创作项目表示热情，但要找到既愿意又有效的测试人员往往很困难或耗时极大。有一些做法可以帮助你应对这个问题。

## 为会话做准备

进行有效的测试意味着需要做准备。成为他人志愿努力的受益者意味着要承担起使测试具有成效、专注和尽可能有趣的责任，鉴于当前项目的状态。虽然一个有问题的地图可能会使开发人员的内疚感沉重，但重要的是不要仓促地将多人游戏测试作为首选反应。始终确保先行动你自己的设计、诊断和修复能力。虽然你需要借助他人的视角来成长为开发人员，但培养个人纪律也同样重要。

当准备进行多人游戏测试时，考虑上传一个项目构建版本，这是从主要发布版本分开发布的版本。这样可以保持标准版本的清洁，并确保不会干扰当前在享受你项目的玩家。它甚至可以让你与其他开发人员分享一个低调的、未锁定的游戏版本。如果你正在寻求其他开发人员对地图内部的问题，比如触发器或数据，这是很有用的。

测试是一个相当泛泛的术语，适当的准备工作可能大相径庭。良好的测试可能意味着花时间找到高技能玩家来深入了解特定竞技地图设计，或确保界面元素调整得足够精细，以让新手玩家快速进入街机游戏的核心内容。

通常情况下，你希望孤立游戏的某个部分。你应考虑尽可能添加多种规定，以便快速进入游戏的特定部分并有效测试。这可能意味着引入命令以跳过开场动画，或在游戏中构建能够重复测试多次的功能。确保每个会话都有明确定义的目标，并在开始测试前明确告知你的测试人员。

一些开发人员会将测试用作推广预览，一种营销手段。这里不会讨论这个问题，但这可以是建立社群的有效工具。游戏所获得的追随者都可成为真正的测试人员，更多感兴趣的人意味着更多潜在的测试人员。作为有志成为开发人员的一条经验法则，最好的营销方式就是努力打造更好的游戏。

## 联系玩家

通过论坛、聊天客户端、社交媒体和Battle.net内置的社区功能联系潜在的测试人员。利用所有可用渠道与其他星际争霸II玩家和开发者联系。星际争霸II社区站点和其他以游戏为中心的社区通常支持他们自己的活跃论坛和IRC频道。

保持灵活的时间安排。记得将你的游戏发布到所有地区，因为有意向的测试人员可能居住在世界上任何地方。与不同地区和时区的人协调，以包含尽可能多的玩家。对于你自己的时间表之外可用的玩家，你可以选择让其他人主持测试。如果你是团队的一部分，你可以分工合作，同时主持几个测试。

当你准备好测试时，首先向社区中的同行伸出援手。开发者通常可以成为特别强大的测试人员，并提供普通玩家无法提供的技术帮助。开发者可能也有他们自己的联系人，愿意向他们介绍你。除此之外，你还可以尝试邀请来自Battle.net公共聊天频道，比如“SC2寻找团队”或“街机”。

![街机中心的聊天频道](./resources/085_Finding_Testers1.png)
*街机中心的聊天频道*

## 组织测试人员

现在你已经建立了一份感兴趣的玩家名册，你可以开始测试你的游戏了。不要为每个会话都这样拼凑你的测试团队，使用Battle.net的功能来帮助你组织这些事件。通过使用聊天频道和群组保持更一致的联系。

Battle.net群组提供了一些工具来管理和与测试人员进行通信。通过在主工具栏上的“群组”按钮之间找到的“好友列表”和“菜单”之间导航，创建一个群组。这将启动“创建群组”窗口，在那里你将为你的群组做好准备。一旦做好决定，选择“创建”将该群组添加到Battle.net。这些属性相对无害，但你可能希望将群组的“隐私”设定为公开，以便访客能够方便地加入。你还应注意，基于游戏的氏族确实存在，但在Battle.net内，玩家一次只能加入一个氏族，这可能会阻碍潜在的测试人员。

[![创建群组](./resources/085_Finding_Testers2.png)](./resources/085_Finding_Testers2.png)
*创建群组*

如果你已将你的游戏发布到Arcade作为公共项目，那么你可以使用“游戏信息”屏幕上的“加入聊天”按钮进入为游戏自动生成的聊天中心。否则，你可以随时创建自己的聊天频道。另一个提示是在你游戏的“地图信息”描述、加载屏幕和游戏本身中提及你正在使用的群组、聊天室和其他社区位置。

## 反馈

记得在你的地图旁留下一个通讯渠道，比如电子邮件或社交媒体。这可以作为收集反馈的手段。记住，Battle.net还提供了一个针对活跃游戏的“评论”窗口，这也可以是了解玩家对你游戏体验的另一种方式。

[![评论屏幕](./resources/085_Finding_Testers3.png)](./resources/085_Finding_Testers3.png)
*评论屏幕*

在这里找到挑剔但公正的建设性批评可以为你找到潜在测试人员提供了重要线索。不要犹豫与以尊重方式对你的游戏提出批评的玩家联系。你可以通过Battle.net向他们发送好友请求，并就他们对游戏的体验展开对话。优秀的开发者会提出好问题。

[![建设性反馈](./resources/085_Finding_Testers4.png)](./resources/085_Finding_Testers4.png)
*建设性反馈*

## 翻译 E:\SC2Code\blizzard-tutorials-chinese\docs\New_Tutorials\07_Lessons\085_Finding_Testers.md.part-1.md

如果在这一切之后您仍然在努力建立测试基础，请记住，某些类型的项目似乎更容易找到测试者。 有些游戏更容易测试，而另一些则需要花费很长时间进行开发，才能被玩家试玩。 不同类型的游戏需要玩家花费非常不同的时间和技能。 如果您困扰于缺乏测试者，请尝试通过设计解决问题。 您可以尝试想象一个更容易测试的游戏。 这并不一定意味着要牺牲您的兴趣，要有创造性。 请记住，更多的测试意味着更多观察玩法的机会，进行修改并成为更好的开发者。

## 翻译 E:\SC2Code\blizzard-tutorials-chinese\docs\New_Tutorials\07_Lessons\086_Resource_Placement_for_Competitive_Play.md

# 竞技模式下的资源摆放

在近战地图中放置的每个元素都至少具有一定的游戏含义，这种含义可以从一个简单的草地装饰物塑造战场氛围的方式，到形成可能出现的游戏风格的路径和地形布局。

作为近战地图制作者，你最大的挑战在于探索和尝试形状、外观和游戏性之间的关系。然而，有一个领域你几乎没有太多的实验空间。对于竞技游戏，有一种已经建立的模型规定了资源需要如何摆放在地图上。即使对这个布局进行最微小的变化，都可能对游戏的资源模型产生深远影响，改变竞技游戏的平衡状态。

![](./resources/086_Resource_Placement_for_Competitive_Play1.png)
*由SeinGalton设计的Cassandra Gemini的第三井*

## 地图对称性

适当摆放近战资源是相当简单的，但你需要遵循一些规则和技巧来满足需求。首先要检查地图的对称性，因为这比单独配置每个基地要省时。点击地图 ▶︎ 地图对称性，即可访问对称性控制，这将打开如下所示的“地图属性”窗口。

![地图对称性控制](./resources/086_Resource_Placement_for_Competitive_Play2.png)
*地图对称性控制*

应用“对称类型”将创建一个镜像轴，所有在地图中创建的单位都将在此轴上复制。将地图设计与对称性连接起来并不一定要永久固定；你可以使用它，然后稍后切换关闭，而不会丢失结果。

## 摆放考虑

准备摆放资源时，考虑使用编辑器中提供的“摆放网格”叠加。你可以通过导航到查看 ▶︎ 显示摆放网格 ▶︎ 显示网格 来激活它。该叠加将显示围绕任何资源物品的三个单位范围内玩家无法放置指挥中心的区域。如下所示：

[![摆放网格](./resources/086_Resource_Placement_for_Competitive_Play3.png)](./resources/086_Resource_Placement_for_Competitive_Play3.png)
*摆放网格*

接下来，考虑基地的可能资源布局。有两种标准方案几乎涵盖了所有竞技布局。这两种方案如下图所示。

[![相同侧边维斯平基地布局](./resources/086_Resource_Placement_for_Competitive_Play4.png)](./resources/086_Resource_Placement_for_Competitive_Play4.png)
*相同侧边维斯平基地布局*

[![两侧维斯平基地布局](./resources/086_Resource_Placement_for_Competitive_Play5.png)](./resources/086_Resource_Placement_for_Competitive_Play5.png)
*两侧维斯平基地布局*

## 资源摆放

现在终于可以开始摆放一些资源了。你可以在地形编辑器的单位层中找到它们。导航到单位面板并将“对象类型”搜索过滤器设置为“资源”。这将显示所有可用的近战资源，如下图所示。

![单位面板中的资源](./resources/086_Resource_Placement_for_Competitive_Play6.png)
*单位面板中的资源*

选择矿石并将其放置在基地结构中，牢记标准布局。记住，传统的基地规划包含八个矿藏区和两个维斯平间。还有高产出基地包含六个矿藏区和一对维斯平间。尽管这些标准可以商榷，但要注意，对竞技地图进行任何变动都会影响游戏机会。尽管如此，每个地图都需要一些实验和实践。

避免将维斯平区摆放成对角线状，因为这会导致收取速率降低。你可以通过测试来看是否维斯平能够支持第四个工人。总体而言，测试是确定资源摆放是否正确的好方法。资源对近战游戏氛围至关重要，即使对业余玩家来说，它们的布局微小改变也是可感知的。

请注意，你还应考虑你所设计的星际争霸版本。在虚空遗留中，资源模型与游戏早期版本不同。这些版本需要矿藏内部不同的值。

## 翻译 E:\SC2Code\blizzard-tutorials-chinese\docs\New_Tutorials\07_Lessons\087_Create_an_Aura_Ability.md.part-0.md

# 创建光环能力

光环指的是游戏中常见的一类能力。光环通常源自单个单位，给身处光环持有者周围区域内的友方单位带来有益效果。在主题上，光环通常支持这样一种观念：英雄单位的存在能激发和活跃周围的单位。您可以在下面的图片中看到一个光环效果的示例。

[![《魔兽争霸III》的耐力光环](./resources/087_Create_an_Aura_Ability1.png)](./resources/087_Create_an_Aura_Ability1.png)
*《魔兽争霸III》的耐力光环*

在《魔兽争霸III》中，大角魔酋长的“耐力光环”能让附近的盟友获得速度和攻击速率加成。虽然这是光环的传统应用方式，但在不同游戏中存在着许多变体和类似的想法。概括该概念的关键点如下。

- 光环是被动、不可使用的能力，托管在源单位上。
- 光环在源单位周围的区域中对单位造成改变。

这种概括提供了光环的真正定义；它们并没有具体的连接到积极或消极的效果，也并非只存在于英雄单位上。在这个基础上，光环能力的设计可能会有很多变化。一个拿着火把的单位可能具有一个燃烧光环，对敌人造成持续伤害。这些光环也可以叠加，随着火把手的聚集而增加。另外，可能存在着一个被诅咒的神器，一枚脉动着缩小光环的戒指，对任何靠近它的单位都会缩小体积。任何试图接近偷取宝藏的小偷很快会发现自己变得太小而搬运不了宝藏。

## 设计一个光环

光环显然具有为游戏增添许多有趣元素的潜力。学习在编辑器中创建光环将是一项非常值得的练习。幸运的是，提前梳理光环的关键点能让您迅速地引入它们。

这里需要注意的第一点是，实现光环有几种可能的方式。本文将介绍的方法是一种基于数据的选项，您会发现它简单直观。然而，需注意一点与先前提到的有所偏差。在这种情况下，光环能力实际上不符合星际争霸编辑器中“能力”的定义。在编辑器中，“能力”指的是在游戏内进行的变化，并通过指令牌界面访问。例如，陆战队员的“刺激剂”或狂热者的“冲锋”都是这方面的示例。虽然也可以以这种方式开发光环，但本文将实际上使用两种行为和两种效果来实现光环。

行为改变单位的属性，托管在一个单位内部。这与上文中概括的光环定义相契合。您将使用一个行为将光环授予源单位，然后传递第二个用于改变属性的行为给每个光环接收者。这一对效果将被用于找到光环接收者，并分别应用于更改属性的行为。

通过这种方式详细讨论光环的机制有助于理解其一般设计思路。该设计将在接下来的章节中进行解释和扩展，但现在提供如下计划。将这个计划作为参考，许多像本文开头提到的那些创意改动可以使用这个一般方案构建。

- 单位 — 承载光环
  - 行为（增益）— 将光环授予源单位
    - 效果（搜索区域）— 找到单位周围的光环接收者
      - 效果（应用行为）— 将增益应用于找到的接收者
        - 行为（增益）— 将光环的属性变化应用于接收者

要设计一个特定实现的光环，您需要选择一个源单位和一个特定的增益行为。在本演示中，您将为海军陆战队员创建一个加速光环，使其所有接收者的移动速度翻倍。设计计划如下。

- 海军陆战队员 — 承载速度光环
  - 速度光环 — 将速度光环授予海军陆战队员
    - 速度光环搜索区域效果 — 找到海军陆战队员周围的盟友单位
      - 速度光环应用行为效果 — 将速度增益应用于盟友单位
        - 速度增益 — 加倍单位的速度

要开始组建这个设计，请打开本教程中提供的演示地图。地图应该如下图所示。

[![地图准备](./resources/087_Create_an_Aura_Ability2.png)](./resources/087_Create_an_Aura_Ability2.png)
*地图准备*

移至数据编辑器，开始构建光环的逻辑。

## 搜索区域效果

需要注意的是，您不必按计划中所列的顺序来构建光环。因此，开始的最佳位置是“搜索区域”效果，这将定位光环主人周围的盟友。创建一个新效果，并设置其属性如下所示。

![创建搜索区域效果](./resources/087_Create_an_Aura_Ability3.png)
*创建搜索区域效果*

现在选择新创建的效果，并打开“搜索：搜索过滤器”字段。将“自身”过滤器设置为“排除”，如下图所示。

[![搜索过滤器](./resources/087_Create_an_Aura_Ability4.png)](./resources/087_Create_an_Aura_Ability4.png)
*搜索过滤器*

这将阻止效果定位施法者或光环托管单位。现在设置字段“冲击位置 — 值”为“目标单位”，“目标：发射位置 — 值”为“施法单位”。前者设置将在半径内找到的单位，而后者将在光环主人的位置开始搜索。最后，设置实际搜索区域和大小。您可以通过将“搜索：区域 — 半径”字段修改为 3 来完成这一步。然后将“搜索：区域 — 圆弧”更改为 360。搜索区域是光环主人周围的一个完整圆，在任何方向延伸三个地图单位。这个效果的字段将显示为下图中的样子。

[![搜索区域效果字段](./resources/087_Create_an_Aura_Ability5.png)](./resources/087_Create_an_Aura_Ability5.png)
*搜索区域效果字段*

您会注意到，“效果”字段尚未设置。这将启动“应用行为”效果到光环接收者身上。

## 增益行为 — 海军速度光环

接下来，创建光环源行为。“增益”行为将作为光环源。创建一个新的行为，并设置其属性如下。

![光环行为创建](./resources/087_Create_an_Aura_Ability6.png)
*光环行为创建*

## 翻译 E:\SC2Code\blizzard-tutorials-chinese\docs\New_Tutorials\07_Lessons\087_Create_an_Aura_Ability.md.part-1.md

选择行为并设置其'Movement: Modification - Movement Speed Multiplier'字段为2。这将向光环托管单位（在本例中为海军）应用速度增益。这样，速度光环的来源将能够跟上其加成接收者的移动。接下来，设置字段'Time Scale Source -- Value'并将其设置为Global。时间刻度是引擎中计时方式的修改。个体单位可以使用其自己的刻度，但在本例中，该行为将依照全局或标准时间运行。

如设计所示，光环首先通过搜索区域效果来找到光环接收者开始其变更。这通过将'Effect - Periodic'字段设置为上一步中创建的'Search Area - Marine Speed Aura'效果来建立链接。该过程如下所示。

![选择光环搜索效果](./resources/087_Create_an_Aura_Ability7.png)
*选择光环搜索效果*

现在，将'Period'设置为0.0625，这将导致'Effect -- Periodic'和随之的搜索效果每秒发生16次。完成的光环行为字段应如下所示。

![海军速度光环字段](./resources/087_Create_an_Aura_Ability8.png)
*海军速度光环字段*

## Buff Behavior - 速度增益

这个组件是负责光环接收者速度增加的行为。它也属于增益类型，其创建窗口应如下所示。

![速度增益行为创建](./resources/087_Create_an_Aura_Ability9.png)
*速度增益行为创建*

创建完行为后，将'Modification -Movement Speed Multiplier'字段修改为2。这将在托管此行为的单位中创建速度增益。由于光环中的每个单位都会单独接收此行为，因此通过此速度增益行为，增益将在整个搜索区域中分发。

还将'Duration'字段设置为0.2。这是单位中修改的生命周期，这意味着如果单位离开光环区域，增益将在0.2秒后消失。作为最后一步，将'Time Scale Source -- Value'设置为Global，与前一个行为相同。该行为的完成字段应与以下匹配。

![海军速度增益字段](./resources/087_Create_an_Aura_Ability10.png)
*海军速度增益字段*

## 应用行为效果

最后一个组件是将速度增益增益应用于找到的友方单位的效果。这是一个'Apply Behavior'效果，其创建屏幕应如下所示。

![速度增益行为创建](./resources/087_Create_an_Aura_Ability11.png)
*速度增益行为创建*

这里需要设置的唯一字段是'Effect: Behavior'。将其设置为之前创建的 'Marine Speed Buff'。

![为应用设置行为](./resources/087_Create_an_Aura_Ability12.png)
*为应用设置行为*

此效果现在将针对'Search Area -- Marine Speed Aura'效果找到的每个单位调用。然后将'Marine Speed Buff'行为推送到这些单位中，增加其速度。此时，该行为的完成字段应如下所示。

![应用行为效果字段](./resources/087_Create_an_Aura_Ability13.png)
*应用行为效果字段*

## 连接数据

首先建立每个单独组件，然后连接数据的方式是高效的过程，但这给数据的连接部分留下了一些漏洞。您现在可以解决这个问题。返回到 'Search Area -- Marine Speed Aura'效果并打开其'Areas -- Effect'字段。将其设置为 'Apply Behavior -- Marine Speed Aura' 效果。

![将行为应用效果链接到搜索效果](./resources/087_Create_an_Aura_Ability14.png)
*将行为应用效果链接到搜索效果*

现在，您已经设置了搜索效果以在每个找到的友方单位中启动 'Apply Behavior'效果。要完成，您需要将光环设置到其源单位，海军。由于您用于光环的实现方法是简单的，这是一个简单的过程。转到单位选项卡中的 'Marine' 并打开其 'Behaviors -- Behavior'字段。在弹出窗口中，单击绿色 + 以向单位添加行为。选择 'Marine Speed Aura'，然后通过两个窗口单击 'Ok'。该过程如下所示。

![将光环添加到源单位](./resources/087_Create_an_Aura_Ability15.png)
*将光环添加到源单位*

## 测试光环

您现在已经完全组成了光环。您可以通过查看数据导航器来确认，这将向您展示光环的整个数据结构。

![光环数据结构](./resources/087_Create_an_Aura_Ability16.png)
*光环数据结构*

通过查看此可视化，您可以看到以下连接。

  - 单位（海军） -- 通过其 Behaviors -- Behavior字段托管 'Marine Speed Aura' 行为
  
  - 行为（Marine Speed Aura） -- 通过其 Effect -- Periodic字段应用 'Search Area' 效果
  
  - 效果（Search Area - Marine Speed Aura） -- 通过其 Areas -- Effect字段应用 'Apply Behavior'
  
  - 效果（Apply Behavior - Marine Speed Aura） -- 通过其 Behavior字段创建 'Marine Speed Buff'
  
  - 行为（Marine Speed Buff） -- 光环的终点
    
    > 这与本文介绍的设计非常匹配。测试项目应导致光环在海军主机中被创建，并在其周围约两个单位的圆形区域内的所有单位。所有受影响的单位应以大约正常速度的两倍移动。它们还将显示一个增益图标，如下所示。

![应用行为效果字段](./resources/087_Create_an_Aura_Ability17.png)
*应用行为效果字段*

## 附件

 * [087_Create_an_Aura_Ability.SC2Map](./maps/087_Create_an_Aura_Ability.SC2Map)

## 翻译 E:\SC2Code\blizzard-tutorials-chinese\docs\New_Tutorials\07_Lessons\088_Create_WASD_Keyboard_Controls.md.part-0.md

# 创建 WASD 键盘控制

使用键盘来控制游戏角色的移动是经典的控制方案。最著名的例子就是 WASD 键盘控制，其中 W、A、S 和 D 键分别绑定到向上、向左、向右和向下的方向。这通常被用作一种符合人体工程学的、普遍可用的选项，可以一只手操作键盘，另一只手使用鼠标。

尽管《星际争霸》使用鼠标和键盘控制方案，但并没有直接将任何键盘控件与移动绑定。尽管如此，在使用编辑器创建的自定义项目中，实现 WASD 键盘控制是可能的。学习实现 WASD 键盘控制可以是非常教育性的，并在动作、冒险和模拟游戏中有许多实际应用。

## 按键 UI 事件

键盘控制系统需要一种方式在玩家输入和游戏之间传递信息。UI 事件通常适合此需求，在这种情况下，您将使用按键按下事件。触发器 'KeyPressDOWN' 和 'KeyPressUP' 创建响应 WASD 控件四个键的事件。'KeyPressDOWN' 在其中任何键被按下时运行，而 'KeyPressUP' 在其中任何键被释放时运行。您可以在下面的图像中看到这些触发器的组成。

[![按键 UI 事件触发器](./resources/088_Create_WASD_Keyboard_Controls7.png)](./resources/088_Create_WASD_Keyboard_Controls7.png)
*按键 UI 事件触发器*

通过单独区分键，该系统支持按下和释放按键的组合方式，以任何硬件支持的方式。结果，例如同时按下 W 和 A 键将正确响应同时向上和向左移动角色。

## 按键存储数组

为了跟踪所有同时按下的键，此设计需要一个存储数组。'KEYPRESS' 数组类型为布尔类型且大小为 3。考虑到数组从零索引开始，这里提供的总存储空间为 4 个键，足以满足整个 WASD 控制系统的需求。使用布尔数组允许每个数组值表示某个键当前是否被按下。各键的映射如下。

W == 索引 0

A == 索引 1

S == 索引 2

D == 索引 3

True 表示按下，False 表示未按下。所有数组位置默认设置为 False。以下是数组本身。

[![按键存储数组](./resources/088_Create_WASD_Keyboard_Controls8.png)](./resources/088_Create_WASD_Keyboard_Controls8.png)
*按键存储数组*

## 开关动作

正如您所见，两个键按下触发器会响应四个 WASD 键中的任意一个。这使得设计无需依赖于八个单独事件来监视键盘输入。然而，这需要一些控制语句来适当解析输入。您可以使用开关语句来解决这个问题，为每一个键值提供一个案例。下面是 'KeyPressUP' 触发器使用的开关语句。

![KeyPressUP 开关](./resources/088_Create_WASD_Keyboard_Controls9.png)
*KeyPressUP 开关*

对于每个触发器，开关语句包含一个 '设置变量' 动作，它将与该案例键相关联的数组索引设置为该值。对于 'KeyPressUP' 触发器，这些值设置为 True，表示该键现在按下。相反，对于 'KeyPressDOWN' 触发器，这些值设置为 False，表示该键已释放。

## 按键检测循环

为了将按键输入不断输入到移动逻辑中，使用了一个循环 '按键检测'。该循环本身相当复杂，下面已经有注释。

  - 通用 -- 当条件为真时，执行操作 // While 循环允许持续移动

<!-- -->

  - 条件

<!-- -->

  - (WASD 单元存活) == True // 检查控制单位是否仍存活

<!-- -->

  - 操作

<!-- -->

  - 通用 -- 如果条件为真，则执行多个操作 // 触发一系列输入检查

<!-- -->

  - 如果然后否

<!-- -->

  - 通用 -- 否则如果 // 这些检查寻找特定的

<!-- -->

  - 否则如果 // 输入情况

<!-- -->

  - KEYPRESS\[0\] == False
  - KEYPRESS\[1\] == False
  - KEYPRESS\[2\] == False // 此案例表示四个键
  - KEYPRESS\[3\] == False // 都未被按下

<!-- -->

  - 如果

<!-- -->

  - 单元 -- 命令 WASD 单元 (停止)(替换现有命令) // 停止移动

<!-- -->

  - 通用 -- 否则如果

<!-- -->

  - 否则如果

<!-- -->

  - KEYPRESS\[0\] == True
  - KEYPRESS\[1\] == True // 按下 W 和 A 键

<!-- -->

  - 如果

<!-- -->

  - 执行移动(145.0, 1.0) // 将单位移动到东北方

<!-- -->

  - 通用 -- 否则如果

<!-- -->

  - 否则如果

<!-- -->

  - KEYPRESS\[0\] == True // 按下 W 和 D 键
  - KEYPRESS\[3\] == True

<!-- -->

  - 如果

<!-- -->

  - 执行移动(45.0, 1.0) // 将单位移动到西北方

<!-- -->

  - 通用 -- 否则如果

<!-- -->

  - 否则如果

<!-- -->

  - KEYPRESS\[2\] == True // 按下 S 和 A 键
  - KEYPRESS\[1\] == True

<!-- -->

  - 如果

<!-- -->

  - 执行移动(45.0, -1.0) // 将单位移动到东南方

<!-- -->

  - 通用 -- 否则如果

<!-- -->

  - 否则如果

<!-- -->

  - KEYPRESS\[2\] == True // 按下 S 和 D 键
  - KEYPRESS\[3\] == True

<!-- -->

  - 如果

<!-- -->

  - 执行移动(145.0, -1.0) // 将单位移动到西南方

<!-- -->

  - 通用 -- 否则如果

<!-- -->

  - 否则如果

<!-- -->

  - KEYPRESS\[0\] == True // 按下 W 键

<!-- -->

  - 如果

<!-- -->

  - 执行移动(90.0, 1.0) // 将单位向北移动

<!-- -->

  - 通用 -- 否则如果

<!-- -->

## 翻译 E:\SC2Code\blizzard-tutorials-chinese\docs\New_Tutorials\07_Lessons\088_Create_WASD_Keyboard_Controls.md.part-1.md

- Else If

<!-- -->

- KEYPRESS\[1\] == True // 按下了一个键

<!-- -->

- Then

<!-- -->

- 执行 Move(180.0, 1.0) // 将单位向西移动

<!-- -->

- 一般 -- Else If

<!-- -->

- Else If

<!-- -->

- KEYPRESS\[2\] == True // 按下了S键

<!-- -->

- Then

<!-- -->

- 执行 Move(90.0, -1.0) // 将单位向南移动

<!-- -->

- 一般 -- Else If

<!-- -->

- Else If

<!-- -->

- KEYPRESS\[3\] == True // 按下了D键

<!-- -->

- Then

<!-- -->

- 执行 Move(0.0, -1.0) // 将单位向东移动

<!-- -->

- 一般 -- 等待 0.0 秒 // 为测试输出创建一个暂停

## 移动单位

'KeyPress Detect' 发送一组指令到 'Execute Move' 操作中， 'Execute Move' 操作负责移动被控制的单位。 这些指令包括一个角度和一个偏移量，它们被发送到 'Order Targeting Point' 命令。 这个命令利用 'Move' 能力，将单位发送到一个 '具有极坐标偏移量的点'。 通过将单位发送到其当前位置，并由偏移量改变，该命令有效地使单位沿着角度方向向偏移量的大小移动。

当偏移量设定为负值时，实际上表示将单位向相反方向移动。 因此，当按下 S 和 D 键时，角度为 145.0，偏移量为 -1.0，将单位向西南方向发送。 当数值为 145.0 的角度和 1.0 的偏移量时，即按下 W 和 A 键时，单位被发送到东北方向。 'Execute Move' 操作定义如下图所示。

[![Execute Move Action Definition](./resources/088_Create_WASD_Keyboard_Controls10.png)](./resources/088_Create_WASD_Keyboard_Controls10.png)
*Execute Move 操作定义*

## 整合

在此演示中，移动系统在地图开始时启动。 这并非必需，但这是最有可能的情况。 控制方案很少在游戏体验过程中更改，但将初始化操作移到其他地方是一种选择。 'Melee Initialization' 触发器如下所示。

![Melee Initialization 触发器](./resources/088_Create_WASD_Keyboard_Controls11.png)
*Melee Initialization 触发器*

此触发器将预设单位设置为 'WASD Unit' 变量。 这使其成为移动系统的受控单位。 另外， 'KeyPress Detect' 循环开始运行，此时它立即开始寻找玩家的输入。 在处理持续运行的 UI 事件系统时，应密切监控循环和事件检查的数量，以确保性能。 当为在线使用设计类似的系统时，务必进行仔细测试，以确保延迟不会成为问题。

## 测试控制

启动地图将允许您使用WASD键控制marine。

[![WASD 键盘控制](./resources/088_Create_WASD_Keyboard_Controls12.png)](./resources/088_Create_WASD_Keyboard_Controls12.png)
*WASD 键盘控制*

## 附件

* [088_Create_WASD_Keyboard_Controls.SC2Map](./maps/088_Create_WASD_Keyboard_Controls.SC2Map)

## 翻译 E:\SC2Code\blizzard-tutorials-chinese\docs\New_Tutorials\07_Lessons\089_Set_Up_a_First_Person_Camera.md.part-0.md

# 设置第一人称摄像头

StarCraft引擎中的摄像头对象经常用于叙述故事。在叙述场景中应用新的摄像头使您能够利用传统等距视角之外的角度和效果。快速切换摄像头可以成为一个非常有效的叙事工具。

自定义摄像头也可以应用于游戏玩法本身，改变玩家的视角到新的透视角度。许多开发者喜欢利用这种技术的方式是第一人称摄像头。这是一种直接设置在游戏玩家角色头部内的摄像头。第一人称摄像头模拟了行走或在环境中移动时的自然视角，并给用户一种他们正在自主导航游戏的印象。对引擎玩法摄像头进行这种改动很简单。按照本文提供的方法和随附的地图设置第一人称摄像头。

## 视野

视野（FOV）设置了摄像头可见的游戏世界的范围。这是一个重要的数字，用于控制自定义游戏摄像头的基本构成。更改FOV可能会有些复杂，最好通过实时预览摄像头来完成。实际上有两种类型的视野可供在编辑器中使用，垂直和水平。默认情况下使用垂直FOV，因为它对于传统的实时战略游戏视角更为合适。

对于第一人称摄像头，您应该强烈考虑使用水平FOV，因为这倾向于更自然地近似人类视觉。可以通过导航到地图属性中的地图选项 ▶︎ 选项 ▶︎ 使用水平视野 来更改视野类型。勾选此选项将使每个摄像头的FOV类型更改为水平。您应该注意，某些FOV值常常引起玩家晕动病。在游戏中提供一个控制以更改FOV值的幅度可能会有所帮助。

![启用水平视野](./resources/089_Set_Up_a_First_Person_Camera5.png)
*启用水平视野*

## 创建摄像头

第一人称摄像头应该在地图上与玩家角色一起定位，以模拟该角色的视野。您可以通过将摄像头有效地移动到角色模型的头部内或者仅在其肩膀后方来实现这一点。在此处，自由摄像头控件至关重要，因为它们可以让您通过鼠标轻松调整编辑器摄像头的位置。以下控件对于设置摄像头非常有用。

| 控件                  | 效果                                                                                                                   |
| --------------------- | ---------------------------------------------------------------------------------------------------------------------- |
| 缩放                  | 按照目标方向进行缩放。缩放会减小摄像头距离。                                                                         |
| (Shift + 右击)        |                                                                                                                        |
| 旋转                  | 围绕其目标点旋转摄像头。这将改变目标-俯仰和目标-偏航。                                                                  |
| (Ctrl + 右击)         |                                                                                                                        |
| 高度                  | 沿垂直轴移动摄像头，远离或靠近地图的地面水平。这将改变目标- Z偏移。                                               |
| (Alt + 右击)          |                                                                                                                        |

放置的第一人称摄像头应该与下面的图片类似。

[![第一人称摄像头设置](./resources/089_Set_Up_a_First_Person_Camera6.png)](./resources/089_Set_Up_a_First_Person_Camera6.png)
*第一人称摄像头设置*

定位后，可以通过在摄像头面板中点击“创建摄像头”按钮来创建摄像头对象，如下图所示。请注意，单位模型挡住了视野只是暂时的。您还应该确保了解单位相对于摄像头的位置，因为这将是第一人称摄像头移动的锚点。

![创建摄像头对象](./resources/089_Set_Up_a_First_Person_Camera7.png)
*创建摄像头对象*

## 选择摄像头属性

您可以使用“摄像头属性”预览摄像头对象，并微调它在游戏中的外观。通过从摄像头面板中选择第一人称摄像头，然后双击它来打开这个面板。标准的第一人称摄像头设置如下所示。

[![第一人称摄像头属性设置](./resources/089_Set_Up_a_First_Person_Camera8.png)](./resources/089_Set_Up_a_First_Person_Camera8.png)
*第一人称摄像头属性设置*

在这里有几点需要注意。基本的摄像头镜头目标由Pitch和Yaw组成。这些值将根据摄像头在地图上的位置而变化。通常情况下，您需要使用在0.5至1.5范围内的Z偏移以提供逼真的地面级视图。

此时的距离控制了摄像头与其目标之间的分离。对于第一人称摄像头，它应设置为0。水平FOV设置为90是制作美观的第一人称视角的最常见选项。此外，应将远裁剪距离设置为10,000。这个很大的距离将导致一些性能拖延，但这是必要的，以便从低平的视角渲染整个场景。

## 设置摄像头逻辑

自定义的游戏摄像头将需要处理逻辑，处理摄像头将在游戏时间内如何使用以及由玩家如何使用的触发器。这种逻辑可以根据项目的类型和其实现方式而采用多种形式。然而，有一些基本需求很可能会成为任何设计的一部分。下面显示了第一人称摄像头逻辑的标准示例。

[![第一人称摄像头逻辑](./resources/089_Set_Up_a_First_Person_Camera9.png)](./resources/089_Set_Up_a_First_Person_Camera9.png)
*第一人称摄像头逻辑*

每个摄像头逻辑步骤如下注释。

- 揭示区域--地图已被揭示，因为RTS风格的战争迷雾在此处不可取。

<!-- -->

- 设置变量--设置可控制的玩家角色，作为摄像头锚点。

<!-- -->

- 应用摄像头对象--将第一人称摄像头应用于游戏视图。

<!-- -->

- 跟随单位组和相机区域--将第一人称摄像头附加到玩家的移动上。
- 打开相机鼠标相对模式--将相机移动绑定到鼠标控制，这是一种流派标准。
- 打开相机旋转--通过允许摄像头在三维空间中自由查看来支持鼠标控制。

<!-- -->

- 隐藏鼠标光标--移除玩家鼠标光标的显示。
- 隐藏游戏UI--移除标准UI，以便进行自定义构建。

所有这些操作帮助完成摄像头实际上是一个自由运动实体的错觉。将这与任何移动键盘控制结合起来将形成第一人称游戏的基础。

## 摄像头平滑时间

游戏摄像头具有一些内置的平滑系数，影响摄像头在地图周围移动的方式。建立第一人称摄像头时，默认值往往具有不利影响。您可以通过移至数据编辑器，然后到摄像头选项卡来更改这些默认值，如下所示。

## 翻译 E:\SC2Code\blizzard-tutorials-chinese\docs\New_Tutorials\07_Lessons\089_Set_Up_a_First_Person_Camera.md.part-1.md

[![相机平滑时间设置](./resources/089_Set_Up_a_First_Person_Camera10.png)](./resources/089_Set_Up_a_First_Person_Camera10.png)
*相机平滑时间设置*

您可以通过打开“目标平滑”字段来更改这些数值。您需要修改平滑时间最大值和平滑时间最小值。这些值设置了相机在移动到移动目标位置时所需的最短时间。将这些值设得太低可能会导致卡顿，因此通常适当的标准值为0.08。完成的字段如下所示。

[![设置平滑时间](./resources/089_Set_Up_a_First_Person_Camera11.png)](./resources/089_Set_Up_a_First_Person_Camera11.png)
*设置平滑时间*

## 隐藏玩家单位

对于第一人称游戏，玩家角色的模型应该从视野中移除。这可以通过单位角色的事件来实现，通过添加ActorCreation事件发送SetOpacity消息，将模型的不透明度设置为0.0来完成。您可以在以下图像中看到这一点。

[![设置不透明度角色消息](./resources/089_Set_Up_a_First_Person_Camera12.png)](./resources/089_Set_Up_a_First_Person_Camera12.png)
*设置不透明度角色消息*

## 测试结果

在本文提供的演示地图中，游戏已经进行了所有列出的修改。测试应该会给出以下结果。

[![第一人称地图视图](./resources/089_Set_Up_a_First_Person_Camera13.png)](./resources/089_Set_Up_a_First_Person_Camera13.png)
*第一人称地图视图*

## 附件

 * [089_Set_Up_A_First_Person_Camera.SC2Map](./maps/089_Set_Up_A_First_Person_Camera.SC2Map)

## 翻译 E:\SC2Code\blizzard-tutorials-chinese\docs\New_Tutorials\07_Lessons\090_Basic_Spellswap_System.md.part-0.md

---
title: 基本拼写交换系统
authors:
    - duckies
---



# 基本拼写交换系统


!!! info
    本教程旨在面向初学者友好，但需要对数据和触发器有一些基本经验，因为我们需要同时使用这两个模块。触发器部分将涉及动作定义的创建，以及使用目录触发器和数据表。总共将制作5个触发器，每个触发器都相当简短。教程末尾附有一个示例地图以作参考。


## 简介


在5.0版本，暴雪为我们带来了一项新功能："**动态能力支持**"


>**Dynamic Ability Support**
>
>    制作者现在可以使用触发器为单位添加或移除能力。

我们将利用这一功能制作一些非常酷的东西。



以下是我们的教程目标：


**目标 1** – 通过触发器为单位添加能力，了解这一功能的工作原理。

**目标 2** – 创建一个简单的能力装备/卸下系统，设置快速且易于操作。




## 目标 1 – 能力添加测试

**我们将要做什么：**

我们的目标是通过触发器成功为单位添加一个能力。

**步骤：**

让我们拿一个 Zeratul 并将他放在地图上。从现在开始，我们将把这个单位称为"***英雄***"。


我们想看看触发器是如何工作的。打开触发模块，删除“地图初始化”触发器中的默认动作，然后创建一个名为“**添加能力**”的新动作。让我们给我们的英雄添加一个名为"***ArtanisVoidPsiStorm***"的能力。

![](SpellSwapAssets/1_InitalAbilAdd.png)

如果我们现在测试文档，或通过编辑器启动地图，我们会注意到什么也没发生。让我们检查一下该添加能力动作的描述。

>添加的能力可能无法在没有命令按钮的情况下使用。您可以设置一种能力以自动创建命令按钮，方法是转到能力的“Commands+”字段，并分配一个默认按钮给它们。务必选中“使用默认按钮”和“创建默认按钮”标志，以允许按钮自动创建。自动创建的按钮位置可以设置在按钮数据中。


让我们就这么做。在我们将要分配的能力（"***ArtanisVoidPsiStorm***"）中，转到“**Commands+**”字段，并按照提示，选中“**使用默认按钮**”和“**创建默认按钮**”标志。

![](SpellSwapAssets/1_CommandExtraFlags.png)

之后，转到与执行命令关联的按钮（"***Artanis - Psionic Super Storm***"）并找到名为“**Default Button Layout+**”的字段。将“**CardID**”设置为“0001”，“**Column**”设置为“1”，“**Row**”设置为“1”。请注意，列从0到4，行从0到2。应该很容易弄清楚放什么来达到所需的按钮位置。



现在，再次启动地图。一切都应该正常工作！如果不小心出错，教程底部有一个地图可供参考。

![](SpellSwapAssets/1_AbilityAddedIngameScreen.png)


## 目标 2 - 能力拾取/交换系统。

**我们将要制作：**

地图上将放置不同的能力存储在拾取物中。将鼠标悬停在拾取物上会显示有关其提供的能力的信息。玩家将能够用他们的英雄右键单击它们，使他们的英雄靠近拾取物并与其互动 - 从而获取其中存储的能力，并在此过程中摧毁拾取物。

由于技术的限制，所有能力必须在命令卡上预先定义位置。我们将设计我们的系统，使3种能力占据单位命令卡左下角的前三个按钮（我们将它们称为 Q、W 和 E 槽）。

如果我们的英雄获得了一个已经被其他能力占用的槽位的能力 - 在装备新能力之前，他们将移除并丢弃当前装备的能力。

**我们将如何做：**

为了创建这样一个系统，我们需要完成5个任务：

**1) 数据准备。** 首先，我们需要创建一种将作为拾取物的单位类型。我们将创建一个英雄将与拾取物互动的能力。

**2) 存储触发器。** 接下来，我们需要创建一个触发器，使拾取物单位储存所选择的能力，并显示该信息。

**3) 数据准备。** 另外，我们需要为使用配置能力（检查这些标志，定义命令卡上的位置等）。

**4) 装备/卸下触发器。** 此外，我们需要创建一个触发器，在英雄与拾取物互动时，将能力从拾取物转移到英雄身上。

**5) 整合触发器。** 最后，我们需要在交互触发器中将所有内容绑定在一起。



所有与数据有关的信息都将是简单的 – 我们只会更改数值。



触发器部分主要是从数据中获取信息，并通过数据表保存/检索信息。


### 部分 1 – 准备/数据

**目标：**

创建一种用作拾取物的单位类型，并创建一个英雄与拾取物互动的能力。

**步骤：**

#### 步骤 1 – 拾取物单位：

我们的目标是创建一个拾取物错觉单位，通过触发器在其中存储能力引用。


为此，让我们复制“***New Equipment***”单位，并将副本命名为“***能力拾取***”（还清除其能力字段，因为我们不需要它）。我们计划在拾取物单位的工具提示中显示能力信息，为此，我们需要转到拾取物单位的“**Flags+**”字段，并取消选中“**无工具提示**”标志。此外，我们将给该单位一个未使用的碰撞标志（“**Air16**”很好），这样当它们被放置在地面上时，拾取物将不会堆叠在一起。

## 翻译 E:\SC2Code\blizzard-tutorials-chinese\docs\New_Tutorials\07_Lessons\090_Basic_Spellswap_System.md.part-1.md

现在让我们为英雄拾取互动创建一个技能。它将具有一个单一的“Set”效果和一个验证器，确保该技能只能激活在我们选择的特定单位类型上。

1）创建一个“Effect - Target”技能。命名为“Pickup Interact”。然后，创建一个新按钮，或将任何现有按钮添加为“Execute”命令的“默认按钮”（“Commands+”字段）。我决定使用“Pickup Scrap Small”按钮。

2）创建一个类型为“Unit Type”的验证器，然后将其值字段设置为“Ability Pickup”（这是我们刚刚复制的单位）。

3）创建一个“Set”效果，然后将我们的“Ability Pickup”验证器添加到我们刚刚制作的效果的验证器字段中。

4）在“Pickup Interact”技能中，将效果字段设置为我们新创建的“Set”效果。然后，转到标记并勾选“Smart Command”。这将确保单位在右键单击时自动使用该技能（但我们的验证器使其只能在右键单击“Ability Pickup”单位时执行）。

5）将此技能添加到Zeratul。由于这是一个智能技能，因此我们可以不用将按钮添加到命令卡中。


#### 步骤3 – 触发器：

创建一个新触发器，并命名为“Pickup Interact”。目前，我们将使用此触发器简单地测试一切是否正常运行，一旦一切都完成后，我们将再次使用它。

事件 – “单位使用技能”。在“Ability”中选择我们的“Pickup Interact”技能。在“阶段”中选择“Effect3– Cast”。

动作 – “Add Ability”和“杀死单位”。在“Add Ability”动作中，对于Ability，我们可以将其设置为“ArtanisVoidPsiStorm”，对于Unit，我们可以设置为“触发单位”。对于“杀死单位”动作，将单位设置为“触发技能目标单位”。这样，我们的技能不会在地图初始化时获得，而是当我们的英雄右键单击拾取单位时获得。

让我们检查一下是否正常工作。首先，从地图初始化触发器中删除“Add Ability”动作，并将“Ability Pickup”单位放在我们的英雄旁边，然后启动地图。用我们的英雄右键单击拾取的虚拟单位，应该使我们的英雄获得Psi风暴技能并摧毁拾取单位。

![](SpellSwapAssets/2_1_PickupTest.gif)


### 第2部分 – 使拾取单位存储技能数据。

目标：

创建一个触发器，使拾取单位存储所选技能+显示该信息。

![](SpellSwapAssets/TooltipPreview.png)



概述：

我们希望做两个事情：

1）当鼠标悬停在拾取单位上时，显示技能的信息（名称、快捷键、描述）。我们将使用目录触发器访问与链接到技能的按钮相关的必要文本。

2）将技能标识符存储在单位中。我们可以通过数据表来实现这一点。

流程：

### 步骤1 – 当鼠标悬停在拾取单位上时显示信息：



首先，我们将创建一个新的动作定义（在触发器模块中，右键单击左侧的空白区域 -> 新建 -> 新建动作定义）。让我们命名为“Set Pickup AbilityValue”。我们将为其赋予2个参数–“Unit”（命名为“UNIT”）和“游戏链接–技能”（命名为“ABILITY”）。


然后创建一个文本类型的本地变量，命名为“Button”。



#### 步骤1.1 – 获取按钮。

在动作中，将我们的“Button”变量设置为“将字符串转换为游戏链接”。



在字符串的值中，选择名为“目录字段值获取”的函数。



在目录中，选择预设->“Abilities”，在条目中设置我们的“ABILITY”参数。对于范围字段路径，请选择“Effect- Target”。然后，在字段中选择“CmdButtonArray”。此外，选择“0”作为索引，并在字段中选择“Default Button Face”。



>      变量 -将按钮设为（游戏链接（玩家任意玩家的Abilities ABILITY CmdButtonArray[0].DefaultButtonFace的值））



现在我们可以轻松地访问所使用的按钮。我们可以使用目录触发器获取其目录文本值。


但值得注意的是，这只会获取那些只有一个主执行按钮的技能的按钮（例如“Effect - Target”、“Effect - Instant”、“Behavior”、“Augment”等）。像“Train”、“Specialize”、“Research”等技能有一个命令数组。如果我们要获取其中一个按钮信息，流程是相同的，直到我们需要设置范围的路径。取代“Effect – Target”，放置“Train”或其他使用命令数组而不是单个命令的技能类型。之后，我们需要选择“InfoArray”而不是“CmdButtonArray”，然后选择要提取按钮链接的数组位置（暂时选择数组的第一个条目 - 索引0）。

完成后，我们现在需要区分具有一个命令的技能和具有命令数组的技能之间的区别。幸运的是，通过名为“Ability Matches Filters”的函数，我们可以在触发器中找到技能类型。如果技能是某种特定类型，则应使用按钮获取函数设置1，否则执行设置2。

![](SpellSwapAssets/2_2_SetPickupValue_ClassDetect.png)


#### 步骤1.2 – 从按钮获取文本。


现在我们已经获得了按钮，我们可以从中提取文本并为工具提示显示做准备。

我们创建4个文本类型的变量。我们将它们命名为“Name”、“Description”、“Hotkey”、“Final Text”。

将“Name”变量设置为“将游戏文本转换为文本”。在路径中，选择名为“目录字段值获取”的函数。然后，对于目录，选择预设–“Buttons”，然后对于条目，选择我们的“Button”变量。对于字段，选择“Name”。

将“Description”变量也设置为相同的内容，但是为目录的字段选择“Tooltip”。

“Hotkey”将略有不同，因为我们将不得不使用“将游戏快捷键转换为文本”的函数，而不是通常的游戏文本（对于路径，再次使用同一“目录字段值获取”函数）。

## 翻译 E:\SC2Code\blizzard-tutorials-chinese\docs\New_Tutorials\07_Lessons\090_Basic_Spellswap_System.md.part-2.md

现在我们有了所需的所有信息，可以以任何想要的方式显示它！我选择使用表达式将所有收集到的信息合并到一个“***Final Text***”变量中。

![](SpellSwapAssets/2_2_SetPickupValue_FinalFormatting.png)

要使捡起单位显示所有这些文本，我们将使用“**Set Unit Info**”操作。“**Info Text**”是在单击单位时在指令卡上显示的内容，“**Highlight Tooltip**”是工具提示。

应用所选格式。

![](SpellSwapAssets/2_2_SetPickupValue_InfoTextAction.png)


#### 第2步 - 存储能力。

现在，我们将在数据表中的一个条目中存储能力标识符，该条目将在捡起单位的单位标签之后命名。这样，只要我们拥有捡起单位，就可以找到其数据表条目。如果您不熟悉数据表，您可以在这里阅读更多：https://s2editor-guides.readthedocs.io/New_Tutorials/03_Trigger_Editor/041_Data_Tables/（简而言之，这些是可以动态创建和销毁的变量）。

创建一个名为“**Save Data Table Value (String)**”的新操作。对于值，请使用名为“**Convert Game Link to String**”的函数，然后对于游戏链接，选择“***ABILITY***”参数。对于名称，我们可以使用单位的标签。选择“**Convert Integer To String**”函数，然后选择“**Unit Tag**”函数。对于单位，选择“***UNIT***”参数。

完成！

![](SpellSwapAssets/2_2_SetPickupValue_FullTrigger.png)

### 第3部分 - 准备能力。

如前所述，要通过触发器将能力添加到我们的英雄身上，需要：

- 打开“**Use Default Button**”和“**Create Default Button**”标志。

- 修改“**Default Button Layout+**”字段，指定要放置这些按钮的确切位置。

我们还需要以某种方式确定能力应该属于哪个槽位（Q、W或E）。幸运的是，我们有“**Categories+**”能力字段，其工具提示说明如下：

>用于对能力进行分类的一种方法，可用于识别某些能力。

太好了！让我们使用“**User 1**”来表示 Q，使用“**User 2**”来表示 W，使用“**User 3**”来表示 E。

接下来，我们需要决定要测试哪些能力。

让我们检查各种内容。

|槽位|能力类型|能力名称|
| ------------- | ------------- |------------- |
|Q 槽位|影响目标|高阶圣堂武士 - 灵能风暴|
|Q 槽位|影响目标|蛛式战车 - 部署蛛网地雷|
|Q 槽位|即时效果|海军陆战队员 - 促进剂注射|
|W 槽位|行为|幽灵 - 个人隐形|
|W 槽位|专精|蛛式战车 - 制造蛛网地雷（隐藏式建造）|
|W 槽位|训练|虫群女王训练|
|E 槽位|武器弹夹|卡拉克斯 - 服务机器人|
|E 槽位|研究|工程湾 - 研究（工程湾）|

现在，让我们前往这些能力，并修改它们，使它们能够被我们的英雄使用：

- 在能力的“**Commands+**”字段中，勾选“**Use Default Button**”和“**Create Default Button**”标志。

- 在“**Categories+**”字段中，为 Q 槽位勾选“**User 1**”，为 W 槽位勾选“**User 2**”，为 E 槽位勾选“**User 3**”。

- 在它们关联的按钮和“**Default Button Layout+**”字段中，将“**Card ID**”设置为“0001”，“**Row**”设置为“2”，Q 槽位设置“Column”为“0”，W 槽位设置为“1”，E 槽位设置为“2”。

- *[可选]* 在按钮中，您可以将“**Hotkey**”更改为匹配 Q/W/E。

- *[可选]* 您可以将“Q”、“W”或“E”添加到能力的“**Editor Prefix**”字段中，这将使在触发器中搜索它们变得更快。

- *[注意]* 一些能力（如促进剂注射）有研究要求，因此不要忘记清除这些要求（可以在“**Commands+**”字段中删除要求）。

- 对于使用多个按钮的能力（例如幽灵的隐形或任何训练/研究/数组能力），我们需要针对添加能力时要创建的每个按钮应用上述步骤（不要忘记将这些按钮放在不同的槽位，以防止它们重叠）。

### 第4部分 - 能力装备/卸下。

装备能力的过程包括 3 个步骤：

1 – 查明能力将使用的槽位；

2 – 如果需要捡起的能力与已经装备的能力在同一个槽位上，则先丢弃已经装备的能力；

3 – 将那个能力的信息保存在我们英雄的能力槽中。

要确定槽位（#1），我们可以使用一个简单的循环来检查能力的目录。

要保存已装备能力的信息（#3），我们将再次使用数据表。进入“Convert Game Link to String”，将该字符串保存在适当路径下。对于数据表路径，我们将使用单位的标签和槽位编号。以这种方式保存还将使我们能够检查卸下的要求。

#### 能力卸下。

概述：

让我们从创建卸下动作开始，因为在装备过程中我们需要使用它。我们将创建一个操作定义，该定义将从目标单位的指定能力槽中丢弃能力。

该过程将包括：

- 查明单位在其能力槽中拥有的能力

- 移除英雄的能力

- 清除存储我们单位目标能力槽中哪种能力的信息的数据表记录

- 创建一个捡起单位

- 将能力植入捡起单位

过程：

创建一个名为“***Ability Dequip***”的新操作定义，给它 2 个参数。一个是“**Unit**”类型（命名为“***UNIT***”），另一个是“**Integer**”类型（命名为“***SLOT***”）。

创建一个名为“***Ability***”的“**Game Link – Ability**”类型的局部变量。

创建一个名为“***DataTable Path***”的“**String**”类型的局部变量。

我们将根据我们已知的两个变量（英雄的唯一单位标签和能力槽的 ID）创建数据表路径名称。此外，我们将添加一个“.”字符来将它们分隔开（以便更容易阅读）。

## 翻译 E:\SC2Code\blizzard-tutorials-chinese\docs\New_Tutorials\07_Lessons\090_Basic_Spellswap_System.md.part-3.md

```markdown
现在，将“***DataTable Path***”变量设置为将“***UNIT***”参数的“**Unit Tag**”和“***SLOT***”参数转换为字符串并将它们组合在一起的表达式，就像下面的示例一样。

> 变量 - 设置 DataTable Path = {(String(SLOT)).(String((UNIT的单元标签)))}。
![](SpellSwapAssets/2_4_DataTablePath.png)

我们将创建此快捷方式，以便在以后处理数据表时可以更轻松地更改和重用它。


接下来，我们将从数据表中检索能力值。

将“***Ability***”变量设置为函数 - “**将字符串转换为游戏链接**”。对于字符串选择“**从数据表中获取值（字符串）**”，并使用“***DataTable Path***”变量作为路径。

使用“**删除能力**”值来移除我们刚刚从英雄那里获取的能力。

使用“**删除数据表值**”来清除数据表记录以避免泄漏。

> 理论上，对于这个设置，我们不需要这样做，因为我们将始终替换存储在此数据表路径中的能力值。但是，如果我们使用此触发器立即移除能力而不立即替换它，则我们绝对应该在完成后清理。


接下来，我们将在我们英雄的位置创建一个拾取单位。

最后，我们将使用之前创建的操作（“***设置拾取能力值***”）将能力注入到所创建的护盾单位中。

![](SpellSwapAssets/2_4_AbilDequipFullTrigger.png)


#### 能力装备。

概况：

装备能力将类似于我们的卸下能力。我们将要执行的操作包括：

- 检测我们要装备的能力所属的槽位

- 如果我们的英雄已经在所需的能力槽位中拥有该能力 - 卸下目前装备的能力

- 向我们的英雄添加这项能力

- 将我们的英雄在数据表记录中指定槽位有特定能力的信息保存下来

步骤：

创建一个新的操作定义，命名为“***能力装备***”。给它两个参数：一个“**单位**”类型（命名为“***UNIT***”）和一个“**游戏链接 - 能力**”类型（命名为“***ABILITY***”）。

创建一个整数类型的本地变量，命名为“***快捷键槽位***”。

创建一个字符串类型的本地变量，命名为“***DataTable Path***”。



首先 - 我们需要了解我们要装备的能力所属的类别标志。

在数据编辑器中，如果我们切换“**查看**”->“**查看原始数据**”（快捷键Ctrl-D）并查看能力中的类别标志，我们将注意到所有这些标志都只是“0”和“1”，其中“0”表示未选中，“1”表示选中。因此，我们可以使用目录触发器（“**按整数取得目录字段值**”）来获取每个标志的值作为整数。


![](SpellSwapAssets/2_4_CategoriesRawView.png)


让我们循环遍历每个标志，如果该标志返回“1” - 将其数值ID保存到“***快捷键槽位***”变量中。

创建一个“**逐个选择整数**”循环，并将起始值设置为“0”（对应于“**用户1**”标志），然后将结束值设置为“2”（对应于“**用户3**”标志）。

然后在循环内创建一个“**如果然后否则**”语句。在条件中，使用“**按整数取得目录字段值为整数**”来查看能力类别的标志（与选定的整数对应）是否为1。如果确实为1 - 则将我们的“**快捷键槽位**”变量设置为“**选定整数**”（以便我们记住该类别号“**选定整数**”已被选中）。

![](SpellSwapAssets/2_4_Equip_FlagDetectionSetup.png)

![](SpellSwapAssets/2_4_Equip_FlagDetectionLoopComplete.png)


找到我们的快捷键槽位ID后，我们将准备好设置我们的“***DataTable Path***”变量并访问数据表检查我们的英雄是否已经在该槽位中有东西。

> 变量 - 设置 DataTable Path = {(String(快捷键槽位)).(String((UNIT的单位标签)))}

使用“**如果然后否则**”语句和“**数据表值存在**”功能来查找“***DataTable Path***”数据表记录是否存在 - 然后使用“***能力卸下***”操作来取消装备并将该能力丢弃到地面。

![](SpellSwapAssets/2_4_Equip_DequipCondition.png)

完成所有这些后，我们将使用“**添加能力**”操作添加一项能力。

最后，我们将在数据表中保存能力标识符，以便将来我们知道我们装备了什么。 (使用“**保存数据表值（字符串）**”。对于值，选择“**将游戏链接转换为字符串**”函数。对于路径，我们有我们的“***DataTable Path***”变量。)

![](SpellSwapAssets/2_4_Equip_FullTrigger.png)


### 第5部分 - 总结

现在我们可以回去修改“***拾取交互***”触发器，以利用“***能力装备***”操作。

我们还可以移除其中的任何操作。

清理之后，让我们创建一个字符串类型的本地变量，命名为“***DataTable Path***”，并将其设置为引用拾取单位的单位标签。

> DataTable Path = (String((单位标签的（触发能力目标单位）)))

接下来，我们可以创建一个“**如果然后否则**”语句。如果数据表值存在，则装备拾取中存储的能力并摧毁拾取单位。

> 能力装备((触发单位)，(游戏链接((全局数据表中的DataTable Path))))

![](SpellSwapAssets/2_5_PickupInteractFinalTrigger.png)


之后，我们可以在地图上放置一堆空的拾取单位。在我们的地图初始化触发器中为它们添加能力。然后，从Zeratul的命令卡第3排中移除默认的能力按钮（以防与我们获取的拾物能力重叠），同时给予他10,000能量以确保他施放能力没有问题。运行地图，看看所有操作是如何运作的！

我们现在拥有一个功能齐全、快速简单的法术装备/交换系统。干得漂亮！

* [SpellSwapTutorial.SC2Map](SpellSwapAssets/SpellSwapTutorial.SC2Map)


注：

1) 在我的测试中，我注意到给予单位“**孵化者 - 孵化者机库**”能力偶尔会导致星际争霸崩溃，而“**装弹模式**”能力：“**卡拉克斯 - 服务机器**”则没有引起任何问题。

2) 单位身上存在32项能力的限制。移除旧能力以保持当前装备的能力数量在限制范围内。超出此限制将导致星际争霸崩溃。
```  
